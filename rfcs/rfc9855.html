<!DOCTYPE html>
<html lang="en" class="RFC">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>RFC 9855: Topology Independent Fast Reroute Using Segment Routing</title>
<meta content="Ahmed Bashandy" name="author">
<meta content="Stephane Litkowski" name="author">
<meta content="Clarence Filsfils" name="author">
<meta content="Pierre Francois" name="author">
<meta content="Bruno Decraene" name="author">
<meta content="Daniel Voyer" name="author">
<meta content="
       This document presents Topology Independent Loop-Free Alternate
      (TI-LFA) Fast Reroute (FRR), which is aimed at providing protection of
      node and Adjacency segments within the Segment Routing (SR)
      framework. This FRR behavior builds on proven IP FRR concepts being
      LFAs, Remote LFAs (RLFAs), and Directed Loop-Free Alternates (DLFAs).
      It extends these concepts to provide guaranteed coverage in any
      two-connected networks using a link-state IGP. An important aspect of
      TI-LFA is the FRR path selection approach establishing protection over
      the expected post-convergence paths from the Point of Local Repair
      (PLR), reducing the operational need to control the tie-breaks among
      various FRR options. 
    " name="description">
<meta content="xml2rfc 3.31.0" name="generator">
<meta content="example" name="keyword">
<meta content="TILFA" name="keyword">
<meta content="LFA" name="keyword">
<meta content="FRR" name="keyword">
<meta content="fast reroute" name="keyword">
<meta content="recovery" name="keyword">
<meta content="SR" name="keyword">
<meta content="protection" name="keyword">
<meta content="convergence" name="keyword">
<meta content="9855" name="rfc.number">
<!-- Generator version information:
  xml2rfc 3.31.0
    Python 3.9.15
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 5.3.0
    platformdirs 3.8.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.0
    wcwidth 0.2.5
    weasyprint 65.0
-->
<link href="rfc9855.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://static.ietf.org/fonts/noto-sans/import.css'); /* Sans-serif */
@import url('https://static.ietf.org/fonts/noto-serif/import.css'); /* Serif (print) */
@import url('https://static.ietf.org/fonts/roboto-mono/import.css'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
@media print {
  svg {
    max-height: 850px;
    max-width: 660px;
  }
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}
.xref {
  overflow-wrap: normal;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    max-width: 100%;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.refSubseries {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: upper-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code, dt tt, dt code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > blockquote:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<link href="https://datatracker.ietf.org/doc/draft-ietf-rtgwg-segment-routing-ti-lfa-21" rel="prev">
  <link href="https://dx.doi.org/10.17487/rfc9855" rel="alternate">
  <link href="urn:issn:2070-1721" rel="alternate">
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9855</td>
<td class="center">SR TI-LFA</td>
<td class="right">October 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">Bashandy, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a href="https://www.rfc-editor.org/rfc/rfc9855" class="eref">9855</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-10" class="published">October 2025</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">A. Bashandy</div>
<div class="org">HPE</div>
</div>
<div class="author">
      <div class="author-name">S. Litkowski</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">C. Filsfils</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">P. Francois</div>
<div class="org">INSA Lyon</div>
</div>
<div class="author">
      <div class="author-name">B. Decraene</div>
<div class="org">Orange</div>
</div>
<div class="author">
      <div class="author-name">D. Voyer</div>
<div class="org">Bell Canada</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9855</h1>
<h1 id="title">Topology Independent Fast Reroute Using Segment Routing</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document presents Topology Independent Loop-Free Alternate
      (TI-LFA) Fast Reroute (FRR), which is aimed at providing protection of
      node and Adjacency segments within the Segment Routing (SR)
      framework. This FRR behavior builds on proven IP FRR concepts being
      LFAs, Remote LFAs (RLFAs), and Directed Loop-Free Alternates (DLFAs).
      It extends these concepts to provide guaranteed coverage in any
      two-connected networks using a link-state IGP. An important aspect of
      TI-LFA is the FRR path selection approach establishing protection over
      the expected post-convergence paths from the Point of Local Repair
      (PLR), reducing the operational need to control the tie-breaks among
      various FRR options.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9855">https://www.rfc-editor.org/info/rfc9855</a></span>.<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-terminology" class="internal xref">Terminology</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="auto internal xref">2.1</a>.  <a href="#name-abbreviations-and-notations" class="internal xref">Abbreviations and Notations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1" class="keepWithNext"><a href="#section-2.2" class="auto internal xref">2.2</a>.  <a href="#name-conventions-used-in-this-do" class="internal xref">Conventions Used in This Document</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-base-principle" class="internal xref">Base Principle</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-intersecting-p-space-and-q-" class="internal xref">Intersecting P-space and Q-space with Post-Convergence Paths</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-extended-p-space-property-c" class="internal xref">Extended P-space Property Computation for a Resource X over Post-Convergence Paths</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-q-space-property-computatio" class="internal xref">Q-space Property Computation for a Resource X over Post-Convergence Paths</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-scaling-considerations-when" class="internal xref">Scaling Considerations When Computing Q-space</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-ti-lfa-repair-path" class="internal xref">TI-LFA Repair Path</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-frr-path-using-a-direct-nei" class="internal xref">FRR Path Using a Direct Neighbor</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-frr-path-using-a-pq-node" class="internal xref">FRR Path Using a PQ Node</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-frr-path-using-a-p-node-and" class="internal xref">FRR Path Using a P Node and Q Node That Are Adjacent</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="auto internal xref">5.4</a>.  <a href="#name-connecting-distant-p-and-q-" class="internal xref">Connecting Distant P and Q Nodes Along Post-Convergence Paths</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-building-ti-lfa-repair-list" class="internal xref">Building TI-LFA Repair Lists for SR Segments</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-the-active-segment-is-a-nod" class="internal xref">The Active Segment Is a Node Segment</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-the-active-segment-is-an-ad" class="internal xref">The Active Segment Is an Adjacency Segment</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.1">
                    <p id="section-toc.1-1.6.2.2.2.1.1"><a href="#section-6.2.1" class="auto internal xref">6.2.1</a>.  <a href="#name-protecting-adjacency-adjace" class="internal xref">Protecting [Adjacency, Adjacency] Segment Lists</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.2">
                    <p id="section-toc.1-1.6.2.2.2.2.1"><a href="#section-6.2.2" class="auto internal xref">6.2.2</a>.  <a href="#name-protecting-adjacency-node-s" class="internal xref">Protecting [Adjacency, Node] Segment Lists</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-data-plane-specific-conside" class="internal xref">Data Plane-Specific Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-mpls-data-plane-considerati" class="internal xref">MPLS Data Plane Considerations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-srv6-data-plane-considerati" class="internal xref">SRv6 Data Plane Considerations</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-ti-lfa-and-sr-algorithms" class="internal xref">TI-LFA and SR Algorithms</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-usage-of-adjacency-segments" class="internal xref">Usage of Adjacency Segments in the Repair List</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="auto internal xref">12.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a href="#section-12.2" class="auto internal xref">12.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-advantages-of-using-the-exp" class="internal xref">Advantages of Using the Expected Post-Convergence Path During FRR</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-analysis-based-on-real-netw" class="internal xref">Analysis Based on Real Network Topologies</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-D" class="auto internal xref"></a><a href="#name-contributors" class="internal xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#appendix-E" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">This document outlines a local repair mechanism that leverages Segment
      Routing (SR) to restore end-to-end connectivity in the event of a failure
      involving a directly connected network component.  This mechanism is
      designed for standard link-state Interior Gateway Protocol (IGP) shortest
      path scenarios. Non-SR mechanisms for local repair are beyond the scope
      of this document. Non-local failures are addressed in a separate document
      <span>[<a href="#I-D.bashandy-rtgwg-segment-routing-uloop" class="cite xref">SR-LOOP</a>]</span>.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">The term Topology Independent (TI) describes the capability providing
      a loop-free backup path that is effective across all network
      topologies. This provides a major improvement compared to LFA <span>[<a href="#RFC5286" class="cite xref">RFC5286</a>]</span> and RLFA <span>[<a href="#RFC7490" class="cite xref">RFC7490</a>]</span>, which cannot provide a complete
      protection coverage in some topologies as described in <span>[<a href="#RFC6571" class="cite xref">RFC6571</a>]</span>.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">When the network reconverges after failure, micro-loops <span>[<a href="#RFC5715" class="cite xref">RFC5715</a>]</span> can form due to transient
      inconsistencies in the forwarding tables of different routers.  If it is
      determined that micro-loops are a significant issue in the deployment,
      then a suitable loop-free convergence method should be implemented, such as one of those
      described in <span>[<a href="#RFC5715" class="cite xref">RFC5715</a>]</span>, <span>[<a href="#RFC6976" class="cite xref">RFC6976</a>]</span>, <span>[<a href="#RFC8333" class="cite xref">RFC8333</a>]</span>, or <span>[<a href="#I-D.bashandy-rtgwg-segment-routing-uloop" class="cite xref">SR-LOOP</a>]</span>.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">TI-LFA operates locally at the Point of Local Repair (PLR) upon
      detecting a failure in one of its direct links. Consequently, this local
      operation does not influence:<a href="#section-1-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-5.1">
          <p id="section-1-5.1.1">Micro-loops that may or may not form during the distributed IGP convergence as delineated in <span>[<a href="#RFC5715" class="cite xref">RFC5715</a>]</span>:<a href="#section-1-5.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-5.1.2.1">
              <p id="section-1-5.1.2.1.1">These micro-loops occur on routes directed towards the
          destination that do not traverse paths configured for TI-LFA. According
          to <span>[<a href="#RFC5714" class="cite xref">RFC5714</a>]</span>, the formation of such micro-loops can
          prevent traffic from reaching the PLR, thereby bypassing the TI-LFA
          paths established for rerouting.<a href="#section-1-5.1.2.1.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</li>
        <li class="normal" id="section-1-5.2">
          <p id="section-1-5.2.1">Micro-loops that may or may not develop when the previously failed
          link is restored to functionality.<a href="#section-1-5.2.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-1-6">TI-LFA paths are activated from the instant the PLR detects a failure
      in a local link and remain in effect until the IGP convergence at the PLR is fully achieved. Consequently, they are
      not susceptible to micro-loops that may arise due to variations in the
      IGP convergence times across different nodes through which these paths
      traverse. This ensures a stable and predictable routing environment,
      minimizing disruptions typically associated with asynchronous network
      behavior. However, an early (relative to the other nodes) IGP convergence
      at the PLR and the consecutive "early" release of TI-LFA paths may cause
      micro-loops, especially if these paths have been computed using the
      methods described in Sections <a href="#pq_backup" class="auto internal xref">5.2</a>, <a href="#adj_pq_backup" class="auto internal xref">5.3</a>, or <a href="#remote_pq_backup" class="auto internal xref">5.4</a> of this
      document. One of the possible ways to prevent such micro-loops is local
      convergence delay <span>[<a href="#RFC8333" class="cite xref">RFC8333</a>]</span>.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">TI-LFA procedures are complementary to the application of any micro-loop
      avoidance procedures in the case of link or node failure:<a href="#section-1-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-8.1">
          <p id="section-1-8.1.1">Link or node failure requires some urgent action to restore the
          traffic that passed through the failed resource. TI-LFA paths are
          pre-computed and pre-installed; therefore, they are suitable for urgent
          recovery.<a href="#section-1-8.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-8.2">
          <p id="section-1-8.2.1">The paths used in the micro-loop avoidance procedures typically
          cannot be pre-computed.<a href="#section-1-8.2.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-1-9">For each destination (as specified by the IGP) in the network, TI-LFA
      pre-installs a backup forwarding entry for each protected destination
      ready to be activated upon detection of the failure of a link used to
      reach the destination.  TI-LFA provides protection in the event of any
      one of the following: single link failure, single node failure, or
      single Shared Risk Link Group (SRLG) failure. In link failure mode, the
      destination is protected assuming the failure of the link. In node
      protection mode, the destination is protected assuming that the neighbor
      connected to the primary link (see <a href="#terminology" class="auto internal xref">Section 2</a>) has failed.  In SRLG protecting mode, the
      destination is protected assuming that a configured set of links sharing
      fate with the primary link has failed (e.g., a linecard or a set of links
      sharing a common transmission pipe).<a href="#section-1-9" class="pilcrow">¶</a></p>
<p id="section-1-10">Protection techniques outlined in this document are limited to
      protecting links, nodes, and SRLGs that are within a link-state IGP
      area. Protecting domain exit routers and/or links attached to another
      routing domain is beyond the scope of this document.<a href="#section-1-10" class="pilcrow">¶</a></p>
<p id="section-1-11">By utilizing SR, TI-LFA eliminates the need to
      establish Targeted Label Distribution Protocol sessions with
      remote nodes for leveraging the benefits of Remote Loop-Free Alternates
      (RLFAs) <span>[<a href="#RFC7490" class="cite xref">RFC7490</a>]</span> <span>[<a href="#RFC7916" class="cite xref">RFC7916</a>]</span> or Directed
      Loop-Free Alternates (DLFAs) <span>[<a href="#I-D.bryant-ipfrr-tunnels" class="cite xref">IPFRR-TUNNELS</a>]</span>. All the Segment
      Identifiers (SIDs) required are present within the Link State Database
      (LSDB) of the IGP. Consequently, there is no
      longer a necessity to prefer LFAs over RLFAs or DLFAs, nor is there a
      need to minimize the number of RLFA or DLFA repair nodes.<a href="#section-1-11" class="pilcrow">¶</a></p>
<p id="section-1-12"> Utilizing SR also eliminates the need to establish an additional
      state within the network for enforcing explicit Fast Reroute (FRR)
      paths.  This spares the nodes from maintaining a supplementary state and
      frees the operator from the necessity to implement additional protocols
      or protocol sessions solely to augment protection coverage.<a href="#section-1-12" class="pilcrow">¶</a></p>
<p id="section-1-13">TI-LFA also brings the benefit of the ability to provide a backup
      path that follows the expected post-convergence path considering a
      particular failure, which reduces the need of locally configured
      policies that influence the backup path selection <span>[<a href="#RFC7916" class="cite xref">RFC7916</a>]</span>. The easiest way to express the
      expected post-convergence path in a loop-free manner is to encode it as
      a list of Adjacency segments. However, this may create a long segment
      list that some hardware may not be able to program. One of the
      challenges of TI-LFA is to encode the expected post-convergence path by
      combining Adjacency segments and node segments. Each implementation may
      independently develop its own algorithm for optimizing the ordered
      segment list. This document provides an outline of the fundamental
      concepts applicable to constructing the SR backup path, along with the
      related data plane procedures. <a href="#advantages-post-conv-path" class="auto internal xref">Appendix A</a> contains a more detailed description of some of the
      aspects of TI-LFA related to post-convergence path.<a href="#section-1-13" class="pilcrow">¶</a></p>
<p id="section-1-14">This document is structured as follows:<a href="#section-1-14" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-15.1">
          <a href="#terminology" class="auto internal xref">Section 2</a> defines the main
      notations used in the document. They are in line with <span>[<a href="#RFC5714" class="cite xref">RFC5714</a>]</span>.<a href="#section-1-15.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-15.2">
          <a href="#base" class="auto internal xref">Section 3</a> defines the main principles of
      TI-LFA backup path computation.<a href="#section-1-15.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-15.3">
          <a href="#pq_space_intersect" class="auto internal xref">Section 4</a> suggests to
      compute the P-space and Q-space properties defined in <a href="#terminology" class="auto internal xref">Section 2</a> for the specific case of nodes
      lying over the post-convergence paths towards the protected
      destinations.<a href="#section-1-15.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-15.4">
          <a href="#tilfa_repair_path" class="auto internal xref">Section 5</a> describes how to compute protection lists that encode a
      loop-free post-convergence path towards the destination using the
      properties defined in <a href="#pq_space_intersect" class="auto internal xref">Section 4</a>.<a href="#section-1-15.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-15.5">
          <a href="#repairlist" class="auto internal xref">Section 6</a> defines the segment
      operations to be applied by the PLR to ensure consistency with the
      forwarding state of the repair node.<a href="#section-1-15.5" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-15.6">
          <a href="#dataplane" class="auto internal xref">Section 7</a> discusses aspects that are specific to the
      data plane.<a href="#section-1-15.6" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-15.7">
          <a href="#tilfa-sr-algo" class="auto internal xref">Section 8</a> discusses the relationship between TI-LFA
      and the SR algorithm.<a href="#section-1-15.7" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-15.8">
          <a href="#adj-sid-repair-list" class="auto internal xref">Section 9</a> provides an
      overview of the certain considerations that are needed when Adjacency
      segments are used in a Repair List (RL).<a href="#section-1-15.8" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-15.9">
          <a href="#security" class="auto internal xref">Section 10</a> discusses security considerations.<a href="#section-1-15.9" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-15.10">
          <a href="#advantages-post-conv-path" class="auto internal xref">Appendix A</a> highlights advantages of
      using the expected post-convergence path during FRR.<a href="#section-1-15.10" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-15.11">
          <a href="#analysis" class="auto internal xref">Appendix B</a> summarizes the measurements from implementing the
algorithms detailed in this document within actual service
provider and large enterprise network environments.  Real-life
measurements are presented regarding the number of SIDs utilized
by repair paths.<a href="#section-1-15.11" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="terminology">
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<div id="acronyms">
<section id="section-2.1">
        <h3 id="name-abbreviations-and-notations">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-abbreviations-and-notations" class="section-name selfRef">Abbreviations and Notations</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-2.1-1">
          <dt id="section-2.1-1.1">DLFA:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.2">Directed Loop-Free Alternate<a href="#section-2.1-1.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.3">FRR:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.4">Fast Reroute<a href="#section-2.1-1.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.5">IGP:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.6">Interior Gateway Protocol<a href="#section-2.1-1.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.7">LFA:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.8">Loop-Free Alternate<a href="#section-2.1-1.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.9">LSDB:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.10">Link State Database<a href="#section-2.1-1.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.11">PLR:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.12">Point of Local Repair<a href="#section-2.1-1.12" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.13">RL:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.14">Repair List<a href="#section-2.1-1.14" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.15">RLFA:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.16">Remote Loop-Free Alternate<a href="#section-2.1-1.16" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.17">SID:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.18">Segment Identifier<a href="#section-2.1-1.18" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.19">SPF:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.20">Shortest Path First<a href="#section-2.1-1.20" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.21">SPT:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.22">Shortest Path Tree<a href="#section-2.1-1.22" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.23">SR:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.24">Segment Routing<a href="#section-2.1-1.24" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.25">SRLG:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.26">Shared Risk Link Group<a href="#section-2.1-1.26" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.27">TI-LFA:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.28">Topology Independent Loop-Free Alternate<a href="#section-2.1-1.28" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-2.1-2">The main notations used in this document are defined as follows:<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1-3.1">The terms "old" and "new" topologies refer to the LSDB state before
 and after the considered failure, respectively.<a href="#section-2.1-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.1-3.2">SPT_old(R) is the SPT rooted at node R in the initial state of the
 network.<a href="#section-2.1-3.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.1-3.3">SPT_new(R, X) is the SPT rooted at node R in the state of the
 network after the resource X has failed.<a href="#section-2.1-3.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.1-3.4">The PLR is the router that applies fast traffic restoration after
 detecting failure in a directly attached link, set of links, and/or
 node.<a href="#section-2.1-3.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.1-3.5">Similar to <span>[<a href="#RFC7490" class="cite xref">RFC7490</a>]</span>, the concept of P-space and
 Q-space is used for TI-LFA.<a href="#section-2.1-3.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.1-3.6">The P-space P(R, X) of a router R with regard to a resource X (e.g., a
 link S-F, a node F, or an SRLG) is the set of routers reachable from R
 using the pre-convergence shortest paths without any of those paths
 (including equal-cost path splits) transiting through X. A P node is a
 node that belongs to the P-space.<a href="#section-2.1-3.6" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.1-3.7">Consider the set of neighbors of a router R and a resource X. Exclude
 from that set the neighbors that are reachable from R using X. The
 extended P-space P'(R, X) of a node R with regard to a resource X is the
 union of the P-spaces of the neighbors in that reduced set of neighbors
 with regard to the resource X.<a href="#section-2.1-3.7" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.1-3.8">The Q-space Q(R, X) of a router R with regard to a resource X is the
 set of routers from which R can be reached without any path (including
 equal-cost path splits) transiting through X. A Q node is a node that
 belongs to the Q-space.<a href="#section-2.1-3.8" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.1-3.9">EP(P, Q) is an explicit SR path from a node P to a node Q.<a href="#section-2.1-3.9" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.1-3.10">The primary interface and primary outgoing interface are one of the outgoing
 interfaces towards a destination according to the IGP link-state
 protocol.<a href="#section-2.1-3.10" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.1-3.11">The primary link is a link connected to the primary interface.<a href="#section-2.1-3.11" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.1-3.12">The Adj-SID(S-F) is the Adjacency segment from node S to node F.<a href="#section-2.1-3.12" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="conventions">
<section id="section-2.2">
        <h3 id="name-conventions-used-in-this-do">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-conventions-used-in-this-do" class="section-name selfRef">Conventions Used in This Document</a>
        </h3>
<p id="section-2.2-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>",
    "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>",
    "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>",
    "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be
    interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they appear in all capitals, as
    shown here.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="base">
<section id="section-3">
      <h2 id="name-base-principle">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-base-principle" class="section-name selfRef">Base Principle</a>
      </h2>
<p id="section-3-1">The basic algorithm to compute the repair path is to pre-compute
      SPT_new(R, X) and, for each destination, encode the repair path as a
      loop-free segment list. One way to provide a loop-free segment list is to
      use Adjacency SIDs only. However, this approach may create very long SID
      lists that hardware may not be able to handle due to Maximum SID
      Depth (MSD) limitations.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">An implementation is free to use any local optimization to provide
      smaller segment lists by combining Node-SIDs and Adjacency SIDs. In
      addition, the usage of Node-SIDs allow for maximizing ECMPs over the backup
      path. These optimizations are out of scope of this document; however, the
      subsequent sections provide some guidance on how to leverage P-spaces and
      Q-spaces to optimize the size of the segment list.<a href="#section-3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="pq_space_intersect">
<section id="section-4">
      <h2 id="name-intersecting-p-space-and-q-">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-intersecting-p-space-and-q-" class="section-name selfRef">Intersecting P-space and Q-space with Post-Convergence Paths</a>
      </h2>
<p id="section-4-1">One of the challenges of defining an SR path following the expected
      post-convergence path is to reduce the size of the segment list. In
      order to reduce this segment list, an implementation <span class="bcp14">MAY</span>
      determine the P-space / extended P-space and Q-space properties (defined
      in <span>[<a href="#RFC7490" class="cite xref">RFC7490</a>]</span>) of the nodes along the
      expected post-convergence path from the PLR to the protected destination
      and compute an SR explicit path from P to Q when they are not
      adjacent. Such properties will be used in <a href="#tilfa_repair_path" class="auto internal xref">Section 5</a> to compute the TI-LFA
      RL.<a href="#section-4-1" class="pilcrow">¶</a></p>
<div id="extp_space">
<section id="section-4.1">
        <h3 id="name-extended-p-space-property-c">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-extended-p-space-property-c" class="section-name selfRef">Extended P-space Property Computation for a Resource X over Post-Convergence Paths</a>
        </h3>
<p id="section-4.1-1">The objective is to determine which nodes on the post-convergence
        path from the PLR R to the destination D are in the extended P-space of
        R with regard to resource X (where X can be a link or a set of links
        adjacent to the PLR or a neighbor node of the PLR).<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">This can be found by:<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-3.1">
            <p id="section-4.1-3.1.1">excluding neighbors that are not on the post-convergence path
            when computing P'(R, X), then<a href="#section-4.1-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.1-3.2">
            <p id="section-4.1-3.2.1">intersecting the set of nodes belonging to the
            post-convergence path from R to D, assuming the failure of X, with
            P'(R, X).<a href="#section-4.1-3.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="q_space">
<section id="section-4.2">
        <h3 id="name-q-space-property-computatio">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-q-space-property-computatio" class="section-name selfRef">Q-space Property Computation for a Resource X over Post-Convergence Paths</a>
        </h3>
<p id="section-4.2-1">The goal is to determine which nodes on the post-convergence path
        from the PLR R to the destination D are in the
        Q-space of destination D with regard to resource X (where X can be a
        link or a set of links adjacent to the PLR, or a neighbor node of the
        PLR).<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">This can be found by intersecting the set of nodes belonging to the
        post-convergence path from R to D, assuming the failure of X, with
        Q(D, X).<a href="#section-4.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="q_space_scaling">
<section id="section-4.3">
        <h3 id="name-scaling-considerations-when">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-scaling-considerations-when" class="section-name selfRef">Scaling Considerations When Computing Q-space</a>
        </h3>
<p id="section-4.3-1"><span>[<a href="#RFC7490" class="cite xref">RFC7490</a>]</span> raises scaling concerns about computing a
        Q-space per destination. Similar concerns may affect TI-LFA
        computation if an implementation tries to compute a reverse Shortest
        Path Tree (SPT) <span>[<a href="#RFC7490" class="cite xref">RFC7490</a>]</span> for every destination in the
        network to determine the Q-space. It will be up to each implementation
        to determine the good tradeoff between scaling and accuracy of the
        optimization.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="tilfa_repair_path">
<section id="section-5">
      <h2 id="name-ti-lfa-repair-path">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-ti-lfa-repair-path" class="section-name selfRef">TI-LFA Repair Path</a>
      </h2>
<p id="section-5-1">The TI-LFA repair path consists of an outgoing interface and a list
      of segments (a Repair List (RL)) to insert on the SR header in
      accordance with the data plane used.  The RL encodes the
      explicit (and possibly post-convergence) path to the destination, which
      avoids the protected resource X. At the same time, the RL is
      guaranteed to be loop-free, irrespective of the state of FIBs along the
      nodes belonging to the explicit path, as long as the states of the FIBs
      are programmed according to a link-state IGP.  Thus, there is no need
      for any coordination or message exchange between the PLR and any other
      router in the network.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">The TI-LFA repair path is found by intersecting P(S, X) and Q(D, X) with
      the post-convergence path to D and computing the explicit SR-based path
      EP(P, Q) from a node P in P(S, X) to a node Q in Q(D, X) when these nodes
      are not adjacent along the post-convergence path. The TI-LFA RL
      is expressed generally as (Node-SID(P), EP(P, Q)).<a href="#section-5-2" class="pilcrow">¶</a></p>
<span id="name-sample-topology-with-ti-lfa"></span><div id="sample-topo1">
<figure id="figure-1">
        <div class="alignLeft art-text artwork" id="section-5-3.1">
<pre>
  S --------- N1 --------- D
  *\          | \          |
  * \         |  \         |
  *  \        |   \        |
  *   N2----- R1***R2 *** R3
  *           *
  N3 **********

    ***** : link with high metric (1k)
    ----- : link with metric 1
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-sample-topology-with-ti-lfa" class="selfRef">Sample Topology with TI-LFA</a>
        </figcaption></figure>
</div>
<p id="section-5-4">As an example, in <a href="#sample-topo1" class="auto internal xref">Figure 1</a>, the focus is on the
      TI-LFA backup from S to D, considering the failure of node N1.<a href="#section-5-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-5.1">
          <p id="section-5-5.1.1">First, P(S, N1) is computed and results in [N3, N2, R1].<a href="#section-5-5.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-5.2">
          <p id="section-5-5.2.1">Then, Q(D, N1) is computed and results in [R3].<a href="#section-5-5.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-5.3">
          <p id="section-5-5.3.1">The expected post-convergence path from S to D considering the
          failure of N1 is &lt;N2 -&gt; R1 -&gt; R2 -&gt; R3 -&gt; D&gt; (we
          are naming it "PCPath" in this example).<a href="#section-5-5.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-5.4">
          <p id="section-5-5.4.1">P(S, N1) intersection with PCPath is [N2, R1]. With R1 being the
          deeper downstream node in PCPath, it can be assumed to be used as a P
          node (this is an example, and an implementation could use a different
          strategy to choose the P node).<a href="#section-5-5.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-5.5">
          <p id="section-5-5.5.1">Q(D, N1) intersection with PCPath is [R3], so R3 is picked as a Q
          node. An SR-explicit path is then computed from R1 (P node) to R3 (Q
          node) following PCPath (R1 -&gt; R2 -&gt; R3): &lt;Adj-SID(R1-R2),
          Adj-SID(R2-R3)&gt;.<a href="#section-5-5.5.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-5-6"> As a result, the TI-LFA RL of S for destination D
      considering the failure of node N1 is: &lt;Node-SID(R1), Adj-SID(R1-R2),
      Adj-SID(R2-R3)&gt;.<a href="#section-5-6" class="pilcrow">¶</a></p>
<p id="section-5-7">Most often, the TI-LFA RL has a simpler form, as described
      in the following sections. <a href="#analysis" class="auto internal xref">Appendix B</a> provides statistics
      for the number of SIDs in the explicit path to protect against various
      failures.<a href="#section-5-7" class="pilcrow">¶</a></p>
<div id="direct_backup">
<section id="section-5.1">
        <h3 id="name-frr-path-using-a-direct-nei">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-frr-path-using-a-direct-nei" class="section-name selfRef">FRR Path Using a Direct Neighbor</a>
        </h3>
<p id="section-5.1-1">When a direct neighbor is in P(S, X) and Q(D, x), and the link to that
        direct neighbor is on the post-convergence path, the outgoing interface
        is set to that neighbor and the repair segment list is empty.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">This is comparable to a post-convergence LFA FRR repair.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="pq_backup">
<section id="section-5.2">
        <h3 id="name-frr-path-using-a-pq-node">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-frr-path-using-a-pq-node" class="section-name selfRef">FRR Path Using a PQ Node</a>
        </h3>
<p id="section-5.2-1">When a remote node R is in P(S, X) and Q(D, x) and on the
        post-convergence path, the RL is made of a single node segment
        to R, and the outgoing interface is set to the outgoing interface used
        to reach R.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">This is comparable to a post-convergence RLFA repair tunnel.<a href="#section-5.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="adj_pq_backup">
<section id="section-5.3">
        <h3 id="name-frr-path-using-a-p-node-and">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-frr-path-using-a-p-node-and" class="section-name selfRef">FRR Path Using a P Node and Q Node That Are Adjacent</a>
        </h3>
<p id="section-5.3-1">When a node P is in P(S, X) and a node Q is in Q(D, x), and both are on
        the post-convergence path and are adjacent to each other, the
        RL is made of two segments: a node segment to P (to be
        processed first), followed by an Adjacency segment from P to Q.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">This is comparable to a post-convergence Directed Loop-Free
        Alternate (DLFA) repair tunnel.<a href="#section-5.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="remote_pq_backup">
<section id="section-5.4">
        <h3 id="name-connecting-distant-p-and-q-">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-connecting-distant-p-and-q-" class="section-name selfRef">Connecting Distant P and Q Nodes Along Post-Convergence Paths</a>
        </h3>
<p id="section-5.4-1">In some cases, there is no adjacent P and Q node along the
        post‑convergence path. As mentioned in <a href="#base" class="auto internal xref">Section 3</a>, a list of Adjacency SIDs can be used to encode the
        path between P and Q. However, the PLR can perform additional
        computations to compute a shorter list of segments that represent a
        loop-free path from P to Q.  How these computations are done is out of
        scope of this document and is left to implementation.<a href="#section-5.4-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="repairlist">
<section id="section-6">
      <h2 id="name-building-ti-lfa-repair-list">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-building-ti-lfa-repair-list" class="section-name selfRef">Building TI-LFA Repair Lists for SR Segments</a>
      </h2>
<p id="section-6-1">The following sections describe how to build the RLs using
      the terminology defined in <span>[<a href="#RFC8402" class="cite xref">RFC8402</a>]</span>. The procedures
      described in this section are equally applicable to both the Segment Routing over MPLS (SR-MPLS) and
      the Segment Routing over IPv6 (SRv6) data plane, while the data plane-specific considerations are
      described in <a href="#dataplane" class="auto internal xref">Section 7</a>.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">This section explains the process by which a protecting router S handles
      the active segment of a packet upon the failure of its primary outgoing
      interface for the packet S-F. The failure of the primary
      outgoing interface may occur due to various triggers, such as link
      failure, neighbor node failure, and others.<a href="#section-6-2" class="pilcrow">¶</a></p>
<div id="link-protect-node-sid">
<section id="section-6.1">
        <h3 id="name-the-active-segment-is-a-nod">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-the-active-segment-is-a-nod" class="section-name selfRef">The Active Segment Is a Node Segment</a>
        </h3>
<p id="section-6.1-1">The active segment <span class="bcp14">MUST</span> be kept on the SR header unchanged and the
        RL <span class="bcp14">MUST</span> be added. The active segment becomes the first
        segment after the RL. The way the RL is added depends
        on the data plane used (see <a href="#dataplane" class="auto internal xref">Section 7</a>).<a href="#section-6.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="link-protect-adj-sid">
<section id="section-6.2">
        <h3 id="name-the-active-segment-is-an-ad">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-the-active-segment-is-an-ad" class="section-name selfRef">The Active Segment Is an Adjacency Segment</a>
        </h3>
<p id="section-6.2-1">This section defines the FRR behavior applied by S for any packet
        received with an active Adjacency segment S-F for which protection was
        enabled. Since protection has been enabled for the segment S-F and
        signaled in the IGP (for instance, using protocol extensions from
        <span>[<a href="#RFC8667" class="cite xref">RFC8667</a>]</span> and <span>[<a href="#RFC8665" class="cite xref">RFC8665</a>]</span>), a calculator of any SR policy utilizing this
        segment is aware that it may be transiently rerouted out of S-F in the
        event of an S-F failure.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">The simplest approach for link protection of an Adjacency segment
        S-F is to create an RL that will carry the traffic to F. To do
        so, one or more "PUSH" operations are performed. If the RL,
        while avoiding S-F, terminates on F, S only pushes segments of the
        RL. Otherwise, S pushes a node segment of F, followed by the
        segments of the RL. For details on the "NEXT" and "PUSH"
        operations, refer to <span>[<a href="#RFC8402" class="cite xref">RFC8402</a>]</span>.<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<p id="section-6.2-3">This method, which merges back the traffic at the remote end of the
        Adjacency segment, has the advantage of keeping as much traffic as
        possible on the pre-failure path.  When SR policies are involved and
        strict compliance with the policy is required, an end-to-end
        protection (beyond the scope of this document) should be preferred
        over the local repair mechanism described above.<a href="#section-6.2-3" class="pilcrow">¶</a></p>
<p id="section-6.2-4"> Note, however, that when the SR source node is using Traffic
        Engineering (TE), it will generally not be possible for the PLR to know
        what post-convergence path will be selected by the source node once it
        detects the failure, since computation of the TE path is a local matter
        that depends on constraints that may not be known at the
        PLR. Therefore, no method applied at the PLR can guarantee protection
        will follow the post-convergence path.<a href="#section-6.2-4" class="pilcrow">¶</a></p>
<p id="section-6.2-5">The case where the active segment is followed by another Adjacency
        segment is distinguished from the case where it is followed by a node
        segment. Repair techniques for the respective cases are provided in the
        following subsections.<a href="#section-6.2-5" class="pilcrow">¶</a></p>
<div id="link-protect-adj-sid-adj-sid">
<section id="section-6.2.1">
          <h4 id="name-protecting-adjacency-adjace">
<a href="#section-6.2.1" class="section-number selfRef">6.2.1. </a><a href="#name-protecting-adjacency-adjace" class="section-name selfRef">Protecting [Adjacency, Adjacency] Segment Lists</a>
          </h4>
<p id="section-6.2.1-1">If the next segment in the list is an Adjacency segment, then the
          packet has to be conveyed to F.<a href="#section-6.2.1-1" class="pilcrow">¶</a></p>
<p id="section-6.2.1-2">To do so, S <span class="bcp14">MUST</span> apply a "NEXT" operation on Adj-SID(S-F) and then
          one or more "PUSH" operations. If the RL, while avoiding
          S-F, terminates on F, S only pushes the segments of the RL.
          Otherwise, S pushes a node segment of F, followed by the segments of
          the RL. For details on the "NEXT" and "PUSH" operations,
          refer to <span>[<a href="#RFC8402" class="cite xref">RFC8402</a>]</span>.<a href="#section-6.2.1-2" class="pilcrow">¶</a></p>
<p id="section-6.2.1-3">Upon failure of S-F, a packet reaching S with a segment list
          matching [adj-sid(S-F), adj-sid(F-M), ...] will thus leave S with a segment
          list matching [RL(F), node(F), adj-sid(F-M), ...], where RL(F) is the
          RL for destination F.<a href="#section-6.2.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="link-protect-adj-sid-node-sid">
<section id="section-6.2.2">
          <h4 id="name-protecting-adjacency-node-s">
<a href="#section-6.2.2" class="section-number selfRef">6.2.2. </a><a href="#name-protecting-adjacency-node-s" class="section-name selfRef">Protecting [Adjacency, Node] Segment Lists</a>
          </h4>
<p id="section-6.2.2-1">If the next segment in the stack is a node segment, say for node
          T, the segment list on the packet matches [adj-sid(S-F), node(T), ...].<a href="#section-6.2.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2.2-2">In this case, S <span class="bcp14">MUST</span> apply a "NEXT" operation on the Adjacency
          segment related to S-F, followed by a "PUSH" of an RL
          redirecting the traffic to a node Q, whose path to node segment T is
          not affected by the failure.<a href="#section-6.2.2-2" class="pilcrow">¶</a></p>
<p id="section-6.2.2-3">Upon failure of S-F, packets reaching S with a segment list
          matching [adj-sid(S-F), node(T), ...] would leave S with a segment list
          matching [RL(Q), node(T), ...].<a href="#section-6.2.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="dataplane">
<section id="section-7">
      <h2 id="name-data-plane-specific-conside">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-data-plane-specific-conside" class="section-name selfRef">Data Plane-Specific Considerations</a>
      </h2>
<div id="mpls-dataplane">
<section id="section-7.1">
        <h3 id="name-mpls-data-plane-considerati">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-mpls-data-plane-considerati" class="section-name selfRef">MPLS Data Plane Considerations</a>
        </h3>
<p id="section-7.1-1">The MPLS data plane for SR is described in <span>[<a href="#RFC8660" class="cite xref">RFC8660</a>]</span>.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">The following data plane behaviors apply when creating an RL
        using an MPLS data plane:<a href="#section-7.1-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-7.1-3">
<li id="section-7.1-3.1">
            <p id="section-7.1-3.1.1">If the active segment is a node segment that has been signaled
            with penultimate hop popping, and the RL ends with an
            Adjacency segment terminating on the penultimate node of the
            active segment, then the active segment <span class="bcp14">MUST</span> be
            popped before pushing the RL.<a href="#section-7.1-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="section-7.1-3.2">
            <p id="section-7.1-3.2.1">If the active segment is a node segment, but the other conditions
            in 1. are not met, the active segment <span class="bcp14">MUST</span> be popped and then pushed
            again with a label value computed according to the Segment Routing
            Global Block (SRGB) of Q, where Q is the endpoint of the RL. Finally, the RL <span class="bcp14">MUST</span> be pushed.<a href="#section-7.1-3.2.1" class="pilcrow">¶</a></p>
</li>
        </ol>
</section>
</div>
<div id="srv6-dataplane">
<section id="section-7.2">
        <h3 id="name-srv6-data-plane-considerati">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-srv6-data-plane-considerati" class="section-name selfRef">SRv6 Data Plane Considerations</a>
        </h3>
<p id="section-7.2-1">SRv6 data plane and programming instructions are described
        respectively in <span>[<a href="#RFC8754" class="cite xref">RFC8754</a>]</span> and <span>[<a href="#RFC8986" class="cite xref">RFC8986</a>]</span>.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2-2">The TI-LFA path computation algorithm is the same as in the SR-MPLS
        data plane. Note, however, that the Adjacency SIDs are typically globally
        routed. In such a case, there is no need for preceding an Adjacency SID
        with a Prefix-SID <span>[<a href="#RFC8402" class="cite xref">RFC8402</a>]</span>, and the resulting RL is likely shorter.<a href="#section-7.2-2" class="pilcrow">¶</a></p>
<p id="section-7.2-3">If the traffic is protected at a Transit Node, then an SRv6 SID
        list is added on the packet to apply the RL. The addition of
        the RL follows the head-end behaviors as specified in 
        <span><a href="https://rfc-editor.org/rfc/rfc8986#section-5" class="relref">Section 5</a> of [<a href="#RFC8986" class="cite xref">RFC8986</a>]</span>.<a href="#section-7.2-3" class="pilcrow">¶</a></p>
<p id="section-7.2-4">If the traffic is protected at an SR Segment Endpoint Node, first
        the Segment Endpoint packet processing is executed. Then, the packet is
        protected as if it were a transit packet.<a href="#section-7.2-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="tilfa-sr-algo">
<section id="section-8">
      <h2 id="name-ti-lfa-and-sr-algorithms">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-ti-lfa-and-sr-algorithms" class="section-name selfRef">TI-LFA and SR Algorithms</a>
      </h2>
<p id="section-8-1">SR allows an operator to bind an algorithm to a Prefix-SID (as
      defined in <span>[<a href="#RFC8402" class="cite xref">RFC8402</a>]</span>). The algorithm value dictates how
      the path to the prefix is computed. The SR default algorithm is known
      as the "Shortest Path" algorithm. The SR default algorithm allows an
      operator to override the IGP shortest path by using local policies. When
      TI-LFA uses Node-SIDs associated with the default algorithm, there is no
      guarantee that the path will be loop-free, as a local policy may have
      overridden the expected IGP path. As the local policies are defined by
      the operator, it becomes the responsibility of this operator to ensure
      that the deployed policies do not affect the TI-LFA deployment. It
      should be noted that such a situation can already happen today with
      existing mechanisms such as RLFA.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2"><span>[<a href="#RFC9350" class="cite xref">RFC9350</a>]</span> defines a Flexible Algorithm
      framework to be associated with Prefix-SIDs. A Flexible Algorithm allows a user to
      associate a constrained path to a Prefix-SID rather than using the
      regular IGP shortest path. An implementation <span class="bcp14">MAY</span> support TI-LFA to
      protect Node-SIDs associated with a Flexible Algorithm. In such a case, rather
      than computing the expected post-convergence path based on the regular
      SPF, an implementation <span class="bcp14">SHOULD</span> use the constrained SPF algorithm bound to
      the Flexible Algorithm (using the Flexible Algorithm Definition) instead of the regular
      Dijkstra in all the SPF/reverse SPF computations that are occurring during the
      TI-LFA computation. This includes the computation of the P-space and
      Q-space as well as the post-convergence path. Furthermore, the
      implementation <span class="bcp14">SHOULD</span> only use Node-SIDs/Adj-SIDs bound to the Flexible Algorithm
      and/or unprotected Adj-SIDs of the regular SPF to build the RL. The use of regular Dijkstra for the TI-LFA computation or for building
      the repair path using SIDs other than those recommended does not
      ensure that the traffic going over the TI-LFA repair path during the
      FRR period is honoring the Flexible Algorithm constraints.<a href="#section-8-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="adj-sid-repair-list">
<section id="section-9">
      <h2 id="name-usage-of-adjacency-segments">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-usage-of-adjacency-segments" class="section-name selfRef">Usage of Adjacency Segments in the Repair List</a>
      </h2>
<p id="section-9-1">The RL of segments computed by TI-LFA may contain one or
      more Adjacency segments. An Adjacency segment may be protected or not
      protected.<a href="#section-9-1" class="pilcrow">¶</a></p>
<div id="cascaded-frr">
<figure id="figure-2">
        <div class="alignLeft art-text artwork" id="section-9-2.1">
<pre>
        S --- R2 --- R3 ---- R4 --- R5 --- D
                 *   |  \   *
                   * |   \ *
                    R7 ** R8
                     *    |
                     *    |
                    R9 -- R10
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a></figcaption></figure>
</div>
<p id="section-9-3">In <a href="#cascaded-frr" class="auto internal xref">Figure 2</a>, all the metrics
      are equal to 1 except R2-R7,R7-R8,R8-R4,R7-R9, which have a metric of
      1000. Considering R2 as a PLR to protect against the failure of node R3
      for the traffic S-&gt;D, the RL computed by R2 will be
      [adj-sid(R7-R8), adj-sid(R8-R4)], and the outgoing interface will be to
      R7. If R3 fails, R2 pushes the RL onto the incoming packet to
      D. During the FRR, if R7-R8 fails and if TI-LFA has picked a protected
      Adjacency segment for Adj-SID(R7-R8), R7 will push an additional RL onto the packet following the procedures defined in <a href="#repairlist" class="auto internal xref">Section 6</a>.<a href="#section-9-3" class="pilcrow">¶</a></p>
<p id="section-9-4">To avoid the possibility of this double FRR activation, an
      implementation of TI-LFA <span class="bcp14">MAY</span> pick only unprotected
      Adjacency segments when building the RL. However, it is
      important to note that FRR in general is intended to protect for a
      single pre-planned failure.  If the failure that happens is worse than
      expected or multiple failures happen, FRR is not guaranteed to work. In
      such a case, fast IGP convergence remains important to restore traffic
      as quickly as possible.<a href="#section-9-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security">
<section id="section-10">
      <h2 id="name-security-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-10-1">The techniques described in this document are internal functionalities
      to a router that can guarantee an upper bound on the time taken to
      restore traffic flow upon the failure of a directly connected link or
      node. As these techniques steer traffic to the post-convergence path as
      quickly as possible, this serves to minimize the disruption associated
      with a local failure, which can be seen as a modest security
      enhancement. The protection mechanism does not protect external
      destinations, but rather provides quick restoration for destinations that
      are internal to a routing domain.<a href="#section-10-1" class="pilcrow">¶</a></p>
<p id="section-10-2">The security considerations described in <span>[<a href="#RFC5286" class="cite xref">RFC5286</a>]</span> and
      <span>[<a href="#RFC7490" class="cite xref">RFC7490</a>]</span> apply to this document. Similarly, as the
      solution described in this document is based on SR
      technology, the reader should be aware of the security considerations
      related to this technology (see <span>[<a href="#RFC8402" class="cite xref">RFC8402</a>]</span>) and its data plane
      instantiations (see <span>[<a href="#RFC8660" class="cite xref">RFC8660</a>]</span>, <span>[<a href="#RFC8754" class="cite xref">RFC8754</a>]</span>, and
      <span>[<a href="#RFC8986" class="cite xref">RFC8986</a>]</span>). However, this document does not introduce
      additional security concerns.<a href="#section-10-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana">
<section id="section-11">
      <h2 id="name-iana-considerations">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-11-1">This document has no IANA actions.<a href="#section-11-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-12">
      <h2 id="name-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-12.1">
        <h3 id="name-normative-references">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7916">[RFC7916]</dt>
        <dd>
<span class="refAuthor">Litkowski, S., Ed.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Raza, K.</span>, <span class="refAuthor">Horneffer, M.</span>, and <span class="refAuthor">P. Sarkar</span>, <span class="refTitle">"Operational Management of Loop-Free Alternates"</span>, <span class="seriesInfo">RFC 7916</span>, <span class="seriesInfo">DOI 10.17487/RFC7916</span>, <time datetime="2016-07" class="refDate">July 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7916">https://www.rfc-editor.org/info/rfc7916</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8402">[RFC8402]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Previdi, S., Ed.</span>, <span class="refAuthor">Ginsberg, L.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Litkowski, S.</span>, and <span class="refAuthor">R. Shakir</span>, <span class="refTitle">"Segment Routing Architecture"</span>, <span class="seriesInfo">RFC 8402</span>, <span class="seriesInfo">DOI 10.17487/RFC8402</span>, <time datetime="2018-07" class="refDate">July 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8402">https://www.rfc-editor.org/info/rfc8402</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8660">[RFC8660]</dt>
        <dd>
<span class="refAuthor">Bashandy, A., Ed.</span>, <span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Litkowski, S.</span>, and <span class="refAuthor">R. Shakir</span>, <span class="refTitle">"Segment Routing with the MPLS Data Plane"</span>, <span class="seriesInfo">RFC 8660</span>, <span class="seriesInfo">DOI 10.17487/RFC8660</span>, <time datetime="2019-12" class="refDate">December 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8660">https://www.rfc-editor.org/info/rfc8660</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8754">[RFC8754]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Dukes, D., Ed.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Leddy, J.</span>, <span class="refAuthor">Matsushima, S.</span>, and <span class="refAuthor">D. Voyer</span>, <span class="refTitle">"IPv6 Segment Routing Header (SRH)"</span>, <span class="seriesInfo">RFC 8754</span>, <span class="seriesInfo">DOI 10.17487/RFC8754</span>, <time datetime="2020-03" class="refDate">March 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8754">https://www.rfc-editor.org/info/rfc8754</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8986">[RFC8986]</dt>
      <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Camarillo, P., Ed.</span>, <span class="refAuthor">Leddy, J.</span>, <span class="refAuthor">Voyer, D.</span>, <span class="refAuthor">Matsushima, S.</span>, and <span class="refAuthor">Z. Li</span>, <span class="refTitle">"Segment Routing over IPv6 (SRv6) Network Programming"</span>, <span class="seriesInfo">RFC 8986</span>, <span class="seriesInfo">DOI 10.17487/RFC8986</span>, <time datetime="2021-02" class="refDate">February 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8986">https://www.rfc-editor.org/info/rfc8986</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-12.2">
        <h3 id="name-informative-references">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.bryant-ipfrr-tunnels">[IPFRR-TUNNELS]</dt>
        <dd>
<span class="refAuthor">Bryant, S.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Previdi, S.</span>, and <span class="refAuthor">M. Shand</span>, <span class="refTitle">"IP Fast Reroute using tunnels"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-bryant-ipfrr-tunnels-03</span>, <time datetime="2007-11-16" class="refDate">16 November 2007</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-bryant-ipfrr-tunnels-03">https://datatracker.ietf.org/doc/html/draft-bryant-ipfrr-tunnels-03</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5286">[RFC5286]</dt>
        <dd>
<span class="refAuthor">Atlas, A., Ed.</span> and <span class="refAuthor">A. Zinin, Ed.</span>, <span class="refTitle">"Basic Specification for IP Fast Reroute: Loop-Free Alternates"</span>, <span class="seriesInfo">RFC 5286</span>, <span class="seriesInfo">DOI 10.17487/RFC5286</span>, <time datetime="2008-09" class="refDate">September 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5286">https://www.rfc-editor.org/info/rfc5286</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5714">[RFC5714]</dt>
        <dd>
<span class="refAuthor">Shand, M.</span> and <span class="refAuthor">S. Bryant</span>, <span class="refTitle">"IP Fast Reroute Framework"</span>, <span class="seriesInfo">RFC 5714</span>, <span class="seriesInfo">DOI 10.17487/RFC5714</span>, <time datetime="2010-01" class="refDate">January 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5714">https://www.rfc-editor.org/info/rfc5714</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5715">[RFC5715]</dt>
        <dd>
<span class="refAuthor">Shand, M.</span> and <span class="refAuthor">S. Bryant</span>, <span class="refTitle">"A Framework for Loop-Free Convergence"</span>, <span class="seriesInfo">RFC 5715</span>, <span class="seriesInfo">DOI 10.17487/RFC5715</span>, <time datetime="2010-01" class="refDate">January 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5715">https://www.rfc-editor.org/info/rfc5715</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6571">[RFC6571]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Francois, P., Ed.</span>, <span class="refAuthor">Shand, M.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Uttaro, J.</span>, <span class="refAuthor">Leymann, N.</span>, and <span class="refAuthor">M. Horneffer</span>, <span class="refTitle">"Loop-Free Alternate (LFA) Applicability in Service Provider (SP) Networks"</span>, <span class="seriesInfo">RFC 6571</span>, <span class="seriesInfo">DOI 10.17487/RFC6571</span>, <time datetime="2012-06" class="refDate">June 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6571">https://www.rfc-editor.org/info/rfc6571</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6976">[RFC6976]</dt>
        <dd>
<span class="refAuthor">Shand, M.</span>, <span class="refAuthor">Bryant, S.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Francois, P.</span>, and <span class="refAuthor">O. Bonaventure</span>, <span class="refTitle">"Framework for Loop-Free Convergence Using the Ordered Forwarding Information Base (oFIB) Approach"</span>, <span class="seriesInfo">RFC 6976</span>, <span class="seriesInfo">DOI 10.17487/RFC6976</span>, <time datetime="2013-07" class="refDate">July 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6976">https://www.rfc-editor.org/info/rfc6976</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7490">[RFC7490]</dt>
        <dd>
<span class="refAuthor">Bryant, S.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Shand, M.</span>, and <span class="refAuthor">N. So</span>, <span class="refTitle">"Remote Loop-Free Alternate (LFA) Fast Reroute (FRR)"</span>, <span class="seriesInfo">RFC 7490</span>, <span class="seriesInfo">DOI 10.17487/RFC7490</span>, <time datetime="2015-04" class="refDate">April 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7490">https://www.rfc-editor.org/info/rfc7490</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8333">[RFC8333]</dt>
        <dd>
<span class="refAuthor">Litkowski, S.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Filsfils, C.</span>, and <span class="refAuthor">P. Francois</span>, <span class="refTitle">"Micro-loop Prevention by Introducing a Local Convergence Delay"</span>, <span class="seriesInfo">RFC 8333</span>, <span class="seriesInfo">DOI 10.17487/RFC8333</span>, <time datetime="2018-03" class="refDate">March 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8333">https://www.rfc-editor.org/info/rfc8333</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8665">[RFC8665]</dt>
        <dd>
<span class="refAuthor">Psenak, P., Ed.</span>, <span class="refAuthor">Previdi, S., Ed.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Gredler, H.</span>, <span class="refAuthor">Shakir, R.</span>, <span class="refAuthor">Henderickx, W.</span>, and <span class="refAuthor">J. Tantsura</span>, <span class="refTitle">"OSPF Extensions for Segment Routing"</span>, <span class="seriesInfo">RFC 8665</span>, <span class="seriesInfo">DOI 10.17487/RFC8665</span>, <time datetime="2019-12" class="refDate">December 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8665">https://www.rfc-editor.org/info/rfc8665</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8667">[RFC8667]</dt>
        <dd>
<span class="refAuthor">Previdi, S., Ed.</span>, <span class="refAuthor">Ginsberg, L., Ed.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Bashandy, A.</span>, <span class="refAuthor">Gredler, H.</span>, and <span class="refAuthor">B. Decraene</span>, <span class="refTitle">"IS-IS Extensions for Segment Routing"</span>, <span class="seriesInfo">RFC 8667</span>, <span class="seriesInfo">DOI 10.17487/RFC8667</span>, <time datetime="2019-12" class="refDate">December 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8667">https://www.rfc-editor.org/info/rfc8667</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9256">[RFC9256]</dt>
        <dd>
<span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Talaulikar, K., Ed.</span>, <span class="refAuthor">Voyer, D.</span>, <span class="refAuthor">Bogdanov, A.</span>, and <span class="refAuthor">P. Mattes</span>, <span class="refTitle">"Segment Routing Policy Architecture"</span>, <span class="seriesInfo">RFC 9256</span>, <span class="seriesInfo">DOI 10.17487/RFC9256</span>, <time datetime="2022-07" class="refDate">July 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9256">https://www.rfc-editor.org/info/rfc9256</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9350">[RFC9350]</dt>
        <dd>
<span class="refAuthor">Psenak, P., Ed.</span>, <span class="refAuthor">Hegde, S.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Talaulikar, K.</span>, and <span class="refAuthor">A. Gulko</span>, <span class="refTitle">"IGP Flexible Algorithm"</span>, <span class="seriesInfo">RFC 9350</span>, <span class="seriesInfo">DOI 10.17487/RFC9350</span>, <time datetime="2023-02" class="refDate">February 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9350">https://www.rfc-editor.org/info/rfc9350</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.bashandy-rtgwg-segment-routing-uloop">[SR-LOOP]</dt>
      <dd>
<span class="refAuthor">Bashandy, A.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Litkowski, S.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Francois, P.</span>, and <span class="refAuthor">P. Psenak</span>, <span class="refTitle">"Loop avoidance using Segment Routing"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-bashandy-rtgwg-segment-routing-uloop-17</span>, <time datetime="2024-06-29" class="refDate">29 June 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-bashandy-rtgwg-segment-routing-uloop-17">https://datatracker.ietf.org/doc/html/draft-bashandy-rtgwg-segment-routing-uloop-17</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="advantages-post-conv-path">
<section id="appendix-A">
      <h2 id="name-advantages-of-using-the-exp">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-advantages-of-using-the-exp" class="section-name selfRef">Advantages of Using the Expected Post-Convergence Path During FRR</a>
      </h2>
<p id="appendix-A-1"><span>[<a href="#RFC7916" class="cite xref">RFC7916</a>]</span> raises several operational considerations
      when using LFA or RLFA. <span><a href="https://rfc-editor.org/rfc/rfc7916#section-3" class="relref">Section 3</a> of [<a href="#RFC7916" class="cite xref">RFC7916</a>]</span>
      presents a case where a high bandwidth link between two core routers is
      protected through a Provider Edge (PE) router connected with low bandwidth links. In
      such a case, congestion may happen when the FRR backup path is
      activated. <span>[<a href="#RFC7916" class="cite xref">RFC7916</a>]</span> introduces a local policy framework
      to let the operator tuning manually the best alternate election based on
      its own requirements.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">From a network capacity planning point of view, it is often assumed
      for simplicity that if a link L fails on a particular node X, the
      bandwidth consumed on L will be spread over some of the remaining links
      of X. The remaining links to be used are determined by the IGP routing
      considering that the link L has failed (we assume that the traffic uses
      the post-convergence path starting from the node X). In <a href="#figure1" class="auto internal xref">Figure 3</a>, we consider a network with all
      metrics equal to 1 except the metrics on links used by PE1, PE2, and PE3,
      which are 1000. An easy network capacity planning method is to consider
      that if the link L (X-B) fails, the traffic actually flowing through L
      will be spread over the remaining links of X (X-H, X-D,
      X-A). Considering the IGP metrics, only X-H and X-D can be used in
      reality to carry the traffic flowing through the link L. As a
      consequence, the bandwidth of links X-H and X-D is sized according to
      this rule. We should observe that this capacity planning policy works;
      however, it is not fully accurate.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
<p id="appendix-A-3">In <a href="#figure1" class="auto internal xref">Figure 3</a>, considering that the source of traffic
      is only from PE1 and PE4, when the link L fails, depending on the
      convergence speed of the nodes, X may reroute its forwarding entries to
      the remote PEs onto X-H or X-D; however, in a similar timeframe, PE1 will
      also reroute a subset of its traffic (the subset destined to PE2) out of
      its nominal path, reducing the quantity of traffic received by X. The
      capacity planning rule presented previously has the drawback of
      oversizing the network; however, it allows for preventing any transient
      congestion (for example, when X reroutes traffic before PE1 does).<a href="#appendix-A-3" class="pilcrow">¶</a></p>
<div id="figure1">
<figure id="figure-3">
        <div class="alignLeft art-text artwork" id="appendix-A-4.1">
<pre>
              H --- I --- J *
              |           |  *
   PE4        |           |   PE3
      \       | (L)       |  *
      * A --- X --- B --- G *
     *        |           |  *
   PE1        |           |   PE2
     *        |           |  *
      * C --- D --- E --- F *
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a></figcaption></figure>
</div>
<p id="appendix-A-5">Based on this assumption, in order to facilitate the operation of
      FRR and limit the implementation of local FRR policies, traffic can be
      steered by the PLR onto its expected post-convergence path during the
      FRR phase. In our example, when link L fails, X switches the traffic
      destined to PE3 and PE2 on the post-convergence paths. This is perfectly
      in line with the capacity planning rule that was presented before and
      also in line with the fact that X may converge before PE1 (or any other
      upstream router) and may spread the X-B traffic onto the
      post-convergence paths rooted at X.<a href="#appendix-A-5" class="pilcrow">¶</a></p>
<p id="appendix-A-6">It should be noted that some networks may have a different capacity
      planning rule, leading to an allocation of less bandwidth on X-H and X-D
      links. In such a case, using the post-convergence paths rooted at X
      during FRR may introduce some congestion on X-H and X-D links. However,
      it is important to note that a transient congestion may possibly
      happen even without FRR activated, for instance, when X converges before
      the upstream routers. Operators are still free to use the policy
      framework defined in <span>[<a href="#RFC7916" class="cite xref">RFC7916</a>]</span> if the usage of the
      post-convergence paths rooted at the PLR is not suitable.<a href="#appendix-A-6" class="pilcrow">¶</a></p>
<p id="appendix-A-7">Readers should be aware that FRR protection is pre-computing a backup
      path to protect against a particular type of failure (link, node, or SRLG).
      When using the post-convergence path as an FRR backup path, the computed
      post-convergence path is the one considering the failure we are
      protecting against. This means that FRR is using an expected
      post-convergence path, and this expected post-convergence path may be
      actually different from the post-convergence path used if the failure
      that happened is different from the failure FRR was protecting against.
      As an example, if the operator has implemented a protection against a
      node failure, the expected post-convergence path used during FRR will be
      the one considering that the node has failed. However, even if a single
      link is failing or a set of links is failing (instead of the full node),
      the node-protecting post-convergence path will be used. The consequence
      is that the path used during FRR is not optimal with respect to the
      failure that has actually occurred.<a href="#appendix-A-7" class="pilcrow">¶</a></p>
<p id="appendix-A-8">Another consideration to take into account is as follows: while using
      the expected post-convergence path for SR traffic using node segments
      only (for instance, PE to PE traffic using the shortest path) has some
      advantages, these advantages reduce when SR policies <span>[<a href="#RFC9256" class="cite xref">RFC9256</a>]</span> are involved. A segment list used in
      an SR policy is computed to obey a set of path constraints defined
      locally at the head-end or centrally in a controller. TI-LFA cannot be
      aware of such path constraints, and there is no reason to expect the
      TI-LFA backup path protecting one segment in that segment list to obey
      those constraints.  When SR policies are used and the operator wants to
      have a backup path that still follows the policy requirements, this
      backup path should be computed as part of the SR policy in the ingress
      node (or central controller), and the SR policy should not rely on local
      protection.  Another option could be to use a Flexible Algorithm <span>[<a href="#RFC9350" class="cite xref">RFC9350</a>]</span> to express the set of constraints
      and use a single node segment associated with a Flexible Algorithm to reach the
      destination. When using a node segment associated with a Flexible Algorithm,
      TI-LFA keeps providing an optimal backup by applying the appropriate set
      of constraints. The relationship between TI-LFA and the SR algorithm is
      detailed in <a href="#tilfa-sr-algo" class="auto internal xref">Section 8</a>.<a href="#appendix-A-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="analysis">
<section id="appendix-B">
      <h2 id="name-analysis-based-on-real-netw">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-analysis-based-on-real-netw" class="section-name selfRef">Analysis Based on Real Network Topologies</a>
      </h2>
<p id="appendix-B-1">This section presents an analysis performed on real service provider and
      large enterprise network topologies. The objective of the analysis is to
      assess the number of SIDs required in an explicit path when the
      mechanisms described in this document are used to protect against the
      failure scenarios within the scope of this document. The number of
      segments described in this section are applicable to instantiating
      SR over the MPLS forwarding plane.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
<p id="appendix-B-2">The measurement below indicates that, for link and local SRLG
      protection, a repair path of 1 SID or less delivers more than 99% coverage. For
      node protection, a repair path of 2 SIDs or less yields 99% coverage.<a href="#appendix-B-2" class="pilcrow">¶</a></p>
<p id="appendix-B-3"><a href="#t-1" class="auto internal xref">Table 1</a> below lists the characteristics of the networks used in our
      measurements. The number of links refers to the number of
      "bidirectional" links (not directed edges of the graph). The
      measurements are carried out as follows:<a href="#appendix-B-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B-4.1">
          <p id="appendix-B-4.1.1">For each network, the algorithms described in this document are
          applied to protect all prefixes against link, node, and local SRLG
          failure.<a href="#appendix-B-4.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-4.2">
          <p id="appendix-B-4.2.1">For each prefix, the number of SIDs used by the repair path is
          recorded.<a href="#appendix-B-4.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-4.3">
          <p id="appendix-B-4.3.1">The percentage of number of SIDs are listed in Tables <a href="#t-2" class="auto internal xref">2</a>, <a href="#t-3" class="auto internal xref">3</a>, <a href="#t-4" class="auto internal xref">4</a>, <a href="#t-5" class="auto internal xref">5</a>, <a href="#t-6" class="auto internal xref">6</a>, and <a href="#t-7" class="auto internal xref">7</a>.<a href="#appendix-B-4.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<span id="name-data-set-definition"></span><div id="t-1">
<table class="center" id="table-1">
        <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-data-set-definition" class="selfRef">Data Set Definition</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Network</th>
            <th class="text-left" rowspan="1" colspan="1">Nodes</th>
            <th class="text-left" rowspan="1" colspan="1">Links</th>
            <th class="text-left" rowspan="1" colspan="1">Node-to-Link Ratio</th>
            <th class="text-left" rowspan="1" colspan="1">SRLG Info?</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T1</td>
            <td class="text-left" rowspan="1" colspan="1">408</td>
            <td class="text-left" rowspan="1" colspan="1">665</td>
            <td class="text-left" rowspan="1" colspan="1">1.63</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T2</td>
            <td class="text-left" rowspan="1" colspan="1">587</td>
            <td class="text-left" rowspan="1" colspan="1">1083</td>
            <td class="text-left" rowspan="1" colspan="1">1.84</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T3</td>
            <td class="text-left" rowspan="1" colspan="1">93</td>
            <td class="text-left" rowspan="1" colspan="1">401</td>
            <td class="text-left" rowspan="1" colspan="1">4.31</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T4</td>
            <td class="text-left" rowspan="1" colspan="1">247</td>
            <td class="text-left" rowspan="1" colspan="1">393</td>
            <td class="text-left" rowspan="1" colspan="1">1.59</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T5</td>
            <td class="text-left" rowspan="1" colspan="1">34</td>
            <td class="text-left" rowspan="1" colspan="1">96</td>
            <td class="text-left" rowspan="1" colspan="1">2.82</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T6</td>
            <td class="text-left" rowspan="1" colspan="1">50</td>
            <td class="text-left" rowspan="1" colspan="1">78</td>
            <td class="text-left" rowspan="1" colspan="1">1.56</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T7</td>
            <td class="text-left" rowspan="1" colspan="1">82</td>
            <td class="text-left" rowspan="1" colspan="1">293</td>
            <td class="text-left" rowspan="1" colspan="1">3.57</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T8</td>
            <td class="text-left" rowspan="1" colspan="1">35</td>
            <td class="text-left" rowspan="1" colspan="1">41</td>
            <td class="text-left" rowspan="1" colspan="1">1.17</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T9</td>
            <td class="text-left" rowspan="1" colspan="1">177</td>
            <td class="text-left" rowspan="1" colspan="1">1371</td>
            <td class="text-left" rowspan="1" colspan="1">7.74</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="appendix-B-6">The rest of this section presents the measurements done on the actual
      topologies. The conventions that we use are as follows:<a href="#appendix-B-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B-7.1">
          <p id="appendix-B-7.1.1">0 SIDs: The calculated repair path starts with a directly
          connected neighbor that is also a loop-free alternate; in which case,
          there is no need to explicitly route the traffic using additional
          SIDs. This scenario is described in <a href="#direct_backup" class="auto internal xref">Section 5.1</a>.<a href="#appendix-B-7.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-7.2">
          <p id="appendix-B-7.2.1">1 SID: The repair node is a PQ node; in which case, only 1 SID is
          needed to guarantee a loop-free path. This scenario is covered in
          <a href="#pq_backup" class="auto internal xref">Section 5.2</a>.<a href="#appendix-B-7.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-7.3">
          <p id="appendix-B-7.3.1">2 or more SIDs: The repair path consists of 2 or more SIDs as
          described in Sections <a href="#adj_pq_backup" class="auto internal xref">5.3</a> and
          <a href="#remote_pq_backup" class="auto internal xref">5.4</a>. We do not cover
          the case for 2 SIDs (<a href="#adj_pq_backup" class="auto internal xref">Section 5.3</a>) separately because there was no granularity in
          the result. Also, we treat the Node-SID + Adj-SID and Node-SID +
          Node-SID the same because they do not differ from the data plane
          point of view.<a href="#appendix-B-7.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="appendix-B-8">Tables <a href="#t-2" class="auto internal xref">2</a> and <a href="#t-3" class="auto internal xref">3</a> below summarize the measurements on
      the number of SIDs needed for link protection.<a href="#appendix-B-8" class="pilcrow">¶</a></p>
<span id="name-link-protection-repair-size"></span><div id="t-2">
<table class="center" id="table-2">
        <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-link-protection-repair-size" class="selfRef">Link Protection (Repair Size Distribution)</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Network</th>
            <th class="text-left" rowspan="1" colspan="1">0 SIDs</th>
            <th class="text-left" rowspan="1" colspan="1">1 SID</th>
            <th class="text-left" rowspan="1" colspan="1">2 SIDs</th>
            <th class="text-left" rowspan="1" colspan="1">3 SIDs</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T1</td>
            <td class="text-left" rowspan="1" colspan="1">74.3%</td>
            <td class="text-left" rowspan="1" colspan="1">25.3%</td>
            <td class="text-left" rowspan="1" colspan="1">0.5%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T2</td>
            <td class="text-left" rowspan="1" colspan="1">81.1%</td>
            <td class="text-left" rowspan="1" colspan="1">18.7%</td>
            <td class="text-left" rowspan="1" colspan="1">0.2%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T3</td>
            <td class="text-left" rowspan="1" colspan="1">95.9%</td>
            <td class="text-left" rowspan="1" colspan="1">4.1%</td>
            <td class="text-left" rowspan="1" colspan="1">0.1%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T4</td>
            <td class="text-left" rowspan="1" colspan="1">62.5%</td>
            <td class="text-left" rowspan="1" colspan="1">35.7%</td>
            <td class="text-left" rowspan="1" colspan="1">1.8%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T5</td>
            <td class="text-left" rowspan="1" colspan="1">85.7%</td>
            <td class="text-left" rowspan="1" colspan="1">14.3%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T6</td>
            <td class="text-left" rowspan="1" colspan="1">81.2%</td>
            <td class="text-left" rowspan="1" colspan="1">18.7%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T7</td>
            <td class="text-left" rowspan="1" colspan="1">98.9%</td>
            <td class="text-left" rowspan="1" colspan="1">1.1%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T8</td>
            <td class="text-left" rowspan="1" colspan="1">94.1%</td>
            <td class="text-left" rowspan="1" colspan="1">5.9%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T9</td>
            <td class="text-left" rowspan="1" colspan="1">98.9%</td>
            <td class="text-left" rowspan="1" colspan="1">1.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
        </tbody>
      </table>
</div>
<span id="name-link-protection-repair-size-"></span><div id="t-3">
<table class="center" id="table-3">
        <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-link-protection-repair-size-" class="selfRef">Link Protection (Repair Size Cumulative Distribution)</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Network</th>
            <th class="text-left" rowspan="1" colspan="1">0 SIDs</th>
            <th class="text-left" rowspan="1" colspan="1">1 SID</th>
            <th class="text-left" rowspan="1" colspan="1">2 SIDs</th>
            <th class="text-left" rowspan="1" colspan="1">3 SIDs</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T1</td>
            <td class="text-left" rowspan="1" colspan="1">74.2%</td>
            <td class="text-left" rowspan="1" colspan="1">99.5%</td>
            <td class="text-left" rowspan="1" colspan="1">99.9%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T2</td>
            <td class="text-left" rowspan="1" colspan="1">81.1%</td>
            <td class="text-left" rowspan="1" colspan="1">99.8%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T3</td>
            <td class="text-left" rowspan="1" colspan="1">95.9%</td>
            <td class="text-left" rowspan="1" colspan="1">99.9%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T4</td>
            <td class="text-left" rowspan="1" colspan="1">62.5%</td>
            <td class="text-left" rowspan="1" colspan="1">98.2%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T5</td>
            <td class="text-left" rowspan="1" colspan="1">85.7%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T6</td>
            <td class="text-left" rowspan="1" colspan="1">81.2%</td>
            <td class="text-left" rowspan="1" colspan="1">99.9%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T7</td>
            <td class="text-left" rowspan="1" colspan="1">98.8%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T8</td>
            <td class="text-left" rowspan="1" colspan="1">94.1%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T9</td>
            <td class="text-left" rowspan="1" colspan="1">98.9%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="appendix-B-11">Tables <a href="#t-4" class="auto internal xref">4</a> and <a href="#t-5" class="auto internal xref">5</a> summarize the measurements on the number of SIDs needed for
local SRLG protection.<a href="#appendix-B-11" class="pilcrow">¶</a></p>
<span id="name-local-srlg-protection-repai"></span><div id="t-4">
<table class="center" id="table-4">
        <caption>
<a href="#table-4" class="selfRef">Table 4</a>:
<a href="#name-local-srlg-protection-repai" class="selfRef">Local SRLG Protection (Repair Size Distribution)</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Network</th>
            <th class="text-left" rowspan="1" colspan="1">0 SIDs</th>
            <th class="text-left" rowspan="1" colspan="1">1 SID</th>
            <th class="text-left" rowspan="1" colspan="1">2 SIDs</th>
            <th class="text-left" rowspan="1" colspan="1">3 SIDs</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T1</td>
            <td class="text-left" rowspan="1" colspan="1">74.2%</td>
            <td class="text-left" rowspan="1" colspan="1">25.3%</td>
            <td class="text-left" rowspan="1" colspan="1">0.5%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T2</td>
            <td class="text-left" rowspan="1" colspan="4">No SRLG information</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T3</td>
            <td class="text-left" rowspan="1" colspan="1">93.6%</td>
            <td class="text-left" rowspan="1" colspan="1">6.3%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T4</td>
            <td class="text-left" rowspan="1" colspan="1">62.5%</td>
            <td class="text-left" rowspan="1" colspan="1">35.6%</td>
            <td class="text-left" rowspan="1" colspan="1">1.8%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T5</td>
            <td class="text-left" rowspan="1" colspan="1">83.1%</td>
            <td class="text-left" rowspan="1" colspan="1">16.8%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T6</td>
            <td class="text-left" rowspan="1" colspan="4">No SRLG information</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T7</td>
            <td class="text-left" rowspan="1" colspan="4">No SRLG information</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T8</td>
            <td class="text-left" rowspan="1" colspan="1">85.2%</td>
            <td class="text-left" rowspan="1" colspan="1">14.8%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T9</td>
            <td class="text-left" rowspan="1" colspan="1">98.9%</td>
            <td class="text-left" rowspan="1" colspan="1">1.1%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
        </tbody>
      </table>
</div>
<span id="name-local-srlg-protection-repair"></span><div id="t-5">
<table class="center" id="table-5">
        <caption>
<a href="#table-5" class="selfRef">Table 5</a>:
<a href="#name-local-srlg-protection-repair" class="selfRef">Local SRLG Protection (Repair Size Cumulative Distribution)</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Network</th>
            <th class="text-left" rowspan="1" colspan="1">0 SIDs</th>
            <th class="text-left" rowspan="1" colspan="1">1 SID</th>
            <th class="text-left" rowspan="1" colspan="1">2 SIDs</th>
            <th class="text-left" rowspan="1" colspan="1">3 SIDs</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T1</td>
            <td class="text-left" rowspan="1" colspan="1">74.2%</td>
            <td class="text-left" rowspan="1" colspan="1">99.5%</td>
            <td class="text-left" rowspan="1" colspan="1">99.9%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T2</td>
            <td class="text-left" rowspan="1" colspan="4">No SRLG information</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T3</td>
            <td class="text-left" rowspan="1" colspan="1">93.6%</td>
            <td class="text-left" rowspan="1" colspan="1">99.9%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T4</td>
            <td class="text-left" rowspan="1" colspan="1">62.5%</td>
            <td class="text-left" rowspan="1" colspan="1">98.2%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T5</td>
            <td class="text-left" rowspan="1" colspan="1">83.1%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T6</td>
            <td class="text-left" rowspan="1" colspan="4">No SRLG information</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T7</td>
            <td class="text-left" rowspan="1" colspan="4">No SRLG information</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T8</td>
            <td class="text-left" rowspan="1" colspan="1">85.2%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T9</td>
            <td class="text-left" rowspan="1" colspan="1">98.9%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="appendix-B-14">The remaining two tables summarize the measurements on the number of
SIDs needed for node protection.<a href="#appendix-B-14" class="pilcrow">¶</a></p>
<span id="name-node-protection-repair-size"></span><div id="t-6">
<table class="center" id="table-6">
        <caption>
<a href="#table-6" class="selfRef">Table 6</a>:
<a href="#name-node-protection-repair-size" class="selfRef">Node Protection (Repair Size Distribution)</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Network</th>
            <th class="text-left" rowspan="1" colspan="1">0 SIDs</th>
            <th class="text-left" rowspan="1" colspan="1">1 SID</th>
            <th class="text-left" rowspan="1" colspan="1">2 SIDs</th>
            <th class="text-left" rowspan="1" colspan="1">3 SIDs</th>
            <th class="text-left" rowspan="1" colspan="1">4 SIDs</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T1</td>
            <td class="text-left" rowspan="1" colspan="1">49.8%</td>
            <td class="text-left" rowspan="1" colspan="1">47.9%</td>
            <td class="text-left" rowspan="1" colspan="1">2.1%</td>
            <td class="text-left" rowspan="1" colspan="1">0.1%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T2</td>
            <td class="text-left" rowspan="1" colspan="1">36.5%</td>
            <td class="text-left" rowspan="1" colspan="1">59.6%</td>
            <td class="text-left" rowspan="1" colspan="1">3.6%</td>
            <td class="text-left" rowspan="1" colspan="1">0.2%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T3</td>
            <td class="text-left" rowspan="1" colspan="1">73.3%</td>
            <td class="text-left" rowspan="1" colspan="1">25.6%</td>
            <td class="text-left" rowspan="1" colspan="1">1.1%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T4</td>
            <td class="text-left" rowspan="1" colspan="1">36.1%</td>
            <td class="text-left" rowspan="1" colspan="1">57.3%</td>
            <td class="text-left" rowspan="1" colspan="1">6.3%</td>
            <td class="text-left" rowspan="1" colspan="1">0.2%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T5</td>
            <td class="text-left" rowspan="1" colspan="1">73.2%</td>
            <td class="text-left" rowspan="1" colspan="1">26.8%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T6</td>
            <td class="text-left" rowspan="1" colspan="1">78.3%</td>
            <td class="text-left" rowspan="1" colspan="1">21.3%</td>
            <td class="text-left" rowspan="1" colspan="1">0.3%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T7</td>
            <td class="text-left" rowspan="1" colspan="1">66.1%</td>
            <td class="text-left" rowspan="1" colspan="1">32.8%</td>
            <td class="text-left" rowspan="1" colspan="1">1.1%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T8</td>
            <td class="text-left" rowspan="1" colspan="1">59.7%</td>
            <td class="text-left" rowspan="1" colspan="1">40.2%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T9</td>
            <td class="text-left" rowspan="1" colspan="1">98.9%</td>
            <td class="text-left" rowspan="1" colspan="1">1.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
            <td class="text-left" rowspan="1" colspan="1">0.0%</td>
          </tr>
        </tbody>
      </table>
</div>
<span id="name-node-protection-repair-size-"></span><div id="t-7">
<table class="center" id="table-7">
        <caption>
<a href="#table-7" class="selfRef">Table 7</a>:
<a href="#name-node-protection-repair-size-" class="selfRef">Node Protection (Repair Size Cumulative Distribution)</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Network</th>
            <th class="text-left" rowspan="1" colspan="1">0 SIDs</th>
            <th class="text-left" rowspan="1" colspan="1">1 SID</th>
            <th class="text-left" rowspan="1" colspan="1">2 SIDs</th>
            <th class="text-left" rowspan="1" colspan="1">3 SIDs</th>
            <th class="text-left" rowspan="1" colspan="1">4 SIDs</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T1</td>
            <td class="text-left" rowspan="1" colspan="1">49.7%</td>
            <td class="text-left" rowspan="1" colspan="1">97.6%</td>
            <td class="text-left" rowspan="1" colspan="1">99.8%</td>
            <td class="text-left" rowspan="1" colspan="1">99.9%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T2</td>
            <td class="text-left" rowspan="1" colspan="1">36.5%</td>
            <td class="text-left" rowspan="1" colspan="1">96.1%</td>
            <td class="text-left" rowspan="1" colspan="1">99.7%</td>
            <td class="text-left" rowspan="1" colspan="1">99.9%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T3</td>
            <td class="text-left" rowspan="1" colspan="1">73.3%</td>
            <td class="text-left" rowspan="1" colspan="1">98.9%</td>
            <td class="text-left" rowspan="1" colspan="1">99.9%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T4</td>
            <td class="text-left" rowspan="1" colspan="1">36.1%</td>
            <td class="text-left" rowspan="1" colspan="1">93.4%</td>
            <td class="text-left" rowspan="1" colspan="1">99.8%</td>
            <td class="text-left" rowspan="1" colspan="1">99.9%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T5</td>
            <td class="text-left" rowspan="1" colspan="1">73.2%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T6</td>
            <td class="text-left" rowspan="1" colspan="1">78.4%</td>
            <td class="text-left" rowspan="1" colspan="1">99.7%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T7</td>
            <td class="text-left" rowspan="1" colspan="1">66.1%</td>
            <td class="text-left" rowspan="1" colspan="1">98.9%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T8</td>
            <td class="text-left" rowspan="1" colspan="1">59.7%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">T9</td>
            <td class="text-left" rowspan="1" colspan="1">98.9%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
            <td class="text-left" rowspan="1" colspan="1">100%</td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<div id="ack">
<section id="appendix-C">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-C-1">The authors would like to thank <span class="contact-name">Les Ginsberg</span>,
      <span class="contact-name">Stewart Bryant</span>, <span class="contact-name">Alexander       Vainsthein</span>, <span class="contact-name">Chris Bowers</span>, <span class="contact-name">Shraddha Hedge</span>, <span class="contact-name">Wes Hardaker</span>,
      <span class="contact-name">Gunter Van de Velde</span>, and <span class="contact-name">John       Scudder</span> for their valuable comments.<a href="#appendix-C-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="contributors">
<section id="appendix-D">
      <h2 id="name-contributors">
<a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<p id="appendix-D-1">In addition to the authors listed on the front page, the following
      co-authors have also contributed to this document:<a href="#appendix-D-1" class="pilcrow">¶</a></p>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Francois Clad</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Pablo Camarillo</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
</address>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-E">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ahmed Bashandy</span></div>
<div dir="auto" class="left"><span class="org">HPE</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:abashandy.ietf@gmail.com" class="email">abashandy.ietf@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Stephane Litkowski</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:slitkows@cisco.com" class="email">slitkows@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Clarence Filsfils</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div dir="auto" class="left"><span class="locality">Brussels</span></div>
<div dir="auto" class="left"><span class="country-name">Belgium</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:cfilsfil@cisco.com" class="email">cfilsfil@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Pierre Francois</span></div>
<div dir="auto" class="left"><span class="org">INSA Lyon</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:pierre.francois@insa-lyon.fr" class="email">pierre.francois@insa-lyon.fr</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Bruno Decraene</span></div>
<div dir="auto" class="left"><span class="org">Orange</span></div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:bruno.decraene@orange.com" class="email">bruno.decraene@orange.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Daniel Voyer</span></div>
<div dir="auto" class="left"><span class="org">Bell Canada</span></div>
<div dir="auto" class="left"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:daniel.voyer@bell.ca" class="email">daniel.voyer@bell.ca</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
