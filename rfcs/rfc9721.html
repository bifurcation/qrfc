<!DOCTYPE html>
<html lang="en" class="RFC">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>RFC 9721: Extended Mobility Procedures for Ethernet VPN Integrated Routing and Bridging (EVPN-IRB)</title>
<meta content="Neeraj Malhotra" name="author">
<meta content="Ali Sajassi" name="author">
<meta content="Aparna Pattekar" name="author">
<meta content="Jorge Rabadan" name="author">
<meta content="Avinash Lingala" name="author">
<meta content="John Drake" name="author">
<meta content="
       This document specifies extensions to the Ethernet VPN Integrated
      Routing and Bridging (EVPN-IRB) procedures specified in RFCs 7432 and
      9135 to enhance the mobility mechanisms
      for networks based on EVPN-IRB. The proposed extensions improve the
      handling of host mobility and duplicate address detection in EVPN-IRB
      networks to cover a broader set of scenarios where a
      host's unicast IP address to Media Access Control (MAC) address bindings
      may change across moves.  These enhancements address limitations in the
      existing EVPN-IRB mobility procedures by providing more efficient and
      scalable solutions. The extensions are backward compatible with existing
      EVPN-IRB implementations and aim to optimize network performance in
      scenarios involving frequent IP address mobility. 
    " name="description">
<meta content="xml2rfc 3.28.1" name="generator">
<meta content="ES" name="keyword">
<meta content="Ethernet Segment" name="keyword">
<meta content="Peer-Sync-Local" name="keyword">
<meta content="Overlay" name="keyword">
<meta content="NVO" name="keyword">
<meta content="NVO3" name="keyword">
<meta content="RT-2" name="keyword">
<meta content="RT-5" name="keyword">
<meta content="MAC-IP" name="keyword">
<meta content="9721" name="rfc.number">
<!-- Generator version information:
  xml2rfc 3.28.1
    Python 3.9.15
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 5.3.0
    platformdirs 3.8.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    six 1.16.0
    wcwidth 0.2.5
    weasyprint 65.0
-->
<link href="rfc9721.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}
.xref {
  overflow-wrap: normal;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    max-width: 100%;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.refSubseries {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: upper-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code, dt tt, dt code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<link href="https://datatracker.ietf.org/doc/draft-ietf-bess-evpn-irb-extended-mobility-21" rel="prev">
  <link href="https://dx.doi.org/10.17487/rfc9721" rel="alternate">
  <link href="urn:issn:2070-1721" rel="alternate">
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9721</td>
<td class="center">EVPN-IRB Extended Mobility</td>
<td class="right">April 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">Malhotra, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a href="https://www.rfc-editor.org/rfc/rfc9721" class="eref">9721</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-04" class="published">April 2025</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">N. Malhotra, <span class="editor">Ed.</span>
</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">A. Sajassi</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">A. Pattekar</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">J. Rabadan</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">A. Lingala</div>
<div class="org">AT&amp;T</div>
</div>
<div class="author">
      <div class="author-name">J. Drake</div>
<div class="org">Independent</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9721</h1>
<h1 id="title">Extended Mobility Procedures for Ethernet VPN Integrated Routing and Bridging (EVPN-IRB)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document specifies extensions to the Ethernet VPN Integrated
      Routing and Bridging (EVPN-IRB) procedures specified in RFCs 7432 and
      9135 to enhance the mobility mechanisms
      for networks based on EVPN-IRB. The proposed extensions improve the
      handling of host mobility and duplicate address detection in EVPN-IRB
      networks to cover a broader set of scenarios where a
      host's unicast IP address to Media Access Control (MAC) address bindings
      may change across moves.  These enhancements address limitations in the
      existing EVPN-IRB mobility procedures by providing more efficient and
      scalable solutions. The extensions are backward compatible with existing
      EVPN-IRB implementations and aim to optimize network performance in
      scenarios involving frequent IP address mobility.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9721">https://www.rfc-editor.org/info/rfc9721</a></span>.<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-document-structure" class="internal xref">Document Structure</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-requirements-language-and-t" class="internal xref">Requirements Language and Terminology</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="auto internal xref">2.1</a>.  <a href="#name-abbreviations" class="internal xref">Abbreviations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="auto internal xref">2.2</a>.  <a href="#name-definitions" class="internal xref">Definitions</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-background-and-problem-stat" class="internal xref">Background and Problem Statement</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-optional-mac-only-rt-2" class="internal xref">Optional MAC-Only RT-2</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-mobility-use-cases" class="internal xref">Mobility Use Cases</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.1">
                    <p id="section-toc.1-1.3.2.2.2.1.1"><a href="#section-3.2.1" class="auto internal xref">3.2.1</a>.  <a href="#name-host-macip-address-move" class="internal xref">Host MAC+IP Address Move</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.2">
                    <p id="section-toc.1-1.3.2.2.2.2.1"><a href="#section-3.2.2" class="auto internal xref">3.2.2</a>.  <a href="#name-host-ip-address-move-to-new" class="internal xref">Host IP Address Move to New MAC Address</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.2.2.1">
                        <p id="section-toc.1-1.3.2.2.2.2.2.1.1"><a href="#section-3.2.2.1" class="auto internal xref">3.2.2.1</a>.  <a href="#name-host-reload" class="internal xref">Host Reload</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.2.2.2">
                        <p id="section-toc.1-1.3.2.2.2.2.2.2.1"><a href="#section-3.2.2.2" class="auto internal xref">3.2.2.2</a>.  <a href="#name-mac-address-sharing" class="internal xref">MAC Address Sharing</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.2.2.3">
                        <p id="section-toc.1-1.3.2.2.2.2.2.3.1"><a href="#section-3.2.2.3" class="auto internal xref">3.2.2.3</a>.  <a href="#name-problem" class="internal xref">Problem</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.3">
                    <p id="section-toc.1-1.3.2.2.2.3.1"><a href="#section-3.2.3" class="auto internal xref">3.2.3</a>.  <a href="#name-host-mac-address-move-to-ne" class="internal xref">Host MAC Address Move to New IP Address</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.3.2.1">
                        <p id="section-toc.1-1.3.2.2.2.3.2.1.1"><a href="#section-3.2.3.1" class="auto internal xref">3.2.3.1</a>.  <a href="#name-problem-2" class="internal xref">Problem</a></p>
</li>
                    </ul>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-evpn-all-active-multi-homed" class="internal xref">EVPN All Active Multi-Homed ES</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-design-considerations" class="internal xref">Design Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-solution-components" class="internal xref">Solution Components</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-sequence-number-inheritance" class="internal xref">Sequence Number Inheritance</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-mac-address-sharing-2" class="internal xref">MAC Address Sharing</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-sequence-number-synchroniza" class="internal xref">Sequence Number Synchronization</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-methods-for-sequence-number" class="internal xref">Methods for Sequence Number Assignment</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-local-mac-ip-learning" class="internal xref">Local MAC-IP Learning</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-local-mac-learning" class="internal xref">Local MAC Learning</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-remote-mac-or-mac-ip-route-" class="internal xref">Remote MAC or MAC-IP Route Update</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="auto internal xref">6.4</a>.  <a href="#name-peer-sync-local-mac-route-u" class="internal xref">Peer-Sync-Local MAC Route Update</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5">
                <p id="section-toc.1-1.6.2.5.1"><a href="#section-6.5" class="auto internal xref">6.5</a>.  <a href="#name-peer-sync-local-mac-ip-rout" class="internal xref">Peer-Sync-Local MAC-IP Route Update</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.6">
                <p id="section-toc.1-1.6.2.6.1"><a href="#section-6.6" class="auto internal xref">6.6</a>.  <a href="#name-interoperability" class="internal xref">Interoperability</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.7">
                <p id="section-toc.1-1.6.2.7.1"><a href="#section-6.7" class="auto internal xref">6.7</a>.  <a href="#name-mac-address-sharing-race-co" class="internal xref">MAC Address Sharing Race Condition</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.8">
                <p id="section-toc.1-1.6.2.8.1"><a href="#section-6.8" class="auto internal xref">6.8</a>.  <a href="#name-mobility-convergence" class="internal xref">Mobility Convergence</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.8.2.1">
                    <p id="section-toc.1-1.6.2.8.2.1.1"><a href="#section-6.8.1" class="auto internal xref">6.8.1</a>.  <a href="#name-generalized-probing-logic" class="internal xref">Generalized Probing Logic</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-routed-overlay" class="internal xref">Routed Overlay</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-duplicate-host-detection" class="internal xref">Duplicate Host Detection</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-scenario-a" class="internal xref">Scenario A</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-scenario-b" class="internal xref">Scenario B</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2.2.1">
                    <p id="section-toc.1-1.8.2.2.2.1.1"><a href="#section-8.2.1" class="auto internal xref">8.2.1</a>.  <a href="#name-duplicate-ip-detection-proc" class="internal xref">Duplicate IP Detection Procedure for Scenario B</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="auto internal xref">8.3</a>.  <a href="#name-scenario-c" class="internal xref">Scenario C</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a href="#section-8.4" class="auto internal xref">8.4</a>.  <a href="#name-duplicate-host-recovery" class="internal xref">Duplicate Host Recovery</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4.2.1">
                    <p id="section-toc.1-1.8.2.4.2.1.1"><a href="#section-8.4.1" class="auto internal xref">8.4.1</a>.  <a href="#name-route-unfreezing-configurat" class="internal xref">Route Unfreezing Configuration</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4.2.2">
                    <p id="section-toc.1-1.8.2.4.2.2.1"><a href="#section-8.4.2" class="auto internal xref">8.4.2</a>.  <a href="#name-route-clearing-configuratio" class="internal xref">Route Clearing Configuration</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="auto internal xref">11.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="auto internal xref">11.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-contributors" class="internal xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="Intro">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">EVPN-IRB facilitates
      the advertisement of both MAC and IP routes via a
      single MAC+IP Route Type 2 (RT-2) advertisement. The MAC address is
      integrated into the local MAC Virtual Routing and Forwarding (MAC-VRF)
      bridge table, enabling Layer 2 (L2) bridged traffic across the network
      overlay. The IP address is incorporated into the local Address Resolution Protocol (ARP) / Neighbor Discovery Protocol (NDP) table in an
      asymmetric IRB design or into the IP Virtual Routing and Forwarding
      (IP-VRF) routing table in a symmetric IRB design. This facilitates
      routed traffic across the network overlay. For additional context on
      EVPN-IRB forwarding modes, refer to <span>[<a href="#RFC9135" class="cite xref">RFC9135</a>]</span>.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">To support the EVPN mobility procedure, a single sequence number
      mobility attribute is advertised with the combined MAC+IP route. This
      approach, which resolves both MAC and IP reachability with a single
      sequence number, inherently assumes a fixed 1:1 mapping between an IP
      address and MAC address. While this fixed 1:1 mapping is a common use
      case and is addressed via the existing mobility procedure defined in
      <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>, there are additional IRB scenarios that do not
      adhere to this assumption. Such scenarios are prevalent in virtualized
      host environments where hosts connected to an EVPN network are Virtual
      Machines (VMs) or containerized workloads. The following IRB mobility
      scenarios are considered:<a href="#section-1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-3.1">
            A host move results in the host's IP address and MAC address moving together.<a href="#section-1-3.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-3.2">
            A host move results in the host's IP address moving to a new MAC address association.<a href="#section-1-3.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-3.3">
            A host move results in the host's MAC address moving to a new IP address association.<a href="#section-1-3.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-1-4">While the existing mobility procedure can manage the MAC+IP address
      move in the first scenario, the subsequent scenarios lead to new MAC-IP
      address associations. Therefore, a single sequence number assigned
      independently for each {MAC address, IP address} is insufficient to determine
      the most recent reachability for both MAC address and IP address, unless
      the sequence number assignment algorithm allows for changing MAC-IP
      address bindings across moves.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">This document updates the sequence number assignment procedures
      defined in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> to 1) adequately
      address mobility support across EVPN-IRB overlay use cases that permit
      MAC-IP address bindings to change across host moves and
      2) support mobility for both MAC and IP route components carried in an
      EVPN RT-2 for these use cases.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">Additionally, for hosts on an Ethernet Segment Identifier (ESI) that
      is multi-homed to multiple Provider Edge (PE) devices, additional
      procedures are specified to ensure synchronized sequence number
      assignments across the multi-homing devices.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">This document addresses mobility for the following cases, independent
      of the overlay encapsulation (e.g., MPLS, Segment Routing over IPv6
      (SRv6), and Network Virtualization Overlay (NVO) tunnel):<a href="#section-1-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-8.1">Symmetric EVPN-IRB overlay<a href="#section-1-8.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-8.2">Asymmetric EVPN-IRB overlay<a href="#section-1-8.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-8.3">Routed EVPN overlay<a href="#section-1-8.3" class="pilcrow">¶</a>
</li>
      </ul>
<div id="doc-structure">
<section id="section-1.1">
        <h3 id="name-document-structure">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-document-structure" class="section-name selfRef">Document Structure</a>
        </h3>
<p id="section-1.1-1">The following sections of the document are informative:<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-2.1">
            <a href="#Background-Problem-Statement" class="auto internal xref">Section 3</a> provides the
            necessary background and problem statement being addressed in this
            document.<a href="#section-1.1-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-2.2">
            <a href="#Design-Considerations" class="auto internal xref">Section 4</a> lists the resulting design
     considerations for the document.<a href="#section-1.1-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-2.3">
            <a href="#Solution-Components" class="auto internal xref">Section 5</a> lists the main solution
            components that are foundational for the specifications that
            follow in subsequent sections.<a href="#section-1.1-2.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.1-3">The following sections of the document are normative:<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-4.1">
            <a href="#Methods-for-Sequence-Number-Assignment" class="auto internal xref">Section 6</a> describes
            the mobility and sequence number assignment procedures in an
            EVPN-IRB overlay that are required to address the scenarios described in
            <a href="#Design-Considerations" class="auto internal xref">Section 4</a>.<a href="#section-1.1-4.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-4.2">
            <a href="#Routed-Overlay" class="auto internal xref">Section 7</a> describes the mobility procedures
     for a routed overlay network as opposed to an IRB overlay.<a href="#section-1.1-4.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-4.3">
            <a href="#Duplicate-Host-Detection" class="auto internal xref">Section 8</a> describes corresponding
            duplicate detection procedures for EVPN-IRB and routed overlays.<a href="#section-1.1-4.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="Req">
<section id="section-2">
      <h2 id="name-requirements-language-and-t">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-requirements-language-and-t" class="section-name selfRef">Requirements Language and Terminology</a>
      </h2>
<p id="section-2-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>",
    "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>",
    "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>",
    "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be
    interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they appear in all capitals, as
    shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<div id="Abbr">
<section id="section-2.1">
        <h3 id="name-abbreviations">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-abbreviations" class="section-name selfRef">Abbreviations</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-2.1-1">
          <dt id="section-2.1-1.1">ARP:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.2">Address Resolution Protocol <span>[<a href="#RFC0826" class="cite xref">RFC0826</a>]</span>. 
        ARP references in this document are equally applicable to both ARP and NDP.<a href="#section-2.1-1.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.3">CE:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.4">Customer Edge.<a href="#section-2.1-1.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.5">ES:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.6">Ethernet Segment. A physical ethernet or LAG port that 
        connects an access device to an EVPN PE, as defined in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>.<a href="#section-2.1-1.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.7">EVPN PE:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.8">Ethernet VPN Provider Edge.  A PE switch router in an 
        EVPN-IRB network that runs overlay BGP-EVPN control planes and connects to 
        overlay CE host devices. An EVPN PE may also be the first-hop L3 gateway for 
        CE host devices. This document refers to EVPN PE as a logical function in an 
        EVPN-IRB network. This EVPN PE function may be physically hosted on a ToR 
        switching device or at layer(s) above the ToR in the Clos fabric. An EVPN PE 
        is typically also an IP or MPLS tunnel endpoint for overlay VPN flows.<a href="#section-2.1-1.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.9">EVPN-IRB:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.10">Ethernet VPN Integrated Routing and Bridging. A BGP-EVPN 
        distributed control plane that is based on the integrated routing and bridging 
        fabric overlay discussed in <span>[<a href="#RFC9135" class="cite xref">RFC9135</a>]</span>.<a href="#section-2.1-1.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.11">L2:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.12">Layer 2.<a href="#section-2.1-1.12" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.13">L3:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.14">Layer 3.<a href="#section-2.1-1.14" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.15">LAG:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.16">Link Aggregation Group.<a href="#section-2.1-1.16" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.17">MC-LAG:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.18">Multi-Chassis Link Aggregation Group.<a href="#section-2.1-1.18" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.19">MPLS:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.20">Multiprotocol Label Switching (as specified in <span>[<a href="#RFC3031" class="cite xref">RFC3031</a>]</span>).<a href="#section-2.1-1.20" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.21">NDP:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.22">Neighbor Discovery Protocol (for IPv6 <span>[<a href="#RFC4861" class="cite xref">RFC4861</a>]</span>).<a href="#section-2.1-1.22" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.23">NVO:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.24">Network Virtualization Overlay.<a href="#section-2.1-1.24" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.25">NVO3:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.26">Network Virtualization over Layer 3 (as specified in 
        <span>[<a href="#RFC8926" class="cite xref">RFC8926</a>]</span>).<a href="#section-2.1-1.26" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.27">PE:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.28">Provider Edge.<a href="#section-2.1-1.28" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.29">RT-2:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.30">Route Type 2. EVPN RT-2 carrying both MAC address and IP 
        address reachability as specified in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>.<a href="#section-2.1-1.30" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.31">RT-5:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.32">Route Type 5. EVPN RT-5 carrying IP prefix reachability 
        as specified in <span>[<a href="#RFC9136" class="cite xref">RFC9136</a>]</span>.<a href="#section-2.1-1.32" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.33">SRv6:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.34">Segment Routing over IPv6 (as specified in <span>[<a href="#RFC8986" class="cite xref">RFC8986</a>]</span>).<a href="#section-2.1-1.34" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.35">ToR:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.36">Top-of-Rack.<a href="#section-2.1-1.36" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.37">VM:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.38">Virtual Machine (or containerized workloads).<a href="#section-2.1-1.38" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.39">VXLAN:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-1.40">Virtual eXtensible Local Area Network (as specified 
        in <span>[<a href="#RFC7348" class="cite xref">RFC7348</a>]</span>).<a href="#section-2.1-1.40" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="Defn">
<section id="section-2.2">
        <h3 id="name-definitions">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-definitions" class="section-name selfRef">Definitions</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-2.2-1">
          <dt id="section-2.2-1.1">Asymmetric EVPN-IRB:</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-1.2">A design approach used in EVPN-based
         networks <span>[<a href="#RFC9135" class="cite xref">RFC9135</a>]</span> to handle L2 and L3 forwarding. In
         this approach, only the ingress PE router performs routing for
         inter-subnet traffic, while the egress PE router performs
         bridging.<a href="#section-2.2-1.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.3">EVPN all-active multi-homing:</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-1.4">A redundancy and
         load-sharing mechanism used in EVPN networks. This method allows
         multiple PE devices to simultaneously provide L2 and L3
         connectivity to a single CE device or network segment.<a href="#section-2.2-1.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.5">Host:</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-1.6">In this document, generically refers to any
         user or CE endpoint attached to an EVPN-IRB network, which may be a VM,
         containerized workload, physical endpoint, or CE device.<a href="#section-2.2-1.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.7">MAC-IP address:</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-1.8">The IPv4 and/or IPv6 address
         and MAC address binding for an overlay host.<a href="#section-2.2-1.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.9">Overlay:</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-1.10">L2 and L3 VPNs that are enabled
         via NVO3, VXLAN, SRv6, or MPLS service-layer encapsulation.<a href="#section-2.2-1.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.11">Peer-Sync-Local MAC-IP route:</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-1.12">The learned BGP
         EVPN MAC-IP route for a host that is directly attached to a local
         multi-homed ES.<a href="#section-2.2-1.12" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.13">Peer-Sync-Local MAC-IP sequence number:</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-1.14">The sequence number
         received with a Peer-Sync-Local MAC-IP route.<a href="#section-2.2-1.14" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.15">Peer-Sync-Local MAC route:</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-1.16">The learned BGP EVPN MAC route for
         a host that is directly attached to a local multi-homed ES.<a href="#section-2.2-1.16" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.17">Peer-Sync-Local MAC sequence number:</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-1.18">The sequence number
         received with a Peer-Sync-Local MAC route.<a href="#section-2.2-1.18" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.19">Symmetric EVPN-IRB:</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-1.20">A specific design approach used in
         EVPN-based networks <span>[<a href="#RFC9135" class="cite xref">RFC9135</a>]</span> to handle both L2 and L3
         forwarding within the same network infrastructure. The key
         characteristic of symmetric EVPN-IRB is that both ingress and egress
         PE routers perform routing for inter-subnet traffic.<a href="#section-2.2-1.20" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.21">Underlay:</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-1.22">An IP, MPLS, or SRv6 fabric core network that
         provides routed reachability between EVPN PEs.<a href="#section-2.2-1.22" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="Background-Problem-Statement">
<section id="section-3">
      <h2 id="name-background-and-problem-stat">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-background-and-problem-stat" class="section-name selfRef">Background and Problem Statement</a>
      </h2>
<div id="Optional-MAC-RT-2">
<section id="section-3.1">
        <h3 id="name-optional-mac-only-rt-2">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-optional-mac-only-rt-2" class="section-name selfRef">Optional MAC-Only RT-2</a>
        </h3>
<p id="section-3.1-1">In an EVPN-IRB scenario where a single MAC+IP RT-2 advertisement
 carries both IP and MAC routes, a MAC-only RT-2 advertisement becomes
 redundant for host MAC addresses already advertised via
 MAC+IP RT-2. Consequently, the advertisement of a local MAC-only RT-2
 is optional at an EVPN PE. This consideration is important for
 mobility scenarios discussed in subsequent sections. It is noteworthy
 that a local MAC route and its assigned sequence number are still
 maintained locally on a PE, and only the advertisement of this route
 to other PEs is optional.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">MAC-only RT-2 advertisements may still be issued for non-IP host
 MAC addresses that are not included in MAC+IP RT-2 advertisements.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Mobility-Use-Cases">
<section id="section-3.2">
        <h3 id="name-mobility-use-cases">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-mobility-use-cases" class="section-name selfRef">Mobility Use Cases</a>
        </h3>
<p id="section-3.2-1">This section outlines the IRB mobility use cases addressed in this
        document. Detailed procedures to handle these scenarios are provided
        in Sections <a href="#Methods-for-Sequence-Number-Assignment" class="auto internal xref">6</a> and <a href="#Routed-Overlay" class="auto internal xref">7</a>. The following IRB mobility scenarios are considered:<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-2.1">A host move results in both the host's IP and MAC addresses
          moving together.<a href="#section-3.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-2.2">A host move results in the host's IP address moving to a new MAC
          address association.<a href="#section-3.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-2.3">A host move results in the host's MAC address moving to a new IP
          address association.<a href="#section-3.2-2.3" class="pilcrow">¶</a>
</li>
        </ul>
<div id="Host-MAC-IP-Move">
<section id="section-3.2.1">
          <h4 id="name-host-macip-address-move">
<a href="#section-3.2.1" class="section-number selfRef">3.2.1. </a><a href="#name-host-macip-address-move" class="section-name selfRef">Host MAC+IP Address Move</a>
          </h4>
<p id="section-3.2.1-1">This is the baseline scenario where a host move results in both
          the host's MAC and IP addresses moving together without altering the
          MAC-IP address binding. The existing MAC route mobility procedures
          defined in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> can be leveraged to support this
          MAC+IP address mobility scenario.<a href="#section-3.2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Host-IP-Move-to-new-MAC">
<section id="section-3.2.2">
          <h4 id="name-host-ip-address-move-to-new">
<a href="#section-3.2.2" class="section-number selfRef">3.2.2. </a><a href="#name-host-ip-address-move-to-new" class="section-name selfRef">Host IP Address Move to New MAC Address</a>
          </h4>
<p id="section-3.2.2-1">This scenario involves a host move where the host's IP address is
          reassigned to a new MAC address.<a href="#section-3.2.2-1" class="pilcrow">¶</a></p>
<div id="Host-Reload">
<section id="section-3.2.2.1">
            <h5 id="name-host-reload">
<a href="#section-3.2.2.1" class="section-number selfRef">3.2.2.1. </a><a href="#name-host-reload" class="section-name selfRef">Host Reload</a>
            </h5>
<p id="section-3.2.2.1-1">A host reload or orchestrated move may cause a host to be
            re-spawned at the same or new PE location, resulting in a new MAC
            address assignment while retaining the existing IP address. This
            results in the host's IP address moving to a new MAC address
            binding, as shown below:<a href="#section-3.2.2.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.2.2.1-2">
<pre>
              IP-a, MAC-a ---&gt; IP-a, MAC-b
</pre><a href="#section-3.2.2.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="MAC-Sharing">
<section id="section-3.2.2.2">
            <h5 id="name-mac-address-sharing">
<a href="#section-3.2.2.2" class="section-number selfRef">3.2.2.2. </a><a href="#name-mac-address-sharing" class="section-name selfRef">MAC Address Sharing</a>
            </h5>
<p id="section-3.2.2.2-1">This scenario considers cases where multiple hosts, each with a
            unique IP address, share a common MAC address. A host move results
            in a new MAC address binding for the host IP address. For example,
            hosts running on a single physical server might share the same MAC
            address. Alternatively, an L2 access network behind a firewall may
            have all host IP addresses learned with a common firewall MAC
            address. In these "shared MAC" scenarios, multiple local MAC-IP
            ARP/NDP entries may be learned with the same MAC address. A host
            IP address move to a new physical server could result in a new MAC
            address association for the host IP.<a href="#section-3.2.2.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Problem">
<section id="section-3.2.2.3">
            <h5 id="name-problem">
<a href="#section-3.2.2.3" class="section-number selfRef">3.2.2.3. </a><a href="#name-problem" class="section-name selfRef">Problem</a>
            </h5>
<p id="section-3.2.2.3-1">In the aforementioned scenarios, a combined MAC+IP EVPN RT-2
            advertised with a single sequence number attribute assumes a fixed
            IP-to-MAC address mapping. A host IP address move to a new MAC
            address breaks this assumption and results in a new MAC+IP
            route. If this new route is independently assigned a new sequence
            number, the sequence number can no longer determine the most
            recent host IP reachability in a symmetric EVPN-IRB design or the
            most recent IP-to-MAC address binding in an asymmetric EVPN-IRB
            design.<a href="#section-3.2.2.3-1" class="pilcrow">¶</a></p>
<div id="problem">
<figure id="figure-1">
              <div class="alignLeft art-text artwork" id="section-3.2.2.3-2.1">
<pre>
                     +------------------------+
                     | Underlay Network Fabric|
                     +------------------------+

  +-----+   +-----+      +-----+   +-----+      +-----+   +-----+
  | PE1 |   | PE2 |      | PE3 |   | PE4 |      | PE5 |   | PE6 |
  +-----+   +-----+      +-----+   +-----+      +-----+   +-----+
     \         /            \         /            \         /
      \ ESI-1 /              \ ESI-2 /              \ ESI-3 /
       \     /                \     /                \     /
       +\---/+                +\---/+                +\---/+
       | \ / |                | \ / |                | \ / |
       +--+--+                +--+--+                +--+--+
          |                      |                      |
     Server-M1              Server-M2              Server-M3
          |                      |                      |
   VM-IP1, VM-IP2         VM-IP3, VM-IP4         VM-IP5, VM-IP6
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a></figcaption></figure>
</div>
<p id="section-3.2.2.3-3"><a href="#problem" class="auto internal xref">Figure 1</a> illustrates a topology with host VMs
            sharing the physical server MAC address. In steady state, the
            IP1-M1 route is learned at PE1 and PE2 and advertised to remote
            PEs with a sequence number N. If VM-IP1 moves to Server-M2, ARP or
            NDP-based local learning at PE3 and PE4 would result in a new
            IP1-M2 route. If this new route is assigned a sequence number of
            0, the mobility procedure for VM-IP1 will not trigger across the
            overlay network.<a href="#section-3.2.2.3-3" class="pilcrow">¶</a></p>
<p id="section-3.2.2.3-4">A sequence number assignment procedure must be defined to
            unambiguously determine the most recent IP address reachability,
            IP-to-MAC address binding, and MAC address reachability for such
            MAC address sharing scenarios.<a href="#section-3.2.2.3-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="Host-MAC-move-to-new-IP">
<section id="section-3.2.3">
          <h4 id="name-host-mac-address-move-to-ne">
<a href="#section-3.2.3" class="section-number selfRef">3.2.3. </a><a href="#name-host-mac-address-move-to-ne" class="section-name selfRef">Host MAC Address Move to New IP Address</a>
          </h4>
<p id="section-3.2.3-1">This is a scenario where a host move or re-provisioning behind
          the same or new PE location may result in the host getting a new IP
          address assigned while keeping the same MAC address.<a href="#section-3.2.3-1" class="pilcrow">¶</a></p>
<div id="Problem-2">
<section id="section-3.2.3.1">
            <h5 id="name-problem-2">
<a href="#section-3.2.3.1" class="section-number selfRef">3.2.3.1. </a><a href="#name-problem-2" class="section-name selfRef">Problem</a>
            </h5>
<p id="section-3.2.3.1-1">The complication in this scenario arises because MAC address
            reachability can be carried via a combined MAC+IP route, whereas a
            MAC-only route may not be advertised. Associating a single
            sequence number with the MAC+IP route implicitly assumes a fixed
            MAC-to-IP mapping. A MAC address move that results in a new IP
            address association breaks this assumption and creates a new
            MAC+IP route. If this new route independently receives a new
            sequence number, the sequence number can no longer reliably
            indicate the most recent host MAC address reachability.<a href="#section-3.2.3.1-1" class="pilcrow">¶</a></p>
<div id="problem-2">
<figure id="figure-2">
              <div class="alignLeft art-text artwork" id="section-3.2.3.1-2.1">
<pre>
                     +------------------------+
                     | Underlay Network Fabric|
                     +------------------------+
  +-----+   +-----+      +-----+   +-----+      +-----+   +-----+
  | PE1 |   | PE2 |      | PE3 |   | PE4 |      | PE5 |   | PE6 |
  +-----+   +-----+      +-----+   +-----+      +-----+   +-----+
     \         /            \         /            \         /
      \ ESI-1 /              \ ESI-2 /              \ ESI-3 /
       \     /                \     /                \     /
       +\---/+                +\---/+                +\---/+
       | \ / |                | \ / |                | \ / |
       +--+--+                +--+--+                +--+--+
          |                      |                      |
       Server1                Server2                Server3
          |                      |                      |
    IP1-M1, IP2-M2        IP3-M3, IP4-M4         IP5-M5, IP6-M6
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a></figcaption></figure>
</div>
<p id="section-3.2.3.1-3">For instance, consider that host IP1-M1 is learned locally at PE1 and
            PE2 and advertised to remote hosts with sequence number N. If this
            host with MAC address M1 is re-provisioned at Server2 and assigned
            a different IP address (e.g., IP7), then the new IP7-M1 route learned
            at PE3 and PE4 would be advertised with sequence number
            0. Consequently, L3 reachability to IP7 would be established
            across the overlay, but the MAC mobility procedure for M1 would
            not trigger due to the new MAC-IP route advertisement. Advertising
            an optional MAC-only route with its sequence number would trigger
            MAC mobility per <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>. However, without this
            additional advertisement, a single sequence number associated with
            a combined MAC+IP route may be insufficient to update MAC address
            reachability across the overlay.<a href="#section-3.2.3.1-3" class="pilcrow">¶</a></p>
<p id="section-3.2.3.1-4">A MAC-IP route sequence number assignment procedure is required
            to unambiguously determine the most recent MAC address
            reachability in the previous scenarios without advertising a
            MAC-only route.<a href="#section-3.2.3.1-4" class="pilcrow">¶</a></p>
<p id="section-3.2.3.1-5">Furthermore, upon learning new reachability for IP7-M1 via PE3
            and PE4, PE1 and PE2 must probe and delete any local IPs
            associated with the MAC address M1, such as IP1-M1.<a href="#section-3.2.3.1-5" class="pilcrow">¶</a></p>
<p id="section-3.2.3.1-6">It could be argued that the MAC mobility sequence number
            defined in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> applies only to the MAC route
            part of a MAC-IP route, thus covering this scenario. This
            interpretation could serve as a clarification to <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> and supports the need for a common sequence
            number assignment procedure across all MAC-IP mobility scenarios
            detailed in this document.<a href="#section-3.2.3.1-6" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="EVPN-All-Active-multi-homed-ES">
<section id="section-3.3">
        <h3 id="name-evpn-all-active-multi-homed">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-evpn-all-active-multi-homed" class="section-name selfRef">EVPN All Active Multi-Homed ES</a>
        </h3>
<div id="pece_link_failure">
<figure id="figure-3">
          <div class="alignLeft art-text artwork" id="section-3.3-1.1">
<pre>
                      +------------------------+
                      | Underlay Network Fabric|
                      +------------------------+

              +-----+   +-----+       +-----+   +-----+
              | PE1 |   | PE2 |       | PE3 |   | PE4 |
              +-----+   +-----+       +-----+   +-----+
                \\         //           \\         //
                 \\ ESI-1 //             \\ ESI-2 //
                  \\     //               \\     //
                  +\\---//+               +\\---//+
                  | \\ // |               | \\ // |
                  +---+---+               +---+---+
                      |                       |
                     CEs                     CEs
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a></figcaption></figure>
</div>
<p id="section-3.3-2">Consider an EVPN-IRB overlay network illustrated in <a href="#pece_link_failure" class="auto internal xref">Figure 3</a>, where hosts are multi-homed to two or
        more PE devices via an all-active multi-homed ES.
        MAC and ARP/NDP entries learned on a local ES may also be
        synchronized across the multi-homing PE devices sharing this ES. This
        synchronization enables local switching of intra- and inter-subnet
        ECMP traffic flows from remote hosts. Thus, local MAC and ARP/NDP
        entries on a given ES may be learned through local learning and/or
        synchronization from another PE device sharing the same ES.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<p id="section-3.3-3">For a host that is multi-homed to multiple PE devices via an
        all-active ES interface, the local learning of the host MAC and MAC-IP
        routes at each PE device is an independent asynchronous event,
        dependent on traffic flow or an ARP/NDP response from the host hashing to
        a directly connected PE on the MC-LAG interface. Consequently, the
        sequence number mobility attribute value assigned to a locally learned
        MAC or MAC-IP route at each device may not always be the same,
        depending on transient states on the device at the time of local
        learning.<a href="#section-3.3-3" class="pilcrow">¶</a></p>
<p id="section-3.3-4">For example, consider a host that is deleted from ESI-2 and moved
        to ESI-1. It is possible for the host to be learned on PE1 following
        the deletion of the remote route from PE3 and PE4 while being learned
        on PE2 prior to the deletion of the remote route from PE3 and PE4. In
        this case, PE1 would process local host route learning as a new route
        and assign a sequence number of 0, while PE2 would process local host
        route learning as a remote-to-local move and assign a sequence number
        of N+1, where N is the existing sequence number assigned at PE3 and
        PE4.<a href="#section-3.3-4" class="pilcrow">¶</a></p>
<p id="section-3.3-5">Inconsistent sequence numbers advertised from multi-homing devices:<a href="#section-3.3-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3-6.1">
            <p id="section-3.3-6.1.1">Create ambiguity regarding how remote PEs should handle paths
            with the same ESI but different sequence numbers. A remote PE
            might not program ECMP paths if it receives routes with different
            sequence numbers from a set of multi-homing PEs sharing the same
            ESI.<a href="#section-3.3-6.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.3-6.2">
            <p id="section-3.3-6.2.1">Break consistent route versioning across the network overlay
            that is needed for EVPN mobility procedures to work.<a href="#section-3.3-6.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-3.3-7">For instance, in this inconsistent state, PE2 would drop a remote
        route received for the same host with sequence number N (since its
        local sequence number is N+1), while PE1 would install it as the best
        route (since its local sequence number is 0).<a href="#section-3.3-7" class="pilcrow">¶</a></p>
<p id="section-3.3-8">To support mobility for multi-homed hosts using the sequence number
        mobility attribute, local MAC and MAC-IP routes learned on a
        multi-homed ES must be advertised with the same sequence number by all
        PE devices to which the ES is multi-homed. There is a need for a
        mechanism to ensure the consistency of sequence numbers assigned
        across these PEs.<a href="#section-3.3-8" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="Design-Considerations">
<section id="section-4">
      <h2 id="name-design-considerations">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-design-considerations" class="section-name selfRef">Design Considerations</a>
      </h2>
<p id="section-4-1">To summarize, the sequence number assignment scheme and
      implementation must consider the following:<a href="#section-4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-2.1">
          <p id="section-4-2.1.1">Synchronization across multi-homing PE devices:<a href="#section-4-2.1.1" class="pilcrow">¶</a></p>
<p id="section-4-2.1.2">MAC+IP routes may be learned on an ES that is multi-homed to
   multiple PE devices, requiring synchronized sequence numbers across
   these devices.<a href="#section-4-2.1.2" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-2.2">
          <p id="section-4-2.2.1">Optional MAC-only RT-2:<a href="#section-4-2.2.1" class="pilcrow">¶</a></p>
<p id="section-4-2.2.2">In an IRB scenario, MAC-only RT-2 is
          optional and may not be advertised alongside MAC+IP RT-2.<a href="#section-4-2.2.2" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-2.3">
          <p id="section-4-2.3.1">Multiple IPs associated with a single MAC:<a href="#section-4-2.3.1" class="pilcrow">¶</a></p>
<p id="section-4-2.3.2">A single MAC address may be linked to multiple IP addresses,
   indicating multiple host IPs sharing a common MAC address.<a href="#section-4-2.3.2" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-2.4">
          <p id="section-4-2.4.1">Host IP movement:<a href="#section-4-2.4.1" class="pilcrow">¶</a></p>
<p id="section-4-2.4.2">A host IP address move may result in a new MAC
          address association, necessitating a new IP address to MAC address
          association and a new MAC+IP route.<a href="#section-4-2.4.2" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-2.5">
          <p id="section-4-2.5.1">Host MAC address movement:<a href="#section-4-2.5.1" class="pilcrow">¶</a></p>
<p id="section-4-2.5.2">A host MAC address move may result in a new IP address
   association, requiring a new MAC address to IP address association and a new
   MAC+IP route.<a href="#section-4-2.5.2" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-2.6">
          <p id="section-4-2.6.1">Local MAC-IP route learning via ARP/NDP:<a href="#section-4-2.6.1" class="pilcrow">¶</a></p>
<p id="section-4-2.6.2">Local MAC-IP route learning via ARP/NDP always accompanies a
   local MAC route learning event resulting from the ARP/NDP
   packet. However, MAC and MAC-IP route learning can occur in any
   order.<a href="#section-4-2.6.2" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-2.7">
          <p id="section-4-2.7.1">Separate sequence numbers for MAC and IP routes:<a href="#section-4-2.7.1" class="pilcrow">¶</a></p>
<p id="section-4-2.7.2">Use cases that do not maintain a constant 1:1 MAC-IP address
   mapping across moves could potentially be addressed by using
   separate sequence numbers for MAC and IP route components of the
   MAC+IP route. However, maintaining two separate sequence numbers
   adds significant complexity, debugging challenges, and backward
   compatibility issues. Therefore, this document addresses these
   requirements using a single sequence number attribute.<a href="#section-4-2.7.2" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="Solution-Components">
<section id="section-5">
      <h2 id="name-solution-components">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-solution-components" class="section-name selfRef">Solution Components</a>
      </h2>
<p id="section-5-1">This section outlines the main components of the EVPN-IRB mobility
      solution specified in this document. Subsequent sections will detail the
      exact sequence number assignment procedures based on the concepts
      described here.<a href="#section-5-1" class="pilcrow">¶</a></p>
<div id="Sequence-Number-Inheritance">
<section id="section-5.1">
        <h3 id="name-sequence-number-inheritance">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-sequence-number-inheritance" class="section-name selfRef">Sequence Number Inheritance</a>
        </h3>
<p id="section-5.1-1">The key concept presented here is to treat a local MAC-IP route as
        a child of the corresponding local MAC route within the local context
        of a PE. This ensures that the local MAC-IP route inherits the
        sequence number attribute from the parent local MAC-only route. In
        terms of object dependencies, this could be represented as the MAC-IP
        route being a dependent child of the parent MAC route:<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1-2">
<pre>
  Mx-IPx -----&gt; Mx (seq# = N)
</pre><a href="#section-5.1-2" class="pilcrow">¶</a>
</div>
<p id="section-5.1-3">Thus, both the parent MAC route and the child MAC-IP routes share a
       common sequence number associated with the parent MAC route. This
       ensures that a single sequence number attribute carried in a combined
       MAC+IP route represents the sequence number for both a MAC-only route
       and a MAC+IP route, making the advertisement of the MAC-only route
       truly optional. This enables a MAC address to assume a different IP
       address upon moving and still establish the most recent reachability to
       the MAC address across the overlay network via the mobility attribute
       associated with the MAC+IP route advertisement. For instance, when Mx
       moves to a new location, it would be assigned a higher sequence number
       at its new location per <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>. If this move results
       in Mx assuming a different IP address, IPz, the local Mx+IPz route
       would inherit the new sequence number from Mx.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1-4">Local MAC and local MAC-IP routes are typically sourced from data
        plane learning and ARP/NDP learning, respectively, and can be learned
        in the control plane in any order. Implementations can either replicate
        the inherited sequence number in each MAC-IP entry or maintain a
        single attribute in the parent MAC route by creating a forward
        reference local MAC object for cases where a local MAC-IP route is
        learned before the local MAC route.<a href="#section-5.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="MAC-Sharing-2">
<section id="section-5.2">
        <h3 id="name-mac-address-sharing-2">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-mac-address-sharing-2" class="section-name selfRef">MAC Address Sharing</a>
        </h3>
<p id="section-5.2-1">For the shared MAC address scenario, multiple local MAC-IP sibling
        routes inherit the sequence number attribute from the common parent
        MAC route:<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<div id="mac_sharing">
<figure id="figure-4">
          <div class="alignLeft art-text artwork" id="section-5.2-2.1">
<pre>
  Mx-IP1 -----
   |          |
  Mx-IP2 -----
    .         |
    .         +---&gt; Mx (seq# = N)
    .         |
  Mx-IPw -----
    |         |
  Mx-IPx -----
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a></figcaption></figure>
</div>
<p id="section-5.2-3">In such cases, a host-IP move to a different physical server
        results in the IP moving to a new MAC address binding. A new MAC-IP
        route resulting from this move must be advertised with a sequence
        number higher than the previous MAC-IP route for this IP, advertised
        from the prior location. For example, consider a route Mx-IPx
        currently advertised with sequence number N from PE1. If IPx moves to
        a new physical server behind PE2 and is associated with MAC Mz, the
        new local Mz-IPx route must be advertised with a sequence number
        higher than N and higher than the previous Mz sequence number M. This allows PE
        devices, including PE1, PE2, and other remote PE devices, to determine
        and program the most recent MAC address binding and reachability for
        the IP. PE1, upon receiving this new Mz-IPx route with sequence number
        N+1 or M+1 (whichever is greater), would update IPx reachability via
        PE2 for symmetric IRB and update IPx's ARP/NDP binding to Mz for
        asymmetric IRB while clearing and withdrawing the stale Mx-IPx route
        with the lower sequence number.<a href="#section-5.2-3" class="pilcrow">¶</a></p>
<p id="section-5.2-4">This implies that the sequence number associated with the local MAC
        route Mz and all local MAC-IP child routes of Mz at PE2 must be
        incremented to N+1 or M+1 if the previous Mz sequence number M is
        greater than N and is re-advertised across the overlay. While this
        re-advertisement of all local MAC-IP children routes affected by the
        parent MAC route adds overhead, it also avoids the need for
        maintaining and advertising two separate sequence number attributes
        for IP and MAC route components of MAC+IP RT-2. Implementations must
        be able to look up MAC-IP routes for a given IP and update the
        sequence number for its parent MAC route and for its MAC-IP route
        children.<a href="#section-5.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Sequence-Number-Synchronization">
<section id="section-5.3">
        <h3 id="name-sequence-number-synchroniza">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-sequence-number-synchroniza" class="section-name selfRef">Sequence Number Synchronization</a>
        </h3>
<p id="section-5.3-1">To support mobility for multi-homed hosts, local MAC and MAC-IP
        routes learned on a shared ES must be advertised with the same
        sequence number by all PE devices to which the ES is multi-homed. This
        applies to local MAC-only routes as well. MAC and MAC-IP routes for a
        host that is attached to a local ES may be learned via data
        plane and ARP/NDP, respectively, as well as via BGP EVPN from another
        multi-homing PE to achieve local switching. MAC and MAC-IP routes
        learned via data plane and ARP/NDP are respectively referred
        to as local MAC routes and local MAC-IP routes. BGP EVPN learned MAC
        and MAC-IP routes for a host that is attached to a local ES are
        respectively referred to as Peer-Sync-Local MAC routes and
        Peer-Sync-Local MAC-IP routes as they are effectively local routes
        synchronized from a multi-homing peer. Local and Peer-Sync-Local route
        learning can occur in any order. Local MAC-IP routes advertised by all
        multi-homing PE devices sharing the ES must carry the same sequence
        number, independent of the order in which they are learned. This
        implies that:<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-2.1">
            <p id="section-5.3-2.1.1">On local or Peer-Sync-Local MAC-IP route learning, the sequence
            number for the local MAC-IP route must be compared and updated to
            the higher value.<a href="#section-5.3-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.3-2.2">
            <p id="section-5.3-2.2.1">On local or Peer-Sync-Local MAC route learning, the sequence
            number for the local MAC route must be compared and updated to the
            higher value.<a href="#section-5.3-2.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-5.3-3">If an update to the local MAC-IP route sequence number is required
        as a result of the comparison with the Peer-Sync-Local MAC-IP route,
        it essentially amounts to a sequence number update on the parent local
        MAC route, resulting in an inherited sequence number update on the
        local MAC-IP route.<a href="#section-5.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="Methods-for-Sequence-Number-Assignment">
<section id="section-6">
      <h2 id="name-methods-for-sequence-number">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-methods-for-sequence-number" class="section-name selfRef">Methods for Sequence Number Assignment</a>
      </h2>
<p id="section-6-1">The following sections specify the sequence number assignment
      procedures required for local MAC, local MAC-IP, Peer-Sync-Local MAC,
      and Peer-Sync-Local MAC-IP route learning events to achieve the
      outlined objectives.<a href="#section-6-1" class="pilcrow">¶</a></p>
<div id="Local-MAC-IP-learning">
<section id="section-6.1">
        <h3 id="name-local-mac-ip-learning">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-local-mac-ip-learning" class="section-name selfRef">Local MAC-IP Learning</a>
        </h3>
<p id="section-6.1-1">A local Mx-IPx learning via ARP or NDP should result in the
        computation or re-computation of the parent MAC route Mx's sequence
        number. After this, the MAC-IP route Mx-IPx inherits the parent
        MAC route's sequence number. The parent MAC route Mx sequence number
        <span class="bcp14">MUST</span> be computed as follows:<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1-2.1">It <span class="bcp14">MUST</span> be higher than any existing remote MAC route
          for Mx, as per <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>.<a href="#section-6.1-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.1-2.2">It <span class="bcp14">MUST</span> be at least equal to the corresponding
          Peer-Sync-Local MAC route sequence number, if present.<a href="#section-6.1-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.1-2.3">It <span class="bcp14">MUST</span> be higher than the "Mz" sequence number
          if the IP is also associated with a different remote MAC "Mz".<a href="#section-6.1-2.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-6.1-3">Once the new sequence number for the MAC route Mx is computed as per
        the above criteria, all local MAC-IP routes associated with MAC Mx
        <span class="bcp14">MUST</span> inherit the updated sequence number.<a href="#section-6.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Local-MAC-learning">
<section id="section-6.2">
        <h3 id="name-local-mac-learning">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-local-mac-learning" class="section-name selfRef">Local MAC Learning</a>
        </h3>
<p id="section-6.2-1">The local MAC route Mx sequence number <span class="bcp14">MUST</span> be computed as follows:<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.2-2.1">It <span class="bcp14">MUST</span> be higher than any existing remote MAC
          route for Mx, as per <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>.<a href="#section-6.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-2.2">
            <p id="section-6.2-2.2.1">It <span class="bcp14">MUST</span> be at least equal to the corresponding
          Peer-Sync-Local MAC route sequence number if one is present.<a href="#section-6.2-2.2.1" class="pilcrow">¶</a></p>
<p id="section-6.2-2.2.2">If the
          existing local MAC route sequence number is less than the
          Peer-Sync-Local MAC route sequence number, then the PE
          <span class="bcp14">MUST</span> update the local MAC route sequence number to be
          equal to the Peer-Sync-Local MAC route sequence number.<a href="#section-6.2-2.2.2" class="pilcrow">¶</a></p>
<p id="section-6.2-2.2.3">If the
          existing local MAC route sequence number is equal to or greater than
          the Peer-Sync-Local MAC route sequence number, no update is required
          to the local MAC route sequence number.<a href="#section-6.2-2.2.3" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-6.2-3">Once the new sequence number for the MAC route Mx is computed as per
        the above criteria, all local MAC-IP routes associated with the MAC route
        Mx <span class="bcp14">MUST</span> inherit the updated sequence number. Note that
        the local MAC route sequence number might already be present if there
        was a local MAC-IP route learned prior to the local MAC route. In
        this case, the above may not result in any change in the local MAC
        route sequence number.<a href="#section-6.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Remote-MAC-OR-MAC-IP-Update">
<section id="section-6.3">
        <h3 id="name-remote-mac-or-mac-ip-route-">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-remote-mac-or-mac-ip-route-" class="section-name selfRef">Remote MAC or MAC-IP Route Update</a>
        </h3>
<p id="section-6.3-1">Upon receiving a remote MAC or MAC-IP route update associated with
        a MAC address Mx with a sequence number that is either:<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.3-2.1">
            <p id="section-6.3-2.1.1">higher than the sequence number assigned to a local
            route for MAC Mx or<a href="#section-6.3-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.3-2.2">
            <p id="section-6.3-2.2.1">equal to the sequence number assigned to a local route for MAC
     Mx, but the remote route is selected as best due to a lower VXLAN
     Tunnel End Point (VTEP) IP as per <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>,<a href="#section-6.3-2.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-6.3-3">the following actions are <span class="bcp14">REQUIRED</span> on the receiving
        PE:<a href="#section-6.3-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.3-4.1">
            <p id="section-6.3-4.1.1">The PE <span class="bcp14">MUST</span> trigger a probe and deletion
            procedure for all local MAC-IP routes associated with MAC Mx.<a href="#section-6.3-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.3-4.2">
            <p id="section-6.3-4.2.1">The PE <span class="bcp14">MUST</span> trigger a deletion procedure for the
            local MAC route for Mx.<a href="#section-6.3-4.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="Peer-Sync-MAC-update">
<section id="section-6.4">
        <h3 id="name-peer-sync-local-mac-route-u">
<a href="#section-6.4" class="section-number selfRef">6.4. </a><a href="#name-peer-sync-local-mac-route-u" class="section-name selfRef">Peer-Sync-Local MAC Route Update</a>
        </h3>
<p id="section-6.4-1">Upon receiving a Peer-Sync-Local MAC route, the corresponding local
        MAC route Mx sequence number (if present) should be re-computed as
        follows:<a href="#section-6.4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.4-2.1">
            <p id="section-6.4-2.1.1">If the current sequence number is less than the received
            Peer-Sync-Local MAC route sequence number, it <span class="bcp14">MUST</span>
            be increased to be equal to the received Peer-Sync-Local MAC route
            sequence number.<a href="#section-6.4-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.4-2.2">
            <p id="section-6.4-2.2.1">If a local MAC route sequence number is updated as a result of
            the above, all local MAC-IP routes associated with MAC route Mx
            <span class="bcp14">MUST</span> inherit the updated sequence number.<a href="#section-6.4-2.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="Peer-Sync-MAC-IP-update">
<section id="section-6.5">
        <h3 id="name-peer-sync-local-mac-ip-rout">
<a href="#section-6.5" class="section-number selfRef">6.5. </a><a href="#name-peer-sync-local-mac-ip-rout" class="section-name selfRef">Peer-Sync-Local MAC-IP Route Update</a>
        </h3>
<p id="section-6.5-1">Because the MAC-only RT-2 advertisement is optional, receiving a
        Peer-Sync-Local MAC-IP route for a locally attached host results in a
        derived Peer-Sync-Local MAC Mx route entry. The corresponding local MAC
        Mx route sequence number (if present) should be re-computed as
        follows:<a href="#section-6.5-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.5-2.1">
            <p id="section-6.5-2.1.1">If the current sequence number is less than the received
            Peer-Sync-Local MAC route sequence number, it <span class="bcp14">MUST</span>
            be increased to be equal to the received Peer-Sync-Local MAC route
            sequence number.<a href="#section-6.5-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.5-2.2">
            <p id="section-6.5-2.2.1">If a local MAC route sequence number is updated as a result of
            the above, all local MAC-IP routes associated with MAC route Mx
            <span class="bcp14">MUST</span> inherit the updated sequence number.<a href="#section-6.5-2.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="Inter-Op">
<section id="section-6.6">
        <h3 id="name-interoperability">
<a href="#section-6.6" class="section-number selfRef">6.6. </a><a href="#name-interoperability" class="section-name selfRef">Interoperability</a>
        </h3>
<p id="section-6.6-1">Generally, if all PE nodes in the overlay network follow the above
        sequence number assignment procedures and the PE is advertising both
        MAC+IP and MAC routes, the sequence numbers advertised with the MAC
        and MAC+IP routes with the same MAC address would always be the
        same. However, an interoperability scenario with a different
        implementation could arise, where a non-compliant PE implementation
        assigns and advertises independent sequence numbers to MAC and MAC+IP
        routes. To handle this case, if different sequence numbers are received for
        remote MAC+IP routes and corresponding remote MAC routes from a
        remote PE, the sequence number associated with the remote MAC route
        <span class="bcp14">MUST</span> be:<a href="#section-6.6-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.6-2.1">
            <p id="section-6.6-2.1.1">computed and interpreted as the highest of all received sequence
            numbers with remote MAC+IP and MAC routes with the same MAC address
            and<a href="#section-6.6-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.6-2.2">
            <p id="section-6.6-2.2.1">re-computed on a MAC or MAC+IP route withdraw as per the above.<a href="#section-6.6-2.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-6.6-3">A MAC and/or IP address move to the local PE would then result in
        the MAC (and hence all MAC-IP) route sequence numbers being
        incremented from the above computed remote MAC route sequence
        number.<a href="#section-6.6-3" class="pilcrow">¶</a></p>
<p id="section-6.6-4">If MAC-only routes are not advertised at all, and different
        sequence numbers are received with multiple MAC+IP routes for a given
        MAC address, the sequence number associated with the derived remote
        MAC route should still be computed as the highest of all received
        MAC+IP route sequence numbers with the same MAC address.<a href="#section-6.6-4" class="pilcrow">¶</a></p>
<p id="section-6.6-5">Note that it is not required for a PE to maintain explicit
        knowledge of a remote PE being compliant or non-compliant with this
        specification as long as it implements the above logic to handle
        remote sequence numbers that are not synchronized between MAC route
        and MAC-IP route(s) for the same remote MAC address.<a href="#section-6.6-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="MAC-Sharing-Race-Condition">
<section id="section-6.7">
        <h3 id="name-mac-address-sharing-race-co">
<a href="#section-6.7" class="section-number selfRef">6.7. </a><a href="#name-mac-address-sharing-race-co" class="section-name selfRef">MAC Address Sharing Race Condition</a>
        </h3>
<p id="section-6.7-1">In a MAC address sharing use case described in <a href="#MAC-Sharing-2" class="auto internal xref">Section 5.2</a>, a race condition is possible with
        simultaneous host moves between a pair of PEs. The example scenario below
        illustrates this race condition and its remediation:<a href="#section-6.7-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.7-2.1">
            <p id="section-6.7-2.1.1">PE1 with locally attached host IPs I1 and I2 that share MAC
            address M1. As a result, PE1 has local MAC-IP routes I1-M1 and
            I2-M1.<a href="#section-6.7-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.7-2.2">
            <p id="section-6.7-2.2.1">PE2 with locally attached host IPs I3 and I4 that share MAC
            address M2. As a result, PE2 has local MAC-IP routes I3-M2 and
            I4-M2.<a href="#section-6.7-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.7-2.3">
            <p id="section-6.7-2.3.1">A simultaneous move of I1 from PE1 to PE2 and of I3 from PE2 to
            PE1 will cause I1's MAC address to change from M1 to M2 and cause
            I3's MAC address to change from M2 to M1.<a href="#section-6.7-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.7-2.4">
            <p id="section-6.7-2.4.1">Route I3-M1 may be learned on PE1 before I1's local entry I1-M1
            has been probed out on PE1 and/or route I1-M2 may be learned on PE2
            before I3's local entry I3-M2 has been probed out on PE2.<a href="#section-6.7-2.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.7-2.5">
            <p id="section-6.7-2.5.1">In such a scenario, MAC route sequence number assignment rules
            defined in <a href="#Local-MAC-IP-learning" class="auto internal xref">Section 6.1</a> will cause new
            MAC-IP routes I1-M2 and I3-M1 to bounce between PE1 and PE2 with
            sequence number increments until stale entries I1-M1 and I3-M2
            have been probed out from PE1 and PE2, respectively.<a href="#section-6.7-2.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-6.7-3">An implementation <span class="bcp14">MUST</span> ensure proper probing
        procedures to remove stale ARP, NDP, and local MAC entries, following
        a move, on learning remote routes as defined in <a href="#Remote-MAC-OR-MAC-IP-Update" class="auto internal xref">Section 6.3</a> (and as per <span>[<a href="#RFC9135" class="cite xref">RFC9135</a>]</span>) to minimize exposure to this race condition.<a href="#section-6.7-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Mobility-Convergence">
<section id="section-6.8">
        <h3 id="name-mobility-convergence">
<a href="#section-6.8" class="section-number selfRef">6.8. </a><a href="#name-mobility-convergence" class="section-name selfRef">Mobility Convergence</a>
        </h3>
<p id="section-6.8-1">This section is optional and details ARP and NDP probing procedures
        that <span class="bcp14">MAY</span> be implemented to achieve faster host
        relearning and convergence on mobility events. PE1 and PE2 are used
        as two example PEs in the network to illustrate the mobility
        convergence scenarios in this section.<a href="#section-6.8-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.8-2.1">
            <p id="section-6.8-2.1.1">Following a host move from PE1 to PE2, the host's MAC address
            is discovered at PE2 as a local MAC route via data frames received
            from the host. If PE2 has a prior remote MAC-IP host route for
            this MAC address from PE1, an ARP/NDP probe <span class="bcp14">MAY</span> be
            triggered at PE2 to learn the MAC-IP address as a local adjacency
            and trigger EVPN RT-2 advertisement for this MAC-IP address across
            the overlay with new reachability via PE2. This results in a
            reliable "event-based" host IP learning triggered by a "MAC
            address learning event" across the overlay, and hence, a faster
            convergence of overlay routed flows to the host.<a href="#section-6.8-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.8-2.2">
            <p id="section-6.8-2.2.1">Following a host move from PE1 to PE2, once PE1 receives a MAC
            or MAC-IP route from PE2 with a higher sequence number, an ARP/NDP
            probe <span class="bcp14">MAY</span> be triggered at PE1 to clear the stale
            local MAC-IP neighbor adjacency or to relearn the local MAC-IP in
            case the host has moved back or is duplicated.<a href="#section-6.8-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.8-2.3">
            <p id="section-6.8-2.3.1">Following a local MAC route age-out, if there is a local IP
            adjacency with this MAC address, an ARP/NDP probe
            <span class="bcp14">MAY</span> be triggered for this IP to either relearn the
            local MAC route and maintain local L3 and L2 reachability to this
            host or to clear the ARP/NDP entry if the host is no longer
            local. This accomplishes the clearance of stale ARP/NDP entries
            triggered by a MAC age-out event even when the ARP/NDP refresh
            timer is longer than the MAC age-out timer. Clearing stale IP
            neighbor entries facilitates traffic convergence if the host was
            silent and not discovered at its new location. Once the stale
            neighbor entry for the host is cleared, routed traffic flow
            destined for the host can re-trigger ARP/NDP discovery for this
            host at the new location.<a href="#section-6.8-2.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div id="Generalized-Probing-Logic">
<section id="section-6.8.1">
          <h4 id="name-generalized-probing-logic">
<a href="#section-6.8.1" class="section-number selfRef">6.8.1. </a><a href="#name-generalized-probing-logic" class="section-name selfRef">Generalized Probing Logic</a>
          </h4>
<p id="section-6.8.1-1">The above probing logic may be generalized as probing for an IP
          neighbor anytime a resolving parent MAC route is inconsistent with
          the MAC-IP neighbor route, where inconsistency is defined as being
          not present or conflicting in terms of the route source being local
          or remote. The MAC-IP route to parent MAC route relationship
          described in <a href="#Sequence-Number-Inheritance" class="auto internal xref">Section 5.1</a>
            <span class="bcp14">MAY</span> be used to achieve this logic.<a href="#section-6.8.1-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="Routed-Overlay">
<section id="section-7">
      <h2 id="name-routed-overlay">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-routed-overlay" class="section-name selfRef">Routed Overlay</a>
      </h2>
<p id="section-7-1">An additional use case involves traffic to an end host in the overlay
      being entirely IP routed. In such a purely routed overlay:<a href="#section-7-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7-2.1">
          <p id="section-7-2.1.1">A host MAC route is never advertised in the EVPN overlay control plane.<a href="#section-7-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-7-2.2">
          <p id="section-7-2.2.1">Host /32 or /128 IP reachability is distributed across the
          overlay via EVPN Route Type 5 (RT-5) along with a zero or non-zero
          ESI.<a href="#section-7-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-7-2.3">
          <p id="section-7-2.3.1">An overlay IP subnet may still be stretched across the underlay
          fabric. However, intra-subnet traffic across the stretched overlay
          is never bridged.<a href="#section-7-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-7-2.4">
          <p id="section-7-2.4.1">Both inter-subnet and intra-subnet traffic in the overlay is IP routed at the EVPN PE.<a href="#section-7-2.4.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-7-3">Please refer to <span>[<a href="#RFC7814" class="cite xref">RFC7814</a>]</span> for more details.<a href="#section-7-3" class="pilcrow">¶</a></p>
<p id="section-7-4">Host mobility within the stretched subnet still needs support. In the
      absence of host MAC routes, the sequence number mobility Extended
      Community specified in <span><a href="https://rfc-editor.org/rfc/rfc7432#section-7.7" class="relref">Section 7.7</a> of [<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> <span class="bcp14">MAY</span> be associated with a /32 or /128 host
      IP prefix advertised via EVPN Route Type 5. MAC mobility procedures
      defined in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> can be applied to host IP prefixes
      as follows:<a href="#section-7-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7-5.1">
          <p id="section-7-5.1.1">On local learning of a host IP on a new ESI, the host IP
          <span class="bcp14">MUST</span> be advertised with a sequence number higher than
          what is currently advertised with the old ESI.<a href="#section-7-5.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-7-5.2">
          <p id="section-7-5.2.1">On receiving a host IP route advertisement with a higher sequence
          number, a PE <span class="bcp14">MUST</span> trigger ARP/NDP probe and deletion
          procedures on any local route for that IP with a lower sequence
          number. The PE will update the forwarding entry to point to the
          remote route with a higher sequence number and send an ARP/NDP probe
          for the local IP route. If the IP has moved, the probe will time
          out, and the local IP host route will be deleted.<a href="#section-7-5.2.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-7-6">Note that there is only one sequence number associated with a host
      route at any time. For previous use cases where a host MAC address is
      advertised along with the host IP address, a sequence number is only
      associated with the MAC address. If the MAC is not advertised, as in
      this use case, a sequence number is associated with the host IP address.<a href="#section-7-6" class="pilcrow">¶</a></p>
<p id="section-7-7">This mobility procedure does not apply to "anycast" IPv6 hosts
      advertised via Neighbor Advertisement (NA) messages with the Override Flag (O Flag) set to
      0. Refer to <span>[<a href="#RFC9161" class="cite xref">RFC9161</a>]</span> for more details.<a href="#section-7-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Duplicate-Host-Detection">
<section id="section-8">
      <h2 id="name-duplicate-host-detection">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-duplicate-host-detection" class="section-name selfRef">Duplicate Host Detection</a>
      </h2>
<p id="section-8-1">Duplicate host detection scenarios across EVPN-IRB can be classified as follows:<a href="#section-8-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8-2.1">
          <p id="section-8-2.1.1">Scenario A: Two hosts have the same MAC address (host IPs may or may not be duplicates).<a href="#section-8-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-8-2.2">
          <p id="section-8-2.2.1">Scenario B: Two hosts have the same IP address but different MAC addresses.<a href="#section-8-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-8-2.3">
          <p id="section-8-2.3.1">Scenario C: Two hosts have the same IP address, and the host MAC address is not advertised.<a href="#section-8-2.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-8-3">As specified in <span>[<a href="#RFC9161" class="cite xref">RFC9161</a>]</span>, duplicate detection
      procedures for Scenarios B and C do not apply to "anycast" IPv6 hosts
      advertised via NA messages with the Override Flag (O Flag) set to 0.<a href="#section-8-3" class="pilcrow">¶</a></p>
<div id="Scenario-A">
<section id="section-8.1">
        <h3 id="name-scenario-a">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-scenario-a" class="section-name selfRef">Scenario A</a>
        </h3>
<p id="section-8.1-1">In cases where duplicate hosts share the same MAC address, the MAC
 address is detected as duplicate using the duplicate MAC address
 detection procedure described in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>. Corresponding MAC-IP routes with the same MAC
 address do not require separate duplicate detection and
 <span class="bcp14">MUST</span> inherit the duplicate property from the MAC
 route. If a MAC route is marked as duplicate, all associated MAC-IP
 routes <span class="bcp14">MUST</span> also be treated as duplicates. Duplicate
 detection procedures need only be applied to MAC routes.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Scenario-B">
<section id="section-8.2">
        <h3 id="name-scenario-b">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-scenario-b" class="section-name selfRef">Scenario B</a>
        </h3>
<p id="section-8.2-1">Misconfigurations may lead to different MAC addresses being
        assigned the same IP address. This scenario is not detected by the
        duplicate MAC address detection procedures from <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> and can result in incorrect routing of traffic
        destined for the IP address.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<p id="section-8.2-2">Such situations, when detected locally, are identified as a move
        scenario through the local MAC route sequence number computation
        procedure described in <a href="#Local-MAC-IP-learning" class="auto internal xref">Section 6.1</a>:<a href="#section-8.2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.2-3.1">
            <p id="section-8.2-3.1.1">If the IP is associated with a different remote MAC "Mz", the
            sequence number <span class="bcp14">MUST</span> be higher than the "Mz"
            sequence number.<a href="#section-8.2-3.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-8.2-4">This move results in a sequence number increment for the local MAC
        route due to the remote MAC-IP route being associated with a different MAC
        address, which counts as an "IP move" against the IP, independent of the
        MAC. The duplicate detection procedure described in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> can then be applied to the IP entity independent of
        the MAC. Once an IP is detected as duplicate, the corresponding MAC-IP
        route should be treated as duplicate. Associated MAC routes and any
        other MAC-IP routes related to this MAC should not be affected.<a href="#section-8.2-4" class="pilcrow">¶</a></p>
<div id="Duplicate-IP-Detection-Procedure-for-Scenario-B">
<section id="section-8.2.1">
          <h4 id="name-duplicate-ip-detection-proc">
<a href="#section-8.2.1" class="section-number selfRef">8.2.1. </a><a href="#name-duplicate-ip-detection-proc" class="section-name selfRef">Duplicate IP Detection Procedure for Scenario B</a>
          </h4>
<p id="section-8.2.1-1">The duplicate IP detection procedure for this scenario is
          specified in <span>[<a href="#RFC9161" class="cite xref">RFC9161</a>]</span>. An "IP move" is further
          clarified as follows:<a href="#section-8.2.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.2.1-2.1">
              <p id="section-8.2.1-2.1.1">Upon learning a local MAC-IP route Mx-IPx, check for existing
              remote or local routes for IPx with a different MAC address
              association (Mz-IPx). If found, count this as an "IP move" for
              IPx, independent of the MAC.<a href="#section-8.2.1-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-8.2.1-2.2">
              <p id="section-8.2.1-2.2.1">Upon learning a remote MAC-IP route Mz-IPx, check for
              existing local routes for IPx with a different MAC address
              association (Mx-IPx). If found, count this as an "IP move" for
              IPx, independent of the MAC.<a href="#section-8.2.1-2.2.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-8.2.1-3">A MAC-IP route <span class="bcp14">MUST</span> be treated as duplicate if either:<a href="#section-8.2.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.2.1-4.1">the corresponding MAC route is marked as duplicate via the
            existing detection procedure, or<a href="#section-8.2.1-4.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-8.2.1-4.2">the corresponding IP is marked as duplicate via the extended
            procedure described above.<a href="#section-8.2.1-4.2" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="Scenario-C">
<section id="section-8.3">
        <h3 id="name-scenario-c">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-scenario-c" class="section-name selfRef">Scenario C</a>
        </h3>
<p id="section-8.3-1">As described in <a href="#Routed-Overlay" class="auto internal xref">Section 7</a>, in a purely routed
        overlay scenario where only a host IP is advertised via EVPN RT-5 with
        a sequence number mobility attribute, procedures similar to the
        duplicate MAC address detection procedures specified in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> can be applied to
        IP-only host routes for duplicate IP detection as follows:<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.3-2.1">
            <p id="section-8.3-2.1.1">Upon learning a local host IP route IPx, check for existing
            remote or local routes for IPx with a different ESI
            association. If found, count this as an "IP move" for IPx.<a href="#section-8.3-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-8.3-2.2">
            <p id="section-8.3-2.2.1">Upon learning a remote host IP route IPx, check for existing
            local routes for IPx with a different ESI association. If found,
            count this as an "IP move" for IPx.<a href="#section-8.3-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-8.3-2.3">
            <p id="section-8.3-2.3.1">Using configurable parameters "N" and "M", if "N" IP moves are
            detected within "M" seconds for IPx, then IPx should be treated as
            duplicate.<a href="#section-8.3-2.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="Duplicate-Host-Recovery">
<section id="section-8.4">
        <h3 id="name-duplicate-host-recovery">
<a href="#section-8.4" class="section-number selfRef">8.4. </a><a href="#name-duplicate-host-recovery" class="section-name selfRef">Duplicate Host Recovery</a>
        </h3>
<p id="section-8.4-1">Once a MAC or IP address is marked as duplicate and frozen,
        corrective action must be taken to un-provision one of the duplicate
        MAC or IP addresses. Un-provisioning refers to corrective action taken
        on the host side. Following this correction, normal operation will not
        resume until the duplicate MAC or IP address ages out, unless
        additional action is taken to expedite recovery.<a href="#section-8.4-1" class="pilcrow">¶</a></p>
<p id="section-8.4-2">Possible additional corrective actions for faster recovery are
        outlined in the following sections.<a href="#section-8.4-2" class="pilcrow">¶</a></p>
<div id="Route-Un-freezing-Configuration">
<section id="section-8.4.1">
          <h4 id="name-route-unfreezing-configurat">
<a href="#section-8.4.1" class="section-number selfRef">8.4.1. </a><a href="#name-route-unfreezing-configurat" class="section-name selfRef">Route Unfreezing Configuration</a>
          </h4>
<p id="section-8.4.1-1">Unfreezing the duplicate or frozen MAC or IP route via a 
          command-line interface (CLI) can be used to recover from the duplicate 
          and frozen state following corrective un-provisioning of the duplicate 
          MAC or IP address. Unfreezing the MAC or IP route should result in 
          advertising it with a sequence number higher than that advertised from 
          the other location.<a href="#section-8.4.1-1" class="pilcrow">¶</a></p>
<p id="section-8.4.1-2">Two scenarios exist:<a href="#section-8.4.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.4.1-3.1">
              <p id="section-8.4.1-3.1.1">Scenario A: The duplicate MAC or IP address is un-provisioned
              at the location where it was not marked as duplicate.<a href="#section-8.4.1-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-8.4.1-3.2">
              <p id="section-8.4.1-3.2.1">Scenario B: The duplicate MAC or IP address is un-provisioned
              at the location where it was marked as duplicate.<a href="#section-8.4.1-3.2.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-8.4.1-4">Unfreezing the duplicate and frozen MAC or IP route will result
          in recovery to a steady state as follows:<a href="#section-8.4.1-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.4.1-5.1">
              <p id="section-8.4.1-5.1.1">Scenario A: If the duplicate MAC or IP address is
              un-provisioned at the non-duplicate location, unfreezing the
              route at the frozen location results in advertising with a
              higher sequence number, leading to automatic clearing of the
              local route at the un-provisioned location via ARP/NDP PROBE and
              DELETE procedures.<a href="#section-8.4.1-5.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-8.4.1-5.2">
              <p id="section-8.4.1-5.2.1">Scenario B: If the duplicate host is un-provisioned at the
              duplicate location, unfreezing the route triggers an
              advertisement with a higher sequence number to the other
              location, prompting relearning and clearing of the local route
              at the original location upon receiving the remote route
              advertisement.<a href="#section-8.4.1-5.2.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-8.4.1-6">The probes referred to in these scenarios are event-driven probes
          resulting from receiving a route with a higher sequence
          number. Periodic probes resulting from refresh timers may also occur
          independently.<a href="#section-8.4.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Route-Clearing-Configuration">
<section id="section-8.4.2">
          <h4 id="name-route-clearing-configuratio">
<a href="#section-8.4.2" class="section-number selfRef">8.4.2. </a><a href="#name-route-clearing-configuratio" class="section-name selfRef">Route Clearing Configuration</a>
          </h4>
<p id="section-8.4.2-1">In addition to the above, route clearing CLIs may be used to
          clear the local MAC or IP route after the duplicate host is
          un-provisioned:<a href="#section-8.4.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.4.2-2.1">
              <p id="section-8.4.2-2.1.1">Clear MAC CLI: Used to clear a duplicate MAC route.<a href="#section-8.4.2-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-8.4.2-2.2">
              <p id="section-8.4.2-2.2.1">Clear ARP/NDP: Used to clear a duplicate IP route.<a href="#section-8.4.2-2.2.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-8.4.2-3">The route unfreeze CLI may still need to be executed if the route
          was un-provisioned and cleared from the non-duplicate
          location. Given that unfreezing the route via the CLI would result
          in auto-clearing from the un-provisioned location, as explained
          earlier, using a route clearing CLI for recovery from the duplicate 
          state is optional.<a href="#section-8.4.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="Security">
<section id="section-9">
      <h2 id="name-security-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-9-1">The security considerations discussed in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> and
      <span>[<a href="#RFC9135" class="cite xref">RFC9135</a>]</span> apply to this document. Methods described in
      this document further extend the consumption of sequence numbers for IRB
      deployments. Hence, they are subject to the same considerations if the
      control plane or data plane was to be compromised. As an example, if the
      host-facing data plane is compromised, spoofing attempts could result in
      a legitimate host being perceived as moved, eventually resulting in the
      host being marked as duplicate. The considerations for protecting control
      and data planes described in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> are equally
      applicable to such mobility spoofing use cases.<a href="#section-9-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="IANA">
<section id="section-10">
      <h2 id="name-iana-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-10-1">This document has no IANA actions.<a href="#section-10-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-11">
      <h2 id="name-references">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-11.1">
        <h3 id="name-normative-references">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC0826">[RFC0826]</dt>
        <dd>
<span class="refAuthor">Plummer, D.</span>, <span class="refTitle">"An Ethernet Address Resolution Protocol: Or Converting Network Protocol Addresses to 48.bit Ethernet Address for Transmission on Ethernet Hardware"</span>, <span class="seriesInfo">STD 37</span>, <span class="seriesInfo">RFC 826</span>, <span class="seriesInfo">DOI 10.17487/RFC0826</span>, <time datetime="1982-11" class="refDate">November 1982</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc826">https://www.rfc-editor.org/info/rfc826</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4861">[RFC4861]</dt>
        <dd>
<span class="refAuthor">Narten, T.</span>, <span class="refAuthor">Nordmark, E.</span>, <span class="refAuthor">Simpson, W.</span>, and <span class="refAuthor">H. Soliman</span>, <span class="refTitle">"Neighbor Discovery for IP version 6 (IPv6)"</span>, <span class="seriesInfo">RFC 4861</span>, <span class="seriesInfo">DOI 10.17487/RFC4861</span>, <time datetime="2007-09" class="refDate">September 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4861">https://www.rfc-editor.org/info/rfc4861</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7432">[RFC7432]</dt>
        <dd>
<span class="refAuthor">Sajassi, A., Ed.</span>, <span class="refAuthor">Aggarwal, R.</span>, <span class="refAuthor">Bitar, N.</span>, <span class="refAuthor">Isaac, A.</span>, <span class="refAuthor">Uttaro, J.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">W. Henderickx</span>, <span class="refTitle">"BGP MPLS-Based Ethernet VPN"</span>, <span class="seriesInfo">RFC 7432</span>, <span class="seriesInfo">DOI 10.17487/RFC7432</span>, <time datetime="2015-02" class="refDate">February 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7432">https://www.rfc-editor.org/info/rfc7432</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9135">[RFC9135]</dt>
        <dd>
<span class="refAuthor">Sajassi, A.</span>, <span class="refAuthor">Salam, S.</span>, <span class="refAuthor">Thoria, S.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">J. Rabadan</span>, <span class="refTitle">"Integrated Routing and Bridging in Ethernet VPN (EVPN)"</span>, <span class="seriesInfo">RFC 9135</span>, <span class="seriesInfo">DOI 10.17487/RFC9135</span>, <time datetime="2021-10" class="refDate">October 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9135">https://www.rfc-editor.org/info/rfc9135</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9161">[RFC9161]</dt>
      <dd>
<span class="refAuthor">Rabadan, J., Ed.</span>, <span class="refAuthor">Sathappan, S.</span>, <span class="refAuthor">Nagaraj, K.</span>, <span class="refAuthor">Hankins, G.</span>, and <span class="refAuthor">T. King</span>, <span class="refTitle">"Operational Aspects of Proxy ARP/ND in Ethernet Virtual Private Networks"</span>, <span class="seriesInfo">RFC 9161</span>, <span class="seriesInfo">DOI 10.17487/RFC9161</span>, <time datetime="2022-01" class="refDate">January 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9161">https://www.rfc-editor.org/info/rfc9161</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-11.2">
        <h3 id="name-informative-references">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC3031">[RFC3031]</dt>
        <dd>
<span class="refAuthor">Rosen, E.</span>, <span class="refAuthor">Viswanathan, A.</span>, and <span class="refAuthor">R. Callon</span>, <span class="refTitle">"Multiprotocol Label Switching Architecture"</span>, <span class="seriesInfo">RFC 3031</span>, <span class="seriesInfo">DOI 10.17487/RFC3031</span>, <time datetime="2001-01" class="refDate">January 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3031">https://www.rfc-editor.org/info/rfc3031</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7348">[RFC7348]</dt>
        <dd>
<span class="refAuthor">Mahalingam, M.</span>, <span class="refAuthor">Dutt, D.</span>, <span class="refAuthor">Duda, K.</span>, <span class="refAuthor">Agarwal, P.</span>, <span class="refAuthor">Kreeger, L.</span>, <span class="refAuthor">Sridhar, T.</span>, <span class="refAuthor">Bursell, M.</span>, and <span class="refAuthor">C. Wright</span>, <span class="refTitle">"Virtual eXtensible Local Area Network (VXLAN): A Framework for Overlaying Virtualized Layer 2 Networks over Layer 3 Networks"</span>, <span class="seriesInfo">RFC 7348</span>, <span class="seriesInfo">DOI 10.17487/RFC7348</span>, <time datetime="2014-08" class="refDate">August 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7348">https://www.rfc-editor.org/info/rfc7348</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7814">[RFC7814]</dt>
        <dd>
<span class="refAuthor">Xu, X.</span>, <span class="refAuthor">Jacquenet, C.</span>, <span class="refAuthor">Raszuk, R.</span>, <span class="refAuthor">Boyes, T.</span>, and <span class="refAuthor">B. Fee</span>, <span class="refTitle">"Virtual Subnet: A BGP/MPLS IP VPN-Based Subnet Extension Solution"</span>, <span class="seriesInfo">RFC 7814</span>, <span class="seriesInfo">DOI 10.17487/RFC7814</span>, <time datetime="2016-03" class="refDate">March 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7814">https://www.rfc-editor.org/info/rfc7814</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8926">[RFC8926]</dt>
        <dd>
<span class="refAuthor">Gross, J., Ed.</span>, <span class="refAuthor">Ganga, I., Ed.</span>, and <span class="refAuthor">T. Sridhar, Ed.</span>, <span class="refTitle">"Geneve: Generic Network Virtualization Encapsulation"</span>, <span class="seriesInfo">RFC 8926</span>, <span class="seriesInfo">DOI 10.17487/RFC8926</span>, <time datetime="2020-11" class="refDate">November 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8926">https://www.rfc-editor.org/info/rfc8926</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8986">[RFC8986]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Camarillo, P., Ed.</span>, <span class="refAuthor">Leddy, J.</span>, <span class="refAuthor">Voyer, D.</span>, <span class="refAuthor">Matsushima, S.</span>, and <span class="refAuthor">Z. Li</span>, <span class="refTitle">"Segment Routing over IPv6 (SRv6) Network Programming"</span>, <span class="seriesInfo">RFC 8986</span>, <span class="seriesInfo">DOI 10.17487/RFC8986</span>, <time datetime="2021-02" class="refDate">February 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8986">https://www.rfc-editor.org/info/rfc8986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9136">[RFC9136]</dt>
      <dd>
<span class="refAuthor">Rabadan, J., Ed.</span>, <span class="refAuthor">Henderickx, W.</span>, <span class="refAuthor">Drake, J.</span>, <span class="refAuthor">Lin, W.</span>, and <span class="refAuthor">A. Sajassi</span>, <span class="refTitle">"IP Prefix Advertisement in Ethernet VPN (EVPN)"</span>, <span class="seriesInfo">RFC 9136</span>, <span class="seriesInfo">DOI 10.17487/RFC9136</span>, <time datetime="2021-10" class="refDate">October 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9136">https://www.rfc-editor.org/info/rfc9136</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="Acknowledgements">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-A-1">The authors would like to thank <span class="contact-name">Gunter Van de       Velde</span> for the significant contributions to improve the readability of this
      document. The authors would also like to thank <span class="contact-name">Sonal       Agarwal</span> and <span class="contact-name">Larry Kreeger</span> for multiple
      contributions through the implementation process. The authors would like to
      thank <span class="contact-name">Vibov Bhan</span> and <span class="contact-name">Patrice       Brissette</span> for early feedback during the implementation and testing of
      several procedures defined in this document. The authors would like to
      thank <span class="contact-name">Wen Lin</span> for a detailed review and valuable
      comments related to MAC sharing race conditions. The authors would also
      like to thank <span class="contact-name">Saumya Dikshit</span> for a detailed review
      and valuable comments across the document.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Contributors">
<section id="appendix-B">
      <h2 id="name-contributors">
<a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Gunter Van de Velde</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:van_de_velde@nokia.com" class="email">van_de_velde@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Wen Lin</span></div>
<div dir="auto" class="left"><span class="org">Juniper</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:wlin@juniper.net" class="email">wlin@juniper.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Sonal Agarwal</span></div>
<div dir="auto" class="left"><span class="org">Arrcus</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:sonal@arrcus.com" class="email">sonal@arrcus.com</a>
</div>
</address>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Neeraj Malhotra (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div dir="auto" class="left"><span class="street-address">170 W. Tasman Drive</span></div>
<div dir="auto" class="left">
<span class="locality">San Jose</span>, <span class="region">CA</span> <span class="postal-code">95134</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:nmalhotr@cisco.com" class="email">nmalhotr@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ali Sajassi</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div dir="auto" class="left"><span class="street-address">170 W. Tasman Drive</span></div>
<div dir="auto" class="left">
<span class="locality">San Jose</span>, <span class="region">CA</span> <span class="postal-code">95134</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:sajassi@cisco.com" class="email">sajassi@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Aparna Pattekar</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div dir="auto" class="left"><span class="street-address">170 W. Tasman Drive</span></div>
<div dir="auto" class="left">
<span class="locality">San Jose</span>, <span class="region">CA</span> <span class="postal-code">95134</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:apjoshi@cisco.com" class="email">apjoshi@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jorge Rabadan</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div dir="auto" class="left"><span class="street-address">777 E. Middlefield Road</span></div>
<div dir="auto" class="left">
<span class="locality">Mountain View</span>, <span class="region">CA</span> <span class="postal-code">94043</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jorge.rabadan@nokia.com" class="email">jorge.rabadan@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Avinash Lingala</span></div>
<div dir="auto" class="left"><span class="org">AT&amp;T</span></div>
<div dir="auto" class="left"><span class="street-address">3400 W Plano Pkwy</span></div>
<div dir="auto" class="left">
<span class="locality">Plano</span>, <span class="region">TX</span> <span class="postal-code">75075</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ar977m@att.com" class="email">ar977m@att.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">John Drake</span></div>
<div dir="auto" class="left"><span class="org">Independent</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:je_drake@yahoo.com" class="email">je_drake@yahoo.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
