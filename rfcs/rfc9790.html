<!DOCTYPE html>
<html lang="en" class="RFC">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>RFC 9790: IANA Registry and Processing Recommendations for the First Nibble Following a Label Stack</title>
<meta content="Kireeti Kompella" name="author">
<meta content="Stewart Bryant" name="author">
<meta content="Matthew Bocci" name="author">
<meta content="Greg Mirsky" name="author">
<meta content="Loa Andersson" name="author">
<meta content="Jie Dong" name="author">
<meta content='
       
   This document creates a new IANA registry (called the
   "Post-Stack First Nibble" registry) for the first nibble (4-bit field)
   immediately following an MPLS label stack. Furthermore, this document
   presents some requirements for registering new values
   and making the processing of MPLS
   packets easier and more robust.
       
       The relationship between the IANA "Post-Stack First Nibble" registry and the "IP Version Numbers" registry (RFC 2780)
is described in this document. 
       This document updates RFC 4928 by deprecating
   the heuristic method for identifying the type of packet encapsulated
   in MPLS. 
    ' name="description">
<meta content="xml2rfc 3.29.0" name="generator">
<meta content="9790" name="rfc.number">
<!-- Generator version information:
  xml2rfc 3.29.0
    Python 3.9.15
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 5.3.0
    platformdirs 3.8.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    wcwidth 0.2.5
    weasyprint 65.0
-->
<link href="rfc9790.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
@media print {
  svg {
    max-height: 850px;
    max-width: 660px;
  }
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}
.xref {
  overflow-wrap: normal;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    max-width: 100%;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.refSubseries {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: upper-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code, dt tt, dt code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<link href="https://datatracker.ietf.org/doc/draft-ietf-mpls-1stnibble-13" rel="prev">
  <link href="https://dx.doi.org/10.17487/rfc9790" rel="alternate">
  <link href="urn:issn:2070-1721" rel="alternate">
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9790</td>
<td class="center">First Nibble Following Label Stack</td>
<td class="right">July 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">Kompella, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a href="https://www.rfc-editor.org/rfc/rfc9790" class="eref">9790</a></dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a href="https://www.rfc-editor.org/rfc/rfc4928" class="eref">4928</a> </dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-07" class="published">July 2025</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">K. Kompella</div>
<div class="org">Juniper Networks</div>
</div>
<div class="author">
      <div class="author-name">S. Bryant</div>
<div class="org">University of Surrey 5GIC</div>
</div>
<div class="author">
      <div class="author-name">M. Bocci</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">G. Mirsky, <span class="editor">Ed.</span>
</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">L. Andersson</div>
<div class="org">Huawei Technologies</div>
</div>
<div class="author">
      <div class="author-name">J. Dong</div>
<div class="org">Huawei Technologies</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9790</h1>
<h1 id="title">IANA Registry and Processing Recommendations for the First Nibble Following a Label Stack</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">
   This document creates a new IANA registry (called the
   "Post-Stack First Nibble" registry) for the first nibble (4-bit field)
   immediately following an MPLS label stack. Furthermore, this document
   presents some requirements for registering new values
   and making the processing of MPLS
   packets easier and more robust.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">The relationship between the IANA "Post-Stack First Nibble" registry and the "IP Version Numbers" registry (RFC 2780)
is described in this document.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
<p id="section-abstract-3">This document updates RFC 4928 by deprecating
   the heuristic method for identifying the type of packet encapsulated
   in MPLS.<a href="#section-abstract-3" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9790">https://www.rfc-editor.org/info/rfc9790</a></span>.<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-requirements-language" class="internal xref">Requirements Language</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="auto internal xref">1.2</a>.  <a href="#name-definitions" class="internal xref">Definitions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1" class="keepWithNext"><a href="#section-1.3" class="auto internal xref">1.3</a>.  <a href="#name-abbreviations" class="internal xref">Abbreviations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.4">
                <p id="section-toc.1-1.1.2.4.1"><a href="#section-1.4" class="auto internal xref">1.4</a>.  <a href="#name-reference-figures" class="internal xref">Reference Figures</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-rationale" class="internal xref">Rationale</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="auto internal xref">2.1</a>.  <a href="#name-why-look-at-the-first-nibbl" class="internal xref">Why Look at the First Nibble</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.1">
                    <p id="section-toc.1-1.2.2.1.2.1.1"><a href="#section-2.1.1" class="auto internal xref">2.1.1</a>.  <a href="#name-ecmp-load-balancing" class="internal xref">ECMP Load Balancing</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="auto internal xref">2.2</a>.  <a href="#name-updates-to-rfc-4928" class="internal xref">Updates to RFC 4928</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="auto internal xref">2.3</a>.  <a href="#name-why-create-a-registry" class="internal xref">Why Create a Registry</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="auto internal xref">2.4</a>.  <a href="#name-ip-version-numbers-versus-p" class="internal xref">IP Version Numbers Versus Post-Stack First Nibble Values</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a href="#section-2.5" class="auto internal xref">2.5</a>.  <a href="#name-next-step-to-more-determini" class="internal xref">Next Step to More Deterministic Load Balancing in MPLS Networks</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="sect-1">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">
  An MPLS packet consists of a label stack, an optional Post-Stack Header (PSH), and an optional embedded packet (in that order). Examples of PSHs include existing headers such as control words <span>[<a href="#RFC4385" class="cite xref">RFC4385</a>]</span>, BIER (Bit Index Explicit Replication) headers <span>[<a href="#RFC8296" class="cite xref">RFC8296</a>]</span> and the like, as well as new types of PSH being discussed by the MPLS Working Group. 
   However, in the data plane, there are
   very few clues regarding the PSH and no clue as to the type of embedded
   packet; this information is communicated via other means, such as the
   routing protocols that signal the labels in the stack.  Nonetheless,
   in order to better handle an MPLS packet in the data plane, it is
   common practice for network equipment to "guess" the type of embedded
   packet.  Such equipment may also need to process the PSH.
  Both of these require parsing the data after the label
   stack. To do this, the "first nibble" (the top four bits of the
   first octet following the label stack) is often used.
    Although some existing network
   devices may use such a method, it needs to be stressed that the
   correct interpretation of the Post-stack First Nibble (PFN) in a PSH
   can be made only in the context established through the control or
   management plane with the Label Stack Entry (LSE) or group of LSEs
   in the preceding label stack that characterizes the type of the PSH.
   Any attempt to rely on the value in any other context is
   unreliable.
    Because the PFN value
    should not be used to deduce the type of PSH by itself and the space of PFN values is limited,
    the reuse of PFN values is encouraged when possible.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">
   The semantics and usage of the first nibble are not well documented,
   nor are the assignments of values.  This document serves four purposes:<a href="#section-1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-3.1">To document the values already in use.<a href="#section-1-3.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-3.2">To provide a mechanism to document future assignments through the
        creation of a new IANA "Post-Stack First Nibble" registry and
        describe the relationship between it and the IANA "IP Version Numbers" registry
        <span>[<a href="#RFC2780" class="cite xref">RFC2780</a>]</span>.<a href="#section-1-3.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-3.3">Provide a method for tracking usage by requiring more detailed
        documentation.<a href="#section-1-3.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-3.4">To stress that any MPLS packet not carrying plain
      IPv4 or IPv6 packets contains a PSH. This also applies to packets of
      any new version of IP
        (see <a href="#sect-2.3" class="auto internal xref">Section 2.4</a>).<a href="#section-1-3.4" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-1-4">
   <a href="#sect-2.1.1" class="auto internal xref">Section 2.1.1</a> of this document includes an analysis of load-balancing techniques; based on this,
   <a href="#sect-2.1.1.1" class="auto internal xref">Section 2.1.1.1</a> introduces a requirement that deprecates the
    use of the heuristic method for identifying the type
   of packet encapsulated in MPLS and recommends using a dedicated label value for load balancing. The intent is for
   legacy routers to continue operating as they have, with no new problems
   introduced as a result of this document.  However, new implementations
   that follow this document enable more robust network operation.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">Furthermore, this document updates <span>[<a href="#RFC4928" class="cite xref">RFC4928</a>]</span>
   by deprecating the heuristic method for identifying the type of packet
   encapsulated in MPLS. This document clearly states that the type of
   encapsulated packet cannot be determined based on the PFN alone.<a href="#section-1-5" class="pilcrow">¶</a></p>
<div id="req-lang">
<section id="section-1.1">
        <h3 id="name-requirements-language">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
        </h3>
<p id="section-1.1-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
    described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> 
    when, and only when, they appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="definitions">
<section id="section-1.2">
        <h3 id="name-definitions">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-definitions" class="section-name selfRef">Definitions</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-1.2-1">
          <dt id="section-1.2-1.1">Deprecation:</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.2">Regardless of how the deprecation is understood in other IETF
          documents, the interpretation in this document is that if a practice
          has been deprecated, that practice should not be included in new
          implementations or deployed in new deployments.<a href="#section-1.2-1.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.3">Embedded Packet:</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.4">A packet that follows immediately after the MPLS label
          stack and an optional PSH.  The embedded packet could be an IPv4 or IPv6 packet, an
          Ethernet packet (for Virtual Private LAN Service (VPLS) <span>[<a href="#RFC4761" class="cite xref">RFC4761</a>]</span> <span>[<a href="#RFC4762" class="cite xref">RFC4762</a>]</span> or
          EVPN <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>), or some other type
          of Layer 2 frame <span>[<a href="#RFC4446" class="cite xref">RFC4446</a>]</span>.<a href="#section-1.2-1.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.5">Label Stack:</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.6">A label stack is represented as a consecutive sequence of "label stack entries" (four-octet fields) after the Layer 2 header but before any network layer header. The last label stack entry of a label stack has its Bottom of Stack bit set.<a href="#section-1.2-1.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.7">MPLS Packet:</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.8">A packet whose Layer 2 header declares the type to be MPLS.  For
          example, the Ethertype is 0x8847 or 0x8848 for Ethernet, and 
          the Protocol field is 0x0281 or 0x0283 for PPP.<a href="#section-1.2-1.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.9">MPLS Payload:</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.10">All data after the label stack and any optional PSHs. It
     is possible that more than one type of PSH may be present in a
     packet, and some PSH specifications might allow multiple PSHs of
     the same type. The presence rules for multiple PSHs are a matter
     for the documents that define those PSHs, e.g.,
     <span>[<a href="#I-D.ietf-mpls-mna-ps-hdr" class="cite xref">MNA-PS-HDR</a>]</span>.<a href="#section-1.2-1.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.11">Post-stack First Nibble (PFN):</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.12">The most significant four bits of the first octet following the
          label stack.<a href="#section-1.2-1.12" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.13">Post-Stack Header (PSH):</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.14">A field containing information that may be
     of interest to the egress Label Switching Router (LSR) or transit
     LSRs.  Examples include a control word
   <span>[<a href="#RFC4385" class="cite xref">RFC4385</a>]</span> <span>[<a href="#RFC8964" class="cite xref">RFC8964</a>]</span> or an
     associated channel header <span>[<a href="#RFC4385" class="cite xref">RFC4385</a>]</span> <span>[<a href="#RFC5586" class="cite xref">RFC5586</a>]</span> <span>[<a href="#RFC9546" class="cite xref">RFC9546</a>]</span>.<a href="#section-1.2-1.14" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="abbrev-sec">
<section id="section-1.3">
        <h3 id="name-abbreviations">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-abbreviations" class="section-name selfRef">Abbreviations</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-1.3-1">
          <dt id="section-1.3-1.1">BIER:</dt>
          <dd style="margin-left: 3.5em" id="section-1.3-1.2">Bit Index Explicit Replication<a href="#section-1.3-1.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.3-1.3">FAT:</dt>
          <dd style="margin-left: 3.5em" id="section-1.3-1.4">Flow-Aware Transport<a href="#section-1.3-1.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.3-1.5">LSE:</dt>
          <dd style="margin-left: 3.5em" id="section-1.3-1.6">Label Stack Entry<a href="#section-1.3-1.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.3-1.7">LSR:</dt>
          <dd style="margin-left: 3.5em" id="section-1.3-1.8">Label Switching Router<a href="#section-1.3-1.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.3-1.9">MNA:</dt>
          <dd style="margin-left: 3.5em" id="section-1.3-1.10">MPLS Network Action<a href="#section-1.3-1.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.3-1.11">PFN:</dt>
          <dd style="margin-left: 3.5em" id="section-1.3-1.12">Post-stack First Nibble<a href="#section-1.3-1.12" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.3-1.13">PSH:</dt>
          <dd style="margin-left: 3.5em" id="section-1.3-1.14">Post-Stack Header<a href="#section-1.3-1.14" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.3-1.15">PW:</dt>
          <dd style="margin-left: 3.5em" id="section-1.3-1.16">Pseudowire<a href="#section-1.3-1.16" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.3-1.17">SPL:</dt>
          <dd style="margin-left: 3.5em" id="section-1.3-1.18">Special-Purpose Label<a href="#section-1.3-1.18" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="sect-figs">
<section id="section-1.4">
        <h3 id="name-reference-figures">
<a href="#section-1.4" class="section-number selfRef">1.4. </a><a href="#name-reference-figures" class="section-name selfRef">Reference Figures</a>
        </h3>
<p id="section-1.4-1"><a href="#mpls-packet-fig" class="auto internal xref">Figure 1</a> echoes the format of MPLS packets as defined in
           <span>[<a href="#RFC3032" class="cite xref">RFC3032</a>]</span> where TC indicates the Traffic Class field <span>[<a href="#RFC5462" class="cite xref">RFC5462</a>]</span>
           that replaced the EXP (Experimental Use) field, S is the Bottom of Stack flag, and TTL
           is the Time to Live field.<a href="#section-1.4-1" class="pilcrow">¶</a></p>
<span id="name-example-of-an-mpls-packet-w"></span><div id="mpls-packet-fig">
<figure id="figure-1">
          <div class="alignLeft art-text artwork" id="section-1.4-2.1">
<pre>
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\
X |                        Layer 2 Header                         | |
  |                                                               | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+/
                                            TC   S       TTL
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\
Y |             Label-1                   | TC  |0|      TTL      | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |             Label-2                   | TC  |0|      TTL      | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |               ...                     | TC  |0|      TTL      | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |             Label-n                   | TC  |1|      TTL      | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+/
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-example-of-an-mpls-packet-w" class="selfRef">Example of an MPLS Packet with Label Stack</a>
          </figcaption></figure>
</div>
<span id="name-examples-of-an-mpls-packet-"></span><div id="examples-fig">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-1.4-3.1">
<pre>
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\
A | (PFN) |                   IP header                           | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                             data                              | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                 ...                                |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                        end of IP packet                       | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+/


  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\
B | (PFN) |                 non-IP packet                         | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                             data                              | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                 ...                                |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                      end of non-IP packet                     | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+/


  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\
C | (PFN) |                      PSH                              | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                              PSH                              | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                 ...                                |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                          end of PSH                           | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                        embedded packet                        | |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+/
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-examples-of-an-mpls-packet-" class="selfRef">Examples of an MPLS Packet Payload With and Without a Preceding Post‑Stack Header</a>
          </figcaption></figure>
</div>
<p id="section-1.4-4">
   <a href="#mpls-packet-fig" class="auto internal xref">Figure 1</a> shows an MPLS packet with a Layer 2 header X and a label stack
   Y ending with Label-n.  <a href="#examples-fig" class="auto internal xref">Figure 2</a> displays three examples of an MPLS
   payload:<a href="#section-1.4-4" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.4-5">
          <dt id="section-1.4-5.1">Example A:</dt>
          <dd style="margin-left: 1.5em" id="section-1.4-5.2">The first payload is a bare IP packet, i.e., no PSH.  The
     PFN in this case overlaps with the IP version number.<a href="#section-1.4-5.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.4-5.3">Example B:</dt>
          <dd style="margin-left: 1.5em" id="section-1.4-5.4">The next payload is a bare non-IP packet; again, no PSH.
     The PFN here is the first nibble of the payload, whatever it happens to
     be.<a href="#section-1.4-5.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.4-5.5">Example C: </dt>
          <dd style="margin-left: 1.5em" id="section-1.4-5.6">This example is an MPLS Payload that follows a PSH. Here, the embedded packet could be IP or non-IP.<a href="#section-1.4-5.6" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-1.4-6">Thus, the complete MPLS packet would consist of [X Y A], [X Y B], or [X Y C].<a href="#section-1.4-6" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-2">
<section id="section-2">
      <h2 id="name-rationale">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-rationale" class="section-name selfRef">Rationale</a>
      </h2>
<div id="sect-2.1">
<section id="section-2.1">
        <h3 id="name-why-look-at-the-first-nibbl">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-why-look-at-the-first-nibbl" class="section-name selfRef">Why Look at the First Nibble</a>
        </h3>
<p id="section-2.1-1">
   An MPLS packet can contain one of many types of embedded packets. Three common types are:<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.1-2">
          <li id="section-2.1-2.1">An IPv4 packet (whose IP header has version number 4).<a href="#section-2.1-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-2.1-2.2">An IPv6 packet (whose IP header has version number 6).<a href="#section-2.1-2.2" class="pilcrow">¶</a>
</li>
          <li id="section-2.1-2.3">A Layer 2 Ethernet frame (i.e., not including the Preamble or the
       Start frame delimiter), starting with the destination Media Access Control (MAC) address.<a href="#section-2.1-2.3" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-2.1-3">
 Many other packet types are possible; in principle, any Layer 2 embedded packet is permissible.
 Indeed, at some points in time, packets of the Point-to-Point Protocol, Frame Relay,
 and Asynchronous Transfer Mode were reasonably common and may become so again.<a href="#section-2.1-3" class="pilcrow">¶</a></p>
<p id="section-2.1-4">
   In addition, there may be a PSH ahead of the embedded packet.
   The value of PFN is considered to ensure that the PSH can be correctly parsed.<a href="#section-2.1-4" class="pilcrow">¶</a></p>
<div id="sect-2.1.1">
<section id="section-2.1.1">
          <h4 id="name-ecmp-load-balancing">
<a href="#section-2.1.1" class="section-number selfRef">2.1.1. </a><a href="#name-ecmp-load-balancing" class="section-name selfRef">ECMP Load Balancing</a>
          </h4>
<p id="section-2.1.1-1">
   There are four common ways to load balance an MPLS packet:<a href="#section-2.1.1-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.1.1-2">
            <li id="section-2.1.1-2.1">Use the top label alone.<a href="#section-2.1.1-2.1" class="pilcrow">¶</a>
</li>
            <li id="section-2.1.1-2.2">Use all of the non-SPLs <span>[<a href="#RFC7274" class="cite xref">RFC7274</a>]</span> in the stack. This is better than using the
       top label alone.<a href="#section-2.1.1-2.2" class="pilcrow">¶</a>
</li>
            <li id="section-2.1.1-2.3">"Divine" the type of embedded packet
       and use fields from the guessed header. The ramifications of using this load-balancing technique
       are discussed in detail in <a href="#sect-2.1.1.1" class="auto internal xref">Section 2.1.1.1</a>. This way is better than the two ways above.<a href="#section-2.1.1-2.3" class="pilcrow">¶</a>
</li>
            <li id="section-2.1.1-2.4">Use either an Entropy Label <span>[<a href="#RFC6790" class="cite xref">RFC6790</a>]</span> or a
       Flow-Aware Transport (FAT) Pseudowire Label <span>[<a href="#RFC6391" class="cite xref">RFC6391</a>]</span> (see <a href="#sect-2.1.1.1" class="auto internal xref">Section 2.1.1.1</a>). This is the best way.<a href="#section-2.1.1-2.4" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-2.1.1-3">
   Load balancing based on just the top label means that all packets
   with that top label will go the same way, which is far from ideal.
   Load balancing based on the entire label stack (not including SPLs)
   is better, but it may still be uneven.  However, if the embedded packet
   is an IP packet, then the combination of (&lt;source IP address&gt;, &lt;dest IP address&gt;, &lt;transport protocol&gt;, &lt;source port&gt;, and &lt;dest port&gt;)
   from the IP header of the embedded packet forms an excellent basis
   for load balancing.  This is what is typically used for load balancing IP packets.<a href="#section-2.1.1-3" class="pilcrow">¶</a></p>
<p id="section-2.1.1-4">
   An MPLS packet doesn't, however, carry a payload type identifier.
   There is a simple (but risky) heuristic that is commonly used to
   guess the type of the embedded packet.  The first nibble of an IP header, i.e., the
   four most significant bits of the first octet,
   contains the IP version number.  That, in turn, indicates where to find
   the relevant fields for load balancing. The heuristic goes roughly
   as described in <a href="#sect-2.1.1.1" class="auto internal xref">Section 2.1.1.1</a>.<a href="#section-2.1.1-4" class="pilcrow">¶</a></p>
<div id="sect-2.1.1.1">
<section id="section-2.1.1.1">
            <h5 id="name-heuristic-for-ecmp-load-bal">
<a href="#section-2.1.1.1" class="section-number selfRef">2.1.1.1. </a><a href="#name-heuristic-for-ecmp-load-bal" class="section-name selfRef">Heuristic for ECMP Load Balancing</a>
            </h5>
<ol start="1" type="1" class="normal type-1" id="section-2.1.1.1-1">
              <li id="section-2.1.1.1-1.1">If the PFN is 0x4 (0100b), treat the payload as an IPv4 packet,
       and find the relevant fields for load balancing on that basis.<a href="#section-2.1.1.1-1.1" class="pilcrow">¶</a>
</li>
              <li id="section-2.1.1.1-1.2">If the PFN is 0x6 (0110b), treat the payload as an IPv6 packet,
       and find the relevant fields for load balancing on that basis.<a href="#section-2.1.1.1-1.2" class="pilcrow">¶</a>
</li>
              <li id="section-2.1.1.1-1.3">If the PFN is anything else, the MPLS payload is not an IP
       packet; fall back to load balancing using the label stack.<a href="#section-2.1.1.1-1.3" class="pilcrow">¶</a>
</li>
            </ol>
<p id="section-2.1.1.1-2">
   This heuristic has been implemented in many (legacy) routers and
   performs well in the case of example A in <a href="#examples-fig" class="auto internal xref">Figure 2</a>.  However, this heuristic
   can work very badly for the non-IP packet as shown in example B in <a href="#examples-fig" class="auto internal xref">Figure 2</a>.  For example, if payload B is an
   Ethernet frame, then the PFN is the first nibble of the Organizationally Unique Identifier of the
   destination MAC address, which can be 0x4 or 0x6. This would lead to the packet being treated as an IPv4 or IPv6 packet such
   that data at the offsets of specific relevant fields would be used as
   input to the load-balancing heuristic, resulting in unpredictable load
   balancing. This behavior can happen to other
   types of non-IP payloads as well.<a href="#section-2.1.1.1-2" class="pilcrow">¶</a></p>
<p id="section-2.1.1.1-3">
   That, in turn, led to the idea of inserting a PSH (e.g., a pseudowire
   control word <span>[<a href="#RFC4385" class="cite xref">RFC4385</a>]</span>, a Deterministic Networking (DetNet) control word <span>[<a href="#RFC8964" class="cite xref">RFC8964</a>]</span>,
   a Network Service Header (NSH) <span>[<a href="#RFC8300" class="cite xref">RFC8300</a>]</span>, or a BIER
   header <span>[<a href="#RFC8296" class="cite xref">RFC8296</a>]</span>) where the PFN is not 0x4 or 0x6; this
   explicitly prevents forwarding engines from confusing the MPLS payload
   with an IP packet.  <span>[<a href="#RFC8469" class="cite xref">RFC8469</a>]</span> recommends the use of a control word
   when the embedded packet is an Ethernet frame.  <span>[<a href="#RFC8469" class="cite xref">RFC8469</a>]</span> was
   published at the request of the operator community and the IEEE Registration Authority Committee
   as a result of operational difficulties with pseudowires that did not
   contain the control word.<a href="#section-2.1.1.1-3" class="pilcrow">¶</a></p>
<p id="section-2.1.1.1-4">
   Where load balancing of MPLS
   packets is desired, it is <span class="bcp14">RECOMMENDED</span> that the load-balancing mechanism use the value of a dedicated label, for example,
   either an Entropy Label <span>[<a href="#RFC6790" class="cite xref">RFC6790</a>]</span> or a FAT Pseudowire Label <span>[<a href="#RFC6391" class="cite xref">RFC6391</a>]</span>.
   Furthermore, the heuristic of guessing the type of the embedded packet,
   as discussed above, <span class="bcp14">SHOULD NOT</span> be used.<a href="#section-2.1.1.1-4" class="pilcrow">¶</a></p>
<p id="section-2.1.1.1-5">
   A consequence of the heuristic approach is that while legacy routers may
   look for a PFN of 0x4 <span>[<a href="#RFC0791" class="cite xref">RFC0791</a>]</span> or 0x6 <span>[<a href="#RFC8200" class="cite xref">RFC8200</a>]</span>, no legacy router will
    look for any other PFN for load-balancing purposes, regardless of what future IP version numbers
    will be. This means that the values 0x4 and
   0x6 are used to (sometimes incorrectly) identify IPv4 and IPv6
   packets, but no other PFN values will be used to identify IP
   packets.<a href="#section-2.1.1.1-5" class="pilcrow">¶</a></p>
<p id="section-2.1.1.1-6">This document creates a new registry for all 16 possible values (see <a href="#sect-3" class="auto internal xref">Section 3</a>).<a href="#section-2.1.1.1-6" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="sect-2.1.2">
<section id="section-2.2">
        <h3 id="name-updates-to-rfc-4928">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-updates-to-rfc-4928" class="section-name selfRef">Updates to RFC 4928</a>
        </h3>
<p id="section-2.2-1">The text in RFC 4928 <span>[<a href="#RFC4928" class="cite xref">RFC4928</a>]</span> concerning the first
        nibble after the MPLS label stack has been updated by this document,
        and the heuristic for snooping this nibble has been deprecated.  <span><a href="https://rfc-editor.org/rfc/rfc4928#section-3" class="relref">Section 3</a> of [<a href="#RFC4928" class="cite xref">RFC4928</a>]</span> is updated as follows:<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">OLD TEXT:<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<blockquote id="section-2.2-3">
          <p id="section-2.2-3.1">It is <span class="bcp14">REQUIRED</span>, however, that applications
          depend upon in-order packet delivery restrict the first nibble
          values to 0x0 and 0x1.  This will ensure that their traffic flows
          will not be affected if some future routing equipment does similar
          snooping on some future version(s) of IP.<a href="#section-2.2-3.1" class="pilcrow">¶</a></p>
</blockquote>
<p id="section-2.2-4">NEW TEXT:<a href="#section-2.2-4" class="pilcrow">¶</a></p>
<blockquote id="section-2.2-5">
          <p id="section-2.2-5.1">Network equipment <span class="bcp14">MUST</span> use a PSH (Post-Stack Header)
       with a PFN (Post-stack First Nibble) value that is neither 0x4 nor 0x6
       in all cases where the MPLS payload is neither an IPv6 nor an IPv4
       packet.<a href="#section-2.2-5.1" class="pilcrow">¶</a></p>
</blockquote>
<p id="section-2.2-6">The following requirement (discussed is <a href="#sect-2.1.1.1" class="auto internal xref">Section 2.1.1.1</a>) replaces
          paragraph 4 in <span><a href="https://rfc-editor.org/rfc/rfc4928#section-3" class="relref">Section 3</a> of [<a href="#RFC4928" class="cite xref">RFC4928</a>]</span> as follows:<a href="#section-2.2-6" class="pilcrow">¶</a></p>
<p id="section-2.2-7">OLD TEXT:<a href="#section-2.2-7" class="pilcrow">¶</a></p>
<blockquote id="section-2.2-8">
          <p id="section-2.2-8.1">This behavior implies that if in the future an IP version is defined
      with a version number of 0x0 or 0x1, then equipment complying with this
      BCP would be unable to look past one or more MPLS headers, and
      loadsplit traffic from a single LSP across multiple paths based on a
      hash of specific fields in the IPv0 or IPv1 headers.  That is, IP
      traffic employing these version numbers would be safe from disturbances
      caused by inappropriate loadsplitting, but would also not be able to
      get the performance benefits.<a href="#section-2.2-8.1" class="pilcrow">¶</a></p>
</blockquote>
<p id="section-2.2-9">NEW TEXT:<a href="#section-2.2-9" class="pilcrow">¶</a></p>
<blockquote id="section-2.2-10">
          <p id="section-2.2-10.1">The practice of deducing the payload type based on the PFN value is
     deprecated to avoid inaccurate load balancing.  This <span class="bcp14">MUST NOT</span> be part of new implementations or deployments.  This also means
     that concerns about load balancing for future IP versions with a version
     number of 0x0 or 0x1 are no longer relevant.<a href="#section-2.2-10.1" class="pilcrow">¶</a></p>
</blockquote>
<p id="section-2.2-11">Furthermore, the following text is appended to <span><a href="https://rfc-editor.org/rfc/rfc4928#section-1.1" class="relref">Section 1.1</a> of [<a href="#RFC4928" class="cite xref">RFC4928</a>]</span>:<a href="#section-2.2-11" class="pilcrow">¶</a></p>
<p id="section-2.2-12">NEW TEXT:<a href="#section-2.2-12" class="pilcrow">¶</a></p>
<blockquote id="section-2.2-13">
          <span class="break"></span><dl class="dlParallel" id="section-2.2-13.1">
            <dt id="section-2.2-13.1.1">PSH:</dt>
            <dd style="margin-left: 1.5em" id="section-2.2-13.1.2">Post-Stack Header<a href="#section-2.2-13.1.2" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.2-13.1.3">PFN:</dt>
            <dd style="margin-left: 1.5em" id="section-2.2-13.1.4">Post-stack First Nibble<a href="#section-2.2-13.1.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</blockquote>
</section>
</div>
<div id="sect-2.2">
<section id="section-2.3">
        <h3 id="name-why-create-a-registry">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-why-create-a-registry" class="section-name selfRef">Why Create a Registry</a>
        </h3>
<p id="section-2.3-1">
   The framework for MPLS Network Actions (MNAs) is described in
   <span>[<a href="#RFC9789" class="cite xref">RFC9789</a>]</span> and is an enhancement to the MPLS
   architecture.  The use of Post-Stack Data (PSD) to encode the MNA
   indicators and ancillary data (described in <span><a href="https://rfc-editor.org/rfc/rfc9789#section-3.6" class="relref">Section 3.6</a> of [<a href="#RFC9789" class="cite xref">RFC9789</a>]</span>) might place
   data in the PFN, which could conflict with other uses of that nibble.
   This issue is described in <span><a href="https://rfc-editor.org/rfc/rfc9789#section-3.6.1" class="relref">Section 3.6.1</a> of [<a href="#RFC9789" class="cite xref">RFC9789</a>]</span>
   and is further illustrated by the PFN value of 0x0, which has two
   different formats depending on whether the PSH is a pseudowire
   control word or a DetNet control word; disambiguation requires the
   context of the service label.<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<p id="section-2.3-2">
    With a registry, PSHs become easier to identify and parse. In addition, they do not need a means
   outside the data plane to interpret them correctly, and their
   semantics and usage are documented and referenced in the registry.<a href="#section-2.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-2.3">
<section id="section-2.4">
        <h3 id="name-ip-version-numbers-versus-p">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-ip-version-numbers-versus-p" class="section-name selfRef">IP Version Numbers Versus Post-Stack First Nibble Values</a>
        </h3>
<p id="section-2.4-1">
   The use of the PFN stemmed from the desire to
   heuristically identify IP packets for load-balancing purposes.  It
   was then discovered that non-IP packets, misidentified as IP when the
   heuristic failed, were being badly load balanced, leading to the scenario described in
   <span>[<a href="#RFC4928" class="cite xref">RFC4928</a>]</span>.  This situation may confuse some as to the relationship
   between the "Post-Stack First Nibble" registry and the "IP Version Numbers"
   registry.  These registries are quite different:<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.4-2">
        <li id="section-2.4-2.1">The explicit purpose of the "IP Version Numbers" registry is to track IP
       version numbers in an IP header.<a href="#section-2.4-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-2.4-2.2">The purpose of the "Post-Stack First Nibble" registry is to track PSH types.<a href="#section-2.4-2.2" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-2.4-3">
   The only intersection points between the two registries are the values
   0x4 and 0x6 (for backward compatibility).<a href="#section-2.4-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-2.5">
<section id="section-2.5">
        <h3 id="name-next-step-to-more-determini">
<a href="#section-2.5" class="section-number selfRef">2.5. </a><a href="#name-next-step-to-more-determini" class="section-name selfRef">Next Step to More Deterministic Load Balancing in MPLS Networks</a>
        </h3>
<p id="section-2.5-1">Network evolution is impossible to control, but it develops over a period of time determined by various factors.<a href="#section-2.5-1" class="pilcrow">¶</a></p>
<p id="section-2.5-2">This document discourages further proliferation of the implementations that could lead to undesired effects on data flows.
In doing so, it limits the scope of future protocol developments and thus helps to ensure that future network evolution will be smoother.<a href="#section-2.5-2" class="pilcrow">¶</a></p>
<p id="section-2.5-3"><span><a href="https://rfc-editor.org/rfc/rfc4385#section-2" class="relref">Section 2</a> of [<a href="#RFC4385" class="cite xref">RFC4385</a>]</span> suggests the use of a PSH solely for the purpose
   of avoiding IP ECMP treatment of non-IP payloads encapsulated in MPLS.
   Obsoleting this use of a PSH would assist with the progress toward a 
   simpler, more coherent system of MPLS data encapsulation.  (Other uses
   of a PSH may still be valid.)  However, before that can be done, it is
important to collect
sufficient evidence that there are no marketed or deployed implementations
using the heuristic practice to load balance MPLS data flows.<a href="#section-2.5-3" class="pilcrow">¶</a></p>
<p id="section-2.5-4">Therefore, the next steps toward more deterministic load balancing in MPLS networks are to gradually deprecate non-PSH MPLS encapsulations
of non-IP data, to cease using heuristic load balancing, and to survey the available and deployed implementations to determine when obsoletion
may be achieved.<a href="#section-2.5-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-3">
<section id="section-3">
      <h2 id="name-iana-considerations">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-3-1">
   Per this document, IANA has created a registry group called "Post-Stack First Nibble"
   that consists of a single registry called the "Post-Stack First Nibble" registry.
   The initial contents of the registry are shown in <a href="#iana-pfn-value-tbl" class="auto internal xref">Table 1</a>.
   The assignment policy is Standards Action <span>[<a href="#RFC8126" class="cite xref">RFC8126</a>]</span>. It is important to note that
   the same PFN value can be used in more than one protocol. The correct interpretation of the PFN in a PSH
   can be made only in the context of the LSE or group of LSEs in the preceding label stack that characterizes the type
   of the PSH and, consequently, the PFN.<a href="#section-3-1" class="pilcrow">¶</a></p>
<span id="name-post-stack-first-nibble-reg"></span><div id="iana-pfn-value-tbl">
<table class="center" id="table-1">
        <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-post-stack-first-nibble-reg" class="selfRef">Post-Stack First Nibble Registry</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Protocol</th>
            <th class="text-left" rowspan="1" colspan="1">Value</th>
            <th class="text-left" rowspan="1" colspan="1">Description</th>
            <th class="text-left" rowspan="1" colspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">DetNet</td>
            <td class="text-left" rowspan="1" colspan="1">0x0</td>
            <td class="text-left" rowspan="1" colspan="1">DetNet Control Word</td>
            <td class="text-left" rowspan="1" colspan="1">
              <span>[<a href="#RFC8964" class="cite xref">RFC8964</a>]</span>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">NSH</td>
            <td class="text-left" rowspan="1" colspan="1">0x0</td>
            <td class="text-left" rowspan="1" colspan="1">NSH Base Header, payload</td>
            <td class="text-left" rowspan="1" colspan="1">
              <span>[<a href="#RFC8300" class="cite xref">RFC8300</a>]</span>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">PW</td>
            <td class="text-left" rowspan="1" colspan="1">0x0</td>
            <td class="text-left" rowspan="1" colspan="1">PW Control Word</td>
            <td class="text-left" rowspan="1" colspan="1">
              <span>[<a href="#RFC4385" class="cite xref">RFC4385</a>]</span>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">DetNet</td>
            <td class="text-left" rowspan="1" colspan="1">0x1</td>
            <td class="text-left" rowspan="1" colspan="1">DetNet Associated Channel</td>
            <td class="text-left" rowspan="1" colspan="1">
              <span>[<a href="#RFC9546" class="cite xref">RFC9546</a>]</span>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">MPLS</td>
            <td class="text-left" rowspan="1" colspan="1">0x1</td>
            <td class="text-left" rowspan="1" colspan="1">MPLS Generic Associated Channel</td>
            <td class="text-left" rowspan="1" colspan="1">
              <span>[<a href="#RFC5586" class="cite xref">RFC5586</a>]</span>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">PW</td>
            <td class="text-left" rowspan="1" colspan="1">0x1</td>
            <td class="text-left" rowspan="1" colspan="1">PW Associated Channel</td>
            <td class="text-left" rowspan="1" colspan="1">
              <span>[<a href="#RFC4385" class="cite xref">RFC4385</a>]</span>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">NSH</td>
            <td class="text-left" rowspan="1" colspan="1">0x2</td>
            <td class="text-left" rowspan="1" colspan="1">NSH Base Header, OAM</td>
            <td class="text-left" rowspan="1" colspan="1">
              <span>[<a href="#RFC8300" class="cite xref">RFC8300</a>]</span>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1"></td>
            <td class="text-left" rowspan="1" colspan="1">0x3</td>
            <td class="text-left" rowspan="1" colspan="1">Unassigned</td>
            <td class="text-left" rowspan="1" colspan="1"></td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1"></td>
            <td class="text-left" rowspan="1" colspan="1">0x4</td>
            <td class="text-left" rowspan="1" colspan="1">Reserved</td>
            <td class="text-left" rowspan="1" colspan="1">RFC 9790</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">BIER</td>
            <td class="text-left" rowspan="1" colspan="1">0x5</td>
            <td class="text-left" rowspan="1" colspan="1">BIER Header</td>
            <td class="text-left" rowspan="1" colspan="1">
              <span>[<a href="#RFC8296" class="cite xref">RFC8296</a>]</span>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1"></td>
            <td class="text-left" rowspan="1" colspan="1">0x6</td>
            <td class="text-left" rowspan="1" colspan="1">Reserved</td>
            <td class="text-left" rowspan="1" colspan="1">RFC 9790</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1"></td>
            <td class="text-left" rowspan="1" colspan="1">0x7 - 0xF</td>
            <td class="text-left" rowspan="1" colspan="1">Unassigned</td>
            <td class="text-left" rowspan="1" colspan="1"></td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<div id="sec-sect">
<section id="section-4">
      <h2 id="name-security-considerations">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-4-1">
This document creates a new IANA registry for PFNs and specifies changes to the treatment of packets in the data plane
 based on the first nibble of data beyond the MPLS label stack. One intent of this is to reduce
or eliminate errors in determining whether or not a packet being transported by MPLS is IP.
While such errors have primarily caused unbalanced, and thus inefficient, multipathing,
they have the potential to cause more severe security problems.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">
     For general security considerations involving the MPLS label stack, see <span>[<a href="#RFC3032" class="cite xref">RFC3032</a>]</span>.<a href="#section-4-2" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-5">
      <h2 id="name-references">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-5.1">
        <h3 id="name-normative-references">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC0791">[RFC0791]</dt>
        <dd>
<span class="refAuthor">Postel, J.</span>, <span class="refTitle">"Internet Protocol"</span>, <span class="seriesInfo">STD 5</span>, <span class="seriesInfo">RFC 791</span>, <span class="seriesInfo">DOI 10.17487/RFC0791</span>, <time datetime="1981-09" class="refDate">September 1981</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc791">https://www.rfc-editor.org/info/rfc791</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2780">[RFC2780]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span> and <span class="refAuthor">V. Paxson</span>, <span class="refTitle">"IANA Allocation Guidelines For Values In the Internet Protocol and Related Headers"</span>, <span class="seriesInfo">BCP 37</span>, <span class="seriesInfo">RFC 2780</span>, <span class="seriesInfo">DOI 10.17487/RFC2780</span>, <time datetime="2000-03" class="refDate">March 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2780">https://www.rfc-editor.org/info/rfc2780</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3032">[RFC3032]</dt>
        <dd>
<span class="refAuthor">Rosen, E.</span>, <span class="refAuthor">Tappan, D.</span>, <span class="refAuthor">Fedorkow, G.</span>, <span class="refAuthor">Rekhter, Y.</span>, <span class="refAuthor">Farinacci, D.</span>, <span class="refAuthor">Li, T.</span>, and <span class="refAuthor">A. Conta</span>, <span class="refTitle">"MPLS Label Stack Encoding"</span>, <span class="seriesInfo">RFC 3032</span>, <span class="seriesInfo">DOI 10.17487/RFC3032</span>, <time datetime="2001-01" class="refDate">January 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3032">https://www.rfc-editor.org/info/rfc3032</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4385">[RFC4385]</dt>
        <dd>
<span class="refAuthor">Bryant, S.</span>, <span class="refAuthor">Swallow, G.</span>, <span class="refAuthor">Martini, L.</span>, and <span class="refAuthor">D. McPherson</span>, <span class="refTitle">"Pseudowire Emulation Edge-to-Edge (PWE3) Control Word for Use over an MPLS PSN"</span>, <span class="seriesInfo">RFC 4385</span>, <span class="seriesInfo">DOI 10.17487/RFC4385</span>, <time datetime="2006-02" class="refDate">February 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4385">https://www.rfc-editor.org/info/rfc4385</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4928">[RFC4928]</dt>
        <dd>
<span class="refAuthor">Swallow, G.</span>, <span class="refAuthor">Bryant, S.</span>, and <span class="refAuthor">L. Andersson</span>, <span class="refTitle">"Avoiding Equal Cost Multipath Treatment in MPLS Networks"</span>, <span class="seriesInfo">BCP 128</span>, <span class="seriesInfo">RFC 4928</span>, <span class="seriesInfo">DOI 10.17487/RFC4928</span>, <time datetime="2007-06" class="refDate">June 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4928">https://www.rfc-editor.org/info/rfc4928</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5462">[RFC5462]</dt>
        <dd>
<span class="refAuthor">Andersson, L.</span> and <span class="refAuthor">R. Asati</span>, <span class="refTitle">"Multiprotocol Label Switching (MPLS) Label Stack Entry: "EXP" Field Renamed to "Traffic Class" Field"</span>, <span class="seriesInfo">RFC 5462</span>, <span class="seriesInfo">DOI 10.17487/RFC5462</span>, <time datetime="2009-02" class="refDate">February 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5462">https://www.rfc-editor.org/info/rfc5462</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6391">[RFC6391]</dt>
        <dd>
<span class="refAuthor">Bryant, S., Ed.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Drafz, U.</span>, <span class="refAuthor">Kompella, V.</span>, <span class="refAuthor">Regan, J.</span>, and <span class="refAuthor">S. Amante</span>, <span class="refTitle">"Flow-Aware Transport of Pseudowires over an MPLS Packet Switched Network"</span>, <span class="seriesInfo">RFC 6391</span>, <span class="seriesInfo">DOI 10.17487/RFC6391</span>, <time datetime="2011-11" class="refDate">November 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6391">https://www.rfc-editor.org/info/rfc6391</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6790">[RFC6790]</dt>
        <dd>
<span class="refAuthor">Kompella, K.</span>, <span class="refAuthor">Drake, J.</span>, <span class="refAuthor">Amante, S.</span>, <span class="refAuthor">Henderickx, W.</span>, and <span class="refAuthor">L. Yong</span>, <span class="refTitle">"The Use of Entropy Labels in MPLS Forwarding"</span>, <span class="seriesInfo">RFC 6790</span>, <span class="seriesInfo">DOI 10.17487/RFC6790</span>, <time datetime="2012-11" class="refDate">November 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6790">https://www.rfc-editor.org/info/rfc6790</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8200">[RFC8200]</dt>
        <dd>
<span class="refAuthor">Deering, S.</span> and <span class="refAuthor">R. Hinden</span>, <span class="refTitle">"Internet Protocol, Version 6 (IPv6) Specification"</span>, <span class="seriesInfo">STD 86</span>, <span class="seriesInfo">RFC 8200</span>, <span class="seriesInfo">DOI 10.17487/RFC8200</span>, <time datetime="2017-07" class="refDate">July 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8200">https://www.rfc-editor.org/info/rfc8200</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8296">[RFC8296]</dt>
        <dd>
<span class="refAuthor">Wijnands, IJ., Ed.</span>, <span class="refAuthor">Rosen, E., Ed.</span>, <span class="refAuthor">Dolganow, A.</span>, <span class="refAuthor">Tantsura, J.</span>, <span class="refAuthor">Aldrin, S.</span>, and <span class="refAuthor">I. Meilik</span>, <span class="refTitle">"Encapsulation for Bit Index Explicit Replication (BIER) in MPLS and Non-MPLS Networks"</span>, <span class="seriesInfo">RFC 8296</span>, <span class="seriesInfo">DOI 10.17487/RFC8296</span>, <time datetime="2018-01" class="refDate">January 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8296">https://www.rfc-editor.org/info/rfc8296</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8469">[RFC8469]</dt>
        <dd>
<span class="refAuthor">Bryant, S.</span>, <span class="refAuthor">Malis, A.</span>, and <span class="refAuthor">I. Bagdonas</span>, <span class="refTitle">"Recommendation to Use the Ethernet Control Word"</span>, <span class="seriesInfo">RFC 8469</span>, <span class="seriesInfo">DOI 10.17487/RFC8469</span>, <time datetime="2018-11" class="refDate">November 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8469">https://www.rfc-editor.org/info/rfc8469</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8964">[RFC8964]</dt>
        <dd>
<span class="refAuthor">Varga, B., Ed.</span>, <span class="refAuthor">Farkas, J.</span>, <span class="refAuthor">Berger, L.</span>, <span class="refAuthor">Malis, A.</span>, <span class="refAuthor">Bryant, S.</span>, and <span class="refAuthor">J. Korhonen</span>, <span class="refTitle">"Deterministic Networking (DetNet) Data Plane: MPLS"</span>, <span class="seriesInfo">RFC 8964</span>, <span class="seriesInfo">DOI 10.17487/RFC8964</span>, <time datetime="2021-01" class="refDate">January 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8964">https://www.rfc-editor.org/info/rfc8964</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9789">[RFC9789]</dt>
      <dd>
<span class="refAuthor">Andersson, L.</span>, <span class="refAuthor">Bryant, S.</span>, <span class="refAuthor">Bocci, M.</span>, and <span class="refAuthor">T. Li</span>, <span class="refTitle">"MPLS Network Actions (MNAs) Framework"</span>, <span class="seriesInfo">RFC 9789</span>, <span class="seriesInfo">DOI 10.17487/RFC9789</span>, <time datetime="2025-07" class="refDate">July 2025</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9789">https://www.rfc-editor.org/info/rfc9789</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-5.2">
        <h3 id="name-informative-references">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-mpls-mna-ps-hdr">[MNA-PS-HDR]</dt>
        <dd>
<span class="refAuthor">Rajamanickam, J., Ed.</span>, <span class="refAuthor">Gandhi, R., Ed.</span>, <span class="refAuthor">Zigler, R.</span>, <span class="refAuthor">Li, T.</span>, and <span class="refAuthor">J. Dong</span>, <span class="refTitle">"Post-Stack MPLS Network Action (MNA) Solution"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-mpls-mna-ps-hdr-01</span>, <time datetime="2025-05-30" class="refDate">30 May 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-mpls-mna-ps-hdr-01">https://datatracker.ietf.org/doc/html/draft-ietf-mpls-mna-ps-hdr-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4446">[RFC4446]</dt>
        <dd>
<span class="refAuthor">Martini, L.</span>, <span class="refTitle">"IANA Allocations for Pseudowire Edge to Edge Emulation (PWE3)"</span>, <span class="seriesInfo">BCP 116</span>, <span class="seriesInfo">RFC 4446</span>, <span class="seriesInfo">DOI 10.17487/RFC4446</span>, <time datetime="2006-04" class="refDate">April 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4446">https://www.rfc-editor.org/info/rfc4446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4761">[RFC4761]</dt>
        <dd>
<span class="refAuthor">Kompella, K., Ed.</span> and <span class="refAuthor">Y. Rekhter, Ed.</span>, <span class="refTitle">"Virtual Private LAN Service (VPLS) Using BGP for Auto-Discovery and Signaling"</span>, <span class="seriesInfo">RFC 4761</span>, <span class="seriesInfo">DOI 10.17487/RFC4761</span>, <time datetime="2007-01" class="refDate">January 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4761">https://www.rfc-editor.org/info/rfc4761</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4762">[RFC4762]</dt>
        <dd>
<span class="refAuthor">Lasserre, M., Ed.</span> and <span class="refAuthor">V. Kompella, Ed.</span>, <span class="refTitle">"Virtual Private LAN Service (VPLS) Using Label Distribution Protocol (LDP) Signaling"</span>, <span class="seriesInfo">RFC 4762</span>, <span class="seriesInfo">DOI 10.17487/RFC4762</span>, <time datetime="2007-01" class="refDate">January 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4762">https://www.rfc-editor.org/info/rfc4762</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5586">[RFC5586]</dt>
        <dd>
<span class="refAuthor">Bocci, M., Ed.</span>, <span class="refAuthor">Vigoureux, M., Ed.</span>, and <span class="refAuthor">S. Bryant, Ed.</span>, <span class="refTitle">"MPLS Generic Associated Channel"</span>, <span class="seriesInfo">RFC 5586</span>, <span class="seriesInfo">DOI 10.17487/RFC5586</span>, <time datetime="2009-06" class="refDate">June 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5586">https://www.rfc-editor.org/info/rfc5586</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7274">[RFC7274]</dt>
        <dd>
<span class="refAuthor">Kompella, K.</span>, <span class="refAuthor">Andersson, L.</span>, and <span class="refAuthor">A. Farrel</span>, <span class="refTitle">"Allocating and Retiring Special-Purpose MPLS Labels"</span>, <span class="seriesInfo">RFC 7274</span>, <span class="seriesInfo">DOI 10.17487/RFC7274</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7274">https://www.rfc-editor.org/info/rfc7274</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7432">[RFC7432]</dt>
        <dd>
<span class="refAuthor">Sajassi, A., Ed.</span>, <span class="refAuthor">Aggarwal, R.</span>, <span class="refAuthor">Bitar, N.</span>, <span class="refAuthor">Isaac, A.</span>, <span class="refAuthor">Uttaro, J.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">W. Henderickx</span>, <span class="refTitle">"BGP MPLS-Based Ethernet VPN"</span>, <span class="seriesInfo">RFC 7432</span>, <span class="seriesInfo">DOI 10.17487/RFC7432</span>, <time datetime="2015-02" class="refDate">February 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7432">https://www.rfc-editor.org/info/rfc7432</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8126">[RFC8126]</dt>
        <dd>
<span class="refAuthor">Cotton, M.</span>, <span class="refAuthor">Leiba, B.</span>, and <span class="refAuthor">T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time datetime="2017-06" class="refDate">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8300">[RFC8300]</dt>
        <dd>
<span class="refAuthor">Quinn, P., Ed.</span>, <span class="refAuthor">Elzur, U., Ed.</span>, and <span class="refAuthor">C. Pignataro, Ed.</span>, <span class="refTitle">"Network Service Header (NSH)"</span>, <span class="seriesInfo">RFC 8300</span>, <span class="seriesInfo">DOI 10.17487/RFC8300</span>, <time datetime="2018-01" class="refDate">January 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8300">https://www.rfc-editor.org/info/rfc8300</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9546">[RFC9546]</dt>
      <dd>
<span class="refAuthor">Mirsky, G.</span>, <span class="refAuthor">Chen, M.</span>, and <span class="refAuthor">B. Varga</span>, <span class="refTitle">"Operations, Administration, and Maintenance (OAM) for Deterministic Networking (DetNet) with the MPLS Data Plane"</span>, <span class="seriesInfo">RFC 9546</span>, <span class="seriesInfo">DOI 10.17487/RFC9546</span>, <time datetime="2024-02" class="refDate">February 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9546">https://www.rfc-editor.org/info/rfc9546</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="Ack-sec">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-A-1">The authors express their appreciation and gratitude to <span class="contact-name">Donald E. Eastlake 3rd</span> for the review, insightful
      questions, and helpful comments.  Also, the authors are grateful to
      <span class="contact-name">Amanda Baber</span> for helping organize the IANA
      registry in a clear and concise manner.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2"><span class="contact-name">Éric Vyncke</span>, <span class="contact-name">John       Scudder</span>, <span class="contact-name">Warren Kumari</span>, <span class="contact-name">Murray Kucherawy</span>, and <span class="contact-name">Gunter Van de       Velde</span> provided helpful comments during IESG review.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
<p id="appendix-A-3">The authors would also like to thank <span class="contact-name">Adrian Farrel</span> for his patient and careful shepherding and for helping to
  finalize the text.<a href="#appendix-A-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Kireeti Kompella</span></div>
<div dir="auto" class="left"><span class="org">Juniper Networks</span></div>
<div dir="auto" class="left"><span class="street-address">1133 Innovation Way</span></div>
<div dir="auto" class="left">
<span class="locality">Sunnyvale</span>, <span class="region">CA</span> <span class="postal-code">94089</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:kireeti.ietf@gmail.com" class="email">kireeti.ietf@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Stewart Bryant</span></div>
<div dir="auto" class="left"><span class="org">University of Surrey 5GIC</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:sb@stewartbryant.com" class="email">sb@stewartbryant.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Matthew Bocci</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:matthew.bocci@nokia.com" class="email">matthew.bocci@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Greg Mirsky (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:gregimirsky@gmail.com" class="email">gregimirsky@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Loa Andersson</span></div>
<div dir="auto" class="left"><span class="org">Huawei Technologies</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:loa@pi.nu" class="email">loa@pi.nu</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jie Dong</span></div>
<div dir="auto" class="left"><span class="org">Huawei Technologies</span></div>
<div dir="auto" class="left"><span class="street-address">Huawei Campus, No. 156 Beiqing Rd.</span></div>
<div dir="auto" class="left"><span class="locality">Beijing</span></div>
<div dir="auto" class="left"><span class="postal-code">100095</span></div>
<div dir="auto" class="left"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jie.dong@huawei.com" class="email">jie.dong@huawei.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
