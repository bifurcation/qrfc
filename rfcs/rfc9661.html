<!DOCTYPE html>
<html lang="en" class="RFC">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>RFC 9661: The JSON Meta Application Protocol (JMAP) for Sieve Scripts</title>
<meta content="Kenneth Murchison" name="author">
<meta content="
       This document specifies a data model for managing Sieve
      scripts on a server using the JSON Meta Application Protocol
      (JMAP).
      Clients can use this protocol to efficiently search, access,
      organize, and validate Sieve scripts.
       
    " name="description">
<meta content="xml2rfc 3.23.1" name="generator">
<meta content="JMAP" name="keyword">
<meta content="JSON" name="keyword">
<meta content="Sieve" name="keyword">
<meta content="9661" name="rfc.number">
<!-- Generator version information:
  xml2rfc 3.23.1
    Python 3.9.15
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.0
    platformdirs 3.8.0
    pycountry 22.3.5
    pydyf 0.10.0
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    wcwidth 0.2.5
    weasyprint 62.3
-->
<link href="rfc9661.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}
.xref {
  overflow-wrap: normal;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.refSubseries {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: upper-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code, dt tt, dt code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<link href="https://datatracker.ietf.org/doc/draft-ietf-jmap-sieve-22" rel="prev">
  <link href="https://dx.doi.org/10.17487/rfc9661" rel="alternate">
  <link href="urn:issn:2070-1721" rel="alternate">
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9661</td>
<td class="center">JMAP Sieve</td>
<td class="right">September 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Murchison</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a href="https://www.rfc-editor.org/rfc/rfc9661" class="eref">9661</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2024-09" class="published">September 2024</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">K. Murchison</div>
<div class="org">Fastmail</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9661</h1>
<h1 id="title">The JSON Meta Application Protocol (JMAP) for Sieve Scripts</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document specifies a data model for managing Sieve
      scripts on a server using the JSON Meta Application Protocol
      (JMAP).
      Clients can use this protocol to efficiently search, access,
      organize, and validate Sieve scripts.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9661">https://www.rfc-editor.org/info/rfc9661</a></span>.<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-notational-conventions" class="internal xref">Notational Conventions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1"><a href="#section-1.2" class="auto internal xref">1.2</a>.  <a href="#name-addition-to-the-capabilitie" class="internal xref">Addition to the Capabilities Object</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2.2.1">
                    <p id="section-toc.1-1.1.2.2.2.1.1" class="keepWithNext"><a href="#section-1.2.1" class="auto internal xref">1.2.1</a>.  <a href="#name-urnietfparamsjmapsieve" class="internal xref">urn:ietf:params:jmap:sieve</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2.2.2">
                    <p id="section-toc.1-1.1.2.2.2.2.1" class="keepWithNext"><a href="#section-1.2.2" class="auto internal xref">1.2.2</a>.  <a href="#name-example" class="internal xref">Example</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-sieve-scripts" class="internal xref">Sieve Scripts</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="auto internal xref">2.1</a>.  <a href="#name-sieve-script-properties" class="internal xref">Sieve Script Properties</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="auto internal xref">2.2</a>.  <a href="#name-sieve-script-content" class="internal xref">Sieve Script Content</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="auto internal xref">2.3</a>.  <a href="#name-sievescript-get" class="internal xref">SieveScript/get</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.1">
                    <p id="section-toc.1-1.2.2.3.2.1.1"><a href="#section-2.3.1" class="auto internal xref">2.3.1</a>.  <a href="#name-examples" class="internal xref">Examples</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="auto internal xref">2.4</a>.  <a href="#name-sievescript-set" class="internal xref">SieveScript/set</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.1">
                    <p id="section-toc.1-1.2.2.4.2.1.1"><a href="#section-2.4.1" class="auto internal xref">2.4.1</a>.  <a href="#name-examples-2" class="internal xref">Examples</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a href="#section-2.5" class="auto internal xref">2.5</a>.  <a href="#name-sievescript-query" class="internal xref">SieveScript/query</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.6">
                <p id="section-toc.1-1.2.2.6.1"><a href="#section-2.6" class="auto internal xref">2.6</a>.  <a href="#name-sievescript-validate" class="internal xref">SieveScript/validate</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-quotas" class="internal xref">Quotas</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-compatibility-with-jmap-vac" class="internal xref">Compatibility with JMAP Vacation Response</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-jmap-capability-registratio" class="internal xref">JMAP Capability Registration for "sieve"</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-jmap-data-type-registration" class="internal xref">JMAP Data Type  Registration for "SieveScript"</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-jmap-error-codes-registry" class="internal xref">JMAP Error Codes Registry</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.1">
                    <p id="section-toc.1-1.6.2.3.2.1.1"><a href="#section-6.3.1" class="auto internal xref">6.3.1</a>.  <a href="#name-invalidsieve" class="internal xref">invalidSieve</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.2">
                    <p id="section-toc.1-1.6.2.3.2.2.1"><a href="#section-6.3.2" class="auto internal xref">6.3.2</a>.  <a href="#name-sieveisactive" class="internal xref">sieveIsActive</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-authors-address" class="internal xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1"><span><a href="#RFC8620" class="internal xref">The JSON Meta Application Protocol (JMAP)</a> [<a href="#RFC8620" class="cite xref">RFC8620</a>]</span>
      is a generic protocol for
      synchronizing data, such as mail, calendars, or contacts, between
      a client and a server.

      It is optimized for mobile and web environments, and it aims to
      provide a consistent interface to different data types.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">This specification defines a data model for managing
      <span><a href="#RFC5228" class="internal xref">Sieve scripts</a> [<a href="#RFC5228" class="cite xref">RFC5228</a>]</span> on
      a server using JMAP.

      The data model is designed to allow a server to provide
      consistent access to the same scripts via
      <span><a href="#RFC5804" class="internal xref">ManageSieve</a> [<a href="#RFC5804" class="cite xref">RFC5804</a>]</span> as well as JMAP.<a href="#section-1-2" class="pilcrow">¶</a></p>
<section id="section-1.1">
        <h3 id="name-notational-conventions">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-notational-conventions" class="section-name selfRef">Notational Conventions</a>
        </h3>
<p id="section-1.1-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>",
        "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>",
        "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>",
        "<span class="bcp14">SHOULD NOT</span>",
        "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
        "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document
        are to be interpreted as described in BCP 14
        <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only
        when, they appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">Type signatures, examples, and property descriptions in
        this document follow the conventions established in
        <span><a href="https://rfc-editor.org/rfc/rfc8620#section-1.1" class="relref">Section 1.1</a> of [<a href="#RFC8620" class="cite xref">RFC8620</a>]</span>.
        This document also uses data types and terminology established
        in Sections <a href="https://rfc-editor.org/rfc/rfc8620#section-1.2" class="relref">1.2</a> through <a href="https://rfc-editor.org/rfc/rfc8620#section-1.6" class="relref">1.6</a> of
        <span>[<a href="#RFC8620" class="cite xref">RFC8620</a>]</span>.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">The term "SieveScript" (with this specific capitalization) is
        used to refer to the data type defined in <a href="#object" class="auto internal xref">Section 2</a>
        and instances of this data type used throughout this document.
        Servers <span class="bcp14">MUST</span> support all properties specified for the
        data type defined in this document.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<p id="section-1.1-4">For brevity, JMAP API examples
        (see <span><a href="https://rfc-editor.org/rfc/rfc8620#section-3" class="relref">Section 3</a> of [<a href="#RFC8620" class="cite xref">RFC8620</a>]</span>)
        only show the "methodCalls" property of the "Request"
        object and the "methodResponses" property of the "Response"
        object.
        All other examples are shown using the
        <span><a href="#RFC9112" class="internal xref">HTTP/1.1 protocol</a> [<a href="#RFC9112" class="cite xref">RFC9112</a>]</span>.<a href="#section-1.1-4" class="pilcrow">¶</a></p>
</section>
<section id="section-1.2">
        <h3 id="name-addition-to-the-capabilitie">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-addition-to-the-capabilitie" class="section-name selfRef">Addition to the Capabilities Object</a>
        </h3>
<p id="section-1.2-1">The "capabilities" object is returned as part of the JMAP
        Session object;
        see <span>[<a href="#RFC8620" class="cite xref">RFC8620</a>], <a href="https://rfc-editor.org/rfc/rfc8620#section-2" class="relref">Section 2</a></span>.
        This document defines one additional capability URI.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<div id="capa">
<section id="section-1.2.1">
          <h4 id="name-urnietfparamsjmapsieve">
<a href="#section-1.2.1" class="section-number selfRef">1.2.1. </a><a href="#name-urnietfparamsjmapsieve" class="section-name selfRef">urn:ietf:params:jmap:sieve</a>
          </h4>
<p id="section-1.2.1-1">The urn:ietf:params:jmap:sieve URI represents support for
          the SieveScript data type and associated API methods.
          The value of this property in the JMAP Session
          "capabilities" property is an object that <span class="bcp14">MUST</span> contain
          the following information on server capabilities:<a href="#section-1.2.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.2.1-2">
            <dt id="section-1.2.1-2.1">
<strong>implementation</strong>:</dt>
            <dd style="margin-left: 1.5em" id="section-1.2.1-2.2">
              <p id="section-1.2.1-2.2.1">
                <code>String</code><a href="#section-1.2.1-2.2.1" class="pilcrow">¶</a></p>
<p id="section-1.2.1-2.2.2">
                The name and version of the Sieve implementation.<a href="#section-1.2.1-2.2.2" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-1.2.1-3">The value of this property in an account's
          "accountCapabilities" property is an object that <span class="bcp14">MUST</span> contain
          the following information on per-account server capabilities:<a href="#section-1.2.1-3" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.2.1-4">
            <dt id="section-1.2.1-4.1">
<strong>maxSizeScriptName</strong>:</dt>
            <dd style="margin-left: 1.5em" id="section-1.2.1-4.2">
              <p id="section-1.2.1-4.2.1"><code>UnsignedInt</code><a href="#section-1.2.1-4.2.1" class="pilcrow">¶</a></p>
<p id="section-1.2.1-4.2.2">
                The maximum length, in octets, allowed for the
                name of a SieveScript.
                For compatibility with ManageSieve, this <span class="bcp14">MUST</span> be at
                least 512 (up to 128 Unicode characters).<a href="#section-1.2.1-4.2.2" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-1.2.1-4.3">
<strong>maxSizeScript</strong>:</dt>
            <dd style="margin-left: 1.5em" id="section-1.2.1-4.4">
              <p id="section-1.2.1-4.4.1"><code>UnsignedInt|null</code><a href="#section-1.2.1-4.4.1" class="pilcrow">¶</a></p>
<p id="section-1.2.1-4.4.2">
                The maximum size (in octets) of a Sieve script the
                server is willing to store for the user,
                or <code>null</code> for no limit.<a href="#section-1.2.1-4.4.2" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-1.2.1-4.5">
<strong>maxNumberScripts</strong>:</dt>
            <dd style="margin-left: 1.5em" id="section-1.2.1-4.6">
              <p id="section-1.2.1-4.6.1"><code>UnsignedInt|null</code><a href="#section-1.2.1-4.6.1" class="pilcrow">¶</a></p>
<p id="section-1.2.1-4.6.2">
                The maximum number of Sieve scripts the server is
                willing to store for the user,
                or <code>null</code> for no limit.<a href="#section-1.2.1-4.6.2" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-1.2.1-4.7">
<strong>maxNumberRedirects</strong>:</dt>
            <dd style="margin-left: 1.5em" id="section-1.2.1-4.8">
              <p id="section-1.2.1-4.8.1"><code>UnsignedInt|null</code><a href="#section-1.2.1-4.8.1" class="pilcrow">¶</a></p>
<p id="section-1.2.1-4.8.2">
                The maximum number of Sieve "redirect" actions a
                script can perform during a single evaluation,
                or <code>null</code> for no limit.
                Note that this is different from the total number of
                "redirect" actions a script can contain.<a href="#section-1.2.1-4.8.2" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-1.2.1-4.9">
<strong>sieveExtensions</strong>:</dt>
            <dd style="margin-left: 1.5em" id="section-1.2.1-4.10">
              <p id="section-1.2.1-4.10.1"><code>String[]</code><a href="#section-1.2.1-4.10.1" class="pilcrow">¶</a></p>
<p id="section-1.2.1-4.10.2">
                A list of case-sensitive Sieve capability strings (as
                listed in the Sieve "require" action; see
                <span>[<a href="#RFC5228" class="cite xref">RFC5228</a>], <a href="https://rfc-editor.org/rfc/rfc5228#section-3.2" class="relref">Section 3.2</a></span>)
                indicating the extensions supported by the Sieve engine.<a href="#section-1.2.1-4.10.2" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-1.2.1-4.11">
<strong>notificationMethods</strong>:</dt>
            <dd style="margin-left: 1.5em" id="section-1.2.1-4.12">
              <p id="section-1.2.1-4.12.1"><code>String[]|null</code><a href="#section-1.2.1-4.12.1" class="pilcrow">¶</a></p>
<p id="section-1.2.1-4.12.2">
                A list of
                <span><a href="#RFC3986" class="internal xref">URI scheme parts</a> [<a href="#RFC3986" class="cite xref">RFC3986</a>]</span>
                for notification methods supported by the Sieve
                <span><a href="#RFC5435" class="internal xref">"enotify" extension</a> [<a href="#RFC5435" class="cite xref">RFC5435</a>]</span>,
                or <code>null</code> if the extension
                is not supported by the Sieve engine.<a href="#section-1.2.1-4.12.2" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-1.2.1-4.13">
<strong>externalLists</strong>:</dt>
            <dd style="margin-left: 1.5em" id="section-1.2.1-4.14">
              <p id="section-1.2.1-4.14.1"><code>String[]|null</code><a href="#section-1.2.1-4.14.1" class="pilcrow">¶</a></p>
<p id="section-1.2.1-4.14.2">
                A list of
                <span><a href="#RFC3986" class="internal xref">URI scheme parts</a> [<a href="#RFC3986" class="cite xref">RFC3986</a>]</span>
                for externally stored list types supported by the
                Sieve <span><a href="#RFC6134" class="internal xref">"extlists" extension</a> [<a href="#RFC6134" class="cite xref">RFC6134</a>]</span>,
                or <code>null</code> if the extension
                is not supported by the Sieve engine.<a href="#section-1.2.1-4.14.2" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
</section>
</div>
<div id="session">
<section id="section-1.2.2">
          <h4 id="name-example">
<a href="#section-1.2.2" class="section-number selfRef">1.2.2. </a><a href="#name-example" class="section-name selfRef">Example</a>
          </h4>
<p id="section-1.2.2-1" class="keepWithNext">
            This example JMAP Session object shows a user that has access to their
            own Sieve scripts with support for a few Sieve extensions:<a href="#section-1.2.2-1" class="pilcrow">¶</a></p>
<div class="breakable lang-json sourcecode" id="section-1.2.2-2">
<pre>
{
  "capabilities": {
    "urn:ietf:params:jmap:core": {
      ...
    },
    "urn:ietf:params:jmap:mail": {},
    "urn:ietf:params:jmap:quota": {},
    "urn:ietf:params:jmap:blob": {},
    "urn:ietf:params:jmap:sieve": {
      "implementation": "ACME Email Filtering"
    },
    "urn:ietf:params:jmap:vacationresponse": {},
    ...
  },
  "accounts": {
    "ken": {
      "name": "ken@example.com",
      "isPersonal": true,
      "isReadOnly": false,
      "accountCapabilities": {
        "urn:ietf:params:jmap:core": {},
        "urn:ietf:params:jmap:quota": {},
        "urn:ietf:params:jmap:mail": {
          ...
        },
        "urn:ietf:params:jmap:blob": {
          "supportedTypeNames": [
            "Email"
            "SieveScript",
            ...
          ],
          ...
        },
        "urn:ietf:params:jmap:sieve": {
          "maxSizeScriptName": 512,
          "maxSizeScript": 65536,
          "maxNumberScripts": 5,
          "maxNumberRedirects": null,
          "sieveExtensions": [
            "fileinto",
            "imap4flags",
            "enotify",
            ...
          ],
          "notificationMethods": [
            "mailto"
          ],
          "externalLists": null,
        },
        "urn:ietf:params:jmap:vacationresponse": {},
        ...
      },
      ...
    }
  },
  "primaryAccounts": {
    "urn:ietf:params:jmap:mail": "ken",
    "urn:ietf:params:jmap:sieve": "ken",
    "urn:ietf:params:jmap:vacationresponse": "ken",
    ...
  },
  "username": "ken@example.com",
  "apiUrl": "/jmap/",
  "downloadUrl":
    "/jmap/download/{accountId}/{blobId}/{name}?accept={type}",
  "uploadUrl": "/jmap/upload/{accountId}/",
  ...
}
</pre><a href="#section-1.2.2-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</section>
<div id="object">
<section id="section-2">
      <h2 id="name-sieve-scripts">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-sieve-scripts" class="section-name selfRef">Sieve Scripts</a>
      </h2>
<p id="section-2-1">A "SieveScript" object represents
      a single <span><a href="#RFC5228" class="internal xref">Sieve script</a> [<a href="#RFC5228" class="cite xref">RFC5228</a>]</span> for
      filtering email messages at the time of final delivery.<a href="#section-2-1" class="pilcrow">¶</a></p>
<div id="props">
<section id="section-2.1">
        <h3 id="name-sieve-script-properties">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-sieve-script-properties" class="section-name selfRef">Sieve Script Properties</a>
        </h3>
<p id="section-2.1-1">A "SieveScript" object has the
        following properties:<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.1-2">
          <dt id="section-2.1-2.1">
<strong>id</strong>:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-2.2">
            <p id="section-2.1-2.2.1"><code>Id</code>
            (immutable; server-set)<a href="#section-2.1-2.2.1" class="pilcrow">¶</a></p>
<p id="section-2.1-2.2.2">
              The id of the script.<a href="#section-2.1-2.2.2" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-2.3">
<strong>name</strong>:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-2.4">
            <p id="section-2.1-2.4.1"><code>String|null</code>
            (optional; default is server dependent)<a href="#section-2.1-2.4.1" class="pilcrow">¶</a></p>
<p id="section-2.1-2.4.2">
              User-visible name for the SieveScript.
              If non-null, this <span class="bcp14">MUST</span> be a
              <span><a href="#RFC5198" class="internal xref">Net-Unicode string</a> [<a href="#RFC5198" class="cite xref">RFC5198</a>]</span>
              of at least 1 character in length, subject to the
              maximum size given in the "capability" object.<a href="#section-2.1-2.4.2" class="pilcrow">¶</a></p>
<p id="section-2.1-2.4.3">
              For compatibility with ManageSieve, servers <span class="bcp14">MUST</span> reject
              names that contain any of the following Unicode characters:
              U+0000-U+001F, U+007F-U+009F, U+2028, or U+2029.<a href="#section-2.1-2.4.3" class="pilcrow">¶</a></p>
<p id="section-2.1-2.4.4">
              Servers <span class="bcp14">MAY</span> reject names that violate server policy
              (e.g., names containing a slash (/)).<a href="#section-2.1-2.4.4" class="pilcrow">¶</a></p>
<p id="section-2.1-2.4.5">
              The name <span class="bcp14">MUST</span> be unique among all SieveScripts within an
              account.<a href="#section-2.1-2.4.5" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-2.5">
<strong>blobId</strong>:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-2.6">
            <p id="section-2.1-2.6.1"><code>Id</code><a href="#section-2.1-2.6.1" class="pilcrow">¶</a></p>
<p id="section-2.1-2.6.2">
              The id of the blob containing the raw octets of the script.<a href="#section-2.1-2.6.2" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-2.7">
<strong>isActive</strong>:</dt>
          <dd style="margin-left: 1.5em" id="section-2.1-2.8">
            <p id="section-2.1-2.8.1"><code>Boolean</code>
            (server-set; default: false)<a href="#section-2.1-2.8.1" class="pilcrow">¶</a></p>
<p id="section-2.1-2.8.2">
              Indicator that the SieveScript is actively filtering
              incoming messages.<a href="#section-2.1-2.8.2" class="pilcrow">¶</a></p>
<p id="section-2.1-2.8.3">
              A user may have at most one active script.
              The <span><a href="#set" class="internal xref">SieveScript/set method</a> (<a href="#set" class="auto internal xref">Section 2.4</a>)</span> is
              used for changing the active script or disabling Sieve
              processing.<a href="#section-2.1-2.8.3" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="content">
<section id="section-2.2">
        <h3 id="name-sieve-script-content">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-sieve-script-content" class="section-name selfRef">Sieve Script Content</a>
        </h3>
<p id="section-2.2-1">A script <span class="bcp14">MUST</span> be <span><a href="#RFC3629" class="internal xref">UTF-8 content</a> [<a href="#RFC3629" class="cite xref">RFC3629</a>]</span>
          of at least 1 character in length, subject to the
          syntax of <span><a href="#RFC5228" class="internal xref">Sieve</a> [<a href="#RFC5228" class="cite xref">RFC5228</a>]</span>.
          A script <span class="bcp14">MUST NOT</span> contain any "require" statement(s)
          mentioning Sieve capability strings not present in the
          <span><a href="#capa" class="internal xref">"capability" object</a> (<a href="#capa" class="auto internal xref">Section 1.2.1</a>)</span>.
          Note that if the Sieve <span><a href="#RFC5463" class="internal xref">"ihave" capability string</a> [<a href="#RFC5463" class="cite xref">RFC5463</a>]</span>
          is present in the "capability" object,
          the script <span class="bcp14">MAY</span> mention unrecognized/unsupported extensions
          in the "ihave" test.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">Script content is treated as a binary blob and
          uploaded/downloaded via the mechanisms provided in  
          Sections <a href="https://rfc-editor.org/rfc/rfc8620#section-6.1" class="relref">6.1</a> and <a href="https://rfc-editor.org/rfc/rfc8620#section-6.2" class="relref">6.2</a> of <span>[<a href="#RFC8620" class="cite xref">RFC8620</a>]</span>,
          respectively, and/or via the JMAP Blob management methods provided in
          Sections <a href="https://rfc-editor.org/rfc/rfc9404#section-4.1" class="relref">4.1</a> and <a href="https://rfc-editor.org/rfc/rfc9404#section-4.2" class="relref">4.2</a> of <span>[<a href="#RFC9404" class="cite xref">RFC9404</a>]</span>,
          respectively.<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<p id="section-2.2-3">Downloading script content via the JMAP downloadUrl or the
          Blob/get method provides functionality equivalent to that of the
          GETSCRIPT command defined in <span>[<a href="#RFC5804" class="cite xref">RFC5804</a>]</span>.<a href="#section-2.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="get">
<section id="section-2.3">
        <h3 id="name-sievescript-get">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-sievescript-get" class="section-name selfRef">SieveScript/get</a>
        </h3>
<p id="section-2.3-1">This is a standard "/get" method as described in
        <span>[<a href="#RFC8620" class="cite xref">RFC8620</a>], <a href="https://rfc-editor.org/rfc/rfc8620#section-5.1" class="relref">Section 5.1</a></span>.
        The "ids" argument may be
        <code>null</code> to fetch all scripts at once.<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<p id="section-2.3-2">This method provides functionality equivalent to that of the
        LISTSCRIPTS command defined in <span>[<a href="#RFC5804" class="cite xref">RFC5804</a>]</span>.<a href="#section-2.3-2" class="pilcrow">¶</a></p>
<section id="section-2.3.1">
          <h4 id="name-examples">
<a href="#section-2.3.1" class="section-number selfRef">2.3.1. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
          </h4>
<p id="section-2.3.1-1" class="keepWithNext">
            List all scripts:<a href="#section-2.3.1-1" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-2.3.1-2">
<pre>
[
  ["SieveScript/get", {
    "accountId": "ken"
  }, "0"]
]

[
  [
    "SieveScript/get",
    {
      "state": "1634915373.240633104-120",
      "list": [
        {
          "id": "2d647053-dded-418d-917a-63eda3ac8f7b",
          "name": "test1",
          "isActive": true,
          "blobId": "S7"
        }
      ],
      "notFound": [],
      "accountId": "ken"
    },
    "0"
  ]
]
</pre><a href="#section-2.3.1-2" class="pilcrow">¶</a>
</div>
<p id="section-2.3.1-3" class="keepWithNext">
            Download the script content via
            the JMAP downloadUrl as advertised in the example in <a href="#session" class="auto internal xref">Section 1.2.2</a>:<a href="#section-2.3.1-3" class="pilcrow">¶</a></p>
<div class="lang-http-message sourcecode" id="section-2.3.1-4">
<pre>
GET /jmap/download/ken/S7/test1.siv?accept=application/sieve HTTP/1.1
Host: jmap.example.com
Authorization: Basic a2VuOnBhc3N3b3Jk

HTTP/1.1 200 OK
Date: Fri, 22 Oct 2021 15:27:38 GMT
Content-Type: application/sieve; charset=utf-8
Content-Disposition: attachment; filename="test1.siv"
Content-Length: 49

require ["fileinto"];
fileinto "INBOX.target";
</pre><a href="#section-2.3.1-4" class="pilcrow">¶</a>
</div>
<p id="section-2.3.1-5" class="keepWithNext">
            Fetch script properties
            and content in a single JMAP API request using the
            <span><a href="#RFC9404" class="internal xref">JMAP Blob management extension</a> [<a href="#RFC9404" class="cite xref">RFC9404</a>]</span>:<a href="#section-2.3.1-5" class="pilcrow">¶</a></p>
<div class="breakable lang-json sourcecode" id="section-2.3.1-6">
<pre>
[
  ["SieveScript/get", {
    "accountId": "ken",
    "ids": [ "2d647053-dded-418d-917a-63eda3ac8f7b" ]
  }, "0"],
  ["Blob/get", {
    "accountId": "ken",
    "#ids": {
      "resultOf": "0",
      "name": "SieveScript/get",
      "path": "/list/*/blobId"
    }
  }, "1"]
]

[
  [
    "SieveScript/get",
    {
      "state": "1634915373.240633104-120",
      "list": [
        {
          "id": "2d647053-dded-418d-917a-63eda3ac8f7b",
          "name": "test1",
          "isActive": true,
          "blobId": "S7"
        }
      ],
      "notFound": [],
      "accountId": "ken"
    },
    "0"
  ],
  [
    "Blob/get",
    {
      "list": [
        {
          "id": "S7",
          "data:asText":
     "require [\"fileinto\"];\\r\\nfileinto \"INBOX.target\";\\r\\n",
          "size": 49
        }
      ],
      "notFound": [],
      "accountId": "ken"
    },
    "1"
  ]
]
</pre><a href="#section-2.3.1-6" class="pilcrow">¶</a>
</div>
</section>
</section>
</div>
<div id="set">
<section id="section-2.4">
        <h3 id="name-sievescript-set">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-sievescript-set" class="section-name selfRef">SieveScript/set</a>
        </h3>
<p id="section-2.4-1">This is a standard "/set" method as described in
        <span>[<a href="#RFC8620" class="cite xref">RFC8620</a>], <a href="https://rfc-editor.org/rfc/rfc8620#section-5.3" class="relref">Section 5.3</a></span>,
        but with the following additional optional request arguments:<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.4-2">
          <dt id="section-2.4-2.1">
<strong>onSuccessActivateScript</strong>:</dt>
          <dd style="margin-left: 1.5em" id="section-2.4-2.2">
            <p id="section-2.4-2.2.1"><code>Id</code><a href="#section-2.4-2.2.1" class="pilcrow">¶</a></p>
<p id="section-2.4-2.2.2">
            The id of the SieveScript to activate if and
            only if all of the creations, modifications, and
            destructions (if any) succeed.
            (For references to SieveScript creations, this is
            equivalent to a creation-reference, so the id will be the
            creation id prefixed with a "#".)
            The currently active SieveScript (if any) will be deactivated
            before activating the specified SieveScript.<a href="#section-2.4-2.2.2" class="pilcrow">¶</a></p>
<p id="section-2.4-2.2.3">
            If omitted, or if the id is either invalid or nonexistent, it <span class="bcp14">MUST</span> be
            ignored, and the currently active SieveScript (if any) will
            remain as such.<a href="#section-2.4-2.2.3" class="pilcrow">¶</a></p>
<p id="section-2.4-2.2.4">
            The id of any activated SieveScript <span class="bcp14">MUST</span> be reported in
            either the "created" or "updated" argument in the response
            as appropriate, including a value of "true" for  the "isActive"
            property.
            The id of any deactivated SieveScript <span class="bcp14">MUST</span> be reported in
            the "updated" argument in the response, including a value of
            "false" for the "isActive" property.<a href="#section-2.4-2.2.4" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-2.4-2.3">
<strong>onSuccessDeactivateScript</strong>:</dt>
          <dd style="margin-left: 1.5em" id="section-2.4-2.4">
            <p id="section-2.4-2.4.1"><code>Boolean</code><a href="#section-2.4-2.4.1" class="pilcrow">¶</a></p>
<p id="section-2.4-2.4.2">
            If "true", the currently active
            SieveScript (if any) will be deactivated if and only if
            all of the creations, modifications, and destructions (if
            any) succeed.
            If "false" or omitted, the currently active SieveScript (if
            any) will remain as such.<a href="#section-2.4-2.4.2" class="pilcrow">¶</a></p>
<p id="section-2.4-2.4.3">

            The id of any deactivated SieveScript <span class="bcp14">MUST</span> be reported in
            the "updated" argument in the response, including a value of
            "false" for the "isActive" property.<a href="#section-2.4-2.4.3" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-2.4-3">If both the "onSuccessActivateScript" and
        "onSuccessDeactivateScript" arguments are
        present in the request, then
        "onSuccessDeactivateScript" <span class="bcp14">MUST</span> be processed first.
        If neither argument is present in the request, the currently
        active SieveScript (if any) will remain as such.<a href="#section-2.4-3" class="pilcrow">¶</a></p>
<p id="section-2.4-4">This method provides functionality equivalent to that of the
        PUTSCRIPT, DELETESCRIPT, RENAMESCRIPT, and SETACTIVE commands defined
        in <span>[<a href="#RFC5804" class="cite xref">RFC5804</a>]</span>.<a href="#section-2.4-4" class="pilcrow">¶</a></p>
<p id="section-2.4-5">Script content must first be uploaded as per
        <a href="#content" class="auto internal xref">Section 2.2</a> prior to referencing it in a
        SieveScript/set call.<a href="#section-2.4-5" class="pilcrow">¶</a></p>
<p id="section-2.4-6">If the SieveScript cannot be created or updated because it
        would result in two SieveScripts with the same name, the
        server <span class="bcp14">MUST</span> reject the request with an "alreadyExists"
        SetError.
        An "existingId" property of type "Id" <span class="bcp14">MUST</span> be included on the
        SetError object with the id of the existing SieveScript.<a href="#section-2.4-6" class="pilcrow">¶</a></p>
<p id="section-2.4-7">If the SieveScript cannot be created or updated because
        its size exceeds the "maxSizeScript" limit, the server <span class="bcp14">MUST</span>
        reject the request with a "tooLarge" SetError.<a href="#section-2.4-7" class="pilcrow">¶</a></p>
<p id="section-2.4-8">If the SieveScript cannot be created because it would
        exceed the "maxNumberScripts" limit or would exceed a
        server-imposed storage limit, the server <span class="bcp14">MUST</span>
        reject the request with an "overQuota" SetError.<a href="#section-2.4-8" class="pilcrow">¶</a></p>
<p id="section-2.4-9">The active SieveScript <span class="bcp14">MUST NOT</span> be destroyed
        unless it is first deactivated in a separate SieveScript/set
        method call.<a href="#section-2.4-9" class="pilcrow">¶</a></p>
<p id="section-2.4-10">The following extra SetError types are defined:<a href="#section-2.4-10" class="pilcrow">¶</a></p>
<p id="section-2.4-11">For "create" and "update":<a href="#section-2.4-11" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.4-12">
          <dt id="section-2.4-12.1">
<strong>invalidSieve</strong>:</dt>
          <dd style="margin-left: 1.5em" id="section-2.4-12.2">
            <p id="section-2.4-12.2.1">
              The SieveScript content violates the
              <span><a href="#RFC5228" class="internal xref">Sieve grammar</a> [<a href="#RFC5228" class="cite xref">RFC5228</a>]</span>,
              and/or one
              or more extensions mentioned in the script's "require"
              statement(s) are not supported by the Sieve interpreter.
              The "description" property on
              the SetError object <span class="bcp14">SHOULD</span> contain a specific error
              message giving at least the line number of the first error.<a href="#section-2.4-12.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-2.4-13">For "destroy":<a href="#section-2.4-13" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.4-14">
          <dt id="section-2.4-14.1">
<strong>sieveIsActive</strong>:</dt>
          <dd style="margin-left: 1.5em" id="section-2.4-14.2">
            <p id="section-2.4-14.2.1">
              The SieveScript is active.<a href="#section-2.4-14.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<section id="section-2.4.1">
          <h4 id="name-examples-2">
<a href="#section-2.4.1" class="section-number selfRef">2.4.1. </a><a href="#name-examples-2" class="section-name selfRef">Examples</a>
          </h4>
<p id="section-2.4.1-1" class="keepWithNext">
                Upload a script
                requiring the Imap4Flags Extension
                <span>[<a href="#RFC5232" class="cite xref">RFC5232</a>]</span>
                using the JMAP uploadUrl as advertised in the example in
                <a href="#session" class="auto internal xref">Section 1.2.2</a>:<a href="#section-2.4.1-1" class="pilcrow">¶</a></p>
<div class="lang-http-message sourcecode" id="section-2.4.1-2">
<pre>
POST /jmap/upload/ken/ HTTP/1.1
Host: jmap.example.com
Authorization: Basic a2VuOnBhc3N3b3Jk
Content-Type: application/sieve
Content-Length: 98

require "imapflags";

if address :is ["To", "Cc"] "jmap@ietf.org" {
  setflag "\\Flagged";
}


HTTP/1.1 201 Created
Date: Thu, 10 Dec 2020 17:14:31 GMT
Content-Type: application/json; charset=utf-8
Content-Length: 171

{
  "accountId": "ken",
  "blobId": "Gabcc83e44a6e19991c4568d0b94e1767c83dd123",
  "type": "application/sieve"
  "size": 98
}
</pre><a href="#section-2.4.1-2" class="pilcrow">¶</a>
</div>
<p id="section-2.4.1-3" class="keepWithNext">
                Create and activate
                a script using the uploaded blob.
                Note that the response shows that an existing active
                script has been deactivated in lieu of the newly
                created script being activated.<a href="#section-2.4.1-3" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-2.4.1-4">
<pre>
[
  ["SieveScript/set", {
    "accountId": "ken",
    "create": {
      "A": {
        "name": null,
        "blobId": "Gabcc83e44a6e19991c4568d0b94e1767c83dd123"
      }
    },
    "onSuccessActivateScript": "#A"
  }, "0"]
]

[
  [
    "SieveScript/set",
    {
      "oldState": "1603741717.50737918-4096",
      "newState": "1603741751.227268529-4096",
      "created": {
        "A": {
          "id": "dd1b164f-8cdc-448c-9f54",
          "name": "ken-20201210T171432-0",
          "blobId": "Sdd1b164f-8cdc-448c-9f54",
          "isActive": true
        }
      },
      "updated": {
        "8abd6f4a-bcb4d-87650-3fcd": {
          "isActive": false
        }
      },
      "destroyed": null,
      "notCreated": null,
      "notUpdated": null,
      "notDestroyed": null,
      "accountId": "ken"
    },
    "0"
  ]
]
</pre><a href="#section-2.4.1-4" class="pilcrow">¶</a>
</div>
<p id="section-2.4.1-5" class="keepWithNext">
            Update the script content using
            the <span><a href="#RFC9404" class="internal xref">JMAP Blob management extension</a> [<a href="#RFC9404" class="cite xref">RFC9404</a>]</span>:<a href="#section-2.4.1-5" class="pilcrow">¶</a></p>
<div class="breakable lang-json sourcecode" id="section-2.4.1-6">
<pre>
{
[
  ["Blob/upload", {
    "accountId": "ken",
    "create": {
      "B": {
        "data": [ {
          "data:asText":
            "redirect \"ken@example.com\"\r\n;"
         } ],
        "type": "application/sieve"
      }
    }
  }, "1"],
  ["SieveScript/set", {
    "accountId": "ken",
    "update": { "dd1b164f-8cdc-448c-9f54": {
      "blobId": "#B"
      }
    }
  }, "2"]
]

[
  [
    "Blob/upload",
    {
      "oldState": null,
      "newState": "1603741700.309607123-0128",
      "created": {
        "B": {
          "id": "G969c83e44a6e10871c4568d0b94e1767c83ddeae",
          "blobId": "G969c83e44a6e10871c4568d0b94e1767c83ddeae",
          "type": "application/sieve",
          "size": 29
        }
      },
      "notCreated": null,
      "accountId": "ken"
    },
    "1"
  ],
  [
    "SieveScript/set",
    {
      "oldState": "1603741751.227268529-4096",
      "newState": "1603742603.309607868-4096",
      "created": null,
      "updated": {
        "dd1b164f-8cdc-448c-9f54": null
      },
      "destroyed": null,
      "notCreated": null,
      "notUpdated": null,
      "notDestroyed": null,
      "accountId": "ken"
    },
    "2"
  ]
]
</pre><a href="#section-2.4.1-6" class="pilcrow">¶</a>
</div>
<p id="section-2.4.1-7" class="keepWithNext">
            Update the script name, and deactivate it:<a href="#section-2.4.1-7" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-2.4.1-8">
<pre>
[
  ["SieveScript/set", {
    "accountId": "ken",
    "update": { "dd1b164f-8cdc-448c-9f54": {
      "name": "myscript"
      }
    },
    "onSuccessDeactivateScript": true
  }, "3"]
]

[
  [
    "SieveScript/set",
    {
      "oldState": "1603742603.309607868-4096",
      "newState": "1603742967.852315428-4096",
      "created": null,
      "updated": {
        "dd1b164f-8cdc-448c-9f54": {
          "isActive": false
        }
      },
      "destroyed": null,
      "notCreated": null,
      "notUpdated": null,
      "notDestroyed": null,
      "accountId": "ken"
    },
    "3"
  ]
]
</pre><a href="#section-2.4.1-8" class="pilcrow">¶</a>
</div>
<p id="section-2.4.1-9" class="keepWithNext">
            Reactivate the script:<a href="#section-2.4.1-9" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-2.4.1-10">
<pre>
[
  ["SieveScript/set", {
    "accountId": "ken",
    "onSuccessActivateScript": "dd1b164f-8cdc-448c-9f54"
  }, "4"]
]

[
  [
    "SieveScript/set",
    {
      "oldState": "1603742967.852315428-4096",
      "newState": "1603744460.316617118-4096",
      "created": null,
      "updated": {
        "dd1b164f-8cdc-448c-9f54": {
          "isActive": true
        }
      },
      "destroyed": null,
      "notCreated": null,
      "notUpdated": null,
      "notDestroyed": null,
      "accountId": "ken"
    },
    "4"
  ]
]
</pre><a href="#section-2.4.1-10" class="pilcrow">¶</a>
</div>
<p id="section-2.4.1-11" class="keepWithNext">
            Deactivate and destroy the active script:<a href="#section-2.4.1-11" class="pilcrow">¶</a></p>
<div class="breakable lang-json sourcecode" id="section-2.4.1-12">
<pre>
[
  ["SieveScript/set", {
    "accountId": "ken",
    "onSuccessDeactivateScript": true
  }, "5"],
  ["SieveScript/set", {
    "accountId": "ken",
    "destroy": [ "dd1b164f-8cdc-448c-9f54" ]
  }, "6"]
]

[
  [
    "SieveScript/set",
    {
      "oldState": "1603744460.316617118-4096",
      "newState": "1603744637.575375572-4096",
      "created": null,
      "updated": {
        "dd1b164f-8cdc-448c-9f54": {
          "isActive": false
        }
      },
      "destroyed": null,
      "notCreated": null,
      "notUpdated": null,
      "notDestroyed": null,
      "accountId": "ken"
    },
    "5"
  ],
  [
    "SieveScript/set",
    {
      "oldState": "1603744637.575375572-4096",
      "newState": "1603744637.854390875-4096",
      "created": null,
      "updated": null,
      "destroyed": [
        "dd1b164f-8cdc-448c-9f54"
      ],
      "notCreated": null,
      "notUpdated": null,
      "notDestroyed": null,
      "accountId": "ken"
    },
    "6"
  ]
]
</pre><a href="#section-2.4.1-12" class="pilcrow">¶</a>
</div>
</section>
</section>
</div>
<section id="section-2.5">
        <h3 id="name-sievescript-query">
<a href="#section-2.5" class="section-number selfRef">2.5. </a><a href="#name-sievescript-query" class="section-name selfRef">SieveScript/query</a>
        </h3>
<p id="section-2.5-1">This is a standard "/query" method as described in
        <span>[<a href="#RFC8620" class="cite xref">RFC8620</a>], <a href="https://rfc-editor.org/rfc/rfc8620#section-5.5" class="relref">Section 5.5</a></span>.

        A "FilterCondition" object has the
        following properties, either of which may be omitted:<a href="#section-2.5-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.5-2">
          <dt id="section-2.5-2.1">
<strong>name</strong>:</dt>
          <dd style="margin-left: 1.5em" id="section-2.5-2.2">
            <p id="section-2.5-2.2.1"><code>String</code><a href="#section-2.5-2.2.1" class="pilcrow">¶</a></p>
<p id="section-2.5-2.2.2">
            The SieveScript "name" property contains the given string.<a href="#section-2.5-2.2.2" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-2.5-2.3">
<strong>isActive</strong>:</dt>
          <dd style="margin-left: 1.5em" id="section-2.5-2.4">
            <p id="section-2.5-2.4.1"><code>Boolean</code><a href="#section-2.5-2.4.1" class="pilcrow">¶</a></p>
<p id="section-2.5-2.4.2">
            The "isActive" property of the SieveScript must be
            identical to the value given to match the condition.<a href="#section-2.5-2.4.2" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-2.5-3">The following SieveScript properties <span class="bcp14">MUST</span> be supported for
        sorting:<a href="#section-2.5-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.5-4.1">
            <p id="section-2.5-4.1.1"><strong>name</strong><a href="#section-2.5-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-2.5-4.2">
            <strong>isActive</strong><a href="#section-2.5-4.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
<section id="section-2.6">
        <h3 id="name-sievescript-validate">
<a href="#section-2.6" class="section-number selfRef">2.6. </a><a href="#name-sievescript-validate" class="section-name selfRef">SieveScript/validate</a>
        </h3>
<p id="section-2.6-1">This method is used by the client to verify Sieve script
        validity without storing the script on the server.<a href="#section-2.6-1" class="pilcrow">¶</a></p>
<p id="section-2.6-2">The method takes the following arguments:<a href="#section-2.6-2" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.6-3">
          <dt id="section-2.6-3.1">
<strong>accountId</strong>:</dt>
          <dd style="margin-left: 1.5em" id="section-2.6-3.2">
            <p id="section-2.6-3.2.1"><code>Id</code><a href="#section-2.6-3.2.1" class="pilcrow">¶</a></p>
<p id="section-2.6-3.2.2">
              The id of the account to use.<a href="#section-2.6-3.2.2" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-2.6-3.3">
<strong>blobId</strong>:</dt>
          <dd style="margin-left: 1.5em" id="section-2.6-3.4">
            <p id="section-2.6-3.4.1"><code>Id</code><a href="#section-2.6-3.4.1" class="pilcrow">¶</a></p>
<p id="section-2.6-3.4.2">
              The id of the blob containing the raw octets of the
              script to validate,
              subject to the same requirements in
              <a href="#content" class="auto internal xref">Section 2.2</a>.<a href="#section-2.6-3.4.2" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-2.6-4">The response has the following arguments:<a href="#section-2.6-4" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.6-5">
          <dt id="section-2.6-5.1">
<strong>accountId</strong>:</dt>
          <dd style="margin-left: 1.5em" id="section-2.6-5.2">
            <p id="section-2.6-5.2.1"><code>Id</code><a href="#section-2.6-5.2.1" class="pilcrow">¶</a></p>
<p id="section-2.6-5.2.2">
              The id of the account used for this call.<a href="#section-2.6-5.2.2" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-2.6-5.3">
<strong>error</strong>:</dt>
          <dd style="margin-left: 1.5em" id="section-2.6-5.4">
            <p id="section-2.6-5.4.1"><code>SetError|null</code><a href="#section-2.6-5.4.1" class="pilcrow">¶</a></p>
<p id="section-2.6-5.4.2">
              An "invalidSieve" SetError object if the script content
              is invalid (see <a href="#set" class="auto internal xref">Section 2.4</a>),
              or <code>null</code> if the
              script content is valid.<a href="#section-2.6-5.4.2" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-2.6-6">This method provides functionality equivalent to that of the
        CHECKSCRIPT command defined in <span>[<a href="#RFC5804" class="cite xref">RFC5804</a>]</span>.<a href="#section-2.6-6" class="pilcrow">¶</a></p>
<p id="section-2.6-7">Script content must first be uploaded as per
        <a href="#content" class="auto internal xref">Section 2.2</a> prior to referencing it in a
        SieveScript/validate call.<a href="#section-2.6-7" class="pilcrow">¶</a></p>
</section>
</section>
</div>
<div id="quotas">
<section id="section-3">
      <h2 id="name-quotas">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-quotas" class="section-name selfRef">Quotas</a>
      </h2>
<p id="section-3-1">Servers <span class="bcp14">SHOULD</span> impose quotas on Sieve scripts to prevent
      malicious users from exceeding available storage.
      Administration of such quotas is outside of the scope of this
      specification; however, <span>[<a href="#RFC9425" class="cite xref">RFC9425</a>]</span> defines a data
      model for users to obtain quota details over JMAP.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">The mechanism for handling SieveScript requests that would place
      a user over a quota setting is discussed in <a href="#set" class="auto internal xref">Section 2.4</a>.<a href="#section-3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="vacation">
<section id="section-4">
      <h2 id="name-compatibility-with-jmap-vac">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-compatibility-with-jmap-vac" class="section-name selfRef">Compatibility with JMAP Vacation Response</a>
      </h2>
<p id="section-4-1"><span><a href="https://rfc-editor.org/rfc/rfc8621#section-8" class="relref">Section 8</a> of [<a href="#RFC8621" class="cite xref">RFC8621</a>]</span> defines a
      "VacationResponse" object to represent an autoresponder to
      incoming email messages.
      Servers that implement the VacationResponse as a Sieve script
      that resides among other user scripts are subject to the
      following requirements:<a href="#section-4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-2.1">
          <span class="bcp14">MUST</span> allow the VacationResponse Sieve script to be fetched
        by the <span><a href="#get" class="internal xref">SieveScript/get method</a> (<a href="#get" class="auto internal xref">Section 2.3</a>)</span>.<a href="#section-4-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.2">
          <span class="bcp14">MUST</span> allow the VacationResponse Sieve script to be
        activated or deactivated via the "onSuccessActivateScript" argument to
        the <span><a href="#set" class="internal xref">SieveScript/set method</a> (<a href="#set" class="auto internal xref">Section 2.4</a>)</span>.<a href="#section-4-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.3">
          <span class="bcp14">MUST NOT</span> allow the VacationResponse Sieve script to be
        destroyed or have its content updated by the
        <span><a href="#set" class="internal xref">SieveScript/set method</a> (<a href="#set" class="auto internal xref">Section 2.4</a>)</span>.
        Any such request <span class="bcp14">MUST</span> be rejected with a "forbidden" SetError.
        A "description" property <span class="bcp14">MAY</span> be present with an explanation
        that the script can only be modified by a VacationResponse/set
        method.<a href="#section-4-2.3" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="security">
<section id="section-5">
      <h2 id="name-security-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-5-1">All security considerations discussed in
      <span><a href="#RFC8620" class="internal xref">JMAP</a> [<a href="#RFC8620" class="cite xref">RFC8620</a>]</span>
      and <span><a href="#RFC5228" class="internal xref">Sieve</a> [<a href="#RFC5228" class="cite xref">RFC5228</a>]</span>
      apply to this specification.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">Additionally, implementations <span class="bcp14">MUST</span> treat Sieve script content
      as untrusted data.  As such, script parsers <span class="bcp14">MUST</span> fail gracefully
      in the face of syntactically invalid or malicious content and
      <span class="bcp14">MUST</span> be prepared to deal with resource exhaustion (e.g.,
      allocation of enormous strings, lists, or command blocks).<a href="#section-5-2" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-6">
      <h2 id="name-iana-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<section id="section-6.1">
        <h3 id="name-jmap-capability-registratio">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-jmap-capability-registratio" class="section-name selfRef">JMAP Capability Registration for "sieve"</a>
        </h3>
<p id="section-6.1-1">IANA has registered "sieve" in the "JMAP Capabilities" registry as follows:<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-6.1-2">
          <dt id="section-6.1-2.1">Capability Name:</dt>
          <dd style="margin-left: 1.5em" id="section-6.1-2.2">
            <code>urn:ietf:params:jmap:sieve</code><a href="#section-6.1-2.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-6.1-2.3">Reference:</dt>
          <dd style="margin-left: 1.5em" id="section-6.1-2.4">RFC 9661<a href="#section-6.1-2.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-6.1-2.5">Intended Use:</dt>
          <dd style="margin-left: 1.5em" id="section-6.1-2.6">common<a href="#section-6.1-2.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-6.1-2.7">Change Controller:</dt>
          <dd style="margin-left: 1.5em" id="section-6.1-2.8">IETF<a href="#section-6.1-2.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-6.1-2.9">Security and Privacy Considerations:</dt>
          <dd style="margin-left: 1.5em" id="section-6.1-2.10">RFC 9661,
        <a href="#security" class="auto internal xref">Section 5</a><a href="#section-6.1-2.10" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
<section id="section-6.2">
        <h3 id="name-jmap-data-type-registration">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-jmap-data-type-registration" class="section-name selfRef">JMAP Data Type  Registration for "SieveScript"</a>
        </h3>
<p id="section-6.2-1">IANA has registered "SieveScript" in the "JMAP Data Types" registry as follows:<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-6.2-2">
          <dt id="section-6.2-2.1">Type Name:</dt>
          <dd style="margin-left: 1.5em" id="section-6.2-2.2">
            <code>SieveScript</code><a href="#section-6.2-2.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-6.2-2.3">Can Reference Blobs:</dt>
          <dd style="margin-left: 1.5em" id="section-6.2-2.4">Yes<a href="#section-6.2-2.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-6.2-2.5">Can Use for State Change:</dt>
          <dd style="margin-left: 1.5em" id="section-6.2-2.6">Yes<a href="#section-6.2-2.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-6.2-2.7">Capability:</dt>
          <dd style="margin-left: 1.5em" id="section-6.2-2.8">
            <code>urn:ietf:params:jmap:sieve</code><a href="#section-6.2-2.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-6.2-2.9">Reference:</dt>
          <dd style="margin-left: 1.5em" id="section-6.2-2.10">RFC 9661<a href="#section-6.2-2.10" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
<section id="section-6.3">
        <h3 id="name-jmap-error-codes-registry">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-jmap-error-codes-registry" class="section-name selfRef">JMAP Error Codes Registry</a>
        </h3>
<p id="section-6.3-1">
          IANA has registered the following two new error codes in the
          "JMAP Error Codes" registry, as defined in
          <span>[<a href="#RFC8620" class="cite xref">RFC8620</a>]</span>.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<section id="section-6.3.1">
          <h4 id="name-invalidsieve">
<a href="#section-6.3.1" class="section-number selfRef">6.3.1. </a><a href="#name-invalidsieve" class="section-name selfRef">invalidSieve</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.3.1-1">
            <dt id="section-6.3.1-1.1">JMAP Error Code:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.1-1.2">invalidSieve<a href="#section-6.3.1-1.2" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.1-1.3">Intended Use:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.1-1.4">common<a href="#section-6.3.1-1.4" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.1-1.5">Change Controller:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.1-1.6">IETF<a href="#section-6.3.1-1.6" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.1-1.7">Reference:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.1-1.8">RFC 9661, <a href="#set" class="auto internal xref">Section 2.4</a><a href="#section-6.3.1-1.8" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.1-1.9">Description:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.1-1.10">The SieveScript violates the
          <span><a href="#RFC5228" class="internal xref">Sieve grammar</a> [<a href="#RFC5228" class="cite xref">RFC5228</a>]</span>, and/or one
          or more extensions mentioned in the script's "require"
          statement(s) are not supported by the Sieve interpreter.<a href="#section-6.3.1-1.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
<section id="section-6.3.2">
          <h4 id="name-sieveisactive">
<a href="#section-6.3.2" class="section-number selfRef">6.3.2. </a><a href="#name-sieveisactive" class="section-name selfRef">sieveIsActive</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.3.2-1">
            <dt id="section-6.3.2-1.1">JMAP Error Code:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.2-1.2">sieveIsActive<a href="#section-6.3.2-1.2" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.2-1.3">Intended Use:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.2-1.4">common<a href="#section-6.3.2-1.4" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.2-1.5">Change Controller:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.2-1.6">IETF<a href="#section-6.3.2-1.6" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.2-1.7">Reference:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.2-1.8">RFC 9661, <a href="#set" class="auto internal xref">Section 2.4</a><a href="#section-6.3.2-1.8" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.2-1.9">Description:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.2-1.10">The client tried to destroy the active
          SieveScript.<a href="#section-6.3.2-1.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
</section>
</section>
<section id="section-7">
      <h2 id="name-references">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-7.1">
        <h3 id="name-normative-references">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3629">[RFC3629]</dt>
        <dd>
<span class="refAuthor">Yergeau, F.</span>, <span class="refTitle">"UTF-8, a transformation format of ISO 10646"</span>, <span class="seriesInfo">STD 63</span>, <span class="seriesInfo">RFC 3629</span>, <span class="seriesInfo">DOI 10.17487/RFC3629</span>, <time datetime="2003-11" class="refDate">November 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3629">https://www.rfc-editor.org/info/rfc3629</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3986">[RFC3986]</dt>
        <dd>
<span class="refAuthor">Berners-Lee, T.</span>, <span class="refAuthor">Fielding, R.</span>, and <span class="refAuthor">L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01" class="refDate">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3986">https://www.rfc-editor.org/info/rfc3986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5198">[RFC5198]</dt>
        <dd>
<span class="refAuthor">Klensin, J.</span> and <span class="refAuthor">M. Padlipsky</span>, <span class="refTitle">"Unicode Format for Network Interchange"</span>, <span class="seriesInfo">RFC 5198</span>, <span class="seriesInfo">DOI 10.17487/RFC5198</span>, <time datetime="2008-03" class="refDate">March 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5198">https://www.rfc-editor.org/info/rfc5198</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5228">[RFC5228]</dt>
        <dd>
<span class="refAuthor">Guenther, P., Ed.</span> and <span class="refAuthor">T. Showalter, Ed.</span>, <span class="refTitle">"Sieve: An Email Filtering Language"</span>, <span class="seriesInfo">RFC 5228</span>, <span class="seriesInfo">DOI 10.17487/RFC5228</span>, <time datetime="2008-01" class="refDate">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5228">https://www.rfc-editor.org/info/rfc5228</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5435">[RFC5435]</dt>
        <dd>
<span class="refAuthor">Melnikov, A., Ed.</span>, <span class="refAuthor">Leiba, B., Ed.</span>, <span class="refAuthor">Segmuller, W.</span>, and <span class="refAuthor">T. Martin</span>, <span class="refTitle">"Sieve Email Filtering: Extension for Notifications"</span>, <span class="seriesInfo">RFC 5435</span>, <span class="seriesInfo">DOI 10.17487/RFC5435</span>, <time datetime="2009-01" class="refDate">January 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5435">https://www.rfc-editor.org/info/rfc5435</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6134">[RFC6134]</dt>
        <dd>
<span class="refAuthor">Melnikov, A.</span> and <span class="refAuthor">B. Leiba</span>, <span class="refTitle">"Sieve Extension: Externally Stored Lists"</span>, <span class="seriesInfo">RFC 6134</span>, <span class="seriesInfo">DOI 10.17487/RFC6134</span>, <time datetime="2011-07" class="refDate">July 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6134">https://www.rfc-editor.org/info/rfc6134</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8620">[RFC8620]</dt>
        <dd>
<span class="refAuthor">Jenkins, N.</span> and <span class="refAuthor">C. Newman</span>, <span class="refTitle">"The JSON Meta Application Protocol (JMAP)"</span>, <span class="seriesInfo">RFC 8620</span>, <span class="seriesInfo">DOI 10.17487/RFC8620</span>, <time datetime="2019-07" class="refDate">July 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8620">https://www.rfc-editor.org/info/rfc8620</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8621">[RFC8621]</dt>
      <dd>
<span class="refAuthor">Jenkins, N.</span> and <span class="refAuthor">C. Newman</span>, <span class="refTitle">"The JSON Meta Application Protocol (JMAP) for Mail"</span>, <span class="seriesInfo">RFC 8621</span>, <span class="seriesInfo">DOI 10.17487/RFC8621</span>, <time datetime="2019-08" class="refDate">August 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8621">https://www.rfc-editor.org/info/rfc8621</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-7.2">
        <h3 id="name-informative-references">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC5232">[RFC5232]</dt>
        <dd>
<span class="refAuthor">Melnikov, A.</span>, <span class="refTitle">"Sieve Email Filtering: Imap4flags Extension"</span>, <span class="seriesInfo">RFC 5232</span>, <span class="seriesInfo">DOI 10.17487/RFC5232</span>, <time datetime="2008-01" class="refDate">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5232">https://www.rfc-editor.org/info/rfc5232</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5463">[RFC5463]</dt>
        <dd>
<span class="refAuthor">Freed, N.</span>, <span class="refTitle">"Sieve Email Filtering: Ihave Extension"</span>, <span class="seriesInfo">RFC 5463</span>, <span class="seriesInfo">DOI 10.17487/RFC5463</span>, <time datetime="2009-03" class="refDate">March 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5463">https://www.rfc-editor.org/info/rfc5463</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5804">[RFC5804]</dt>
        <dd>
<span class="refAuthor">Melnikov, A., Ed.</span> and <span class="refAuthor">T. Martin</span>, <span class="refTitle">"A Protocol for Remotely Managing Sieve Scripts"</span>, <span class="seriesInfo">RFC 5804</span>, <span class="seriesInfo">DOI 10.17487/RFC5804</span>, <time datetime="2010-07" class="refDate">July 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5804">https://www.rfc-editor.org/info/rfc5804</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9112">[RFC9112]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span>, <span class="refAuthor">Nottingham, M., Ed.</span>, and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"HTTP/1.1"</span>, <span class="seriesInfo">STD 99</span>, <span class="seriesInfo">RFC 9112</span>, <span class="seriesInfo">DOI 10.17487/RFC9112</span>, <time datetime="2022-06" class="refDate">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9112">https://www.rfc-editor.org/info/rfc9112</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9404">[RFC9404]</dt>
        <dd>
<span class="refAuthor">Gondwana, B., Ed.</span>, <span class="refTitle">"JSON Meta Application Protocol (JMAP) Blob Management Extension"</span>, <span class="seriesInfo">RFC 9404</span>, <span class="seriesInfo">DOI 10.17487/RFC9404</span>, <time datetime="2023-08" class="refDate">August 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9404">https://www.rfc-editor.org/info/rfc9404</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9425">[RFC9425]</dt>
      <dd>
<span class="refAuthor">Cordier, R., Ed.</span>, <span class="refTitle">"JSON Meta Application Protocol (JMAP) for Quotas"</span>, <span class="seriesInfo">RFC 9425</span>, <span class="seriesInfo">DOI 10.17487/RFC9425</span>, <time datetime="2023-06" class="refDate">June 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9425">https://www.rfc-editor.org/info/rfc9425</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<section id="appendix-A">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-A-1">The concepts in this document are based largely on those in
      <span>[<a href="#RFC5804" class="cite xref">RFC5804</a>]</span>. 
      The author would like to thank the authors of that document for
      providing both inspiration and some borrowed text for this
      document.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">The author would also like to thank the following
      individuals for contributing their ideas and support for
      writing this specification: <span class="contact-name">Joris Baum</span>, <span class="contact-name">Mauro De Gennaro</span>,
      <span class="contact-name">Bron Gondwana</span>, <span class="contact-name">Neil Jenkins</span>, <span class="contact-name">Alexey Melnikov</span>, and <span class="contact-name">Ricardo Signes</span>.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
</section>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Kenneth Murchison</span></div>
<div dir="auto" class="left"><span class="org">Fastmail US LLC</span></div>
<div dir="auto" class="left"><span class="street-address">1429 Walnut Street, Suite 1201</span></div>
<div dir="auto" class="left">
<span class="locality">Philadelphia</span>, <span class="region">PA</span> <span class="postal-code">19102</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:murch@fastmailteam.com" class="email">murch@fastmailteam.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
