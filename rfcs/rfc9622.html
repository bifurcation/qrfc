<!DOCTYPE html>
<html lang="en" class="RFC">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>RFC 9622: An Abstract Application Programming Interface (API) for Transport Services</title>
<meta content="Brian Trammell" name="author">
<meta content="Michael Welzl" name="author">
<meta content="Reese Enghardt" name="author">
<meta content="Godred Fairhurst" name="author">
<meta content="Mirja Kühlewind" name="author">
<meta content="Colin S. Perkins" name="author">
<meta content="Philipp S. Tiesel" name="author">
<meta content="Tommy Pauly" name="author">
<meta content="
       This document describes an abstract Application Programming Interface (API) to the transport
layer that enables the selection of transport protocols and
network paths dynamically at runtime. This API enables faster deployment
of new protocols and protocol features without requiring changes to the
applications. The specified API follows the Transport Services Architecture
by providing asynchronous, atomic transmission of Messages. It is intended to replace the
BSD Socket API as the common interface to the
transport layer, in an environment where endpoints could select from
multiple network paths and potential transport protocols. 
    " name="description">
<meta content="xml2rfc 3.25.0" name="generator">
<meta content="9622" name="rfc.number">
<!-- Generator version information:
  xml2rfc 3.25.0
    Python 3.9.15
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 5.3.0
    platformdirs 3.8.0
    pycountry 22.3.5
    pydyf 0.10.0
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    wcwidth 0.2.5
    weasyprint 62.3
-->
<link href="rfc9622.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}
.xref {
  overflow-wrap: normal;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.refSubseries {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: upper-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code, dt tt, dt code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<link href="https://datatracker.ietf.org/doc/draft-ietf-taps-interface-26" rel="prev">
  <link href="https://dx.doi.org/10.17487/rfc9622" rel="alternate">
  <link href="urn:issn:2070-1721" rel="alternate">
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9622</td>
<td class="center">Transport Services API</td>
<td class="right">January 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">Trammell, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a href="https://www.rfc-editor.org/rfc/rfc9622" class="eref">9622</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-01" class="published">January 2025</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">B. Trammell, <span class="editor">Ed.</span>
</div>
<div class="org">Google Switzerland GmbH</div>
</div>
<div class="author">
      <div class="author-name">M. Welzl, <span class="editor">Ed.</span>
</div>
<div class="org">University of Oslo</div>
</div>
<div class="author">
      <div class="author-name">R. Enghardt</div>
<div class="org">Netflix</div>
</div>
<div class="author">
      <div class="author-name">G. Fairhurst</div>
<div class="org">University of Aberdeen</div>
</div>
<div class="author">
      <div class="author-name">M. Kühlewind</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">C. S. Perkins</div>
<div class="org">University of Glasgow</div>
</div>
<div class="author">
      <div class="author-name">P.S. Tiesel</div>
<div class="org">SAP SE</div>
</div>
<div class="author">
      <div class="author-name">T. Pauly</div>
<div class="org">Apple Inc.</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9622</h1>
<h1 id="title">An Abstract Application Programming Interface (API) for Transport Services</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document describes an abstract Application Programming Interface (API) to the transport
layer that enables the selection of transport protocols and
network paths dynamically at runtime. This API enables faster deployment
of new protocols and protocol features without requiring changes to the
applications. The specified API follows the Transport Services Architecture
by providing asynchronous, atomic transmission of Messages. It is intended to replace the
BSD Socket API as the common interface to the
transport layer, in an environment where endpoints could select from
multiple network paths and potential transport protocols.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9622">https://www.rfc-editor.org/info/rfc9622</a></span>.<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-terminology-and-notation" class="internal xref">Terminology and Notation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="auto internal xref">1.2</a>.  <a href="#name-specification-of-requiremen" class="internal xref">Specification of Requirements</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-overview-of-the-api-design" class="internal xref">Overview of the API Design</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-api-summary" class="internal xref">API Summary</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-usage-examples" class="internal xref">Usage Examples</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1.2.1">
                    <p id="section-toc.1-1.3.2.1.2.1.1"><a href="#section-3.1.1" class="auto internal xref">3.1.1</a>.  <a href="#name-server-example" class="internal xref">Server Example</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1.2.2">
                    <p id="section-toc.1-1.3.2.1.2.2.1"><a href="#section-3.1.2" class="auto internal xref">3.1.2</a>.  <a href="#name-client-example" class="internal xref">Client Example</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1.2.3">
                    <p id="section-toc.1-1.3.2.1.2.3.1"><a href="#section-3.1.3" class="auto internal xref">3.1.3</a>.  <a href="#name-peer-example" class="internal xref">Peer Example</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-transport-properties" class="internal xref">Transport Properties</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-transport-property-names" class="internal xref">Transport Property Names</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-transport-property-types" class="internal xref">Transport Property Types</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-scope-of-the-api-definition" class="internal xref">Scope of the API Definition</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-preestablishment-phase" class="internal xref">Preestablishment Phase</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-specifying-endpoints" class="internal xref">Specifying Endpoints</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.1">
                    <p id="section-toc.1-1.6.2.1.2.1.1"><a href="#section-6.1.1" class="auto internal xref">6.1.1</a>.  <a href="#name-using-multicast-endpoints" class="internal xref">Using Multicast Endpoints</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.2">
                    <p id="section-toc.1-1.6.2.1.2.2.1"><a href="#section-6.1.2" class="auto internal xref">6.1.2</a>.  <a href="#name-constraining-interfaces-for" class="internal xref">Constraining Interfaces for Endpoints</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.3">
                    <p id="section-toc.1-1.6.2.1.2.3.1"><a href="#section-6.1.3" class="auto internal xref">6.1.3</a>.  <a href="#name-protocol-specific-endpoints" class="internal xref">Protocol-Specific Endpoints</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.4">
                    <p id="section-toc.1-1.6.2.1.2.4.1"><a href="#section-6.1.4" class="auto internal xref">6.1.4</a>.  <a href="#name-endpoint-examples" class="internal xref">Endpoint Examples</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.5">
                    <p id="section-toc.1-1.6.2.1.2.5.1"><a href="#section-6.1.5" class="auto internal xref">6.1.5</a>.  <a href="#name-multicast-examples" class="internal xref">Multicast Examples</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-specifying-transport-proper" class="internal xref">Specifying Transport Properties</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.1">
                    <p id="section-toc.1-1.6.2.2.2.1.1"><a href="#section-6.2.1" class="auto internal xref">6.2.1</a>.  <a href="#name-reliable-data-transfer-conn" class="internal xref">Reliable Data Transfer (Connection)</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.2">
                    <p id="section-toc.1-1.6.2.2.2.2.1"><a href="#section-6.2.2" class="auto internal xref">6.2.2</a>.  <a href="#name-preservation-of-message-bou" class="internal xref">Preservation of Message Boundaries</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.3">
                    <p id="section-toc.1-1.6.2.2.2.3.1"><a href="#section-6.2.3" class="auto internal xref">6.2.3</a>.  <a href="#name-configure-per-message-relia" class="internal xref">Configure Per-Message Reliability</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.4">
                    <p id="section-toc.1-1.6.2.2.2.4.1"><a href="#section-6.2.4" class="auto internal xref">6.2.4</a>.  <a href="#name-preservation-of-data-orderi" class="internal xref">Preservation of Data Ordering</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.5">
                    <p id="section-toc.1-1.6.2.2.2.5.1"><a href="#section-6.2.5" class="auto internal xref">6.2.5</a>.  <a href="#name-use-0-rtt-session-establish" class="internal xref">Use 0-RTT Session Establishment with a Safely Replayable Message</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.6">
                    <p id="section-toc.1-1.6.2.2.2.6.1"><a href="#section-6.2.6" class="auto internal xref">6.2.6</a>.  <a href="#name-multistream-connections-in-" class="internal xref">Multistream Connections in a Group</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.7">
                    <p id="section-toc.1-1.6.2.2.2.7.1"><a href="#section-6.2.7" class="auto internal xref">6.2.7</a>.  <a href="#name-full-checksum-coverage-on-s" class="internal xref">Full Checksum Coverage on Sending</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.8">
                    <p id="section-toc.1-1.6.2.2.2.8.1"><a href="#section-6.2.8" class="auto internal xref">6.2.8</a>.  <a href="#name-full-checksum-coverage-on-r" class="internal xref">Full Checksum Coverage on Receiving</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.9">
                    <p id="section-toc.1-1.6.2.2.2.9.1"><a href="#section-6.2.9" class="auto internal xref">6.2.9</a>.  <a href="#name-congestion-control" class="internal xref">Congestion Control</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.10">
                    <p id="section-toc.1-1.6.2.2.2.10.1"><a href="#section-6.2.10" class="auto internal xref">6.2.10</a>. <a href="#name-keep-alive-packets" class="internal xref">Keep-Alive Packets</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.11">
                    <p id="section-toc.1-1.6.2.2.2.11.1"><a href="#section-6.2.11" class="auto internal xref">6.2.11</a>. <a href="#name-interface-instance-or-type" class="internal xref">Interface Instance or Type</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.12">
                    <p id="section-toc.1-1.6.2.2.2.12.1"><a href="#section-6.2.12" class="auto internal xref">6.2.12</a>. <a href="#name-provisioning-domain-instanc" class="internal xref">Provisioning Domain Instance or Type</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.13">
                    <p id="section-toc.1-1.6.2.2.2.13.1"><a href="#section-6.2.13" class="auto internal xref">6.2.13</a>. <a href="#name-use-temporary-local-address" class="internal xref">Use Temporary Local Address</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.14">
                    <p id="section-toc.1-1.6.2.2.2.14.1"><a href="#section-6.2.14" class="auto internal xref">6.2.14</a>. <a href="#name-multipath-transport" class="internal xref">Multipath Transport</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.15">
                    <p id="section-toc.1-1.6.2.2.2.15.1"><a href="#section-6.2.15" class="auto internal xref">6.2.15</a>. <a href="#name-advertisement-of-alternativ" class="internal xref">Advertisement of Alternative Addresses</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.16">
                    <p id="section-toc.1-1.6.2.2.2.16.1"><a href="#section-6.2.16" class="auto internal xref">6.2.16</a>. <a href="#name-direction-of-communication" class="internal xref">Direction of Communication</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.17">
                    <p id="section-toc.1-1.6.2.2.2.17.1"><a href="#section-6.2.17" class="auto internal xref">6.2.17</a>. <a href="#name-notification-of-icmp-soft-e" class="internal xref">Notification of ICMP Soft Error Message Arrival</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.18">
                    <p id="section-toc.1-1.6.2.2.2.18.1"><a href="#section-6.2.18" class="auto internal xref">6.2.18</a>. <a href="#name-initiating-side-is-not-the-" class="internal xref">Initiating Side Is Not the First to Write</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-specifying-security-paramet" class="internal xref">Specifying Security Parameters and Callbacks</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.1">
                    <p id="section-toc.1-1.6.2.3.2.1.1"><a href="#section-6.3.1" class="auto internal xref">6.3.1</a>.  <a href="#name-allowed-security-protocols" class="internal xref">Allowed Security Protocols</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.2">
                    <p id="section-toc.1-1.6.2.3.2.2.1"><a href="#section-6.3.2" class="auto internal xref">6.3.2</a>.  <a href="#name-certificate-bundles" class="internal xref">Certificate Bundles</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.3">
                    <p id="section-toc.1-1.6.2.3.2.3.1"><a href="#section-6.3.3" class="auto internal xref">6.3.3</a>.  <a href="#name-pinned-server-certificate" class="internal xref">Pinned Server Certificate</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.4">
                    <p id="section-toc.1-1.6.2.3.2.4.1"><a href="#section-6.3.4" class="auto internal xref">6.3.4</a>.  <a href="#name-application-layer-protocol-" class="internal xref">Application-Layer Protocol Negotiation</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.5">
                    <p id="section-toc.1-1.6.2.3.2.5.1"><a href="#section-6.3.5" class="auto internal xref">6.3.5</a>.  <a href="#name-groups-ciphersuites-and-sig" class="internal xref">Groups, Ciphersuites, and Signature Algorithms</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.6">
                    <p id="section-toc.1-1.6.2.3.2.6.1"><a href="#section-6.3.6" class="auto internal xref">6.3.6</a>.  <a href="#name-session-cache-options" class="internal xref">Session Cache Options</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.7">
                    <p id="section-toc.1-1.6.2.3.2.7.1"><a href="#section-6.3.7" class="auto internal xref">6.3.7</a>.  <a href="#name-pre-shared-key" class="internal xref">Pre-Shared Key</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.8">
                    <p id="section-toc.1-1.6.2.3.2.8.1"><a href="#section-6.3.8" class="auto internal xref">6.3.8</a>.  <a href="#name-connection-establishment-ca" class="internal xref">Connection Establishment Callbacks</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-establishing-connections" class="internal xref">Establishing Connections</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-active-open-initiate" class="internal xref">Active Open: Initiate</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-passive-open-listen" class="internal xref">Passive Open: Listen</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.  <a href="#name-peer-to-peer-establishment-" class="internal xref">Peer-to-Peer Establishment: Rendezvous</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="auto internal xref">7.4</a>.  <a href="#name-connection-groups" class="internal xref">Connection Groups</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5">
                <p id="section-toc.1-1.7.2.5.1"><a href="#section-7.5" class="auto internal xref">7.5</a>.  <a href="#name-adding-and-removing-endpoin" class="internal xref">Adding and Removing Endpoints on a Connection</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-managing-connections" class="internal xref">Managing Connections</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-generic-connection-properti" class="internal xref">Generic Connection Properties</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.1">
                    <p id="section-toc.1-1.8.2.1.2.1.1"><a href="#section-8.1.1" class="auto internal xref">8.1.1</a>.  <a href="#name-required-minimum-corruption" class="internal xref">Required Minimum Corruption Protection Coverage for Receiving</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.2">
                    <p id="section-toc.1-1.8.2.1.2.2.1"><a href="#section-8.1.2" class="auto internal xref">8.1.2</a>.  <a href="#name-connection-priority" class="internal xref">Connection Priority</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.3">
                    <p id="section-toc.1-1.8.2.1.2.3.1"><a href="#section-8.1.3" class="auto internal xref">8.1.3</a>.  <a href="#name-timeout-for-aborting-connec" class="internal xref">Timeout for Aborting Connection</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.4">
                    <p id="section-toc.1-1.8.2.1.2.4.1"><a href="#section-8.1.4" class="auto internal xref">8.1.4</a>.  <a href="#name-timeout-for-keep-alive-pack" class="internal xref">Timeout for Keep-Alive Packets</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.5">
                    <p id="section-toc.1-1.8.2.1.2.5.1"><a href="#section-8.1.5" class="auto internal xref">8.1.5</a>.  <a href="#name-connection-group-transmissi" class="internal xref">Connection Group Transmission Scheduler</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.6">
                    <p id="section-toc.1-1.8.2.1.2.6.1"><a href="#section-8.1.6" class="auto internal xref">8.1.6</a>.  <a href="#name-capacity-profile" class="internal xref">Capacity Profile</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.7">
                    <p id="section-toc.1-1.8.2.1.2.7.1"><a href="#section-8.1.7" class="auto internal xref">8.1.7</a>.  <a href="#name-policy-for-using-multipath-" class="internal xref">Policy for Using Multipath Transports</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.8">
                    <p id="section-toc.1-1.8.2.1.2.8.1"><a href="#section-8.1.8" class="auto internal xref">8.1.8</a>.  <a href="#name-bounds-on-send-or-receive-r" class="internal xref">Bounds on Send or Receive Rate</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.9">
                    <p id="section-toc.1-1.8.2.1.2.9.1"><a href="#section-8.1.9" class="auto internal xref">8.1.9</a>.  <a href="#name-group-connection-limit" class="internal xref">Group Connection Limit</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.10">
                    <p id="section-toc.1-1.8.2.1.2.10.1"><a href="#section-8.1.10" class="auto internal xref">8.1.10</a>. <a href="#name-isolate-session" class="internal xref">Isolate Session</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.11">
                    <p id="section-toc.1-1.8.2.1.2.11.1"><a href="#section-8.1.11" class="auto internal xref">8.1.11</a>. <a href="#name-read-only-connection-proper" class="internal xref">Read-Only Connection Properties</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-tcp-specific-properties-use" class="internal xref">TCP-Specific Properties: User Timeout Option (UTO)</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2.2.1">
                    <p id="section-toc.1-1.8.2.2.2.1.1"><a href="#section-8.2.1" class="auto internal xref">8.2.1</a>.  <a href="#name-advertised-user-timeout" class="internal xref">Advertised User Timeout</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2.2.2">
                    <p id="section-toc.1-1.8.2.2.2.2.1"><a href="#section-8.2.2" class="auto internal xref">8.2.2</a>.  <a href="#name-user-timeout-enabled" class="internal xref">User Timeout Enabled</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2.2.3">
                    <p id="section-toc.1-1.8.2.2.2.3.1"><a href="#section-8.2.3" class="auto internal xref">8.2.3</a>.  <a href="#name-timeout-changeable" class="internal xref">Timeout Changeable</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="auto internal xref">8.3</a>.  <a href="#name-connection-lifecycle-events" class="internal xref">Connection Lifecycle Events</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3.2.1">
                    <p id="section-toc.1-1.8.2.3.2.1.1"><a href="#section-8.3.1" class="auto internal xref">8.3.1</a>.  <a href="#name-soft-errors" class="internal xref">Soft Errors</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3.2.2">
                    <p id="section-toc.1-1.8.2.3.2.2.1"><a href="#section-8.3.2" class="auto internal xref">8.3.2</a>.  <a href="#name-path-change" class="internal xref">Path Change</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-data-transfer" class="internal xref">Data Transfer</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.  <a href="#name-messages-and-framers" class="internal xref">Messages and Framers</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.1">
                    <p id="section-toc.1-1.9.2.1.2.1.1"><a href="#section-9.1.1" class="auto internal xref">9.1.1</a>.  <a href="#name-message-contexts" class="internal xref">Message Contexts</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.2">
                    <p id="section-toc.1-1.9.2.1.2.2.1"><a href="#section-9.1.2" class="auto internal xref">9.1.2</a>.  <a href="#name-message-framers" class="internal xref">Message Framers</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.3">
                    <p id="section-toc.1-1.9.2.1.2.3.1"><a href="#section-9.1.3" class="auto internal xref">9.1.3</a>.  <a href="#name-message-properties" class="internal xref">Message Properties</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.  <a href="#name-sending-data" class="internal xref">Sending Data</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.1">
                    <p id="section-toc.1-1.9.2.2.2.1.1"><a href="#section-9.2.1" class="auto internal xref">9.2.1</a>.  <a href="#name-basic-sending" class="internal xref">Basic Sending</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.2">
                    <p id="section-toc.1-1.9.2.2.2.2.1"><a href="#section-9.2.2" class="auto internal xref">9.2.2</a>.  <a href="#name-send-events" class="internal xref">Send Events</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.3">
                    <p id="section-toc.1-1.9.2.2.2.3.1"><a href="#section-9.2.3" class="auto internal xref">9.2.3</a>.  <a href="#name-partial-sends" class="internal xref">Partial Sends</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.4">
                    <p id="section-toc.1-1.9.2.2.2.4.1"><a href="#section-9.2.4" class="auto internal xref">9.2.4</a>.  <a href="#name-batching-sends" class="internal xref">Batching Sends</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.5">
                    <p id="section-toc.1-1.9.2.2.2.5.1"><a href="#section-9.2.5" class="auto internal xref">9.2.5</a>.  <a href="#name-send-on-active-open-initiat" class="internal xref">Send on Active Open: InitiateWithSend</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.6">
                    <p id="section-toc.1-1.9.2.2.2.6.1"><a href="#section-9.2.6" class="auto internal xref">9.2.6</a>.  <a href="#name-priority-and-the-transport-" class="internal xref">Priority and the Transport Services API</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="auto internal xref">9.3</a>.  <a href="#name-receiving-data" class="internal xref">Receiving Data</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3.2.1">
                    <p id="section-toc.1-1.9.2.3.2.1.1"><a href="#section-9.3.1" class="auto internal xref">9.3.1</a>.  <a href="#name-enqueuing-receives" class="internal xref">Enqueuing Receives</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3.2.2">
                    <p id="section-toc.1-1.9.2.3.2.2.1"><a href="#section-9.3.2" class="auto internal xref">9.3.2</a>.  <a href="#name-receive-events" class="internal xref">Receive Events</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3.2.3">
                    <p id="section-toc.1-1.9.2.3.2.3.1"><a href="#section-9.3.3" class="auto internal xref">9.3.3</a>.  <a href="#name-receive-message-properties" class="internal xref">Receive Message Properties</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-connection-termination" class="internal xref">Connection Termination</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-connection-state-and-orderi" class="internal xref">Connection State and Ordering of Operations and Events</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="auto internal xref">13</a>. <a href="#name-privacy-and-security-consid" class="internal xref">Privacy and Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="auto internal xref">14</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.1">
                <p id="section-toc.1-1.14.2.1.1"><a href="#section-14.1" class="auto internal xref">14.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.2">
                <p id="section-toc.1-1.14.2.2.1"><a href="#section-14.2" class="auto internal xref">14.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-implementation-mapping" class="internal xref">Implementation Mapping</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.1">
                <p id="section-toc.1-1.15.2.1.1"><a href="#appendix-A.1" class="auto internal xref">A.1</a>.  <a href="#name-types" class="internal xref">Types</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.2">
                <p id="section-toc.1-1.15.2.2.1"><a href="#appendix-A.2" class="auto internal xref">A.2</a>.  <a href="#name-events-and-errors" class="internal xref">Events and Errors</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.3">
                <p id="section-toc.1-1.15.2.3.1"><a href="#appendix-A.3" class="auto internal xref">A.3</a>.  <a href="#name-time-duration" class="internal xref">Time Duration</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-convenience-functions" class="internal xref">Convenience Functions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.1">
                <p id="section-toc.1-1.16.2.1.1"><a href="#appendix-B.1" class="auto internal xref">B.1</a>.  <a href="#name-adding-preference-propertie" class="internal xref">Adding Preference Properties</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.2">
                <p id="section-toc.1-1.16.2.2.1"><a href="#appendix-B.2" class="auto internal xref">B.2</a>.  <a href="#name-transport-property-profiles" class="internal xref">Transport Property Profiles</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.2.2.1">
                    <p id="section-toc.1-1.16.2.2.2.1.1"><a href="#appendix-B.2.1" class="auto internal xref">B.2.1</a>.  <a href="#name-reliable-inorder-stream" class="internal xref">reliable-inorder-stream</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.2.2.2">
                    <p id="section-toc.1-1.16.2.2.2.2.1"><a href="#appendix-B.2.2" class="auto internal xref">B.2.2</a>.  <a href="#name-reliable-message" class="internal xref">reliable-message</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.2.2.3">
                    <p id="section-toc.1-1.16.2.2.2.3.1"><a href="#appendix-B.2.3" class="auto internal xref">B.2.3</a>.  <a href="#name-unreliable-datagram" class="internal xref">unreliable-datagram</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#appendix-C" class="auto internal xref">Appendix C</a>.  <a href="#name-relationship-to-the-minimal" class="internal xref">Relationship to the Minimal Set of Transport Services for End Systems</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#appendix-D" class="auto internal xref"></a><a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a href="#appendix-E" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">This document specifies an abstract Application Programming Interface (API) that describes the interface component of
the high-level Transport Services Architecture defined in
<span>[<a href="#RFC9621" class="cite xref">RFC9621</a>]</span>. A Transport Services System supports
asynchronous, atomic transmission of Messages over transport protocols and
network paths dynamically selected at runtime, in environments where an endpoint
selects from multiple network paths and potential transport protocols.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">Applications that adopt this API will benefit from a wide set of
transport features that can evolve over time. This protocol-independent API ensures that the system
providing the API can optimize its behavior based on the application
requirements and network conditions, without requiring changes to the
applications.  This flexibility enables faster deployment of new features and
protocols and can support applications by offering racing and fallback
mechanisms, which otherwise need to be separately implemented in each application.
Transport Services Implementations are free to take any desired form as long
as the API specification in this document is honored; a non-prescriptive guide to
implementing a Transport Services System is available (see <span>[<a href="#RFC9623" class="cite xref">RFC9623</a>]</span>).<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">The Transport Services System derives specific path and Protocol Selection
Properties and supported transport features from the analysis provided in
<span>[<a href="#RFC8095" class="cite xref">RFC8095</a>]</span>, <span>[<a href="#RFC8923" class="cite xref">RFC8923</a>]</span>, and
<span>[<a href="#RFC8922" class="cite xref">RFC8922</a>]</span>. The Transport Services API enables an implementation
to dynamically choose a transport protocol rather
than statically binding applications to a protocol at
compile time. The Transport Services API also provides
applications with a way to override transport selection and instantiate a specific stack,
e.g., to support servers wishing to listen to a specific protocol. However, forcing a
choice to use a specific Protocol Stack is discouraged for general use because it can reduce portability.<a href="#section-1-3" class="pilcrow">¶</a></p>
<div id="notation">
<section id="section-1.1">
        <h3 id="name-terminology-and-notation">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-terminology-and-notation" class="section-name selfRef">Terminology and Notation</a>
        </h3>
<p id="section-1.1-1">The Transport Services API is described in terms of:<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-2.1">
            <p id="section-1.1-2.1.1">Objects with which an application can interact;<a href="#section-1.1-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.1-2.2">
            <p id="section-1.1-2.2.1">Actions the application can perform on these objects;<a href="#section-1.1-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.1-2.3">
            <p id="section-1.1-2.3.1">Events, which an object can send to an application to be processed asynchronously; and<a href="#section-1.1-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.1-2.4">
            <p id="section-1.1-2.4.1">Parameters associated with these actions and events.<a href="#section-1.1-2.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-1.1-3">The following notations, which can be combined, are used in this document:<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-4.1">
            <p id="section-1.1-4.1.1">An action that creates an object:<a href="#section-1.1-4.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div class="alignLeft art-text artwork" id="section-1.1-5">
<pre>
      Object := Action()
</pre><a href="#section-1.1-5" class="pilcrow">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-1.1-6.1">
            <p id="section-1.1-6.1.1">An action that creates an array of objects:<a href="#section-1.1-6.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div class="alignLeft art-text artwork" id="section-1.1-7">
<pre>
      []Object := Action()
</pre><a href="#section-1.1-7" class="pilcrow">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-1.1-8.1">
            <p id="section-1.1-8.1.1">An action that is performed on an object:<a href="#section-1.1-8.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div class="alignLeft art-text artwork" id="section-1.1-9">
<pre>
      Object.Action()
</pre><a href="#section-1.1-9" class="pilcrow">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-1.1-10.1">
            <p id="section-1.1-10.1.1">An object sends an event:<a href="#section-1.1-10.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div class="alignLeft art-text artwork" id="section-1.1-11">
<pre>
      Object -&gt; Event&lt;&gt;
</pre><a href="#section-1.1-11" class="pilcrow">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-1.1-12.1">
            <p id="section-1.1-12.1.1">An action takes a set of parameters; an event contains a set of parameters.
Action and event parameters whose names are suffixed with a question mark are optional:<a href="#section-1.1-12.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div class="alignLeft art-text artwork" id="section-1.1-13">
<pre>
      Action(param0, param1?, ...)
      Event&lt;param0, param1?, ...&gt;
</pre><a href="#section-1.1-13" class="pilcrow">¶</a>
</div>
<p id="section-1.1-14">Objects that are passed as parameters to actions use call-by-value behavior.
Actions not associated with an object are actions on the API; they are equivalent to actions on a per-application global context.<a href="#section-1.1-14" class="pilcrow">¶</a></p>
<p id="section-1.1-15">Events are sent to the application or application-supplied code (e.g., Framers;
see <a href="#framing" class="auto internal xref">Section 9.1.2</a>) for processing; the details of event interfaces are specific to the platform or
implementation and can be implemented using
other forms of asynchronous processing, as idiomatic for the
implementing platform.<a href="#section-1.1-15" class="pilcrow">¶</a></p>
<p id="section-1.1-16">We also make use of the following basic types:<a href="#section-1.1-16" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.1-17">
          <dt id="section-1.1-17.1">Boolean:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-17.2"> Instances take the value <code>true</code> or <code>false</code>.<a href="#section-1.1-17.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-17.3">Integer:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-17.4"> Instances take integer values.<a href="#section-1.1-17.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-17.5">Numeric:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-17.6"> Instances take real number values.<a href="#section-1.1-17.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-17.7">String:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-17.8"> Instances are represented in UTF-8.<a href="#section-1.1-17.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-17.9">IP Address:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-17.10"> An IPv4 address <span>[<a href="#RFC791" class="cite xref">RFC791</a>]</span> or IPv6 address <span>[<a href="#RFC4291" class="cite xref">RFC4291</a>]</span>.<a href="#section-1.1-17.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-17.11">Enumeration:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-17.12"> A family of types in which each instance takes one of a fixed,
predefined set of values specific to a given enumerated type.<a href="#section-1.1-17.12" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-17.13">Tuple:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-17.14"> An ordered grouping of multiple value types, represented as a
comma-separated list in parentheses, e.g., <code>(Enumeration, Preference)</code>.
Instances take a sequence of values, each valid for the corresponding value
type.<a href="#section-1.1-17.14" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-17.15">Array:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-17.16"> Denoted <code>[]Type</code>, an instance takes a value for each of zero or more
elements in a sequence of the given Type. An array can be of fixed or
variable length.<a href="#section-1.1-17.16" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-17.17">Set:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-17.18"> An unordered grouping of one or more different values of the same type.<a href="#section-1.1-17.18" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-1.1-18">For guidance on how these abstract concepts can be implemented in languages
in accordance with language-specific design patterns and platform features,
see <a href="#implmapping" class="auto internal xref">Appendix A</a>.<a href="#section-1.1-18" class="pilcrow">¶</a></p>
</section>
</div>
<div id="specification-of-requirements">
<section id="section-1.2">
        <h3 id="name-specification-of-requiremen">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-specification-of-requiremen" class="section-name selfRef">Specification of Requirements</a>
        </h3>
<p id="section-1.2-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>",
        "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>",
        "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>",
        "<span class="bcp14">SHOULD NOT</span>",
        "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
        "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document
        are to be interpreted as described in BCP 14
        <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only
        when, they appear in all capitals, as shown here.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="principles">
<section id="section-2">
      <h2 id="name-overview-of-the-api-design">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-overview-of-the-api-design" class="section-name selfRef">Overview of the API Design</a>
      </h2>
<p id="section-2-1">The design of the API specified in this document is based on a set of
principles, themselves an elaboration on the architectural design principles
defined in <span>[<a href="#RFC9621" class="cite xref">RFC9621</a>]</span>. The API defined in this document
provides:<a href="#section-2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.1">
          <p id="section-2-2.1.1">A Transport Services System that
can offer a variety of transport protocols, independent
of the Protocol Stacks that will be used at
runtime. To the degree possible, all common features of these Protocol
Stacks are made available to the application in a
transport-independent way.
This enables applications written for a single API
to make use of transport protocols in terms of the features
they provide.<a href="#section-2-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.2">
          <p id="section-2-2.2.1">A unified API to datagram and stream-oriented transports, allowing
the use of a common API for Connection establishment and closing.<a href="#section-2-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.3">
          <p id="section-2-2.3.1">Message-orientation, as opposed to stream-orientation, using
    application-assisted framing and deframing where the underlying
    transport does not itself provide the required framing.<a href="#section-2-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.4">
          <p id="section-2-2.4.1">Asynchronous Connection establishment, transmission, and reception.
This allows concurrent operations during establishment and event-driven
application interactions with the transport layer.<a href="#section-2-2.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.5">
          <p id="section-2-2.5.1">Selection between alternate network paths, using additional information about the
networks over which a Connection can operate (e.g., Provisioning Domain (PvD)
information <span>[<a href="#RFC7556" class="cite xref">RFC7556</a>]</span>) where available.<a href="#section-2-2.5.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.6">
          <p id="section-2-2.6.1">Explicit support for transport-specific features to be applied, when that
particular transport is part of a chosen Protocol Stack.<a href="#section-2-2.6.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.7">
          <p id="section-2-2.7.1">Explicit support for security properties as first-order transport features.<a href="#section-2-2.7.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.8">
          <p id="section-2-2.8.1">Explicit support for configuration of cryptographic identities and transport
Security Parameters persistent across multiple Connections.<a href="#section-2-2.8.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.9">
          <p id="section-2-2.9.1">Explicit support for multistreaming and multipath transport protocols, and
the grouping of related Connections into Connection Groups through "cloning"
of Connections (see <a href="#groups" class="auto internal xref">Section 7.4</a>). This function allows applications to take full advantage of new
transport protocols supporting these features.<a href="#section-2-2.9.1" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="api-summary">
<section id="section-3">
      <h2 id="name-api-summary">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-api-summary" class="section-name selfRef">API Summary</a>
      </h2>
<p id="section-3-1">An application primarily interacts with this API through two objects:
Preconnections and Connections. A Preconnection object (<a href="#pre-establishment" class="auto internal xref">Section 6</a>)
represents a set of Properties and constraints on the selection and configuration of
paths and protocols to establish a Connection with an Endpoint. A Connection object
represents an instance of a transport Protocol Stack on which data can be sent to and/or
received from a Remote Endpoint (i.e., a logical connection that, depending on the
kind of transport, can be bidirectional or unidirectional, and that can use a stream
protocol or a datagram protocol). Connections are presented consistently to the
application, irrespective of whether the underlying transport is connectionless or
connection oriented. Connections can be created from Preconnections in three ways:<a href="#section-3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-2.1">
          <p id="section-3-2.1.1">initiating the Preconnection (i.e., creating a Connection from the Preconnection, actively opening, as in a client; see <code>Initiate</code> in <a href="#initiate" class="auto internal xref">Section 7.1</a>),<a href="#section-3-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-2.2">
          <p id="section-3-2.2.1">listening on the Preconnection (i.e., creating a Listener based on the Preconnection, passively opening, as in a server; see <code>Listen</code> in <a href="#listen" class="auto internal xref">Section 7.2</a>), or<a href="#section-3-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-2.3">
          <p id="section-3-2.3.1">a rendezvous for the Preconnection (i.e., peer-to-peer Connection establishment; see <code>Rendezvous</code> in <a href="#rendezvous" class="auto internal xref">Section 7.3</a>).<a href="#section-3-2.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-3-3">Once a Connection is established, data can be sent and received on it in the form of
Messages. The API supports the preservation of Message boundaries via both
explicit Protocol Stack support and application support through a
Message Framer that finds Message boundaries in a stream. Messages are
received asynchronously through event handlers registered by the application.
Errors and other notifications also happen asynchronously on the Connection.
It is not necessary for an application to handle all events; some events can
have implementation-specific default handlers.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">The application <span class="bcp14">SHOULD NOT</span>
assume that ignoring events (e.g., errors) is always safe.<a href="#section-3-4" class="pilcrow">¶</a></p>
<div id="usage-examples">
<section id="section-3.1">
        <h3 id="name-usage-examples">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-usage-examples" class="section-name selfRef">Usage Examples</a>
        </h3>
<p id="section-3.1-1">The following usage examples illustrate how an application might use the
Transport Services API to act as:<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-2.1">
            <p id="section-3.1-2.1.1">a server, by listening for incoming Connections, receiving requests,
and sending responses; see <a href="#server-example" class="auto internal xref">Section 3.1.1</a>.<a href="#section-3.1-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.1-2.2">
            <p id="section-3.1-2.2.1">a client, by connecting to a Remote Endpoint using <code>Initiate</code>, sending
requests, and receiving responses; see <a href="#client-example" class="auto internal xref">Section 3.1.2</a>.<a href="#section-3.1-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.1-2.3">
            <p id="section-3.1-2.3.1">a peer, by connecting to a Remote Endpoint using <code>Rendezvous</code> while
simultaneously waiting for incoming Connections, sending Messages, and
receiving Messages; see <a href="#peer-example" class="auto internal xref">Section 3.1.3</a>.<a href="#section-3.1-2.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-3.1-3">The examples in this section presume that a transport protocol is available
between the Local and Remote Endpoints and that this protocol provides reliable data transfer, preservation of
data ordering, and preservation of Message boundaries. In this case, the
application can choose to receive only complete Messages.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1-4">If none of the available transport protocols provide preservation of Message
boundaries, but there is a transport protocol that provides a reliable ordered
byte-stream, an application could receive this byte-stream as partial
Messages and transform it into application-layer Messages.  Alternatively,
an application might provide a Message Framer, which can transform a
sequence of Messages into a byte-stream and vice versa (<a href="#framing" class="auto internal xref">Section 9.1.2</a>).<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<div id="server-example">
<section id="section-3.1.1">
          <h4 id="name-server-example">
<a href="#section-3.1.1" class="section-number selfRef">3.1.1. </a><a href="#name-server-example" class="section-name selfRef">Server Example</a>
          </h4>
<p id="section-3.1.1-1">This is an example of how an application might listen for incoming Connections
using the Transport Services API, receive a request, and send a response.<a href="#section-3.1.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.1.1-2">
<pre>
LocalSpecifier := NewLocalEndpoint()
LocalSpecifier.WithInterface("any")
LocalSpecifier.WithService("https")

TransportProperties := NewTransportProperties()
TransportProperties.Require(preserveMsgBoundaries)
// Reliable data transfer and preserve order are required by default

SecurityParameters := NewSecurityParameters()
SecurityParameters.Set(serverCertificate, myCertificate)

// Specifying a Remote Endpoint is optional when using Listen
Preconnection := NewPreconnection(LocalSpecifier,
                                  TransportProperties,
                                  SecurityParameters)

Listener := Preconnection.Listen()

Listener -&gt; ConnectionReceived&lt;Connection&gt;

// Only receive complete messages in a Conn.Received handler
Connection.Receive()

Connection -&gt; Received&lt;messageDataRequest, messageContext&gt;

//---- Receive event handler begin ----
Connection.Send(messageDataResponse)
Connection.Close()

// Stop listening for incoming Connections
// (this example supports only one Connection)
Listener.Stop()
//---- Receive event handler end ----
</pre><a href="#section-3.1.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="client-example">
<section id="section-3.1.2">
          <h4 id="name-client-example">
<a href="#section-3.1.2" class="section-number selfRef">3.1.2. </a><a href="#name-client-example" class="section-name selfRef">Client Example</a>
          </h4>
<p id="section-3.1.2-1">This is an example of how an application might open two Connections
   to a remote application using the Transport Services API, send a
   request, and receive a response for each of the two Connections.
The code designated with comments as "Ready event handler" could, for example, be implemented
as a callback function. This function would receive the Connection that it expects
to operate on ("Connection" and "Connection2" in the example) handed over using the variable
name "C".<a href="#section-3.1.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.1.2-2">
<pre>
RemoteSpecifier := NewRemoteEndpoint()
RemoteSpecifier.WithHostName("example.com")
RemoteSpecifier.WithService("https")

TransportProperties := NewTransportProperties()
TransportProperties.Require(preserve-msg-boundaries)
// Reliable data transfer and preserve order are required by default

SecurityParameters := NewSecurityParameters()
TrustCallback := NewCallback({
  // Verify the identity of the Remote Endpoint and return the result
})
SecurityParameters.SetTrustVerificationCallback(TrustCallback)

// Specifying a Local Endpoint is optional when using Initiate
Preconnection := NewPreconnection(RemoteSpecifier,
                                  TransportProperties,
                                  SecurityParameters)

Connection := Preconnection.Initiate()
Connection2 := Connection.Clone()

Connection -&gt; Ready&lt;&gt;
Connection2 -&gt; Ready&lt;&gt;

//---- Ready event handler for any Connection C begin ----
C.Send(messageDataRequest)

// Only receive complete messages
C.Receive()
//---- Ready event handler for any Connection C end ----

Connection -&gt; Received&lt;messageDataResponse, messageContext&gt;
Connection2 -&gt; Received&lt;messageDataResponse, messageContext&gt;

// Close the Connection in a Receive event handler
Connection.Close()
Connection2.Close()
</pre><a href="#section-3.1.2-2" class="pilcrow">¶</a>
</div>
<p id="section-3.1.2-3">A Preconnection serves as a template for creating a Connection via initiating, listening, or via rendezvous. Once a Connection has been created,
changes made to the Preconnection that was used to create it do not affect this Connection. Preconnections are reusable after being used to create a Connection, whether or not this Connection was closed. Hence, in the above example, it would be correct for the client to initiate a third Connection to the <code>example.com</code> server by continuing as follows:<a href="#section-3.1.2-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.1.2-4">
<pre>
//.. carry out adjustments to the Preconnection, if desired
Connection3 := Preconnection.Initiate()
</pre><a href="#section-3.1.2-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="peer-example">
<section id="section-3.1.3">
          <h4 id="name-peer-example">
<a href="#section-3.1.3" class="section-number selfRef">3.1.3. </a><a href="#name-peer-example" class="section-name selfRef">Peer Example</a>
          </h4>
<p id="section-3.1.3-1">This is an example of how an application might establish a Connection with a
peer using <code>Rendezvous</code>, send a Message, and receive a Message.<a href="#section-3.1.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.1.3-2">
<pre>
// Configure local candidates: a port on the Local Endpoint
// and via a Session Traversal Utilities for NAT (STUN) server
HostCandidate := NewLocalEndpoint()
HostCandidate.WithPort(9876)

StunCandidate := NewLocalEndpoint()
StunCandidate.WithStunServer(address, port, credentials)

LocalCandidates = [HostCandidate, StunCandidate]

TransportProperties := // ...Configure transport properties
SecurityParameters  := // ...Configure security properties

Preconnection := NewPreconnection(LocalCandidates,
                                  [], // No remote candidates yet
                                  TransportProperties,
                                  SecurityParameters)

// Resolve the LocalCandidates.  The Preconnection.Resolve()
// call resolves both local and remote candidates; however,
// because the remote candidates have not yet been specified,
// the ResolvedRemote list returned will be empty and is not
// used.
ResolvedLocal, ResolvedRemote = Preconnection.Resolve()

// Application-specific code goes here to send the ResolvedLocal
// list to the peer via some out-of-band signaling channel (e.g.,
// in a SIP message).
...

// Application-specific code goes here to receive RemoteCandidates
// (type []RemoteEndpoint, a list of RemoteEndpoint objects) from
// the peer via the signaling channel.
...

// Add remote candidates and initiate the rendezvous:
Preconnection.AddRemote(RemoteCandidates)
Preconnection.Rendezvous()

Preconnection -&gt; RendezvousDone&lt;Connection&gt;

//---- RendezvousDone event handler begin ----
Connection.Send(messageDataRequest)
Connection.Receive()
//---- RendezvousDone event handler end ----

Connection -&gt; Received&lt;messageDataResponse, messageContext&gt;

// If new Remote Endpoint candidates are received from the
// peer over the signaling channel -- for example, if using
// Trickle Interactive Connectivity Establishment (ICE) --
// then add them to the Connection:
Connection.AddRemote(NewRemoteCandidates)

// On a PathChange event, resolve the Local Endpoint Identifiers to
// see if a new Local Endpoint has become available and, if
// so, send to the peer as a new candidate and add to the
// Connection:
Connection -&gt; PathChange&lt;&gt;

//---- PathChange event handler begin ----
ResolvedLocal, ResolvedRemote = Preconnection.Resolve()
if ResolvedLocal has changed:
  // Application-specific code goes here to send the
  // ResolvedLocal list to the peer via the signaling channel
  ...

  // Add the new Local Endpoints to the Connection:
  Connection.AddLocal(ResolvedLocal)
//---- PathChange event handler end ----

// Close the Connection in a Receive event handler:
Connection.Close()
</pre><a href="#section-3.1.3-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="transport-properties">
<section id="section-4">
      <h2 id="name-transport-properties">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-transport-properties" class="section-name selfRef">Transport Properties</a>
      </h2>
<p id="section-4-1">Each application using the Transport Services API declares its preferences
for how the Transport Services System is to operate. This is done by using
Transport Properties, as defined in <span>[<a href="#RFC9621" class="cite xref">RFC9621</a>]</span>, at each stage
of the lifetime of a Connection.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">Transport Properties are divided into Selection, Connection, and Message
Properties.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">Selection Properties (see <a href="#selection-props" class="auto internal xref">Section 6.2</a>) can only be set
during preestablishment. They are only used to specify which paths and
Protocol Stacks can be used and are preferred by the application.
Calling <code>Initiate</code> on a Preconnection creates an outbound Connection,
and the Selection Properties remain readable from the
Connection but become immutable. Selection Properties
can be set on Preconnections, and the effect of Selection Properties
can be queried on Connections and Messages.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">Connection Properties (see <a href="#connection-props" class="auto internal xref">Section 8.1</a>) are used to inform
decisions made during establishment and to fine-tune the established
Connection. They can be set during preestablishment and can be
changed later. Connection Properties can be set on Connections and
Preconnections; when set on Preconnections, they act as an initial
default for the resulting Connections.<a href="#section-4-4" class="pilcrow">¶</a></p>
<p id="section-4-5">Message Properties (see <a href="#message-props" class="auto internal xref">Section 9.1.3</a>) control the behavior of the
selected Protocol Stack(s) when sending Messages. Message Properties
can be set on Messages, Connections, and Preconnections; when set on
the latter two, they act as an initial default for the Messages sent
over those Connections.<a href="#section-4-5" class="pilcrow">¶</a></p>
<p id="section-4-6">Note that configuring Connection Properties and Message Properties on
Preconnections is preferred over setting them later. Early specification of
Connection Properties allows their use as additional input to the selection
process. Protocol-specific Properties, which enable configuration of specialized
features of a specific protocol (see <span><a href="https://rfc-editor.org/rfc/rfc9621#section-3.2" class="relref">Section 3.2</a> of [<a href="#RFC9621" class="cite xref">RFC9621</a>]</span>), are not
used as input to the selection process; they only support configuration if
the respective protocol has been selected.<a href="#section-4-6" class="pilcrow">¶</a></p>
<div id="property-names">
<section id="section-4.1">
        <h3 id="name-transport-property-names">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-transport-property-names" class="section-name selfRef">Transport Property Names</a>
        </h3>
<p id="section-4.1-1">Transport Properties are referred to by names, represented as case-insensitive strings. These names serve two purposes:<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-2.1">
            <p id="section-4.1-2.1.1">Allowing different components of a Transport Services
   Implementation to pass Transport Properties (e.g., between a
   language frontend and a policy manager) or to enable a Transport
   Services Implementation to represent Properties retrieved from
   a file or other storage to the application.<a href="#section-4.1-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.1-2.2">
            <p id="section-4.1-2.2.1">Making the code of different Transport Services Implementations
   look similar.  While individual programming languages might
   preclude strict adherence to the naming convention of representing
   Property names as case-insensitive strings
   (for instance, by prohibiting the use of hyphens in symbols),
   users interacting with multiple implementations will still benefit
   from the consistency resulting from the use of visually similar
   symbols.<a href="#section-4.1-2.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-4.1-3">Transport Property names are hierarchically organized in the
form [&lt;Namespace&gt;.]&lt;PropertyName&gt;.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-4.1">
            <p id="section-4.1-4.1.1">The optional Namespace component and its trailing dot character ("<code>.</code>") <span class="bcp14">MUST</span> be omitted for well-known
generic Properties, i.e., for Properties that are not specific to a protocol.<a href="#section-4.1-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.1-4.2">
            <p id="section-4.1-4.2.1">Protocol-specific Properties <span class="bcp14">MUST</span> use the protocol acronym as the Namespace (e.g., a
Connection that uses TCP could support a TCP-specific Transport Property, such as the TCP User Timeout
value, in a Protocol-specific Property called <code>tcp.userTimeoutValue</code> (see <a href="#tcp-uto" class="auto internal xref">Section 8.2</a>)).<a href="#section-4.1-4.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.1-4.3">
            <p id="section-4.1-4.3.1">Vendor-specific or implementation-specific Properties <span class="bcp14">MUST</span> be placed in a Namespace starting with the underscore character ("<code>_</code>") 
 and <span class="bcp14">SHOULD</span> use a string identifying the vendor or implementation.<a href="#section-4.1-4.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.1-4.4">
            <p id="section-4.1-4.4.1">For IETF protocols, the name of a Protocol-specific Property <span class="bcp14">MUST</span> be specified in an RFC from the IETF Stream (after IETF Review <span>[<a href="#RFC8126" class="cite xref">RFC8126</a>]</span>).  An IETF protocol Namespace does not start with an underscore character ("<code>_</code>").<a href="#section-4.1-4.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-4.1-5">Namespaces for each of the keywords provided in the "Protocol Numbers" registry
(see <span>&lt;<a href="https://www.iana.org/assignments/protocol-numbers/">https://www.iana.org/assignments/protocol-numbers/</a>&gt;</span>) are reserved
for Protocol-specific Properties and <span class="bcp14">MUST NOT</span> be used for vendor-specific or implementation-specific Properties.
Terms listed as keywords, as in the "Protocol Numbers" registry, <span class="bcp14">SHOULD</span> be avoided as any part of a vendor-specific or
implementation-specific Property name.<a href="#section-4.1-5" class="pilcrow">¶</a></p>
<p id="section-4.1-6">Though Transport Property names are case insensitive, it is recommended to use camelCase to improve readability.
Implementations may transpose Transport Property names into snake_case or PascalCase to blend into the language environment.<a href="#section-4.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="property-types">
<section id="section-4.2">
        <h3 id="name-transport-property-types">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-transport-property-types" class="section-name selfRef">Transport Property Types</a>
        </h3>
<p id="section-4.2-1">Each Transport Property has one of the basic types described in <a href="#notation" class="auto internal xref">Section 1.1</a>.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">Most Selection Properties (see <a href="#selection-props" class="auto internal xref">Section 6.2</a>) are of the Enumeration type,
and they use the Preference Enumeration, which takes one of five possible values
(<code>Prohibit</code>, <code>Avoid</code>, <code>No Preference</code>, <code>Prefer</code>, or <code>Require</code>) denoting the level of preference
for a given Property during protocol selection.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="scope-of-interface-defn">
<section id="section-5">
      <h2 id="name-scope-of-the-api-definition">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-scope-of-the-api-definition" class="section-name selfRef">Scope of the API Definition</a>
      </h2>
<p id="section-5-1">This document defines a language- and platform-independent API of a
Transport Services System. Given the wide variety of languages and language
conventions used to write applications that use the transport layer to connect
to other applications over the Internet, this independence makes this API
necessarily abstract.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">There is no interoperability benefit in tightly defining how the API is
presented to application programmers across diverse platforms. However,
maintaining the "shape" of the abstract API across different platforms reduces
the effort for programmers who learn to use the Transport Services API to then
apply their knowledge to another platform. That said, implementations have
significant freedom in presenting this API to programmers, balancing the
conventions of the protocol with the shape of the API. We make the following
recommendations:<a href="#section-5-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-3.1">
          <p id="section-5-3.1.1">Actions, events, and errors in implementations of the Transport Services API <span class="bcp14">SHOULD</span> use
the names assigned to them in this document, subject to capitalization,
punctuation, and other typographic conventions in the language of the
implementation, unless the implementation itself uses different names for
substantially equivalent objects for networking by convention.<a href="#section-5-3.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-3.2">
          <p id="section-5-3.2.1">Transport Services Systems <span class="bcp14">SHOULD</span> implement each Selection Property,
Connection Property, and MessageContext Property specified in this document.
These features <span class="bcp14">SHOULD</span> be implemented even when, in a specific implementation, it
will always result in no operation, e.g., there is no action when the API
specifies a Property that is not available in a transport protocol implemented
on a specific platform. For example, if TCP is the only underlying transport protocol,
the Message Property <code>msgOrdered</code> can be implemented (trivially, as a no-op) as
disabling the requirement for ordering will not have any effect on delivery order
for Connections over TCP. Similarly, the <code>msgLifetime</code> Message Property can be
implemented but ignored, as the description of this Property (<a href="#msg-lifetime" class="auto internal xref">Section 9.1.3.1</a>) states that "it is not
guaranteed that a Message will not be sent when its Lifetime has expired".<a href="#section-5-3.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-3.3">
          <p id="section-5-3.3.1">Implementations can use other representations for Transport Property names,
e.g., by providing constants, but should provide a straightforward mapping
between their representation and the Property names specified here.<a href="#section-5-3.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="pre-establishment">
<section id="section-6">
      <h2 id="name-preestablishment-phase">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-preestablishment-phase" class="section-name selfRef">Preestablishment Phase</a>
      </h2>
<p id="section-6-1">The preestablishment phase allows applications to specify Properties for
the Connections that they are about to make or to query the API about potential
Connections they could make.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">A Preconnection object represents a potential Connection. It is a passive object
(a data structure) that merely maintains the state that
describes the Properties of a Connection that might exist in the future.  This state
comprises Local Endpoint and Remote Endpoint objects that denote the Endpoints
of the potential Connection (see <a href="#endpointspec" class="auto internal xref">Section 6.1</a>), the Selection Properties
(see <a href="#selection-props" class="auto internal xref">Section 6.2</a>), any preconfigured Connection Properties
(<a href="#connection-props" class="auto internal xref">Section 8.1</a>), and the Security Parameters (see
<a href="#security-parameters" class="auto internal xref">Section 6.3</a>):<a href="#section-6-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-3">
<pre>
   Preconnection := NewPreconnection([]LocalEndpoint,
                                     []RemoteEndpoint,
                                     TransportProperties,
                                     SecurityParameters)
</pre><a href="#section-6-3" class="pilcrow">¶</a>
</div>
<p id="section-6-4">At least one Local Endpoint <span class="bcp14">MUST</span> be specified if the Preconnection is used to <code>Listen</code>
for incoming Connections, but the list of Local Endpoints <span class="bcp14">MAY</span> be empty if
the Preconnection is used to <code>Initiate</code>
connections. If no Local Endpoint is specified, the Transport Services System will
assign an ephemeral local port to the Connection on the appropriate interface(s).
At least one Remote Endpoint <span class="bcp14">MUST</span> be specified if the Preconnection is used
to <code>Initiate</code> Connections, but the list of Remote Endpoints <span class="bcp14">MAY</span> be empty if
the Preconnection is used to <code>Listen</code> for incoming Connections.
At least one Local Endpoint and one Remote Endpoint <span class="bcp14">MUST</span> be specified if a
peer-to-peer <code>Rendezvous</code> is to occur based on the Preconnection.<a href="#section-6-4" class="pilcrow">¶</a></p>
<p id="section-6-5">If more than one Local Endpoint is specified on a Preconnection, then the application
 is indicating that all of the Local Endpoints are eligible to be used for Connections. For
 example, their Endpoint Identifiers might correspond to different interfaces on a multihomed
host or their Endpoint Identifiers might correspond to local interfaces and a STUN server that
can be resolved to a server-reflexive address for a Preconnection used to
make a peer-to-peer <code>Rendezvous</code>.<a href="#section-6-5" class="pilcrow">¶</a></p>
<p id="section-6-6">If more than one Remote Endpoint is specified on the Preconnection, the
application is indicating that it expects all of the Remote Endpoints to
offer an equivalent service and that the Transport Services System can choose
any of them for a Connection.
For example, a Remote Endpoint might represent various network
interfaces of a host, or a server-reflexive address that can be used to
reach a host, or a set of hosts that provide equivalent local balanced
service.<a href="#section-6-6" class="pilcrow">¶</a></p>
<p id="section-6-7">In most cases, it is expected that a single Remote Endpoint will be
specified by name, and a later call to <code>Initiate</code> on the Preconnection
(see <a href="#initiate" class="auto internal xref">Section 7.1</a>) will internally resolve that name to a list of concrete
Endpoint Identifiers. Specifying multiple Remote Endpoints on a Preconnection allows
applications to override this for more detailed control.<a href="#section-6-7" class="pilcrow">¶</a></p>
<p id="section-6-8">If Message Framers are used (see <a href="#framing" class="auto internal xref">Section 9.1.2</a>), they <span class="bcp14">MUST</span> be added to the
Preconnection during preestablishment.<a href="#section-6-8" class="pilcrow">¶</a></p>
<div id="endpointspec">
<section id="section-6.1">
        <h3 id="name-specifying-endpoints">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-specifying-endpoints" class="section-name selfRef">Specifying Endpoints</a>
        </h3>
<p id="section-6.1-1">The Transport Services API uses the Local Endpoint and Remote Endpoint objects
to refer to the Endpoints of a Connection. Endpoints can be created
as either remote or local:<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1-2">
<pre>
RemoteSpecifier := NewRemoteEndpoint()
LocalSpecifier := NewLocalEndpoint()
</pre><a href="#section-6.1-2" class="pilcrow">¶</a>
</div>
<p id="section-6.1-3">A single Endpoint object represents the identity of a network host. That Endpoint
can be more or less specific, depending on which Endpoint Identifiers are set. For example,
an Endpoint that only specifies a hostname can, in fact, finally correspond
to several different IP addresses on different hosts.<a href="#section-6.1-3" class="pilcrow">¶</a></p>
<p id="section-6.1-4">An Endpoint object can be configured with the following identifiers:<a href="#section-6.1-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1-5.1">
            <p id="section-6.1-5.1.1">HostName (string):<a href="#section-6.1-5.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div class="alignLeft art-text artwork" id="section-6.1-6">
<pre>
RemoteSpecifier.WithHostName("example.com")
</pre><a href="#section-6.1-6" class="pilcrow">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-6.1-7.1">
            <p id="section-6.1-7.1.1">Port (a 16-bit unsigned Integer):<a href="#section-6.1-7.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div class="alignLeft art-text artwork" id="section-6.1-8">
<pre>
RemoteSpecifier.WithPort(443)
</pre><a href="#section-6.1-8" class="pilcrow">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-6.1-9.1">
            <p id="section-6.1-9.1.1">Service (an identifier string that maps to a port; either a service
name associated with a port number (from <span>&lt;<a href="https://www.iana.org/assignments/service-names-port-numbers/">https://www.iana.org/assignments/service-names-port-numbers/</a>&gt;</span>) or a DNS SRV service name to be resolved):<a href="#section-6.1-9.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div class="alignLeft art-text artwork" id="section-6.1-10">
<pre>
RemoteSpecifier.WithService("https")
</pre><a href="#section-6.1-10" class="pilcrow">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-6.1-11.1">
            <p id="section-6.1-11.1.1">IP address (an IPv4 or IPv6 address type; note that the examples here show the human-readable form of the IP addresses, but the functions can take a binary encoding of the addresses):<a href="#section-6.1-11.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div class="alignLeft art-text artwork" id="section-6.1-12">
<pre>
RemoteSpecifier.WithIPAddress(192.0.2.21)
</pre><a href="#section-6.1-12" class="pilcrow">¶</a>
</div>
<div class="alignLeft art-text artwork" id="section-6.1-13">
<pre>
RemoteSpecifier.WithIPAddress(2001:db8:4920:e29d:a420:7461:7073:a)
</pre><a href="#section-6.1-13" class="pilcrow">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-6.1-14.1">
            <p id="section-6.1-14.1.1">Interface identifier (which can be a string name or other platform-specific identifier), e.g., to qualify link-local addresses (see <a href="#ifspec" class="auto internal xref">Section 6.1.2</a> for details):<a href="#section-6.1-14.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div class="alignLeft art-text artwork" id="section-6.1-15">
<pre>
LocalSpecifier.WithInterface("en0")
</pre><a href="#section-6.1-15" class="pilcrow">¶</a>
</div>
<p id="section-6.1-16">The <code>Resolve</code> action on a Preconnection can be used to obtain a list of
available local interfaces.<a href="#section-6.1-16" class="pilcrow">¶</a></p>
<p id="section-6.1-17">Note that an IPv6 address specified with a scope zone ID (e.g., <code>fe80::2001:db8%en0</code>)
is equivalent to <code>WithIPAddress</code> with an unscoped address and <code>WithInterface </code> together.<a href="#section-6.1-17" class="pilcrow">¶</a></p>
<p id="section-6.1-18">Applications creating Endpoint objects using <code>WithHostName</code> <span class="bcp14">SHOULD</span> provide Fully Qualified
Domain Names (FQDNs). Not providing an FQDN will result in the Transport Services Implementation
needing to use DNS search domains for name resolution, which might lead to inconsistent or unpredictable
behavior.<a href="#section-6.1-18" class="pilcrow">¶</a></p>
<p id="section-6.1-19">The design of the API <span class="bcp14">MUST NOT</span> permit an Endpoint object to be configured with multiple Endpoint Identifiers of the same type.
For example, an Endpoint object cannot specify two IP addresses. Two separate IP addresses
are represented as two Endpoint objects. If a Preconnection specifies a Remote
Endpoint with a specific IP address set, it will only establish Connections to
that IP address. If, on the other hand, a Remote Endpoint specifies a hostname
but no addresses, the Transport Services Implementation can perform name resolution and attempt
using any address derived from the original hostname of the Remote Endpoint.
Note that multiple Remote Endpoints can be added to a Preconnection, as discussed
in <a href="#add-endpoints" class="auto internal xref">Section 7.5</a>.<a href="#section-6.1-19" class="pilcrow">¶</a></p>
<p id="section-6.1-20">The Transport Services System resolves names internally, when the <code>Initiate</code>,
<code>Listen</code>, or <code>Rendezvous</code> action is called to establish a Connection. Privacy
considerations for the timing of this resolution are given in <a href="#privacy-security" class="auto internal xref">Section 13</a>.<a href="#section-6.1-20" class="pilcrow">¶</a></p>
<p id="section-6.1-21">The <code>Resolve</code> action on a Preconnection can be used by the application to force
early binding when required, for example, with some Network Address Translator
(NAT) traversal protocols (see <a href="#rendezvous" class="auto internal xref">Section 7.3</a>).<a href="#section-6.1-21" class="pilcrow">¶</a></p>
<div id="using-multicast-endpoints">
<section id="section-6.1.1">
          <h4 id="name-using-multicast-endpoints">
<a href="#section-6.1.1" class="section-number selfRef">6.1.1. </a><a href="#name-using-multicast-endpoints" class="section-name selfRef">Using Multicast Endpoints</a>
          </h4>
<p id="section-6.1.1-1">To use multicast, a Preconnection is first created with the Local or Remote Endpoint Identifier
specifying the Any-Source Multicast (ASM) or Source-Specific Multicast (SSM) group and destination port number.
This is then followed by a call to either <code>Initiate</code>, <code>Listen</code>, or
<code>Rendezvous</code>, depending on whether the resulting Connection is to be
used to send Messages to the multicast group, receive Messages from
the group, or both send and
receive Messages (as is the case for an ASM group).<a href="#section-6.1.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1.1-2">Note that the Transport Services API has separate specifier calls for multicast groups to avoid introducing filter Properties for single-source multicast and seeks to avoid confusion that can be caused by overloading the unicast specifiers.<a href="#section-6.1.1-2" class="pilcrow">¶</a></p>
<p id="section-6.1.1-3">Calling <code>Initiate</code> on that Preconnection creates a Connection that can be
used to send Messages to the multicast group. The Connection object that is
created will support <code>Send</code> but not <code>Receive</code>. Any Connections created this
way are send-only and do not join the multicast group. The resulting
Connection will have a Local Endpoint identifying the local interface to
which the Connection is bound and a Remote Endpoint identifying the
multicast group.<a href="#section-6.1.1-3" class="pilcrow">¶</a></p>
<p id="section-6.1.1-4">The following API calls can be used to configure a Preconnection before calling <code>Initiate</code>:<a href="#section-6.1.1-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.1-5">
<pre>
RemoteSpecifier.WithMulticastGroupIP(GroupAddress)
RemoteSpecifier.WithPort(PortNumber)
RemoteSpecifier.WithHopLimit(HopLimit)
</pre><a href="#section-6.1.1-5" class="pilcrow">¶</a>
</div>
<p id="section-6.1.1-6">Calling <code>Listen</code> on a Preconnection with a multicast group address specified as the Remote
Endpoint Identifier will trigger the Transport Services Implementation to join the multicast group to receive Messages. This Listener
will create one Connection for each Remote Endpoint sending to the group,
with the Local Endpoint Identifier specified as a group address. The set of Connection
objects created forms a Connection Group.
The receiving interface can be restricted by passing it as part of the LocalSpecifier or queried through the MessageContext on the Messages received (see <a href="#msg-ctx" class="auto internal xref">Section 9.1.1</a> for further details).<a href="#section-6.1.1-6" class="pilcrow">¶</a></p>
<p id="section-6.1.1-7">Specifying <code>WithHopLimit</code> sets the Time To Live (TTL) field in the header of IPv4 packets or the Hop Count field in the header of IPv6 packets.<a href="#section-6.1.1-7" class="pilcrow">¶</a></p>
<p id="section-6.1.1-8">The following API calls can be used to configure a Preconnection before calling <code>Listen</code>:<a href="#section-6.1.1-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.1-9">
<pre>
LocalSpecifier.WithSingleSourceMulticastGroupIP(GroupAddress,
                                                SourceAddress)
LocalSpecifier.WithAnySourceMulticastGroupIP(GroupAddress)
LocalSpecifier.WithPort(PortNumber)
</pre><a href="#section-6.1.1-9" class="pilcrow">¶</a>
</div>
<p id="section-6.1.1-10">Calling <code>Rendezvous</code> on a Preconnection with an ASM group
address as the Remote Endpoint Identifier will trigger the Transport Services Implementation to join the multicast group and also
indicates that the resulting Connection can be used to send Messages to the
   multicast group. The <code>Rendezvous</code> action will return both:<a href="#section-6.1.1-10" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6.1.1-11">
<li id="section-6.1.1-11.1">a Connection that
can be used to send to the group and that acts the same as a Connection
returned by calling <code>Initiate</code> with a multicast Remote Endpoint and<a href="#section-6.1.1-11.1" class="pilcrow">¶</a>
</li>
            <li id="section-6.1.1-11.2">a
Listener that acts as if <code>Listen</code> had been called with a multicast Remote
Endpoint.<a href="#section-6.1.1-11.2" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-6.1.1-12">Calling <code>Rendezvous</code> on a Preconnection with an SSM
group address as the Local Endpoint Identifier results in an <code>EstablishmentError</code>.<a href="#section-6.1.1-12" class="pilcrow">¶</a></p>
<p id="section-6.1.1-13">The following API calls can be used to configure a Preconnection before calling <code>Rendezvous</code>:<a href="#section-6.1.1-13" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.1-14">
<pre>
RemoteSpecifier.WithMulticastGroupIP(GroupAddress)
RemoteSpecifier.WithPort(PortNumber)
RemoteSpecifier.WithHopLimit(HopLimit)
LocalSpecifier.WithAnySourceMulticastGroupIP(GroupAddress)
LocalSpecifier.WithPort(PortNumber)
LocalSpecifier.WithHopLimit(HopLimit)
</pre><a href="#section-6.1.1-14" class="pilcrow">¶</a>
</div>
<p id="section-6.1.1-15">See <a href="#multicast-examples" class="auto internal xref">Section 6.1.5</a> for more examples.<a href="#section-6.1.1-15" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ifspec">
<section id="section-6.1.2">
          <h4 id="name-constraining-interfaces-for">
<a href="#section-6.1.2" class="section-number selfRef">6.1.2. </a><a href="#name-constraining-interfaces-for" class="section-name selfRef">Constraining Interfaces for Endpoints</a>
          </h4>
<p id="section-6.1.2-1">Note that this API has multiple ways to constrain and prioritize Endpoint candidates based on the network interface:<a href="#section-6.1.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1.2-2.1">
              <p id="section-6.1.2-2.1.1">Specifying an interface on a Remote Endpoint qualifies the scope zone of the Remote Endpoint, e.g., for link-local addresses.<a href="#section-6.1.2-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-6.1.2-2.2">
              <p id="section-6.1.2-2.2.1">Specifying an interface on a Local Endpoint explicitly binds all candidates derived from this Endpoint to use the specified interface.<a href="#section-6.1.2-2.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-6.1.2-2.3">
              <p id="section-6.1.2-2.3.1">Specifying an interface using the <code>interface</code> Selection Property (<a href="#prop-interface" class="auto internal xref">Section 6.2.11</a>) or indirectly via the <code>pvd</code> Selection Property (<a href="#prop-pvd" class="auto internal xref">Section 6.2.12</a>) influences the selection among the available candidates.<a href="#section-6.1.2-2.3.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-6.1.2-3">While specifying an interface on an Endpoint restricts the candidates available for Connection establishment in the preestablishment phase, the Selection Properties prioritize and constrain the Connection establishment.<a href="#section-6.1.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="protocol-specific-endpoints">
<section id="section-6.1.3">
          <h4 id="name-protocol-specific-endpoints">
<a href="#section-6.1.3" class="section-number selfRef">6.1.3. </a><a href="#name-protocol-specific-endpoints" class="section-name selfRef">Protocol-Specific Endpoints</a>
          </h4>
<p id="section-6.1.3-1">An Endpoint can have an alternative definition when using different protocols.
For example, a server that supports both TLS/TCP and QUIC could be accessible
on two different port numbers, depending on which protocol is used.<a href="#section-6.1.3-1" class="pilcrow">¶</a></p>
<p id="section-6.1.3-2">To scope an Endpoint to apply conditionally to a specific transport
protocol (such as defining an alternate port to use when QUIC
is selected, as opposed to TCP), an Endpoint can be
associated with a protocol identifier. Protocol identifiers are
objects or Enumeration values provided by the Transport
Services API that will vary based on which protocols are
implemented in a particular system.<a href="#section-6.1.3-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.3-3">
<pre>
AlternateRemoteSpecifier.WithProtocol(QUIC)
</pre><a href="#section-6.1.3-3" class="pilcrow">¶</a>
</div>
<p id="section-6.1.3-4">The following example shows a case where <code>example.com</code> has a server
running on port 443 with an alternate port of 8443 for QUIC. Both
endpoints can be passed when creating a Preconnection.<a href="#section-6.1.3-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.3-5">
<pre>
RemoteSpecifier := NewRemoteEndpoint()
RemoteSpecifier.WithHostName("example.com")
RemoteSpecifier.WithPort(443)

QUICRemoteSpecifier := NewRemoteEndpoint()
QUICRemoteSpecifier.WithHostName("example.com")
QUICRemoteSpecifier.WithPort(8443)
QUICRemoteSpecifier.WithProtocol(QUIC)

RemoteSpecifiers := [ RemoteSpecifier, QUICRemoteSpecifier ]
</pre><a href="#section-6.1.3-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="endpoint-examples">
<section id="section-6.1.4">
          <h4 id="name-endpoint-examples">
<a href="#section-6.1.4" class="section-number selfRef">6.1.4. </a><a href="#name-endpoint-examples" class="section-name selfRef">Endpoint Examples</a>
          </h4>
<p id="section-6.1.4-1">The following examples of Endpoints show common usage patterns.<a href="#section-6.1.4-1" class="pilcrow">¶</a></p>
<p id="section-6.1.4-2">Specify a Remote Endpoint using a hostname <code>example.com</code> and a service name <code>https</code>, which tells the system to use the default port for HTTPS (443):<a href="#section-6.1.4-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.4-3">
<pre>
RemoteSpecifier := NewRemoteEndpoint()
RemoteSpecifier.WithHostName("example.com")
RemoteSpecifier.WithService("https")
</pre><a href="#section-6.1.4-3" class="pilcrow">¶</a>
</div>
<p id="section-6.1.4-4">Specify a Remote Endpoint using an IPv6 address and remote port:<a href="#section-6.1.4-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.4-5">
<pre>
RemoteSpecifier := NewRemoteEndpoint()
RemoteSpecifier.WithIPAddress(2001:db8:4920:e29d:a420:7461:7073:a)
RemoteSpecifier.WithPort(443)
</pre><a href="#section-6.1.4-5" class="pilcrow">¶</a>
</div>
<p id="section-6.1.4-6">Specify a Remote Endpoint using an IPv4 address and remote port:<a href="#section-6.1.4-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.4-7">
<pre>
RemoteSpecifier := NewRemoteEndpoint()
RemoteSpecifier.WithIPAddress(192.0.2.21)
RemoteSpecifier.WithPort(443)
</pre><a href="#section-6.1.4-7" class="pilcrow">¶</a>
</div>
<p id="section-6.1.4-8">Specify a Local Endpoint using a local interface name and no local port
to let the system assign an ephemeral local port:<a href="#section-6.1.4-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.4-9">
<pre>
LocalSpecifier := NewLocalEndpoint()
LocalSpecifier.WithInterface("en0")
</pre><a href="#section-6.1.4-9" class="pilcrow">¶</a>
</div>
<p id="section-6.1.4-10">Specify a Local Endpoint using a local interface name and local port:<a href="#section-6.1.4-10" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.4-11">
<pre>
LocalSpecifier := NewLocalEndpoint()
LocalSpecifier.WithInterface("en0")
LocalSpecifier.WithPort(443)
</pre><a href="#section-6.1.4-11" class="pilcrow">¶</a>
</div>
<p id="section-6.1.4-12">As an alternative to specifying an interface name for the Local Endpoint, an application
can express more fine-grained preferences using the <code>interface</code>
Selection Property; see <a href="#prop-interface" class="auto internal xref">Section 6.2.11</a>. However, if the application specifies Selection
Properties that are inconsistent with the Local Endpoint, this will result in an error once the
   application attempts to open a Connection.<a href="#section-6.1.4-12" class="pilcrow">¶</a></p>
<p id="section-6.1.4-13">Specify a Local Endpoint using a STUN server:<a href="#section-6.1.4-13" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.4-14">
<pre>
LocalSpecifier := NewLocalEndpoint()
LocalSpecifier.WithStunServer(address, port, credentials)
</pre><a href="#section-6.1.4-14" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="multicast-examples">
<section id="section-6.1.5">
          <h4 id="name-multicast-examples">
<a href="#section-6.1.5" class="section-number selfRef">6.1.5. </a><a href="#name-multicast-examples" class="section-name selfRef">Multicast Examples</a>
          </h4>
<p id="section-6.1.5-1">The following examples show how multicast groups can be used.<a href="#section-6.1.5-1" class="pilcrow">¶</a></p>
<p id="section-6.1.5-2">Join an ASM group in receive-only mode, bound to a known
port on a named local interface:<a href="#section-6.1.5-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.5-3">
<pre>
   RemoteSpecifier := NewRemoteEndpoint()

   LocalSpecifier := NewLocalEndpoint()
   LocalSpecifier.WithAnySourceMulticastGroupIP(233.252.0.0)
   LocalSpecifier.WithPort(5353)
   LocalSpecifier.WithInterface("en0")

   TransportProperties := ...
   SecurityParameters  := ...

   Preconnection := NewPreconnection(LocalSpecifier,
                                     RemoteSpecifier,
                                     TransportProperties,
                                     SecurityProperties)
   Listener := Preconnection.Listen()
</pre><a href="#section-6.1.5-3" class="pilcrow">¶</a>
</div>
<p id="section-6.1.5-4">Join an SSM group in receive-only mode, bound to a known
port on a named local interface:<a href="#section-6.1.5-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.5-5">
<pre>
   RemoteSpecifier := NewRemoteEndpoint()

   LocalSpecifier := NewLocalEndpoint()

   LocalSpecifier.WithSingleSourceMulticastGroupIP(233.252.0.0,
                                                   198.51.100.10)
   LocalSpecifier.WithPort(5353)
   LocalSpecifier.WithInterface("en0")

   TransportProperties := ...
   SecurityParameters  := ...

   Preconnection := NewPreconnection(LocalSpecifier,
                                     RemoteSpecifier,
                                     TransportProperties,
                                     SecurityProperties)
   Listener := Preconnection.Listen()
</pre><a href="#section-6.1.5-5" class="pilcrow">¶</a>
</div>
<p id="section-6.1.5-6">Create an SSM group as a sender:<a href="#section-6.1.5-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.5-7">
<pre>
   RemoteSpecifier := NewRemoteEndpoint()
   RemoteSpecifier.WithMulticastGroupIP(233.251.240.1)
   RemoteSpecifier.WithPort(5353)
   RemoteSpecifier.WithHopLimit(8)

   LocalSpecifier := NewLocalEndpoint()
   LocalSpecifier.WithIPAddress(192.0.2.22)
   LocalSpecifier.WithInterface("en0")

   TransportProperties := ...
   SecurityParameters  := ...

   Preconnection := NewPreconnection(LocalSpecifier,
                                     RemoteSpecifier,
                                     TransportProperties,
                                     SecurityProperties)
   Connection := Preconnection.Initiate()
</pre><a href="#section-6.1.5-7" class="pilcrow">¶</a>
</div>
<p id="section-6.1.5-8">Join an ASM group as both a sender and a receiver:<a href="#section-6.1.5-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1.5-9">
<pre>
   RemoteSpecifier := NewRemoteEndpoint()
   RemoteSpecifier.WithMulticastGroupIP(233.252.0.0)
   RemoteSpecifier.WithPort(5353)
   RemoteSpecifier.WithHopLimit(8)

   LocalSpecifier := NewLocalEndpoint()
   LocalSpecifier.WithAnySourceMulticastGroupIP(233.252.0.0)
   LocalSpecifier.WithIPAddress(192.0.2.22)
   LocalSpecifier.WithPort(5353)
   LocalSpecifier.WithInterface("en0")


   TransportProperties := ...
   SecurityParameters  := ...

   Preconnection := NewPreconnection(LocalSpecifier,
                                     RemoteSpecifier,
                                     TransportProperties,
                                     SecurityProperties)
   Connection, Listener := Preconnection.Rendezvous()
</pre><a href="#section-6.1.5-9" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="selection-props">
<section id="section-6.2">
        <h3 id="name-specifying-transport-proper">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-specifying-transport-proper" class="section-name selfRef">Specifying Transport Properties</a>
        </h3>
<p id="section-6.2-1">A Preconnection object holds Properties reflecting the application's
requirements and preferences for the transport. These include Selection
Properties for selecting Protocol Stacks and paths, as well as Connection
Properties and Message Properties for configuration of the detailed operation
of the selected Protocol Stacks on a per-Connection and per-Message level.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">The protocol(s) and path(s) selected as candidates during establishment are
determined and configured using these Properties. Since there could be paths
over which some transport protocols are unable to operate, or Remote Endpoints
that support only specific network addresses or transports, transport protocol
selection is necessarily tied to path selection. This could involve choosing
between multiple local interfaces that are connected to different access
networks.<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<p id="section-6.2-3">When additional information (such as PvD information
<span>[<a href="#RFC7556" class="cite xref">RFC7556</a>]</span>) is available about the networks over which an Endpoint can operate,
this can inform the selection between alternate network paths.
Path information can include the Path MTU (PMTU), the set of supported Differentiated Services Code Points (DSCPs),
expected usage, cost, etc. The usage of this information by the Transport
Services System is generally independent of the specific mechanism or protocol
used to receive the information (e.g., zero-conf, DHCP, or IPv6 Router Advertisements (RAs)).<a href="#section-6.2-3" class="pilcrow">¶</a></p>
<p id="section-6.2-4">Most Selection Properties are represented as Preferences, which can
take one of five values:<a href="#section-6.2-4" class="pilcrow">¶</a></p>
<span id="name-selection-property-preferen"></span><div id="tab-pref-levels">
<table class="center" id="table-1">
          <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-selection-property-preferen" class="selfRef">Selection Property Preference Levels</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Preference</th>
              <th class="text-left" rowspan="1" colspan="1">Effect</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Require</td>
              <td class="text-left" rowspan="1" colspan="1">Select only protocols/paths providing the Property; otherwise, fail</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Prefer</td>
              <td class="text-left" rowspan="1" colspan="1">Prefer protocols/paths providing the Property; otherwise, proceed</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">No Preference</td>
              <td class="text-left" rowspan="1" colspan="1">No preference</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Avoid</td>
              <td class="text-left" rowspan="1" colspan="1">Prefer protocols/paths not providing the Property; otherwise, proceed</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Prohibit</td>
              <td class="text-left" rowspan="1" colspan="1">Select only protocols/paths not providing the Property; otherwise, fail</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-6.2-6">The implementation <span class="bcp14">MUST</span> ensure an outcome that is consistent with all application
requirements expressed using <code>Require</code> and <code>Prohibit</code>. While preferences
expressed using <code>Prefer</code> and <code>Avoid</code> influence protocol and path selection as well,
outcomes can vary, even given the same Selection Properties, because the available
protocols and paths can differ across systems and contexts. However,
implementations are <span class="bcp14">RECOMMENDED</span> to seek to provide a consistent outcome
to an application, when provided with the same set of Selection Properties.<a href="#section-6.2-6" class="pilcrow">¶</a></p>
<p id="section-6.2-7">Note that application preferences can conflict with each other. For
example, if an application indicates a preference for a specific path by
specifying an interface, but also a preference for a protocol, a situation
might occur in which the preferred protocol is not available on the preferred
path. In such cases, applications can expect Properties that determine path
selection to be prioritized over Properties that determine protocol selection.
The Transport Services System <span class="bcp14">SHOULD</span> determine the preferred path first, regardless of
protocol preferences. This ordering is chosen to provide consistency across
implementations; this is based on the fact that it is more common for the use of a
given network path to determine cost to the user (i.e., an interface type
preference might be based on a user's preference to avoid being charged
more for a cellular data plan).<a href="#section-6.2-7" class="pilcrow">¶</a></p>
<p id="section-6.2-8">Selection and Connection Properties, as well as defaults for Message
Properties, can be added to a Preconnection to configure the selection process
and to further configure the eventually selected Protocol Stack(s). They are
collected into a TransportProperties object to be passed into a Preconnection
object:<a href="#section-6.2-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.2-9">
<pre>
TransportProperties := NewTransportProperties()
</pre><a href="#section-6.2-9" class="pilcrow">¶</a>
</div>
<p id="section-6.2-10">Individual Properties are then set on the TransportProperties object.
Setting a Transport Property to a value overrides the previous value of this Transport Property.<a href="#section-6.2-10" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.2-11">
<pre>
TransportProperties.Set(property, value)
</pre><a href="#section-6.2-11" class="pilcrow">¶</a>
</div>
<p id="section-6.2-12">To aid readability, implementations <span class="bcp14">MAY</span> provide additional convenience functions to simplify the use of Selection Properties: see <a href="#preference-conv" class="auto internal xref">Appendix B.1</a> for examples.
In addition, implementations <span class="bcp14">MAY</span> provide a mechanism to create TransportProperties objects that
are preconfigured for common use cases, as outlined in <a href="#property-profiles" class="auto internal xref">Appendix B.2</a>.<a href="#section-6.2-12" class="pilcrow">¶</a></p>
<p id="section-6.2-13">Transport Properties for an established Connection can be queried via the Connection object, as outlined in <a href="#introspection" class="auto internal xref">Section 8</a>.<a href="#section-6.2-13" class="pilcrow">¶</a></p>
<p id="section-6.2-14">A Connection gets its Transport Properties by either being explicitly configured
via a Preconnection, being configured after establishment, or inheriting them
from an antecedent via cloning; see <a href="#groups" class="auto internal xref">Section 7.4</a> for more details.<a href="#section-6.2-14" class="pilcrow">¶</a></p>
<p id="section-6.2-15"><a href="#connection-props" class="auto internal xref">Section 8.1</a> provides a list of Connection Properties, while Selection
Properties are listed in the subsections below. Selection Properties are
only considered during establishment and cannot be changed after a Connection
is established. At this point, Selection Properties can only
be read to check the Properties used by the Connection. Upon reading, the
 Preference type of a Selection Property changes into Boolean, where:<a href="#section-6.2-15" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.2-16.1">
            <code>true</code> means
that the selected Protocol Stack supports the feature or uses the path associated
with the Selection Property, and<a href="#section-6.2-16.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.2-16.2">
            <code>false</code> means that the Protocol Stack does not
 support the feature or use the path.<a href="#section-6.2-16.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-6.2-17">Implementations
of Transport Services Systems could alternatively use the <code>Require</code>
and <code>Prohibit</code> Preference values to represent <code>true</code> and <code>false</code>, respectively.
Other types of Selection Properties remain unchanged when they are made available for
reading after a Connection is established.<a href="#section-6.2-17" class="pilcrow">¶</a></p>
<p id="section-6.2-18">An implementation of the Transport Services API needs to provide sensible defaults for Selection
Properties. The default values for each Property below represent a
configuration that can be implemented over TCP. If these default values are used
and TCP is not supported by a Transport Services System, then an application using the
default set of Properties might not succeed in establishing a Connection. Using
the same default values for independent Transport Services Systems can be beneficial
when applications are ported between different implementations/platforms, even if this
default could lead to a Connection failure when TCP is not available. If default
values other than those suggested below are used, it is <span class="bcp14">RECOMMENDED</span> to clearly
document any differences.<a href="#section-6.2-18" class="pilcrow">¶</a></p>
<div id="prop-reliable">
<section id="section-6.2.1">
          <h4 id="name-reliable-data-transfer-conn">
<a href="#section-6.2.1" class="section-number selfRef">6.2.1. </a><a href="#name-reliable-data-transfer-conn" class="section-name selfRef">Reliable Data Transfer (Connection)</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.1-1">
            <dt id="section-6.2.1-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.1-1.2">
              <p id="section-6.2.1-1.2.1">reliability<a href="#section-6.2.1-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.1-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.1-1.4">
              <p id="section-6.2.1-1.4.1">Preference<a href="#section-6.2.1-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.1-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.1-1.6">
              <p id="section-6.2.1-1.6.1"><code>Require</code><a href="#section-6.2.1-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.1-2">This Property specifies whether the application needs to use a transport
protocol that ensures that
all data is received at the Remote Endpoint in order, without loss or duplication.
When reliable data transfer is enabled, this
also entails being notified when a Connection is closed or aborted.<a href="#section-6.2.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-boundaries">
<section id="section-6.2.2">
          <h4 id="name-preservation-of-message-bou">
<a href="#section-6.2.2" class="section-number selfRef">6.2.2. </a><a href="#name-preservation-of-message-bou" class="section-name selfRef">Preservation of Message Boundaries</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.2-1">
            <dt id="section-6.2.2-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.2-1.2">
              <p id="section-6.2.2-1.2.1">preserveMsgBoundaries<a href="#section-6.2.2-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.2-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.2-1.4">
              <p id="section-6.2.2-1.4.1">Preference<a href="#section-6.2.2-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.2-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.2-1.6">
              <p id="section-6.2.2-1.6.1"><code>No Preference</code><a href="#section-6.2.2-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.2-2">This Property specifies whether the application needs or prefers to use a transport
protocol that preserves Message boundaries.<a href="#section-6.2.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-partially-reliable">
<section id="section-6.2.3">
          <h4 id="name-configure-per-message-relia">
<a href="#section-6.2.3" class="section-number selfRef">6.2.3. </a><a href="#name-configure-per-message-relia" class="section-name selfRef">Configure Per-Message Reliability</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.3-1">
            <dt id="section-6.2.3-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.3-1.2">
              <p id="section-6.2.3-1.2.1">perMsgReliability<a href="#section-6.2.3-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.3-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.3-1.4">
              <p id="section-6.2.3-1.4.1">Preference<a href="#section-6.2.3-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.3-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.3-1.6">
              <p id="section-6.2.3-1.6.1"><code>No Preference</code><a href="#section-6.2.3-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.3-2">This Property specifies whether an application considers it useful to specify different
reliability requirements for individual Messages in a Connection.<a href="#section-6.2.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-ordering">
<section id="section-6.2.4">
          <h4 id="name-preservation-of-data-orderi">
<a href="#section-6.2.4" class="section-number selfRef">6.2.4. </a><a href="#name-preservation-of-data-orderi" class="section-name selfRef">Preservation of Data Ordering</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.4-1">
            <dt id="section-6.2.4-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.4-1.2">
              <p id="section-6.2.4-1.2.1">preserveOrder<a href="#section-6.2.4-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.4-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.4-1.4">
              <p id="section-6.2.4-1.4.1">Preference<a href="#section-6.2.4-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.4-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.4-1.6">
              <p id="section-6.2.4-1.6.1"><code>Require</code><a href="#section-6.2.4-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.4-2">This Property specifies whether the application wishes to use a transport
protocol that can ensure that data is received by the application at the Remote Endpoint in the same order as it was sent.<a href="#section-6.2.4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-0rtt">
<section id="section-6.2.5">
          <h4 id="name-use-0-rtt-session-establish">
<a href="#section-6.2.5" class="section-number selfRef">6.2.5. </a><a href="#name-use-0-rtt-session-establish" class="section-name selfRef">Use 0-RTT Session Establishment with a Safely Replayable Message</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.5-1">
            <dt id="section-6.2.5-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.5-1.2">
              <p id="section-6.2.5-1.2.1">zeroRttMsg<a href="#section-6.2.5-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.5-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.5-1.4">
              <p id="section-6.2.5-1.4.1">Preference<a href="#section-6.2.5-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.5-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.5-1.6">
              <p id="section-6.2.5-1.6.1"><code>No Preference</code><a href="#section-6.2.5-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.5-2">This Property specifies whether an application would like to supply a Message to
the transport protocol before Connection establishment, which will then be
reliably transferred to the Remote Endpoint before or during connection
establishment. This Message can potentially be received multiple times (i.e.,
multiple copies of the Message data could be passed to the Remote Endpoint).
See also <a href="#msg-safelyreplayable" class="auto internal xref">Section 9.1.3.4</a>.<a href="#section-6.2.5-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-multistream">
<section id="section-6.2.6">
          <h4 id="name-multistream-connections-in-">
<a href="#section-6.2.6" class="section-number selfRef">6.2.6. </a><a href="#name-multistream-connections-in-" class="section-name selfRef">Multistream Connections in a Group</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.6-1">
            <dt id="section-6.2.6-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.6-1.2">
              <p id="section-6.2.6-1.2.1">multistreaming<a href="#section-6.2.6-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.6-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.6-1.4">
              <p id="section-6.2.6-1.4.1">Preference<a href="#section-6.2.6-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.6-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.6-1.6">
              <p id="section-6.2.6-1.6.1"><code>Prefer</code><a href="#section-6.2.6-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.6-2">This Property specifies whether the application would prefer multiple Connections
within a Connection Group to be provided by streams of a single underlying
transport connection, where possible.<a href="#section-6.2.6-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-checksum-control-send">
<section id="section-6.2.7">
          <h4 id="name-full-checksum-coverage-on-s">
<a href="#section-6.2.7" class="section-number selfRef">6.2.7. </a><a href="#name-full-checksum-coverage-on-s" class="section-name selfRef">Full Checksum Coverage on Sending</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.7-1">
            <dt id="section-6.2.7-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.7-1.2">
              <p id="section-6.2.7-1.2.1">fullChecksumSend<a href="#section-6.2.7-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.7-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.7-1.4">
              <p id="section-6.2.7-1.4.1">Preference<a href="#section-6.2.7-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.7-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.7-1.6">
              <p id="section-6.2.7-1.6.1"><code>Require</code><a href="#section-6.2.7-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.7-2">This Property specifies the application's need for protection against
corruption for all data transmitted on this Connection. Disabling this Property could enable
the application to influence the sender checksum coverage after Connection establishment (see <a href="#msg-checksum" class="auto internal xref">Section 9.1.3.6</a>).<a href="#section-6.2.7-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-checksum-control-receive">
<section id="section-6.2.8">
          <h4 id="name-full-checksum-coverage-on-r">
<a href="#section-6.2.8" class="section-number selfRef">6.2.8. </a><a href="#name-full-checksum-coverage-on-r" class="section-name selfRef">Full Checksum Coverage on Receiving</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.8-1">
            <dt id="section-6.2.8-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.8-1.2">
              <p id="section-6.2.8-1.2.1">fullChecksumRecv<a href="#section-6.2.8-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.8-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.8-1.4">
              <p id="section-6.2.8-1.4.1">Preference<a href="#section-6.2.8-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.8-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.8-1.6">
              <p id="section-6.2.8-1.6.1"><code>Require</code><a href="#section-6.2.8-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.8-2">This Property specifies the application's need for protection against
corruption for all data received on this Connection. Disabling this Property could enable
the application to influence the required minimum receiver checksum coverage after Connection establishment (see <a href="#conn-recv-checksum" class="auto internal xref">Section 8.1.1</a>).<a href="#section-6.2.8-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-cc">
<section id="section-6.2.9">
          <h4 id="name-congestion-control">
<a href="#section-6.2.9" class="section-number selfRef">6.2.9. </a><a href="#name-congestion-control" class="section-name selfRef">Congestion Control</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.9-1">
            <dt id="section-6.2.9-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.9-1.2">
              <p id="section-6.2.9-1.2.1">congestionControl<a href="#section-6.2.9-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.9-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.9-1.4">
              <p id="section-6.2.9-1.4.1">Preference<a href="#section-6.2.9-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.9-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.9-1.6">
              <p id="section-6.2.9-1.6.1"><code>Require</code><a href="#section-6.2.9-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.9-2">This Property specifies whether or not the application would like the Connection to be
congestion controlled. Note that if a Connection is not congestion
controlled, an application using such a Connection <span class="bcp14">SHOULD</span> itself perform
congestion control in accordance with <span>[<a href="#RFC2914" class="cite xref">RFC2914</a>]</span> or use a circuit breaker in
accordance with <span>[<a href="#RFC8084" class="cite xref">RFC8084</a>]</span>, whichever is appropriate. Also note that reliability
is usually combined with congestion control in protocol implementations rendering "reliable but not congestion controlled", a request that is unlikely to
succeed. If the Connection is congestion controlled, performing additional congestion control
in the application can have negative performance implications.<a href="#section-6.2.9-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="keep-alive">
<section id="section-6.2.10">
          <h4 id="name-keep-alive-packets">
<a href="#section-6.2.10" class="section-number selfRef">6.2.10. </a><a href="#name-keep-alive-packets" class="section-name selfRef">Keep-Alive Packets</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.10-1">
            <dt id="section-6.2.10-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.10-1.2">
              <p id="section-6.2.10-1.2.1">keepAlive<a href="#section-6.2.10-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.10-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.10-1.4">
              <p id="section-6.2.10-1.4.1">Preference<a href="#section-6.2.10-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.10-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.10-1.6">
              <p id="section-6.2.10-1.6.1"><code>No Preference</code><a href="#section-6.2.10-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.10-2">This Property specifies whether or not the application would like the Connection to send
keep-alive packets. Note that if a Connection determines that keep-alive
packets are being sent, the application itself <span class="bcp14">SHOULD</span> avoid generating additional keep-alive
Messages. Note that, when supported, the system will use the default period
for generation of the keep-alive packets. (See also <a href="#keep-alive-timeout" class="auto internal xref">Section 8.1.4</a>.)<a href="#section-6.2.10-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-interface">
<section id="section-6.2.11">
          <h4 id="name-interface-instance-or-type">
<a href="#section-6.2.11" class="section-number selfRef">6.2.11. </a><a href="#name-interface-instance-or-type" class="section-name selfRef">Interface Instance or Type</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.11-1">
            <dt id="section-6.2.11-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.11-1.2">
              <p id="section-6.2.11-1.2.1">interface<a href="#section-6.2.11-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.11-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.11-1.4">
              <p id="section-6.2.11-1.4.1">Set of (Preference, Enumeration)<a href="#section-6.2.11-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.11-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.11-1.6">
              <p id="section-6.2.11-1.6.1">Empty (not setting a Preference for any interface)<a href="#section-6.2.11-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.11-2">This Property allows the application to select any specific network interfaces
or categories of interfaces it wants to <code>Require</code>, <code>Prohibit</code>, <code>Prefer</code>, or
<code>Avoid</code>. Note that marking a specific interface as <code>Require</code> strictly limits path
selection to that single interface, and often leads to less flexible and resilient
Connection establishment.<a href="#section-6.2.11-2" class="pilcrow">¶</a></p>
<p id="section-6.2.11-3">In contrast to other Selection Properties, this Property is a set of
tuples of (enumerated) interface identifier and Preference. It can either be
implemented directly as such or be implemented to
make one Preference available for each interface and interface type
available on the system.<a href="#section-6.2.11-3" class="pilcrow">¶</a></p>
<p id="section-6.2.11-4">The set of valid interface types is specific to the implementation or system. For
example, on a mobile device, there could be <code>Wi-Fi</code> and <code>Cellular</code> interface types
available; whereas, on a desktop computer, <code>Wi-Fi</code> and <code>Wired
Ethernet</code> interface types might be available. An implementation should provide all types
that are supported on the local system to allow
applications to be written generically. For example, if a single implementation
is used on both mobile devices and desktop devices, it ought to define the
<code>Cellular</code> interface type for both systems, since an application might wish to
always prohibit Cellular.<a href="#section-6.2.11-4" class="pilcrow">¶</a></p>
<p id="section-6.2.11-5">The set of interface types is expected to change over time as new access
technologies become available. The taxonomy of interface types on a given
Transport Services System is implementation specific.<a href="#section-6.2.11-5" class="pilcrow">¶</a></p>
<p id="section-6.2.11-6">Interface types <span class="bcp14">SHOULD NOT</span> be treated as a proxy for properties of interfaces,
such as metered or unmetered network access. If an application needs to prohibit
metered interfaces, this should be specified via Provisioning Domain attributes
(see <a href="#prop-pvd" class="auto internal xref">Section 6.2.12</a>) or another specific Property.<a href="#section-6.2.11-6" class="pilcrow">¶</a></p>
<p id="section-6.2.11-7">Note that this Property is not used to specify an interface scope zone for a particular Endpoint. <a href="#ifspec" class="auto internal xref">Section 6.1.2</a> provides details about how to qualify endpoint candidates on a per-interface basis.<a href="#section-6.2.11-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-pvd">
<section id="section-6.2.12">
          <h4 id="name-provisioning-domain-instanc">
<a href="#section-6.2.12" class="section-number selfRef">6.2.12. </a><a href="#name-provisioning-domain-instanc" class="section-name selfRef">Provisioning Domain Instance or Type</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.12-1">
            <dt id="section-6.2.12-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.12-1.2">
              <p id="section-6.2.12-1.2.1">pvd<a href="#section-6.2.12-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.12-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.12-1.4">
              <p id="section-6.2.12-1.4.1">Set of (Preference, Enumeration)<a href="#section-6.2.12-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.12-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.12-1.6">
              <p id="section-6.2.12-1.6.1">Empty (not setting a Preference for any PvD)<a href="#section-6.2.12-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.12-2">Similar to <code>interface</code> (see <a href="#prop-interface" class="auto internal xref">Section 6.2.11</a>), this Property
allows the application to control path selection by selecting which specific
PvD or categories of PvDs it wants to
<code>Require</code>, <code>Prohibit</code>, <code>Prefer</code>, or <code>Avoid</code>. Provisioning Domains define
consistent sets of network properties that might be more specific than network
interfaces <span>[<a href="#RFC7556" class="cite xref">RFC7556</a>]</span>.<a href="#section-6.2.12-2" class="pilcrow">¶</a></p>
<p id="section-6.2.12-3">As with <code>interface</code>, this Property is a set of tuples of (enumerated)
PvD identifier and Preference. It can either be implemented directly as such or be implemented to
make one Preference available for each interface and interface type
available on the system.<a href="#section-6.2.12-3" class="pilcrow">¶</a></p>
<p id="section-6.2.12-4">The identification of a specific PvD is specific to the implementation or system.
<span>[<a href="#RFC8801" class="cite xref">RFC8801</a>]</span> defines how to use an FQDN to identify a PvD when advertised by
a network, but systems might also use other locally relevant identifiers
such as string names or Integers to identify PvDs. As with requiring specific
interfaces, requiring a specific PvD strictly limits the path selection.<a href="#section-6.2.12-4" class="pilcrow">¶</a></p>
<p id="section-6.2.12-5">Categories or types of PvDs are also defined to be specific to the implementation or system. These can be useful to identify a service that is provided by a
PvD. For example, if an application wants to use a PvD that provides a
Voice-Over-IP (VoIP) service on a Cellular network, it can use the relevant PvD type to
require a PvD that provides this service, without needing to look up a
particular instance. While this does restrict path selection, it is broader than
requiring specific PvD instances or interface instances and should be preferred
over these options.<a href="#section-6.2.12-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="use-temporary-local-address">
<section id="section-6.2.13">
          <h4 id="name-use-temporary-local-address">
<a href="#section-6.2.13" class="section-number selfRef">6.2.13. </a><a href="#name-use-temporary-local-address" class="section-name selfRef">Use Temporary Local Address</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.13-1">
            <dt id="section-6.2.13-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.13-1.2">
              <p id="section-6.2.13-1.2.1">useTemporaryLocalAddress<a href="#section-6.2.13-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.13-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.13-1.4">
              <p id="section-6.2.13-1.4.1">Preference<a href="#section-6.2.13-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.13-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.13-1.6">
              <p id="section-6.2.13-1.6.1"><code>Avoid</code> for Listeners and Rendezvous Connections; <code>Prefer</code> for other Connections<a href="#section-6.2.13-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.13-2">This Property allows the application to express a preference for the use of
temporary local addresses, sometimes called "privacy" addresses <span>[<a href="#RFC8981" class="cite xref">RFC8981</a>]</span>.
Temporary addresses are generally used to prevent linking connections over time
when a stable address, sometimes called a "permanent" address, is not needed.
There are some caveats to note when specifying this Property. First, if an
application requires the use of temporary addresses, the resulting Connection
cannot use IPv4 because temporary addresses do not exist in IPv4. Second,
temporary local addresses might involve trading off privacy for performance.
For instance, temporary addresses (e.g., <span>[<a href="#RFC8981" class="cite xref">RFC8981</a>]</span>) can interfere with resumption mechanisms
that some protocols rely on to reduce initial latency.<a href="#section-6.2.13-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="multipath-mode">
<section id="section-6.2.14">
          <h4 id="name-multipath-transport">
<a href="#section-6.2.14" class="section-number selfRef">6.2.14. </a><a href="#name-multipath-transport" class="section-name selfRef">Multipath Transport</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.14-1">
            <dt id="section-6.2.14-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.14-1.2">
              <p id="section-6.2.14-1.2.1">multipath<a href="#section-6.2.14-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.14-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.14-1.4">
              <p id="section-6.2.14-1.4.1">Enumeration<a href="#section-6.2.14-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.14-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.14-1.6">
              <p id="section-6.2.14-1.6.1"><code>Disabled</code> for Connections created through <code>Initiate</code> and <code>Rendezvous</code>; <code>Passive</code> for Listeners<a href="#section-6.2.14-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.14-2">This Property specifies whether, and how, applications want to take advantage of
transferring data across multiple paths between the same end hosts.
Using multiple paths allows Connections to migrate between interfaces or aggregate bandwidth
as availability and performance properties change.
Possible values are as follows:<a href="#section-6.2.14-2" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-6.2.14-3">
            <dt id="section-6.2.14-3.1">Disabled:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.14-3.2">
              <p id="section-6.2.14-3.2.1">The Connection will not use multiple paths once established, even if the chosen transport supports using multiple paths.<a href="#section-6.2.14-3.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.14-3.3">Active:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.14-3.4">
              <p id="section-6.2.14-3.4.1">The Connection will negotiate the use of multiple paths if the chosen transport supports it.<a href="#section-6.2.14-3.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.14-3.5">Passive:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.14-3.6">
              <p id="section-6.2.14-3.6.1">The Connection will support the use of multiple paths if the Remote Endpoint requests it.<a href="#section-6.2.14-3.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.14-4">The policy for using multiple paths is specified using the separate <code>multipathPolicy</code> Property; see <a href="#multipath-policy" class="auto internal xref">Section 8.1.7</a>.
To enable the peer Endpoint to initiate additional paths toward a local address other than the one initially used, it is necessary to set the <code>advertisesAltaddr</code> Property (see <a href="#altaddr" class="auto internal xref">Section 6.2.15</a>).<a href="#section-6.2.14-4" class="pilcrow">¶</a></p>
<p id="section-6.2.14-5">Setting this Property to <code>Active</code> can have privacy implications.  It enables the transport to establish connectivity using alternate paths that might result in users being linkable across the multiple paths, even if the <code>advertisesAltaddr</code> Property (see <a href="#altaddr" class="auto internal xref">Section 6.2.15</a>) is set to <code>false</code>.<a href="#section-6.2.14-5" class="pilcrow">¶</a></p>
<p id="section-6.2.14-6">Note that this Property has no corresponding Selection Property of type "Preference".
Enumeration values other than <code>Disabled</code> are interpreted as a preference for choosing protocols that can make use of multiple paths.
The <code>Disabled</code> value implies a requirement not to use multiple paths in parallel but does not prevent choosing a protocol that is capable of using multiple paths, e.g., it does not prevent choosing TCP but prevents sending the <code>MP_CAPABLE</code> option in the TCP handshake.<a href="#section-6.2.14-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="altaddr">
<section id="section-6.2.15">
          <h4 id="name-advertisement-of-alternativ">
<a href="#section-6.2.15" class="section-number selfRef">6.2.15. </a><a href="#name-advertisement-of-alternativ" class="section-name selfRef">Advertisement of Alternative Addresses</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.15-1">
            <dt id="section-6.2.15-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.15-1.2">
              <p id="section-6.2.15-1.2.1">advertisesAltaddr<a href="#section-6.2.15-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.15-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.15-1.4">
              <p id="section-6.2.15-1.4.1">Boolean<a href="#section-6.2.15-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.15-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.15-1.6">
              <p id="section-6.2.15-1.6.1"><code>false</code><a href="#section-6.2.15-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.15-2">This Property specifies whether alternative addresses, e.g., of other interfaces, ought to be advertised to the
peer Endpoint by the Protocol Stack. Advertising these addresses enables the peer Endpoint to establish additional connectivity, e.g., for Connection migration or using multiple paths.<a href="#section-6.2.15-2" class="pilcrow">¶</a></p>
<p id="section-6.2.15-3">Note that this can have privacy implications because it might result in users being linkable across the multiple paths.
Also, note that setting this to <code>false</code> does not prevent the local Transport Services System from <em>establishing</em> connectivity using alternate paths (see <a href="#multipath-mode" class="auto internal xref">Section 6.2.14</a>); it only prevents <em>proactive advertisement</em> of addresses.<a href="#section-6.2.15-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="direction-of-communication">
<section id="section-6.2.16">
          <h4 id="name-direction-of-communication">
<a href="#section-6.2.16" class="section-number selfRef">6.2.16. </a><a href="#name-direction-of-communication" class="section-name selfRef">Direction of Communication</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.16-1">
            <dt id="section-6.2.16-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.16-1.2">
              <p id="section-6.2.16-1.2.1">direction<a href="#section-6.2.16-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.16-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.16-1.4">
              <p id="section-6.2.16-1.4.1">Enumeration<a href="#section-6.2.16-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.16-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.16-1.6">
              <p id="section-6.2.16-1.6.1"><code>Bidirectional</code><a href="#section-6.2.16-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.16-2">This Property specifies whether an application wants to use the Connection for sending and/or receiving data.  Possible values are as follows:<a href="#section-6.2.16-2" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-6.2.16-3">
            <dt id="section-6.2.16-3.1">Bidirectional:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.16-3.2">
              <p id="section-6.2.16-3.2.1">The Connection must support sending and receiving data.<a href="#section-6.2.16-3.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.16-3.3">Unidirectional send:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.16-3.4">
              <p id="section-6.2.16-3.4.1">The Connection must support sending data, and the application cannot use the Connection to receive any data.<a href="#section-6.2.16-3.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.16-3.5">Unidirectional receive:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.16-3.6">
              <p id="section-6.2.16-3.6.1">The Connection must support receiving data, and the application cannot use the Connection to send any data.<a href="#section-6.2.16-3.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.16-4">Since unidirectional communication can be
supported by transports offering bidirectional communication, specifying
unidirectional communication might cause a Protocol Stack that supports
bidirectional communication to be selected.<a href="#section-6.2.16-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-soft-error">
<section id="section-6.2.17">
          <h4 id="name-notification-of-icmp-soft-e">
<a href="#section-6.2.17" class="section-number selfRef">6.2.17. </a><a href="#name-notification-of-icmp-soft-e" class="section-name selfRef">Notification of ICMP Soft Error Message Arrival</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.17-1">
            <dt id="section-6.2.17-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.17-1.2">
              <p id="section-6.2.17-1.2.1">softErrorNotify<a href="#section-6.2.17-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.17-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.17-1.4">
              <p id="section-6.2.17-1.4.1">Preference<a href="#section-6.2.17-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.17-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.17-1.6">
              <p id="section-6.2.17-1.6.1"><code>No Preference</code><a href="#section-6.2.17-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.17-2">This Property specifies whether an application considers it useful to be
informed when an ICMP error message arrives that does not force termination of a
connection. When set to <code>true</code>, received ICMP errors are available as
<code>SoftError</code> events; see <a href="#soft-errors" class="auto internal xref">Section 8.3.1</a>. Note that even if a protocol supporting this Property is selected,
not all ICMP errors will necessarily be delivered, so applications cannot rely
upon receiving them <span>[<a href="#RFC8085" class="cite xref">RFC8085</a>]</span>.<a href="#section-6.2.17-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="active-read-before-send">
<section id="section-6.2.18">
          <h4 id="name-initiating-side-is-not-the-">
<a href="#section-6.2.18" class="section-number selfRef">6.2.18. </a><a href="#name-initiating-side-is-not-the-" class="section-name selfRef">Initiating Side Is Not the First to Write</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.2.18-1">
            <dt id="section-6.2.18-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.18-1.2">
              <p id="section-6.2.18-1.2.1">activeReadBeforeSend<a href="#section-6.2.18-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.18-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.18-1.4">
              <p id="section-6.2.18-1.4.1">Preference<a href="#section-6.2.18-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.2.18-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.2.18-1.6">
              <p id="section-6.2.18-1.6.1"><code>No Preference</code><a href="#section-6.2.18-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.2.18-2">The most common client-server communication pattern involves the
client actively opening a Connection, then sending data to the server. The
server listens (passive open), reads, and then answers. This Property
   specifies whether an application wants to diverge from this pattern by either:<a href="#section-6.2.18-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6.2.18-3">
<li id="section-6.2.18-3.1">actively opening with <code>Initiate</code>, immediately followed by reading or<a href="#section-6.2.18-3.1" class="pilcrow">¶</a>
</li>
            <li id="section-6.2.18-3.2">passively opening with <code>Listen</code>,
   immediately followed by writing.<a href="#section-6.2.18-3.2" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-6.2.18-4">This Property is ignored when establishing
connections using <code>Rendezvous</code>.
Requiring this Property limits the choice of mappings to underlying protocols,
which can reduce
efficiency. For example, it prevents the Transport Services System from mapping
Connections to Stream Control Transmission Protocol (SCTP) streams, where
the first transmitted data takes the role of an active open signal.<a href="#section-6.2.18-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="security-parameters">
<section id="section-6.3">
        <h3 id="name-specifying-security-paramet">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-specifying-security-paramet" class="section-name selfRef">Specifying Security Parameters and Callbacks</a>
        </h3>
<p id="section-6.3-1">Most Security Parameters, e.g., TLS ciphersuites, local identity and private key, etc.,
can be configured statically. Others are dynamically configured during Connection establishment.
Security Parameters and callbacks are partitioned based on their place in the lifetime
of Connection establishment. Similar to Transport Properties, both parameters and callbacks
are inherited during cloning (see <a href="#groups" class="auto internal xref">Section 7.4</a>).<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<p id="section-6.3-2">This document specifies an abstract API, which could appear to conflict with the need
for Security Parameters to be unambiguous. The Transport Services System <span class="bcp14">SHOULD</span> provide reasonable,
secure defaults for each enumerated Security Parameter, such that users of the system
only need to specify parameters required to establish a secure connection
(e.g., <code>serverCertificate</code> or <code>clientCertificate</code>). Specifying Security Parameters
from enumerated values (e.g., specific ciphersuites) might constrain which transport
protocols can be selected during Connection establishment.<a href="#section-6.3-2" class="pilcrow">¶</a></p>
<p id="section-6.3-3">Security Parameters are specified in the preestablishment phase
and are created as follows:<a href="#section-6.3-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.3-4">
<pre>
SecurityParameters := NewSecurityParameters()
</pre><a href="#section-6.3-4" class="pilcrow">¶</a>
</div>
<p id="section-6.3-5">Specific parameters are added using a call to <code>Set</code> on the <code>SecurityParameters</code>.<a href="#section-6.3-5" class="pilcrow">¶</a></p>
<p id="section-6.3-6">As with the rest of the Transport Services API, the exact names of parameters and/or
values of Enumerations (e.g., ciphersuites) used in the Security Parameters are specific to the system or
implementation and ought to be chosen to follow the principle of least
surprise for users of the platform/language environment in question.<a href="#section-6.3-6" class="pilcrow">¶</a></p>
<p id="section-6.3-7">For Security Parameters that are Enumerations of known values, such as TLS
ciphersuites, implementations are responsible for exposing the set of values
they support. For Security Parameters that are not simple value types, such
as certificates and keys, implementations are responsible for exposing
types appropriate for the platform/language environment.<a href="#section-6.3-7" class="pilcrow">¶</a></p>
<p id="section-6.3-8">Applications <span class="bcp14">SHOULD</span> use common safe defaults for values such as TLS ciphersuites
whenever possible. However, as discussed in <span>[<a href="#RFC8922" class="cite xref">RFC8922</a>]</span>, many transport security protocols
require specific Security Parameters and constraints from the client at the time of
configuration and actively during a handshake.<a href="#section-6.3-8" class="pilcrow">¶</a></p>
<p id="section-6.3-9">The set of Security Parameters defined here is not exhaustive, but illustrative.
Implementations <span class="bcp14">SHOULD</span> expose an equivalent to the parameters listed below to allow for
sufficient configuration of Security Parameters, but the details are expected
to vary based on platform and implementation constraints. Applications <span class="bcp14">MUST</span> be able
to constrain the security protocols and versions that the Transport Services System
will use.<a href="#section-6.3-9" class="pilcrow">¶</a></p>
<p id="section-6.3-10">Representation of Security Parameters in implementations ought to parallel
that chosen for Transport Property names as suggested in <a href="#scope-of-interface-defn" class="auto internal xref">Section 5</a>.<a href="#section-6.3-10" class="pilcrow">¶</a></p>
<p id="section-6.3-11">Connections that use Transport Services <span class="bcp14">SHOULD</span> use security in general. However, for
compatibility with endpoints that do not support transport security protocols (such
as a TCP endpoint that does not support TLS), applications can initialize their
Security Parameters to indicate that security can be disabled or opportunistic.
If security is disabled, the Transport Services System will not attempt to add
transport security automatically. If security is opportunistic, it will allow
Connections without transport security, but it will still attempt to use unauthenticated
security if available.<a href="#section-6.3-11" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.3-12">
<pre>
SecurityParameters := NewDisabledSecurityParameters()

SecurityParameters := NewOpportunisticSecurityParameters()
</pre><a href="#section-6.3-12" class="pilcrow">¶</a>
</div>
<div id="allowed-security-protocols">
<section id="section-6.3.1">
          <h4 id="name-allowed-security-protocols">
<a href="#section-6.3.1" class="section-number selfRef">6.3.1. </a><a href="#name-allowed-security-protocols" class="section-name selfRef">Allowed Security Protocols</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.3.1-1">
            <dt id="section-6.3.1-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.1-1.2">
              <p id="section-6.3.1-1.2.1">allowedSecurityProtocols<a href="#section-6.3.1-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.1-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.1-1.4">
              <p id="section-6.3.1-1.4.1">Implementation-specific Enumeration of security protocol names and/or versions<a href="#section-6.3.1-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.1-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.1-1.6">
              <p id="section-6.3.1-1.6.1">Implementation-specific best available security protocols<a href="#section-6.3.1-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.3.1-2">This Property allows applications to restrict which security protocols and security protocol versions can be used in the Protocol Stack. Applications <span class="bcp14">MUST</span> be able to constrain the security protocols used by this or an equivalent mechanism, in order to prevent the use of security protocols with unknown or weak security properties.<a href="#section-6.3.1-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.3.1-3">
<pre>
SecurityParameters.Set(allowedSecurityProtocols, [ tls_1_2, tls_1_3 ])
</pre><a href="#section-6.3.1-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="certificate-bundles">
<section id="section-6.3.2">
          <h4 id="name-certificate-bundles">
<a href="#section-6.3.2" class="section-number selfRef">6.3.2. </a><a href="#name-certificate-bundles" class="section-name selfRef">Certificate Bundles</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.3.2-1">
            <dt id="section-6.3.2-1.1">Names:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.2-1.2">
              <p id="section-6.3.2-1.2.1">serverCertificate, clientCertificate<a href="#section-6.3.2-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.2-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.2-1.4">
              <p id="section-6.3.2-1.4.1">Array of certificate objects<a href="#section-6.3.2-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.2-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.2-1.6">
              <p id="section-6.3.2-1.6.1">Empty array<a href="#section-6.3.2-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.3.2-2">One or more certificate bundles identifying the Local Endpoint as a server certificate or a client certificate. Multiple bundles may
be provided to allow selection among different Protocol Stacks that may
require differently formatted bundles. The form and format of the
certificate bundle are implementation specific. Note that if the private
keys associated with a bundle are not available, e.g., since they are stored in Hardware
Security Modules (HSMs), handshake callbacks are necessary. See below for details.<a href="#section-6.3.2-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.3.2-3">
<pre>
SecurityParameters.Set(serverCertificate, myCertificateBundle[])
SecurityParameters.Set(clientCertificate, myCertificateBundle[])
</pre><a href="#section-6.3.2-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="pinned-server-certificate">
<section id="section-6.3.3">
          <h4 id="name-pinned-server-certificate">
<a href="#section-6.3.3" class="section-number selfRef">6.3.3. </a><a href="#name-pinned-server-certificate" class="section-name selfRef">Pinned Server Certificate</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.3.3-1">
            <dt id="section-6.3.3-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.3-1.2">
              <p id="section-6.3.3-1.2.1">pinnedServerCertificate<a href="#section-6.3.3-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.3-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.3-1.4">
              <p id="section-6.3.3-1.4.1">Array of certificate chain objects<a href="#section-6.3.3-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.3-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.3-1.6">
              <p id="section-6.3.3-1.6.1">Empty array<a href="#section-6.3.3-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.3.3-2">Zero or more certificate chains to use as pinned server
certificates, such that connecting will fail if the presented server
certificate does not match one of the supplied pinned certificates.
The form and format of the certificate chain are implementation specific.<a href="#section-6.3.3-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.3.3-3">
<pre>
SecurityParameters.Set(pinnedServerCertificate, yourCertificateChain[])
</pre><a href="#section-6.3.3-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="application-layer-protocol-negotiation">
<section id="section-6.3.4">
          <h4 id="name-application-layer-protocol-">
<a href="#section-6.3.4" class="section-number selfRef">6.3.4. </a><a href="#name-application-layer-protocol-" class="section-name selfRef">Application-Layer Protocol Negotiation</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.3.4-1">
            <dt id="section-6.3.4-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.4-1.2">
              <p id="section-6.3.4-1.2.1">alpn<a href="#section-6.3.4-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.4-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.4-1.4">
              <p id="section-6.3.4-1.4.1">Array of strings<a href="#section-6.3.4-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.4-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.4-1.6">
              <p id="section-6.3.4-1.6.1">Automatic selection<a href="#section-6.3.4-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.3.4-2">Application-Layer Protocol Negotiation (ALPN) values: used to indicate which
application-layer protocols are negotiated by the security protocol layer.
See <span>[<a href="#RFC7301" class="cite xref">ALPN</a>]</span> for a definition of the ALPN field. Note that the Transport
Services System can provide ALPN values automatically based on
the protocols being used, if not explicitly specified by the application.<a href="#section-6.3.4-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.3.4-3">
<pre>
SecurityParameters.Set(alpn, ["h2"])
</pre><a href="#section-6.3.4-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="groups-ciphersuites-and-signature-algorithms">
<section id="section-6.3.5">
          <h4 id="name-groups-ciphersuites-and-sig">
<a href="#section-6.3.5" class="section-number selfRef">6.3.5. </a><a href="#name-groups-ciphersuites-and-sig" class="section-name selfRef">Groups, Ciphersuites, and Signature Algorithms</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.3.5-1">
            <dt id="section-6.3.5-1.1">Names:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.5-1.2">
              <p id="section-6.3.5-1.2.1">supportedGroup, ciphersuite, signatureAlgorithm<a href="#section-6.3.5-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.5-1.3">Types:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.5-1.4">
              <p id="section-6.3.5-1.4.1">Arrays of implementation-specific Enumerations<a href="#section-6.3.5-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.5-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.5-1.6">
              <p id="section-6.3.5-1.6.1">Automatic selection<a href="#section-6.3.5-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.3.5-2">These are used to restrict what cryptographic parameters
are used by underlying transport security protocols. When not specified,
these algorithms should use known and safe defaults for the system.<a href="#section-6.3.5-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.3.5-3">
<pre>
SecurityParameters.Set(supportedGroup, secp256r1)
SecurityParameters.Set(ciphersuite, TLS_AES_128_GCM_SHA256)
SecurityParameters.Set(signatureAlgorithm, ecdsa_secp256r1_sha256)
</pre><a href="#section-6.3.5-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="session-cache-options">
<section id="section-6.3.6">
          <h4 id="name-session-cache-options">
<a href="#section-6.3.6" class="section-number selfRef">6.3.6. </a><a href="#name-session-cache-options" class="section-name selfRef">Session Cache Options</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.3.6-1">
            <dt id="section-6.3.6-1.1">Names:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.6-1.2">
              <p id="section-6.3.6-1.2.1">maxCachedSessions, cachedSessionLifetimeSeconds<a href="#section-6.3.6-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.6-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.6-1.4">
              <p id="section-6.3.6-1.4.1">Integer<a href="#section-6.3.6-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.6-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.6-1.6">
              <p id="section-6.3.6-1.6.1">Automatic selection<a href="#section-6.3.6-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.3.6-2">These values are used to tune session cache capacity and lifetime and
can be extended to include other policies.<a href="#section-6.3.6-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.3.6-3">
<pre>
SecurityParameters.Set(maxCachedSessions, 16)
SecurityParameters.Set(cachedSessionLifetimeSeconds, 3600)
</pre><a href="#section-6.3.6-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="pre-shared-key">
<section id="section-6.3.7">
          <h4 id="name-pre-shared-key">
<a href="#section-6.3.7" class="section-number selfRef">6.3.7. </a><a href="#name-pre-shared-key" class="section-name selfRef">Pre-Shared Key</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-6.3.7-1">
            <dt id="section-6.3.7-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.7-1.2">
              <p id="section-6.3.7-1.2.1">preSharedKey<a href="#section-6.3.7-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.7-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.7-1.4">
              <p id="section-6.3.7-1.4.1">Key and identity (platform specific)<a href="#section-6.3.7-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-6.3.7-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-6.3.7-1.6">
              <p id="section-6.3.7-1.6.1"><code>None</code><a href="#section-6.3.7-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-6.3.7-2">Used to install pre-shared keying material established
out of band. Each instance of pre-shared keying material is associated with some identity
that typically identifies its use or has some protocol-specific meaning to the
Remote Endpoint. Note that the use of a pre-shared key will tend to select a single
security protocol and, therefore, directly select a single underlying Protocol Stack.
A Transport Services API could express <code>None</code> in an environment-typical way, e.g., as a Union type or special value.<a href="#section-6.3.7-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.3.7-3">
<pre>
SecurityParameters.Set(preSharedKey, key, myIdentity)
</pre><a href="#section-6.3.7-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="connection-establishment-callbacks">
<section id="section-6.3.8">
          <h4 id="name-connection-establishment-ca">
<a href="#section-6.3.8" class="section-number selfRef">6.3.8. </a><a href="#name-connection-establishment-ca" class="section-name selfRef">Connection Establishment Callbacks</a>
          </h4>
<p id="section-6.3.8-1">Security decisions, especially pertaining to trust, are not static. Once configured,
parameters can also be supplied during Connection establishment. These are best
handled as client-provided callbacks.
Callbacks block the progress of the Connection establishment, which distinguishes them
from other events in the Transport Services System. How callbacks and events are implemented is specific to each implementation.
Security handshake callbacks that could be invoked during Connection establishment include:<a href="#section-6.3.8-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.3.8-2.1">
              <p id="section-6.3.8-2.1.1">Trust verification callback: Invoked when a Remote Endpoint's trust must be verified before the
handshake protocol can continue. For example, the application could verify an X.509 certificate
as described in <span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span>.<a href="#section-6.3.8-2.1.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<div class="alignLeft art-text artwork" id="section-6.3.8-3">
<pre>
TrustCallback := NewCallback({
  // Handle the trust and return the result
})
SecurityParameters.SetTrustVerificationCallback(TrustCallback)
</pre><a href="#section-6.3.8-3" class="pilcrow">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-6.3.8-4.1">
              <p id="section-6.3.8-4.1.1">Identity challenge callback: Invoked when a private key operation is required, e.g., when
local authentication is requested by a Remote Endpoint.<a href="#section-6.3.8-4.1.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<div class="alignLeft art-text artwork" id="section-6.3.8-5">
<pre>
ChallengeCallback := NewCallback({
  // Handle the challenge
})
SecurityParameters.SetIdentityChallengeCallback(ChallengeCallback)
</pre><a href="#section-6.3.8-5" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="establishment">
<section id="section-7">
      <h2 id="name-establishing-connections">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-establishing-connections" class="section-name selfRef">Establishing Connections</a>
      </h2>
<p id="section-7-1">Before a Connection can be used for data transfer, it needs to be established.
Establishment ends the preestablishment phase; all transport Properties and
cryptographic parameter specification must be complete before establishment,
as these will be used to select Candidate Paths and Protocol Stacks
for the Connection. Establishment can be active, using the <code>Initiate</code> action;
passive, using the <code>Listen</code> action; or simultaneous for peer-to-peer connections, using
the <code>Rendezvous</code> action. These actions are described in the subsections below.<a href="#section-7-1" class="pilcrow">¶</a></p>
<div id="initiate">
<section id="section-7.1">
        <h3 id="name-active-open-initiate">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-active-open-initiate" class="section-name selfRef">Active Open: Initiate</a>
        </h3>
<p id="section-7.1-1">Active open is the action of establishing a Connection to a Remote Endpoint presumed
to be listening for incoming Connection requests. Active open is used by clients in
client-server interactions. Active open is supported by the Transport Services API through the
<code>Initiate</code> action:<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.1-2">
<pre>
Connection := Preconnection.Initiate(timeout?)
</pre><a href="#section-7.1-2" class="pilcrow">¶</a>
</div>
<p id="section-7.1-3">The <code>timeout</code> parameter specifies how long to wait before aborting active open.
Before calling <code>Initiate</code>, the caller must have populated a Preconnection
object with a Remote Endpoint object to identify the Endpoint, optionally a Local Endpoint
object (if not specified, the system will attempt to determine a
suitable Local Endpoint), as well as all Properties
necessary for candidate selection.<a href="#section-7.1-3" class="pilcrow">¶</a></p>
<p id="section-7.1-4">The <code>Initiate</code> action returns a Connection object. Once <code>Initiate</code> has been
called, any changes to the Preconnection <span class="bcp14">MUST NOT</span> have any effect on the
Connection. However, the Preconnection can be reused, e.g., to <code>Initiate</code>
 another Connection.<a href="#section-7.1-4" class="pilcrow">¶</a></p>
<p id="section-7.1-5">Once <code>Initiate</code> is called, the Candidate Protocol Stack(s) can cause one or more
candidate transport-layer connections to be created to the specified Remote
Endpoint. The caller could immediately begin sending Messages on the Connection
(see <a href="#sending" class="auto internal xref">Section 9.2</a>) after calling <code>Initiate</code>; note that any data marked as "safely replayable" that is sent
while the Connection is being established could be sent multiple times or using
multiple candidates.<a href="#section-7.1-5" class="pilcrow">¶</a></p>
<p id="section-7.1-6">The following events can be sent by the Connection after <code>Initiate</code> is called:<a href="#section-7.1-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.1-7">
<pre>
Connection -&gt; Ready&lt;&gt;
</pre><a href="#section-7.1-7" class="pilcrow">¶</a>
</div>
<p id="section-7.1-8">The <code>Ready</code> event occurs after <code>Initiate</code> has established a transport-layer
connection on at least one usable Candidate Protocol Stack over at least one
Candidate Path. No <code>Receive</code> events (see <a href="#receiving" class="auto internal xref">Section 9.3</a>) will occur before
the <code>Ready</code> event for Connections established using <code>Initiate</code>.<a href="#section-7.1-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.1-9">
<pre>
Connection -&gt; EstablishmentError&lt;reason?&gt;
</pre><a href="#section-7.1-9" class="pilcrow">¶</a>
</div>
<p id="section-7.1-10">An <code>EstablishmentError</code> occurs when:<a href="#section-7.1-10" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.1-11.1">the set of transport Properties and Security
Parameters cannot be fulfilled on a Connection for initiation (e.g., the set of
available paths and/or Protocol Stacks meeting the constraints is empty) or
reconciled with the Local and/or Remote Endpoints,<a href="#section-7.1-11.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.1-11.2">a Remote Endpoint Identifier cannot be resolved, or<a href="#section-7.1-11.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.1-11.3">no transport-layer connection can be established to
the Remote Endpoint (e.g., because the Remote Endpoint is not accepting
connections, the application is prohibited from opening a Connection by the
operating system, or the establishment attempt has timed out for any other reason).<a href="#section-7.1-11.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-7.1-12">Connection establishment
and transmission of the first Message can be combined in a single action (<a href="#initiate-and-send" class="auto internal xref">Section 9.2.5</a>).<a href="#section-7.1-12" class="pilcrow">¶</a></p>
</section>
</div>
<div id="listen">
<section id="section-7.2">
        <h3 id="name-passive-open-listen">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-passive-open-listen" class="section-name selfRef">Passive Open: Listen</a>
        </h3>
<p id="section-7.2-1">Passive open is the action of waiting for Connections from Remote Endpoints,
commonly used by servers in client-server interactions. Passive open is
supported by the Transport Services API through the <code>Listen</code> action and returns a Listener object:<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.2-2">
<pre>
Listener := Preconnection.Listen()
</pre><a href="#section-7.2-2" class="pilcrow">¶</a>
</div>
<p id="section-7.2-3">Before calling <code>Listen</code>, the caller must have initialized the Preconnection
during the preestablishment phase with a Local Endpoint object, as well
as all Properties necessary for Protocol Stack selection. A Remote Endpoint
can optionally be specified, to constrain what Connections are accepted.<a href="#section-7.2-3" class="pilcrow">¶</a></p>
<p id="section-7.2-4">The <code>Listen</code> action returns a Listener object. Once <code>Listen</code> has been called,
any changes to the Preconnection <span class="bcp14">MUST NOT</span> have any effect on the Listener. The
Preconnection can be disposed of or reused, e.g., to create another Listener.<a href="#section-7.2-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.2-5">
<pre>
Listener.Stop()
</pre><a href="#section-7.2-5" class="pilcrow">¶</a>
</div>
<p id="section-7.2-6">Listening continues until the global context shuts down or until the Stop
action is performed on the Listener object.<a href="#section-7.2-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.2-7">
<pre>
Listener -&gt; ConnectionReceived&lt;Connection&gt;
</pre><a href="#section-7.2-7" class="pilcrow">¶</a>
</div>
<p id="section-7.2-8">The <code>ConnectionReceived</code> event occurs when:<a href="#section-7.2-8" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.2-9.1">a Remote Endpoint has established or cloned (e.g., by creating a new stream in a multi-stream transport; see <a href="#groups" class="auto internal xref">Section 7.4</a>) a
transport-layer connection to this Listener (for connection-oriented
transport protocols), or<a href="#section-7.2-9.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.2-9.2">the first Message has been received from the
Remote Endpoint (for connectionless protocols or streams of a multi-streaming transport) causing a new Connection to be
created.<a href="#section-7.2-9.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-7.2-10">The resulting Connection is contained within the <code>ConnectionReceived</code>
event and is ready to use as soon as it is passed to the application via the
event.<a href="#section-7.2-10" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.2-11">
<pre>
Listener.SetNewConnectionLimit(value)
</pre><a href="#section-7.2-11" class="pilcrow">¶</a>
</div>
<p id="section-7.2-12">If the caller wants to rate-limit the number of inbound Connections that will be delivered,
it can set a cap using <code>SetNewConnectionLimit</code>. This mechanism allows a server to
protect itself from being drained of resources. Each time a new Connection is delivered
by the <code>ConnectionReceived</code> event, the value is automatically decremented. Once the
value reaches zero, no further Connections will be delivered until the caller sets the
limit to a higher value. By default, this value is Infinite. The caller is also able to reset
the value to Infinite at any point.<a href="#section-7.2-12" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.2-13">
<pre>
Listener -&gt; EstablishmentError&lt;reason?&gt;
</pre><a href="#section-7.2-13" class="pilcrow">¶</a>
</div>
<p id="section-7.2-14">An <code>EstablishmentError</code> occurs when:<a href="#section-7.2-14" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.2-15.1">the Properties and Security Parameters of the Preconnection cannot be fulfilled for listening or cannot be reconciled with the Local Endpoint (and/or Remote Endpoint, if specified),<a href="#section-7.2-15.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.2-15.2">the Local Endpoint (or Remote Endpoint, if specified) cannot
be resolved, or<a href="#section-7.2-15.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.2-15.3">the application is prohibited from listening by policy.<a href="#section-7.2-15.3" class="pilcrow">¶</a>
</li>
        </ul>
<div class="alignLeft art-text artwork" id="section-7.2-16">
<pre>
Listener -&gt; Stopped&lt;&gt;
</pre><a href="#section-7.2-16" class="pilcrow">¶</a>
</div>
<p id="section-7.2-17">A <code>Stopped</code> event occurs after the Listener has stopped listening.<a href="#section-7.2-17" class="pilcrow">¶</a></p>
</section>
</div>
<div id="rendezvous">
<section id="section-7.3">
        <h3 id="name-peer-to-peer-establishment-">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-peer-to-peer-establishment-" class="section-name selfRef">Peer-to-Peer Establishment: Rendezvous</a>
        </h3>
<p id="section-7.3-1">Simultaneous peer-to-peer Connection establishment is supported by the
<code>Rendezvous</code> action:<a href="#section-7.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.3-2">
<pre>
Preconnection.Rendezvous()
</pre><a href="#section-7.3-2" class="pilcrow">¶</a>
</div>
<p id="section-7.3-3">A Preconnection object used in a <code>Rendezvous</code> <span class="bcp14">MUST</span> have both the
Local Endpoint candidates and the Remote Endpoint candidates specified,
along with the Transport Properties and Security Parameters needed for
Protocol Stack selection before the <code>Rendezvous</code> action is initiated.<a href="#section-7.3-3" class="pilcrow">¶</a></p>
<p id="section-7.3-4">The <code>Rendezvous</code> action listens on the Local Endpoint
candidates for an incoming Connection from the Remote Endpoint candidates,
while also simultaneously trying to establish a Connection from the Local
Endpoint candidates to the Remote Endpoint candidates.<a href="#section-7.3-4" class="pilcrow">¶</a></p>
<p id="section-7.3-5">If there are multiple Local Endpoints or Remote Endpoints configured, then
initiating a <code>Rendezvous</code> action will cause the Transport Services
Implementation to systematically probe the reachability
of those endpoint candidates following an approach such as that used in
Interactive Connectivity Establishment (ICE) <span>[<a href="#RFC8445" class="cite xref">RFC8445</a>]</span>.<a href="#section-7.3-5" class="pilcrow">¶</a></p>
<p id="section-7.3-6">If the endpoints are suspected to be behind a NAT, and the Local Endpoint
supports a method of discovering NAT bindings, such as STUN <span>[<a href="#RFC8489" class="cite xref">RFC8489</a>]</span> or Traversal Using Relays around NAT
(TURN) <span>[<a href="#RFC8656" class="cite xref">RFC8656</a>]</span>, then the <code>Resolve</code> action on the Preconnection can be
used to discover such bindings:<a href="#section-7.3-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.3-7">
<pre>
[]LocalEndpoint, []RemoteEndpoint := Preconnection.Resolve()
</pre><a href="#section-7.3-7" class="pilcrow">¶</a>
</div>
<p id="section-7.3-8">The <code>Resolve</code> action returns lists of Local Endpoints and Remote Endpoints
that represent the concrete addresses, local and server reflexive, on which
a <code>Rendezvous</code> for the Preconnection will listen for incoming Connections
and to which it will attempt to establish Connections.<a href="#section-7.3-8" class="pilcrow">¶</a></p>
<p id="section-7.3-9">Note that the set of Local Endpoints returned by <code>Resolve</code> might or might not
contain information about all possible local interfaces, depending on how the
Preconnection is configured. The set of available local interfaces can also
change over time, so care needs to be taken when using stored interface names.<a href="#section-7.3-9" class="pilcrow">¶</a></p>
<p id="section-7.3-10">An application that uses <code>Rendezvous</code> to establish a peer-to-peer Connection
in the presence of NATs will configure the Preconnection object with at least
one Local Endpoint that supports NAT binding discovery. It will then <code>Resolve</code>
the Preconnection and pass the resulting list of Local Endpoint candidates to
the peer via a signaling protocol, for example, as part of an ICE exchange <span>[<a href="#RFC8445" class="cite xref">RFC8445</a>]</span>
within SIP <span>[<a href="#RFC3261" class="cite xref">RFC3261</a>]</span> or WebRTC <span>[<a href="#RFC7478" class="cite xref">RFC7478</a>]</span>.  The peer will then,
via the same signaling channel, return the Remote Endpoint candidates.
The set of Remote Endpoint candidates is then configured on the Preconnection:<a href="#section-7.3-10" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.3-11">
<pre>
Preconnection.AddRemote([]RemoteEndpoint)
</pre><a href="#section-7.3-11" class="pilcrow">¶</a>
</div>
<p id="section-7.3-12">Once the application has
added both the Local Endpoint candidates and the Remote Endpoint candidates
retrieved from the peer via the signaling channel to the Preconnection,
the <code>Rendezvous</code> action is initiated and causes the Transport Services
Implementation to begin connectivity checks.<a href="#section-7.3-12" class="pilcrow">¶</a></p>
<p id="section-7.3-13">If successful, the <code>Rendezvous</code> action returns a Connection object via a
<code>RendezvousDone</code> event:<a href="#section-7.3-13" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.3-14">
<pre>
Preconnection -&gt; RendezvousDone&lt;Connection&gt;
</pre><a href="#section-7.3-14" class="pilcrow">¶</a>
</div>
<p id="section-7.3-15">The <code>RendezvousDone</code> event occurs when a Connection is established with the
Remote Endpoint. For connection-oriented transports, this occurs when the
transport-layer connection is established; for connectionless transports,
it occurs when the first Message is received from the Remote Endpoint. The
resulting Connection is contained within the <code>RendezvousDone</code> event and is
ready to use as soon as it is passed to the application via the event.
Changes made to a Preconnection after <code>Rendezvous</code> has been called <span class="bcp14">MUST NOT</span> have any effect on existing Connections.<a href="#section-7.3-15" class="pilcrow">¶</a></p>
<p id="section-7.3-16">An <code>EstablishmentError</code> occurs when:<a href="#section-7.3-16" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.3-17.1">the Properties and Security
Parameters of the Preconnection cannot be fulfilled for rendezvous or
cannot be reconciled with the Local and/or Remote Endpoints,<a href="#section-7.3-17.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.3-17.2">the Local
Endpoint or Remote Endpoint cannot be resolved,<a href="#section-7.3-17.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.3-17.3">no transport-layer
connection can be established to the Remote Endpoint, or<a href="#section-7.3-17.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.3-17.4">the
application is prohibited from rendezvous by policy.<a href="#section-7.3-17.4" class="pilcrow">¶</a>
</li>
        </ul>
<div class="alignLeft art-text artwork" id="section-7.3-18">
<pre>
Preconnection -&gt; EstablishmentError&lt;reason?&gt;
</pre><a href="#section-7.3-18" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="groups">
<section id="section-7.4">
        <h3 id="name-connection-groups">
<a href="#section-7.4" class="section-number selfRef">7.4. </a><a href="#name-connection-groups" class="section-name selfRef">Connection Groups</a>
        </h3>
<p id="section-7.4-1">Connection Groups can be created using the <code>Clone</code> action:<a href="#section-7.4-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.4-2">
<pre>
Connection := Connection.Clone(framer?, connectionProperties?)
</pre><a href="#section-7.4-2" class="pilcrow">¶</a>
</div>
<p id="section-7.4-3">Calling <code>Clone</code> on a Connection yields a Connection Group containing two Connections: the parent
Connection on which <code>Clone</code> was called and a resulting cloned Connection.
The new Connection is actively opened, and it will locally send a <code>Ready</code> event or an <code>EstablishmentError</code> event.
Calling <code>Clone</code> on any of these Connections adds another Connection to
the Connection Group. Connections in a Connection Group share all
Connection Properties except <code>connPriority</code> (see <a href="#conn-priority" class="auto internal xref">Section 8.1.2</a>),
and these Connection Properties are entangled: changing one of the
Connection Properties on one Connection in the Connection Group
automatically changes the Connection Property for all others. For example, changing
<code>connTimeout</code> (see
<a href="#conn-timeout" class="auto internal xref">Section 8.1.3</a>) on one Connection in a Connection Group will automatically
make the same change to this Connection Property for all other Connections in the Connection Group.
Like all other Properties, <code>connPriority</code> is copied
to the new Connection when calling <code>Clone</code>, but, in this case, a later change to the
<code>connPriority</code> on one Connection does not change it on the
other Connections in the same Connection Group.<a href="#section-7.4-3" class="pilcrow">¶</a></p>
<p id="section-7.4-4">The optional <code>connectionProperties</code> parameter allows passing
Transport Properties that control the behavior of the underlying stream or connection to be created, e.g., Protocol-specific Properties to request specific stream IDs for SCTP or QUIC.<a href="#section-7.4-4" class="pilcrow">¶</a></p>
<p id="section-7.4-5">Message Properties set on a Connection also apply only to that Connection.<a href="#section-7.4-5" class="pilcrow">¶</a></p>
<p id="section-7.4-6">A new Connection created by <code>Clone</code> can have a Message Framer assigned via the optional
<code>framer</code> parameter of the <code>Clone</code> action. If this parameter is not supplied, the
stack of Message Framers associated with a Connection is copied to
the cloned Connection when calling <code>Clone</code>. Then, a cloned Connection
has the same stack of Message Framers as the Connection from which they
are cloned, but these Framers can internally maintain per-Connection state.<a href="#section-7.4-6" class="pilcrow">¶</a></p>
<p id="section-7.4-7">It is also possible to check which Connections belong to the same Connection Group.
Calling <code>GroupedConnections</code> on a specific Connection returns a set of all Connections
in the same group.<a href="#section-7.4-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.4-8">
<pre>
[]Connection := Connection.GroupedConnections()
</pre><a href="#section-7.4-8" class="pilcrow">¶</a>
</div>
<p id="section-7.4-9">Connections will belong to the same group if the application previously called <code>Clone</code>.
Passive Connections can also be added to the same group, e.g., when a Listener
receives a new Connection that is just a new stream of an already-active multi-streaming
protocol instance.<a href="#section-7.4-9" class="pilcrow">¶</a></p>
<p id="section-7.4-10">If the underlying protocol supports multi-streaming, it is natural to use this
functionality to implement <code>Clone</code>. In that case, Connections in a Connection Group are
multiplexed together, giving them similar treatment not only inside Endpoints,
but also across the end-to-end Internet path.<a href="#section-7.4-10" class="pilcrow">¶</a></p>
<p id="section-7.4-11">Note that calling <code>Clone</code> can result in on-the-wire signaling, e.g., to open a new
transport connection, depending on the underlying Protocol Stack. When <code>Clone</code> leads to
the opening of multiple such connections,
the Transport Services System will ensure consistency of
Connection Properties by uniformly applying them to all underlying connections
in a group. Even in such a case, it is possible for a Transport Services System
to implement prioritization within a Connection Group (see <span>[<a href="#TCP-COUPLING" class="cite xref">TCP-COUPLING</a>]</span> and <span>[<a href="#RFC8699" class="cite xref">RFC8699</a>]</span>).<a href="#section-7.4-11" class="pilcrow">¶</a></p>
<p id="section-7.4-12">Attempts to clone a Connection can result in a <code>CloneError</code>:<a href="#section-7.4-12" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.4-13">
<pre>
Connection -&gt; CloneError&lt;reason?&gt;
</pre><a href="#section-7.4-13" class="pilcrow">¶</a>
</div>
<p id="section-7.4-14">A <code>CloneError</code> can also occur later, after <code>Clone</code> was successfully called. In this case,
it informs the application that the Connection that sends the <code>CloneError</code> is no longer a
part of any Connection Group. For example, this can occur when the Transport Services
system is unable to implement entanglement (a Connection Property was changed on a different
Connection in the Connection Group, but this change could not be successfully applied
to the Connection that sends the <code>CloneError</code>).<a href="#section-7.4-14" class="pilcrow">¶</a></p>
<p id="section-7.4-15">The <code>connPriority</code> Connection Property operates on Connections in a Connection Group
using the same approach as that used in <a href="#msg-priority" class="auto internal xref">Section 9.1.3.2</a>: when allocating available network
capacity among Connections in a Connection Group, sends on Connections with
numerically lower priority values will be prioritized over sends on Connections that have
numerically higher priority values. Capacity will be shared among these Connections according to
the <code>connScheduler</code> Property (<a href="#conn-scheduler" class="auto internal xref">Section 8.1.5</a>).
See <a href="#priority-in-taps" class="auto internal xref">Section 9.2.6</a> for more details.<a href="#section-7.4-15" class="pilcrow">¶</a></p>
</section>
</div>
<div id="add-endpoints">
<section id="section-7.5">
        <h3 id="name-adding-and-removing-endpoin">
<a href="#section-7.5" class="section-number selfRef">7.5. </a><a href="#name-adding-and-removing-endpoin" class="section-name selfRef">Adding and Removing Endpoints on a Connection</a>
        </h3>
<p id="section-7.5-1">Transport protocols that are explicitly multipath-aware are expected to automatically
manage the set of remote endpoints that they are communicating with and the paths to
those endpoints. A <code>PathChange</code> event, described in <a href="#conn-path-change" class="auto internal xref">Section 8.3.2</a>, will be
generated when the path changes.<a href="#section-7.5-1" class="pilcrow">¶</a></p>
<p id="section-7.5-2">However, in some cases, it is necessary to explicitly indicate to a Connection that
a new Remote Endpoint has become available for use or indicate that a Remote
Endpoint is no longer available. This is most common in the case of peer-to-peer
connections using Trickle ICE <span>[<a href="#RFC8838" class="cite xref">RFC8838</a>]</span>.<a href="#section-7.5-2" class="pilcrow">¶</a></p>
<p id="section-7.5-3">The <code>AddRemote</code> action can be used to add one or more new Remote Endpoints
to a Connection:<a href="#section-7.5-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.5-4">
<pre>
Connection.AddRemote([]RemoteEndpoint)
</pre><a href="#section-7.5-4" class="pilcrow">¶</a>
</div>
<p id="section-7.5-5">Endpoints that are already known to the Connection are ignored. A call to
<code>AddRemote</code> makes the new Remote Endpoints available to the Connection,
but whether the Connection makes use of those Endpoints will depend on the
underlying transport protocol.<a href="#section-7.5-5" class="pilcrow">¶</a></p>
<p id="section-7.5-6">Similarly, the <code>RemoveRemote</code> action can be used to tell a Connection to
stop using one or more Remote Endpoints:<a href="#section-7.5-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.5-7">
<pre>
Connection.RemoveRemote([]RemoteEndpoint)
</pre><a href="#section-7.5-7" class="pilcrow">¶</a>
</div>
<p id="section-7.5-8">Removing all known Remote Endpoints can have the effect of aborting the
connection. The effect of removing the active Remote Endpoint(s) depends
on the underlying transport: multipath-aware transports might be able to
switch to a new path if other reachable Remote Endpoints exist or the
connection might abort.<a href="#section-7.5-8" class="pilcrow">¶</a></p>
<p id="section-7.5-9">Similarly, the <code>AddLocal</code> and <code>RemoveLocal</code> actions can be used to add
and remove Local Endpoints to or from a Connection.<a href="#section-7.5-9" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="introspection">
<section id="section-8">
      <h2 id="name-managing-connections">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-managing-connections" class="section-name selfRef">Managing Connections</a>
      </h2>
<p id="section-8-1">During preestablishment and after establishment, Preconnections or Connections can be configured and queried using Connection
Properties, and asynchronous information could be available about the state of the
Connection via <code>SoftError</code> events.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">Connection Properties represent the configuration and state of the selected
Protocol Stack(s) backing a Connection. These Connection Properties can be
generic (applying regardless of transport protocol) or specific (applicable to a
single implementation of a single transport Protocol Stack). Generic Connection
Properties are defined in <a href="#connection-props" class="auto internal xref">Section 8.1</a>.<a href="#section-8-2" class="pilcrow">¶</a></p>
<p id="section-8-3">Protocol-specific Properties are defined in a way that is specific to the transport or implementation to
permit more specialized protocol features to be used.
Too much reliance by an application on Protocol-specific Properties can significantly reduce the flexibility
of a Transport Services System to make appropriate
selection and configuration choices. Therefore, it is <span class="bcp14">RECOMMENDED</span> that
Generic Connection Properties be used for properties common across different protocols and that
Protocol-specific Connection Properties are only used where specific protocols or properties are necessary.<a href="#section-8-3" class="pilcrow">¶</a></p>
<p id="section-8-4">The application can set and query Connection Properties on a per-Connection
basis. Connection Properties that are not read-only can be set during
preestablishment (see <a href="#selection-props" class="auto internal xref">Section 6.2</a>), as well as on Connections directly using
the <code>SetProperty</code> action:<a href="#section-8-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8-5">
<pre>
ErrorCode := Connection.SetProperty(property, value)
</pre><a href="#section-8-5" class="pilcrow">¶</a>
</div>
<p id="section-8-6">If an error is encountered in setting a Property (for example, if the application tries to set a TCP-specific Property on a Connection that is not using TCP), the application <span class="bcp14">MUST</span> be informed about this error via the <code>ErrorCode</code> object. Such errors <span class="bcp14">MUST NOT</span> cause the Connection to be terminated.
Note that changing one of the Connection Properties on one Connection in a Connection Group
will also change it for all other Connections of that group; see <a href="#groups" class="auto internal xref">Section 7.4</a>.<a href="#section-8-6" class="pilcrow">¶</a></p>
<p id="section-8-7">At any point, the application can query Connection Properties.<a href="#section-8-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8-8">
<pre>
ConnectionProperties := Connection.GetProperties()
value := ConnectionProperties.Get(property)
if ConnectionProperties.Has(boolean_or_preference_property) then...
</pre><a href="#section-8-8" class="pilcrow">¶</a>
</div>
<p id="section-8-9">Depending on the status of the Connection, the queried Connection
Properties will include different information:<a href="#section-8-9" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8-10.1">
          <p id="section-8-10.1.1">The Connection state, which can be one of the following:
<code>Establishing</code>, <code>Established</code>, <code>Closing</code>, or <code>Closed</code> (see <a href="#conn-state" class="auto internal xref">Section 8.1.11.1</a>).<a href="#section-8-10.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-8-10.2">
          <p id="section-8-10.2.1">Whether the Connection can be used to send data (see <a href="#conn-send-data" class="auto internal xref">Section 8.1.11.2</a>).
A Connection cannot be used
for sending if the Connection was created with the Selection Property
<code>direction</code> set to <code>Unidirectional receive</code> or if a Message
marked as <code>Final</code> was sent over this Connection. See also <a href="#msg-final" class="auto internal xref">Section 9.1.3.5</a>.<a href="#section-8-10.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-8-10.3">
          <p id="section-8-10.3.1">Whether the Connection can be used to receive data (see <a href="#conn-receive-data" class="auto internal xref">Section 8.1.11.3</a>).
A Connection cannot be
used for receiving if the Connection was created with the Selection Property
<code>direction</code> set to <code>Unidirectional send</code> or if a Message
marked as <code>Final</code> was received (see <a href="#receiving-final-messages" class="auto internal xref">Section 9.3.3.3</a>). The latter
is only supported by certain transport protocols, e.g., by TCP as a half-closed
connection.<a href="#section-8-10.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-8-10.4">
          <p id="section-8-10.4.1">For Connections that are <code>Established</code>, <code>Closing</code>, or <code>Closed</code>:
Connection Properties (<a href="#connection-props" class="auto internal xref">Section 8.1</a>) of the
actual protocols that were selected and instantiated, and Selection
Properties that the application specified on the Preconnection.
Selection Properties of type "Preference" will be exposed as Boolean values
indicating whether or not the Property applies to the selected transport.
Note that the instantiated Protocol Stack might not match all
Protocol Selection Properties that the application specified on the
Preconnection.<a href="#section-8-10.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-8-10.5">
          <p id="section-8-10.5.1">For Connections that are <code>Established</code>: Transport Services Implementations
ought to provide information concerning the
path(s) used by the Protocol Stack. This can be derived from local PvD information,
measurements by the Protocol Stack, or other sources.
For example, a Transport Services System that is configured to receive and process PvD information
<span>[<a href="#RFC7556" class="cite xref">RFC7556</a>]</span> could also provide network configuration information for the chosen path(s).<a href="#section-8-10.5.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<div id="connection-props">
<section id="section-8.1">
        <h3 id="name-generic-connection-properti">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-generic-connection-properti" class="section-name selfRef">Generic Connection Properties</a>
        </h3>
<p id="section-8.1-1">Generic Connection Properties are defined independently of the chosen Protocol Stack; therefore, they are available on all Connections.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1-2">Many Connection Properties have a corresponding Selection Property that
enables applications to express their preference for protocols providing a supporting transport feature.<a href="#section-8.1-2" class="pilcrow">¶</a></p>
<div id="conn-recv-checksum">
<section id="section-8.1.1">
          <h4 id="name-required-minimum-corruption">
<a href="#section-8.1.1" class="section-number selfRef">8.1.1. </a><a href="#name-required-minimum-corruption" class="section-name selfRef">Required Minimum Corruption Protection Coverage for Receiving</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-8.1.1-1">
            <dt id="section-8.1.1-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.1-1.2">
              <p id="section-8.1.1-1.2.1">recvChecksumLen<a href="#section-8.1.1-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.1-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.1-1.4">
              <p id="section-8.1.1-1.4.1">Integer (non-negative) or <code>Full Coverage</code><a href="#section-8.1.1-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.1-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.1-1.6">
              <p id="section-8.1.1-1.6.1"><code>Full Coverage</code><a href="#section-8.1.1-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.1.1-2">If this Property is an Integer, it specifies the minimum number of bytes in a received
Message that need to be covered by a checksum.
A receiving Endpoint will not forward Messages that have less coverage
to the application. The application is responsible for handling
any corruption within the non-protected part of the Message <span>[<a href="#RFC8085" class="cite xref">RFC8085</a>]</span>.
A special value of 0 means that a received packet might also have a zero checksum field,
and the enumerated value <code>Full Coverage</code> means
that the entire Message needs to be protected by a checksum. An implementation
is supposed to express <code>Full Coverage</code> in an environment-typical way, e.g., as a Union type or special value.<a href="#section-8.1.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-priority">
<section id="section-8.1.2">
          <h4 id="name-connection-priority">
<a href="#section-8.1.2" class="section-number selfRef">8.1.2. </a><a href="#name-connection-priority" class="section-name selfRef">Connection Priority</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-8.1.2-1">
            <dt id="section-8.1.2-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.2-1.2">
              <p id="section-8.1.2-1.2.1">connPriority<a href="#section-8.1.2-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.2-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.2-1.4">
              <p id="section-8.1.2-1.4.1">Integer (non-negative)<a href="#section-8.1.2-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.2-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.2-1.6">
              <p id="section-8.1.2-1.6.1">100<a href="#section-8.1.2-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.1.2-2">This Property is a non-negative Integer representing the
priority of this Connection
relative to other Connections in the same
Connection Group. A numerically lower value reflects a higher priority. It has no effect
on Connections not part of a Connection
Group. As noted in <a href="#groups" class="auto internal xref">Section 7.4</a>, this Property is not entangled when Connections
are cloned, i.e., changing the priority on one Connection in a Connection Group
does not change it on the other Connections in the same Connection Group.
No guarantees of a specific behavior regarding Connection Priority are given;
a Transport Services System could ignore this Property. See <a href="#priority-in-taps" class="auto internal xref">Section 9.2.6</a> for more details.<a href="#section-8.1.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-timeout">
<section id="section-8.1.3">
          <h4 id="name-timeout-for-aborting-connec">
<a href="#section-8.1.3" class="section-number selfRef">8.1.3. </a><a href="#name-timeout-for-aborting-connec" class="section-name selfRef">Timeout for Aborting Connection</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-8.1.3-1">
            <dt id="section-8.1.3-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.3-1.2">
              <p id="section-8.1.3-1.2.1">connTimeout<a href="#section-8.1.3-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.3-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.3-1.4">
              <p id="section-8.1.3-1.4.1">Numeric (positive) or <code>Disabled</code><a href="#section-8.1.3-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.3-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.3-1.6">
              <p id="section-8.1.3-1.6.1"><code>Disabled</code><a href="#section-8.1.3-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.1.3-2">If this Property is Numeric, it specifies how long to wait before deciding that an active Connection has
failed when trying to reliably deliver data to the Remote Endpoint. Adjustments to this Property
will only take effect if the underlying stack supports reliability. If this Property has the enumerated
value <code>Disabled</code>, it means that no timeout is scheduled. A Transport Services API
could express <code>Disabled</code> in an environment-typical way, e.g., as a Union type or special value.<a href="#section-8.1.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="keep-alive-timeout">
<section id="section-8.1.4">
          <h4 id="name-timeout-for-keep-alive-pack">
<a href="#section-8.1.4" class="section-number selfRef">8.1.4. </a><a href="#name-timeout-for-keep-alive-pack" class="section-name selfRef">Timeout for Keep-Alive Packets</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-8.1.4-1">
            <dt id="section-8.1.4-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.4-1.2">
              <p id="section-8.1.4-1.2.1">keepAliveTimeout<a href="#section-8.1.4-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.4-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.4-1.4">
              <p id="section-8.1.4-1.4.1">Numeric (positive) or <code>Disabled</code><a href="#section-8.1.4-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.4-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.4-1.6">
              <p id="section-8.1.4-1.6.1"><code>Disabled</code><a href="#section-8.1.4-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.1.4-2">A Transport Services API can request a protocol that supports sending keep-alive packets (<a href="#keep-alive" class="auto internal xref">Section 6.2.10</a>).
If this Property is Numeric, it specifies the maximum length of time an idle Connection (one for which no transport
packets have been sent) ought to wait before
the Local Endpoint sends a keep-alive packet to the Remote Endpoint. Adjustments to this Property
will only take effect if the underlying stack supports sending keep-alive packets.
Guidance on setting this value for connectionless transports is
provided in <span>[<a href="#RFC8085" class="cite xref">RFC8085</a>]</span>.
A value greater than the Connection timeout (<a href="#conn-timeout" class="auto internal xref">Section 8.1.3</a>) or the enumerated value <code>Disabled</code> will disable the sending of keep-alive packets. A Transport Services API
could express <code>Disabled</code> in an environment-typical way, e.g., as a Union type or special value.<a href="#section-8.1.4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-scheduler">
<section id="section-8.1.5">
          <h4 id="name-connection-group-transmissi">
<a href="#section-8.1.5" class="section-number selfRef">8.1.5. </a><a href="#name-connection-group-transmissi" class="section-name selfRef">Connection Group Transmission Scheduler</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-8.1.5-1">
            <dt id="section-8.1.5-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.5-1.2">
              <p id="section-8.1.5-1.2.1">connScheduler<a href="#section-8.1.5-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.5-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.5-1.4">
              <p id="section-8.1.5-1.4.1">Enumeration<a href="#section-8.1.5-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.5-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.5-1.6">
              <p id="section-8.1.5-1.6.1">Weighted Fair Queueing (see <span><a href="https://rfc-editor.org/rfc/rfc8260#section-3.6" class="relref">Section 3.6</a> of [<a href="#RFC8260" class="cite xref">RFC8260</a>]</span>)<a href="#section-8.1.5-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.1.5-2">This Property specifies which scheduler is used among Connections within
a Connection Group to apportion the available capacity according to Connection priorities
(see Sections <a href="#groups" class="auto internal xref">7.4</a> and <a href="#conn-priority" class="auto internal xref">8.1.2</a>). A set of schedulers is
described in <span>[<a href="#RFC8260" class="cite xref">RFC8260</a>]</span>.<a href="#section-8.1.5-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prop-cap-profile">
<section id="section-8.1.6">
          <h4 id="name-capacity-profile">
<a href="#section-8.1.6" class="section-number selfRef">8.1.6. </a><a href="#name-capacity-profile" class="section-name selfRef">Capacity Profile</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-8.1.6-1">
            <dt id="section-8.1.6-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.6-1.2">
              <p id="section-8.1.6-1.2.1">connCapacityProfile<a href="#section-8.1.6-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.6-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.6-1.4">
              <p id="section-8.1.6-1.4.1">Enumeration<a href="#section-8.1.6-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.6-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.6-1.6">
              <p id="section-8.1.6-1.6.1">Default Profile (Best Effort)<a href="#section-8.1.6-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.1.6-2">This Property specifies the desired network treatment for traffic sent by the
application and the trade-offs the application is prepared to make in path and
protocol selection to receive that desired treatment. When the capacity profile
is set to a value other than Default, the Transport Services System <span class="bcp14">SHOULD</span> select paths
and configure protocols to optimize the trade-off between delay, delay variation, and
efficient use of the available capacity based on the capacity profile specified. How this is realized
is implementation specific. The capacity profile <span class="bcp14">MAY</span> also be used
to set markings on the wire for Protocol Stacks supporting this action.
Recommendations for use with DSCPs are provided below for each profile; note that
when a Connection is multiplexed, the guidelines in <span><a href="https://rfc-editor.org/rfc/rfc7657#section-6" class="relref">Section 6</a> of [<a href="#RFC7657" class="cite xref">RFC7657</a>]</span> apply.<a href="#section-8.1.6-2" class="pilcrow">¶</a></p>
<p id="section-8.1.6-3">The following values are valid for the capacity profile:<a href="#section-8.1.6-3" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-8.1.6-4">
            <dt id="section-8.1.6-4.1">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.6-4.2">
              <p id="section-8.1.6-4.2.1">The application provides no information about its expected capacity
  profile. Transport Services Systems that
  map the requested capacity profile to per-connection DSCP signaling
  <span class="bcp14">SHOULD</span> assign the DSCP Default Forwarding Per Hop Behavior (PHB) <span>[<a href="#RFC2474" class="cite xref">RFC2474</a>]</span>.<a href="#section-8.1.6-4.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.6-4.3">Scavenger:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.6-4.4">
              <p id="section-8.1.6-4.4.1">The application is not interactive. It expects to send
  and/or receive data without any urgency. This can, for example, be used to
  select Protocol Stacks with scavenger transmission control and/or to assign
  the traffic to a lower-effort service. Transport Services Systems that
  map the requested capacity profile to per-connection DSCP signaling
  <span class="bcp14">SHOULD</span> assign the DSCP "Less than best effort" PHB
  <span>[<a href="#RFC8622" class="cite xref">RFC8622</a>]</span>.<a href="#section-8.1.6-4.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.6-4.5">Low Latency/Interactive:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.6-4.6">
              <p id="section-8.1.6-4.6.1">The application is interactive and prefers loss to
  latency. Response time <span class="bcp14">SHOULD</span> be optimized at the expense of delay variation
  and efficient use of the available capacity when sending on this Connection. The <code>Low Latency/Interactive</code> value of the capacity profile can be
  used by the system to disable the coalescing of multiple small Messages into
  larger packets (Nagle algorithm (see <span><a href="https://rfc-editor.org/rfc/rfc1122#section-4.2.3.4" class="relref">Section 4.2.3.4</a> of [<a href="#RFC1122" class="cite xref">RFC1122</a>]</span>)); to prefer immediate acknowledgement from
  the peer Endpoint when supported by the underlying transport; and so on.
  Transport Services Systems that map the requested capacity profile to per-connection DSCP signaling without multiplexing <span class="bcp14">SHOULD</span> assign a DSCP Assured Forwarding (AF41, AF42, AF43, and AF44) PHB <span>[<a href="#RFC2597" class="cite xref">RFC2597</a>]</span>. Inelastic traffic that is expected to conform to the configured network service rate could be mapped to the DSCP Expedited Forwarding PHBs <span>[<a href="#RFC3246" class="cite xref">RFC3246</a>]</span> or PHBs as discussed in <span>[<a href="#RFC5865" class="cite xref">RFC5865</a>]</span>.<a href="#section-8.1.6-4.6.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.6-4.7">Low Latency/Non-Interactive:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.6-4.8">
              <p id="section-8.1.6-4.8.1">The application prefers loss to latency but is
  not interactive. Response time <span class="bcp14">SHOULD</span> be optimized at the expense of delay
  variation and efficient use of the available capacity when sending on this Connection. Transport
  system implementations that map the requested capacity profile to
  per-connection DSCP signaling without multiplexing <span class="bcp14">SHOULD</span> assign a DSCP
  Assured Forwarding (AF21, AF22, AF23, and AF24) PHB <span>[<a href="#RFC2597" class="cite xref">RFC2597</a>]</span>.<a href="#section-8.1.6-4.8.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.6-4.9">Constant-Rate Streaming:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.6-4.10">
              <p id="section-8.1.6-4.10.1">The application expects to send/receive data at a
  constant rate after Connection establishment. Delay and delay variation <span class="bcp14">SHOULD</span>
  be minimized at the expense of efficient use of the available capacity.
  This implies that the Connection might fail if the path is unable to maintain the desired rate.
  A transport can interpret this capacity profile as preferring a circuit
  breaker <span>[<a href="#RFC8084" class="cite xref">RFC8084</a>]</span> to a rate-adaptive congestion controller. Transport
  system implementations that map the requested capacity profile to
  per-connection DSCP signaling without multiplexing <span class="bcp14">SHOULD</span> assign a DSCP
  Assured Forwarding (AF31, AF32, AF33, and AF34) PHB <span>[<a href="#RFC2597" class="cite xref">RFC2597</a>]</span>.<a href="#section-8.1.6-4.10.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.6-4.11">Capacity-Seeking:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.6-4.12">
              <p id="section-8.1.6-4.12.1">The application expects to send/receive data at the
  maximum rate allowed by its congestion controller over a relatively long
  period of time. Transport Services Systems that map the requested
  capacity profile to per-connection DSCP signaling without multiplexing
  <span class="bcp14">SHOULD</span> assign a DSCP Assured Forwarding (AF11, AF12, AF13, and AF14) PHB <span>[<a href="#RFC2597" class="cite xref">RFC2597</a>]</span>
  per <span><a href="https://rfc-editor.org/rfc/rfc4594#section-4.8" class="relref">Section 4.8</a> of [<a href="#RFC4594" class="cite xref">RFC4594</a>]</span>.<a href="#section-8.1.6-4.12.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.1.6-5">The capacity profile for a selected Protocol Stack may be modified on a
per-Message basis using the <code>msgCapacityProfile</code> Message Property; see
<a href="#send-profile" class="auto internal xref">Section 9.1.3.8</a>.<a href="#section-8.1.6-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="multipath-policy">
<section id="section-8.1.7">
          <h4 id="name-policy-for-using-multipath-">
<a href="#section-8.1.7" class="section-number selfRef">8.1.7. </a><a href="#name-policy-for-using-multipath-" class="section-name selfRef">Policy for Using Multipath Transports</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-8.1.7-1">
            <dt id="section-8.1.7-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.7-1.2">
              <p id="section-8.1.7-1.2.1">multipathPolicy<a href="#section-8.1.7-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.7-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.7-1.4">
              <p id="section-8.1.7-1.4.1">Enumeration<a href="#section-8.1.7-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.7-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.7-1.6">
              <p id="section-8.1.7-1.6.1">Handover<a href="#section-8.1.7-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.1.7-2">This Property specifies the local policy for transferring data across multiple paths between the same end hosts if the <code>multipath</code> Property is not set to <code>Disabled</code> (see <a href="#multipath-mode" class="auto internal xref">Section 6.2.14</a>). Possible values are as follows:<a href="#section-8.1.7-2" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-8.1.7-3">
            <dt id="section-8.1.7-3.1">Handover:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.7-3.2">
              <p id="section-8.1.7-3.2.1">The Connection ought only to attempt to migrate between different paths when the original path is lost or becomes unusable. The thresholds used to declare a path unusable are implementation specific.<a href="#section-8.1.7-3.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.7-3.3">Interactive:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.7-3.4">
              <p id="section-8.1.7-3.4.1">The Connection ought only to attempt to minimize the latency for interactive traffic patterns by transmitting data across multiple paths when this is beneficial.
The goal of minimizing the latency will be balanced against the cost of each of these paths. Depending on the cost of the
lower-latency path, the scheduling might choose to use a higher-latency path. Traffic can be scheduled such that data may be transmitted
on multiple paths in parallel to achieve a lower latency. The specific scheduling algorithm is implementation specific.<a href="#section-8.1.7-3.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.7-3.5">Aggregate:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.7-3.6">
              <p id="section-8.1.7-3.6.1">The Connection ought to attempt to use multiple paths in parallel to maximize available capacity and possibly overcome the capacity limitations of the individual paths. The actual strategy is implementation specific.<a href="#section-8.1.7-3.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.1.7-4">Note that this is a local choice: the Remote Endpoint can choose a different policy.<a href="#section-8.1.7-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="bounds-on-send-or-receive-rate">
<section id="section-8.1.8">
          <h4 id="name-bounds-on-send-or-receive-r">
<a href="#section-8.1.8" class="section-number selfRef">8.1.8. </a><a href="#name-bounds-on-send-or-receive-r" class="section-name selfRef">Bounds on Send or Receive Rate</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-8.1.8-1">
            <dt id="section-8.1.8-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.8-1.2">
              <p id="section-8.1.8-1.2.1">minSendRate / minRecvRate / maxSendRate / maxRecvRate<a href="#section-8.1.8-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.8-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.8-1.4">
              <p id="section-8.1.8-1.4.1">Numeric (positive) or <code>Unlimited</code> / Numeric (positive) or <code>Unlimited</code> / Numeric (positive) or <code>Unlimited</code> / Numeric (positive) or <code>Unlimited</code><a href="#section-8.1.8-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.8-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.8-1.6">
              <p id="section-8.1.8-1.6.1"><code>Unlimited</code> / <code>Unlimited</code> / <code>Unlimited</code> / <code>Unlimited</code><a href="#section-8.1.8-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.1.8-2">Numeric values of these Properties specify an upper-bound rate that a transfer is not expected to
exceed (even if flow control and congestion control allow higher rates) and/or a
lower-bound application-layer rate below which the application does not deem
it will be useful. These rate values are measured at the application layer, i.e., do not consider the header overhead
from protocols used by the Transport Services System. The values are specified in bits per second
and assumed to be measured over one-second time intervals. For example, specifying a maxSendRate of X bits per second
means that, from the moment at which the Property value is chosen, not more than X bits will be sent in any
following second. The enumerated value <code>Unlimited</code> indicates that no bound is specified.
A Transport Services API could express <code>Unlimited</code> in an environment-typical way, e.g., as a Union type or special value.<a href="#section-8.1.8-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="group-connection-limit">
<section id="section-8.1.9">
          <h4 id="name-group-connection-limit">
<a href="#section-8.1.9" class="section-number selfRef">8.1.9. </a><a href="#name-group-connection-limit" class="section-name selfRef">Group Connection Limit</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-8.1.9-1">
            <dt id="section-8.1.9-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.9-1.2">
              <p id="section-8.1.9-1.2.1">groupConnLimit<a href="#section-8.1.9-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.9-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.9-1.4">
              <p id="section-8.1.9-1.4.1">Numeric (positive) or <code>Unlimited</code><a href="#section-8.1.9-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.9-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.9-1.6">
              <p id="section-8.1.9-1.6.1"><code>Unlimited</code><a href="#section-8.1.9-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.1.9-2">If this Property is Numeric, it controls the number of Connections that can be accepted from
a peer as new members of the Connection's group. Similar to <code>SetNewConnectionLimit</code>,
this limits the number of <code>ConnectionReceived</code> events that will occur, but constrained
to the group of the Connection associated with this Property. For a multi-streaming transport,
this limits the number of allowed streams.  A Transport Services API
could express <code>Unlimited</code> in an environment-typical way, e.g., as a Union type or special value.<a href="#section-8.1.9-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="isolate-session">
<section id="section-8.1.10">
          <h4 id="name-isolate-session">
<a href="#section-8.1.10" class="section-number selfRef">8.1.10. </a><a href="#name-isolate-session" class="section-name selfRef">Isolate Session</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-8.1.10-1">
            <dt id="section-8.1.10-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.10-1.2">
              <p id="section-8.1.10-1.2.1">isolateSession<a href="#section-8.1.10-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.10-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.10-1.4">
              <p id="section-8.1.10-1.4.1">Boolean<a href="#section-8.1.10-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.1.10-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-8.1.10-1.6">
              <p id="section-8.1.10-1.6.1"><code>false</code><a href="#section-8.1.10-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.1.10-2">When set to <code>true</code>, this Property will initiate new Connections using as little
cached information (such as session tickets or cookies) as possible from
previous Connections that are not in the same Connection Group. Any state generated by this
Connection will only be shared with Connections in the same Connection Group. Cloned Connections
will use saved state from within the Connection Group.
   This is used for separating Connection Contexts as specified in <span><a href="https://rfc-editor.org/rfc/rfc9621#section-4.2.3" class="relref">Section 4.2.3</a> of [<a href="#RFC9621" class="cite xref">RFC9621</a>]</span>.<a href="#section-8.1.10-2" class="pilcrow">¶</a></p>
<p id="section-8.1.10-3">Note that this does not guarantee that information will not leak because
implementations might not be able to fully isolate all caches (e.g.,
RTT estimates). Note that this Property could degrade Connection performance.<a href="#section-8.1.10-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="read-only-conn-prop">
<section id="section-8.1.11">
          <h4 id="name-read-only-connection-proper">
<a href="#section-8.1.11" class="section-number selfRef">8.1.11. </a><a href="#name-read-only-connection-proper" class="section-name selfRef">Read-Only Connection Properties</a>
          </h4>
<p id="section-8.1.11-1">The following generic Connection Properties are read-only, i.e., they cannot be changed by an application.<a href="#section-8.1.11-1" class="pilcrow">¶</a></p>
<div id="conn-state">
<section id="section-8.1.11.1">
            <h5 id="name-connection-state">
<a href="#section-8.1.11.1" class="section-number selfRef">8.1.11.1. </a><a href="#name-connection-state" class="section-name selfRef">Connection State</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-8.1.11.1-1">
              <dt id="section-8.1.11.1-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-8.1.11.1-1.2">
                <p id="section-8.1.11.1-1.2.1">connState<a href="#section-8.1.11.1-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-8.1.11.1-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-8.1.11.1-1.4">
                <p id="section-8.1.11.1-1.4.1">Enumeration<a href="#section-8.1.11.1-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-8.1.11.1-2">This Property provides information about the current state of the Connection. Possible values are <code>Establishing</code>, <code>Established</code>, <code>Closing</code>, or <code>Closed</code>. For more details on Connection state, see <a href="#state-ordering" class="auto internal xref">Section 11</a>.<a href="#section-8.1.11.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-send-data">
<section id="section-8.1.11.2">
            <h5 id="name-can-send-data">
<a href="#section-8.1.11.2" class="section-number selfRef">8.1.11.2. </a><a href="#name-can-send-data" class="section-name selfRef">Can Send Data</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-8.1.11.2-1">
              <dt id="section-8.1.11.2-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-8.1.11.2-1.2">
                <p id="section-8.1.11.2-1.2.1">canSend<a href="#section-8.1.11.2-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-8.1.11.2-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-8.1.11.2-1.4">
                <p id="section-8.1.11.2-1.4.1">Boolean<a href="#section-8.1.11.2-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-8.1.11.2-2">This Property can be queried to learn whether the Connection can be used to send data.<a href="#section-8.1.11.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-receive-data">
<section id="section-8.1.11.3">
            <h5 id="name-can-receive-data">
<a href="#section-8.1.11.3" class="section-number selfRef">8.1.11.3. </a><a href="#name-can-receive-data" class="section-name selfRef">Can Receive Data</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-8.1.11.3-1">
              <dt id="section-8.1.11.3-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-8.1.11.3-1.2">
                <p id="section-8.1.11.3-1.2.1">canReceive<a href="#section-8.1.11.3-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-8.1.11.3-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-8.1.11.3-1.4">
                <p id="section-8.1.11.3-1.4.1">Boolean<a href="#section-8.1.11.3-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-8.1.11.3-2">This Property can be queried to learn whether the Connection can be used to receive data.<a href="#section-8.1.11.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-max-msg-notfrag">
<section id="section-8.1.11.4">
            <h5 id="name-maximum-message-size-before">
<a href="#section-8.1.11.4" class="section-number selfRef">8.1.11.4. </a><a href="#name-maximum-message-size-before" class="section-name selfRef">Maximum Message Size Before Fragmentation or Segmentation</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-8.1.11.4-1">
              <dt id="section-8.1.11.4-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-8.1.11.4-1.2">
                <p id="section-8.1.11.4-1.2.1">singularTransmissionMsgMaxLen<a href="#section-8.1.11.4-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-8.1.11.4-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-8.1.11.4-1.4">
                <p id="section-8.1.11.4-1.4.1">Integer (non-negative) or <code>Not applicable</code><a href="#section-8.1.11.4-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-8.1.11.4-2">This Property, if applicable, represents the maximum Message size that can be
sent without incurring network-layer fragmentation at the sender.
It is specified as a number of bytes and is less than or equal to the
maximum Message Size on <code>Send</code>.
It exposes a readable value to the application
based on the Maximum Packet Size (MPS). The value of this Property can change over time (and can be updated via Datagram Packetization Layer Path MTU Discovery (DPLPMTUD) <span>[<a href="#RFC8899" class="cite xref">RFC8899</a>]</span>).
This value allows a sending stack to avoid unwanted fragmentation at the
network layer or segmentation by the transport layer before
choosing the Message size and/or after a <code>SendError</code> occurs indicating
an attempt to send a Message that is too large.  A Transport Services API
could express <code>Not applicable</code> in an environment-typical way, e.g., as a Union type or special value (e.g., 0).<a href="#section-8.1.11.4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-max-msg-send">
<section id="section-8.1.11.5">
            <h5 id="name-maximum-message-size-on-sen">
<a href="#section-8.1.11.5" class="section-number selfRef">8.1.11.5. </a><a href="#name-maximum-message-size-on-sen" class="section-name selfRef">Maximum Message Size on Send</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-8.1.11.5-1">
              <dt id="section-8.1.11.5-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-8.1.11.5-1.2">
                <p id="section-8.1.11.5-1.2.1">sendMsgMaxLen<a href="#section-8.1.11.5-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-8.1.11.5-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-8.1.11.5-1.4">
                <p id="section-8.1.11.5-1.4.1">Integer (non-negative)<a href="#section-8.1.11.5-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-8.1.11.5-2">This Property represents the maximum Message size that an application can send.
It is specified as the number of bytes. A value of 0 indicates that sending is not possible.<a href="#section-8.1.11.5-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conn-max-msg-recv">
<section id="section-8.1.11.6">
            <h5 id="name-maximum-message-size-on-rec">
<a href="#section-8.1.11.6" class="section-number selfRef">8.1.11.6. </a><a href="#name-maximum-message-size-on-rec" class="section-name selfRef">Maximum Message Size on Receive</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-8.1.11.6-1">
              <dt id="section-8.1.11.6-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-8.1.11.6-1.2">
                <p id="section-8.1.11.6-1.2.1">recvMsgMaxLen<a href="#section-8.1.11.6-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-8.1.11.6-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-8.1.11.6-1.4">
                <p id="section-8.1.11.6-1.4.1">Integer (non-negative)<a href="#section-8.1.11.6-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-8.1.11.6-2">This Property represents the maximum Message size that an application can receive.
It is specified as the number of bytes. A value of 0 indicates that receiving is not possible.<a href="#section-8.1.11.6-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="tcp-uto">
<section id="section-8.2">
        <h3 id="name-tcp-specific-properties-use">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-tcp-specific-properties-use" class="section-name selfRef">TCP-Specific Properties: User Timeout Option (UTO)</a>
        </h3>
<p id="section-8.2-1">These Properties specify configurations for the TCP User Timeout Option (UTO).
This is a TCP-specific Property that is only used
in the case that TCP becomes the chosen transport protocol.
It is useful only if TCP is implemented in the Transport Services System.
Protocol-specific options could also be defined for other transport protocols.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<p id="section-8.2-2">These Properties are included here because the feature <code>Suggest
timeout to the peer</code> is part of the minimal set of Transport Services
<span>[<a href="#RFC8923" class="cite xref">RFC8923</a>]</span>, where this feature was categorized as "functional".
This means that when a Transport Services System offers this feature,
the Transport Services API has to expose an interface to the application. Otherwise, the implementation might
violate assumptions by the application, which could cause the application to
fail.<a href="#section-8.2-2" class="pilcrow">¶</a></p>
<p id="section-8.2-3">All of the below Properties are optional (e.g., it is possible to specify <code>tcp.userTimeoutValue</code> as <code>true</code>
but not specify a <code>tcp.userTimeoutValue</code> value; in this case, the TCP default will be used).
These Properties reflect the API extension specified in <span><a href="https://rfc-editor.org/rfc/rfc5482#section-3" class="relref">Section 3</a> of [<a href="#RFC5482" class="cite xref">RFC5482</a>]</span>.<a href="#section-8.2-3" class="pilcrow">¶</a></p>
<div id="advertised-user-timeout">
<section id="section-8.2.1">
          <h4 id="name-advertised-user-timeout">
<a href="#section-8.2.1" class="section-number selfRef">8.2.1. </a><a href="#name-advertised-user-timeout" class="section-name selfRef">Advertised User Timeout</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-8.2.1-1">
            <dt id="section-8.2.1-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-8.2.1-1.2">
              <p id="section-8.2.1-1.2.1">tcp.userTimeoutValue<a href="#section-8.2.1-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.2.1-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-8.2.1-1.4">
              <p id="section-8.2.1-1.4.1">Integer (positive)<a href="#section-8.2.1-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.2.1-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-8.2.1-1.6">
              <p id="section-8.2.1-1.6.1">the TCP default<a href="#section-8.2.1-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.2.1-2">This time value is advertised via the TCP User Timeout Option (UTO) <span>[<a href="#RFC5482" class="cite xref">RFC5482</a>]</span> to the Remote Endpoint, which can use it to adapt its own <code>connTimeout</code> (see <a href="#conn-timeout" class="auto internal xref">Section 8.1.3</a>) value.<a href="#section-8.2.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="user-timeout-enabled">
<section id="section-8.2.2">
          <h4 id="name-user-timeout-enabled">
<a href="#section-8.2.2" class="section-number selfRef">8.2.2. </a><a href="#name-user-timeout-enabled" class="section-name selfRef">User Timeout Enabled</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-8.2.2-1">
            <dt id="section-8.2.2-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-8.2.2-1.2">
              <p id="section-8.2.2-1.2.1">tcp.userTimeoutEnabled<a href="#section-8.2.2-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.2.2-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-8.2.2-1.4">
              <p id="section-8.2.2-1.4.1">Boolean<a href="#section-8.2.2-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.2.2-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-8.2.2-1.6">
              <p id="section-8.2.2-1.6.1"><code>false</code><a href="#section-8.2.2-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.2.2-2">This Property controls whether the TCP UTO is enabled for a
connection. This applies to both sending and receiving.<a href="#section-8.2.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="timeout-changeable">
<section id="section-8.2.3">
          <h4 id="name-timeout-changeable">
<a href="#section-8.2.3" class="section-number selfRef">8.2.3. </a><a href="#name-timeout-changeable" class="section-name selfRef">Timeout Changeable</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-8.2.3-1">
            <dt id="section-8.2.3-1.1">Name:</dt>
            <dd style="margin-left: 1.5em" id="section-8.2.3-1.2">
              <p id="section-8.2.3-1.2.1">tcp.userTimeoutChangeable<a href="#section-8.2.3-1.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.2.3-1.3">Type:</dt>
            <dd style="margin-left: 1.5em" id="section-8.2.3-1.4">
              <p id="section-8.2.3-1.4.1">Boolean<a href="#section-8.2.3-1.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-8.2.3-1.5">Default:</dt>
            <dd style="margin-left: 1.5em" id="section-8.2.3-1.6">
              <p id="section-8.2.3-1.6.1"><code>true</code><a href="#section-8.2.3-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-8.2.3-2">This Property controls whether the TCP <code>connTimeout</code> (see <a href="#conn-timeout" class="auto internal xref">Section 8.1.3</a>)
can be changed
based on a UTO received from the remote peer. This Boolean becomes <code>false</code> when
<code>connTimeout</code> (see <a href="#conn-timeout" class="auto internal xref">Section 8.1.3</a>) is used.<a href="#section-8.2.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="connection-lifecycle-events">
<section id="section-8.3">
        <h3 id="name-connection-lifecycle-events">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-connection-lifecycle-events" class="section-name selfRef">Connection Lifecycle Events</a>
        </h3>
<p id="section-8.3-1">During the lifetime of a Connection there are events that can occur when configured.<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<div id="soft-errors">
<section id="section-8.3.1">
          <h4 id="name-soft-errors">
<a href="#section-8.3.1" class="section-number selfRef">8.3.1. </a><a href="#name-soft-errors" class="section-name selfRef">Soft Errors</a>
          </h4>
<p id="section-8.3.1-1">Asynchronous introspection is also possible, via the <code>SoftError</code> event. This event
informs the application about the receipt and contents of an ICMP error message related to the Connection. This will only happen if the underlying Protocol Stack supports access to soft errors; however, even if the underlying stack supports it, there
is no guarantee that a soft error will be signaled.<a href="#section-8.3.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8.3.1-2">
<pre>
Connection -&gt; SoftError&lt;&gt;
</pre><a href="#section-8.3.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="conn-path-change">
<section id="section-8.3.2">
          <h4 id="name-path-change">
<a href="#section-8.3.2" class="section-number selfRef">8.3.2. </a><a href="#name-path-change" class="section-name selfRef">Path Change</a>
          </h4>
<p id="section-8.3.2-1">This event notifies the application when at least one of the paths underlying a Connection has changed. Changes occur
on a single path when the PMTU changes as well as when multiple paths are used
and paths are added or removed, the set of Local Endpoints changes, or a handover has been performed.<a href="#section-8.3.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8.3.2-2">
<pre>
Connection -&gt; PathChange&lt;&gt;
</pre><a href="#section-8.3.2-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="datatransfer">
<section id="section-9">
      <h2 id="name-data-transfer">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-data-transfer" class="section-name selfRef">Data Transfer</a>
      </h2>
<p id="section-9-1">Data is sent and received as Messages, which allows the application
to communicate the boundaries of the data being transferred.<a href="#section-9-1" class="pilcrow">¶</a></p>
<div id="msg">
<section id="section-9.1">
        <h3 id="name-messages-and-framers">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-messages-and-framers" class="section-name selfRef">Messages and Framers</a>
        </h3>
<p id="section-9.1-1">Each Message has an optional MessageContext, which allows adding Message Properties, to identify <code>Send</code> events related to a specific Message or to inspect metadata related to the Message sent. Framers can be used to extend or modify the Message data with additional information that can be processed at the receiver to detect Message boundaries.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<div id="msg-ctx">
<section id="section-9.1.1">
          <h4 id="name-message-contexts">
<a href="#section-9.1.1" class="section-number selfRef">9.1.1. </a><a href="#name-message-contexts" class="section-name selfRef">Message Contexts</a>
          </h4>
<p id="section-9.1.1-1">Using the MessageContext object, the application can set and retrieve metadata of the Message, including Message Properties (see <a href="#message-props" class="auto internal xref">Section 9.1.3</a>) and framing metadata (see <a href="#framing-meta" class="auto internal xref">Section 9.1.2.2</a>).
Therefore, a MessageContext object can be passed to the <code>Send</code> action and is returned by each event related to <code>Send</code> and <code>Receive</code>.<a href="#section-9.1.1-1" class="pilcrow">¶</a></p>
<p id="section-9.1.1-2">Message Properties can be set and queried using the MessageContext:<a href="#section-9.1.1-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.1.1-3">
<pre>
MessageContext.add(property, value)
PropertyValue := MessageContext.get(property)
</pre><a href="#section-9.1.1-3" class="pilcrow">¶</a>
</div>
<p id="section-9.1.1-4">These Message Properties can be generic Properties or Protocol-specific Properties.<a href="#section-9.1.1-4" class="pilcrow">¶</a></p>
<p id="section-9.1.1-5">For MessageContexts returned by <code>Send</code> events (see <a href="#send-events" class="auto internal xref">Section 9.2.2</a>) and <code>Receive</code> events (see <a href="#receive-events" class="auto internal xref">Section 9.3.2</a>), the application can query information about the Local and Remote Endpoint:<a href="#section-9.1.1-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.1.1-6">
<pre>
RemoteEndpoint := MessageContext.GetRemoteEndpoint()
LocalEndpoint := MessageContext.GetLocalEndpoint()
</pre><a href="#section-9.1.1-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="framing">
<section id="section-9.1.2">
          <h4 id="name-message-framers">
<a href="#section-9.1.2" class="section-number selfRef">9.1.2. </a><a href="#name-message-framers" class="section-name selfRef">Message Framers</a>
          </h4>
<p id="section-9.1.2-1">Although most applications communicate over a network using well-formed
Messages, the boundaries and metadata of the Messages are often not
directly communicated by the transport protocol itself. For example,
HTTP applications send and receive HTTP Messages over a byte-stream
transport, requiring that the boundaries of HTTP Messages be parsed
from the stream of bytes.<a href="#section-9.1.2-1" class="pilcrow">¶</a></p>
<p id="section-9.1.2-2">Message Framers allow extending a Connection's Protocol Stack to define
how to encapsulate or encode outbound Messages and how to decapsulate
or decode inbound data into Messages. Message Framers allow Message
boundaries to be preserved when using a Connection object, even when
using byte-stream transports. This is designed based on the fact
that many of the application protocols in use at the time of writing evolved over TCP, which
does not provide Message boundary preservation; because many of these
protocols require Message boundaries to function, each application-layer
protocol has defined its own framing.<a href="#section-9.1.2-2" class="pilcrow">¶</a></p>
<p id="section-9.1.2-3">To use a Message Framer, the application adds it to its Preconnection object.
Then, the Message Framer can intercept all calls to <code>Send</code> or <code>Receive</code>
on a Connection to add Message semantics, in addition to interacting with
the setup and teardown of the Connection. A Framer can start sending data
before the application sends data if the framing protocol requires a prefix
or handshake (see <span>[<a href="#RFC9329" class="cite xref">RFC9329</a>]</span> for an example of such a framing protocol).<a href="#section-9.1.2-3" class="pilcrow">¶</a></p>
<span id="name-protocol-stack-showing-a-me"></span><div id="fig-framer-stack">
<figure id="figure-1">
            <div class="alignLeft art-text artwork" id="section-9.1.2-4.1">
<pre>
  Initiate()   Send()   Receive()   Close()
      |          |         ^          |
      |          |         |          |
 +----v----------v---------+----------v-----+
 |                Connection                |
 +----+----------+---------^----------+-----+
      |          |         |          |
      |      +-----------------+      |
      |      |    Messages     |      |
      |      +-----------------+      |
      |          |         |          |
 +----v----------v---------+----------v-----+
 |                Framer(s)                 |
 +----+----------+---------^----------+-----+
      |          |         |          |
      |      +-----------------+      |
      |      |   Byte-stream   |      |
      |      +-----------------+      |
      |          |         |          |
 +----v----------v---------+----------v-----+
 |         Transport Protocol Stack         |
 +------------------------------------------+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-protocol-stack-showing-a-me" class="selfRef">Protocol Stack Showing a Message Framer</a>
            </figcaption></figure>
</div>
<p id="section-9.1.2-5">Note that while Message Framers add the most value when placed above
a protocol that otherwise does not preserve Message boundaries, they can
also be used with datagram- or message-based protocols. In these cases,
they add a transformation to further encode or encapsulate
and can potentially support packing multiple application-layer Messages
into individual transport datagrams.<a href="#section-9.1.2-5" class="pilcrow">¶</a></p>
<p id="section-9.1.2-6">The API to implement a Message Framer can vary, depending on the implementation;
guidance on implementing Message Framers can be found in <span>[<a href="#RFC9623" class="cite xref">RFC9623</a>]</span>.<a href="#section-9.1.2-6" class="pilcrow">¶</a></p>
<div id="adding-message-framers-to-preconnections">
<section id="section-9.1.2.1">
            <h5 id="name-adding-message-framers-to-p">
<a href="#section-9.1.2.1" class="section-number selfRef">9.1.2.1. </a><a href="#name-adding-message-framers-to-p" class="section-name selfRef">Adding Message Framers to Preconnections</a>
            </h5>
<p id="section-9.1.2.1-1">The Message Framer object can be added to one or more Preconnections
to run on top of transport protocols. Multiple Framers can be added to a Preconnection;
in this case, the Framers operate as a framing stack, i.e., the last one added runs
first when framing outbound Messages, and last when parsing inbound data.<a href="#section-9.1.2.1-1" class="pilcrow">¶</a></p>
<p id="section-9.1.2.1-2">The following example adds a basic HTTP Message Framer to a Preconnection:<a href="#section-9.1.2.1-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.1.2.1-3">
<pre>
framer := NewHTTPMessageFramer()
Preconnection.AddFramer(framer)
</pre><a href="#section-9.1.2.1-3" class="pilcrow">¶</a>
</div>
<p id="section-9.1.2.1-4">Since Message Framers pass from Preconnection to Listener or Connection, addition of
Framers must happen before any operation that might result in the creation of a Connection.<a href="#section-9.1.2.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="framing-meta">
<section id="section-9.1.2.2">
            <h5 id="name-framing-metadata">
<a href="#section-9.1.2.2" class="section-number selfRef">9.1.2.2. </a><a href="#name-framing-metadata" class="section-name selfRef">Framing Metadata</a>
            </h5>
<p id="section-9.1.2.2-1">When sending Messages, applications can add Framer-specific
Properties to a MessageContext (<a href="#msg-ctx" class="auto internal xref">Section 9.1.1</a>) with the <code>add</code> action.
To avoid naming conflicts, the Property
names <span class="bcp14">SHOULD</span> be prefixed with a Namespace referencing the
Framer implementation or the protocol it implements as described
in <a href="#property-names" class="auto internal xref">Section 4.1</a>.<a href="#section-9.1.2.2-1" class="pilcrow">¶</a></p>
<p id="section-9.1.2.2-2">This mechanism can be used, for example, to set the type of a Message for a TLV format.
The Namespace of values is custom for each unique Message Framer.<a href="#section-9.1.2.2-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.1.2.2-3">
<pre>
messageContext := NewMessageContext()
messageContext.add(framer, key, value)
Connection.Send(messageData, messageContext)
</pre><a href="#section-9.1.2.2-3" class="pilcrow">¶</a>
</div>
<p id="section-9.1.2.2-4">When an application receives a MessageContext in a <code>Receive</code> event,
it can also look to see if a value was set by a specific Message Framer.<a href="#section-9.1.2.2-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.1.2.2-5">
<pre>
messageContext.get(framer, key) -&gt; value
</pre><a href="#section-9.1.2.2-5" class="pilcrow">¶</a>
</div>
<p id="section-9.1.2.2-6">For example, if an HTTP Message Framer is used, the values could correspond
to HTTP headers:<a href="#section-9.1.2.2-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.1.2.2-7">
<pre>
httpFramer := NewHTTPMessageFramer()
...
messageContext := NewMessageContext()
messageContext.add(httpFramer, "accept", "text/html")
</pre><a href="#section-9.1.2.2-7" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="message-props">
<section id="section-9.1.3">
          <h4 id="name-message-properties">
<a href="#section-9.1.3" class="section-number selfRef">9.1.3. </a><a href="#name-message-properties" class="section-name selfRef">Message Properties</a>
          </h4>
<p id="section-9.1.3-1">Applications needing to annotate the Messages they send with extra information
(for example, to control how data is scheduled and processed by the transport protocols supporting the
   Connection) can include this information in the MessageContext passed to the <code>Send</code> action. For other uses of the MessageContext, see <a href="#msg-ctx" class="auto internal xref">Section 9.1.1</a>.<a href="#section-9.1.3-1" class="pilcrow">¶</a></p>
<p id="section-9.1.3-2">Message Properties are per-Message, not per-<code>Send</code>, if partial Messages
are sent (<a href="#send-partial" class="auto internal xref">Section 9.2.3</a>). All data blocks associated with a single Message
share Properties specified in the MessageContexts. For example, it would not
make sense to have the beginning of a Message expire and then allow the end of the Message to still be sent.<a href="#section-9.1.3-2" class="pilcrow">¶</a></p>
<p id="section-9.1.3-3">A MessageContext object contains metadata for the Messages to be sent or received.<a href="#section-9.1.3-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.1.3-4">
<pre>
messageData := "hello"
messageContext := NewMessageContext()
messageContext.add(parameter, value)
Connection.Send(messageData, messageContext)
</pre><a href="#section-9.1.3-4" class="pilcrow">¶</a>
</div>
<p id="section-9.1.3-5">The simpler form of <code>Send</code>, which does not take any MessageContext, is equivalent to passing a default MessageContext without adding any Message Properties.<a href="#section-9.1.3-5" class="pilcrow">¶</a></p>
<p id="section-9.1.3-6">If an application wants to override Message Properties for a specific Message,
it can acquire an empty MessageContext object and add all desired Message
Properties to that object. It can then reuse the same MessageContext object
for sending multiple Messages with the same Properties.<a href="#section-9.1.3-6" class="pilcrow">¶</a></p>
<p id="section-9.1.3-7">Properties can be added to a MessageContext object only before the context is used
for sending. Once a MessageContext has been used with a <code>Send</code> action, further modifications
to the MessageContext object do not have any effect on this <code>Send</code> action. Message Properties
that are not added to a MessageContext object before using the context for sending will either
take a specific default value or be configured based on Selection or Connection Properties
of the Connection that is associated with the <code>Send</code> action.
This initialization behavior is defined per Message Property below.<a href="#section-9.1.3-7" class="pilcrow">¶</a></p>
<p id="section-9.1.3-8">The Message Properties could be inconsistent with the properties of the Protocol Stacks
underlying the Connection on which a given Message is sent. For example,
a Protocol Stack must be able to provide ordering if the <code>msgOrdered</code>
Property of a Message is enabled. Sending a Message with Message Properties
inconsistent with the Selection Properties of the Connection yields an error.<a href="#section-9.1.3-8" class="pilcrow">¶</a></p>
<p id="section-9.1.3-9">If a Message Property contradicts a Connection Property, and
if this per-Message behavior can be supported, it overrides the Connection
Property for the specific Message. For example, if
<code>reliability</code> is set to <code>Require</code> and a protocol
with configurable per-Message reliability is used, setting
<code>msgReliable</code> to <code>false</code> for a particular Message will
allow this Message to be sent without any reliability guarantees. Changing
the <code>msgReliable</code> Message Property is only possible for
Connections that were established enabling the Selection Property
<code>perMsgReliability</code>. If the contradicting Message Property
cannot be supported by the Connection (such as requiring reliability
on a Connection that uses an unreliable protocol), the <code>Send</code> action
will result in a <code>SendError</code> event.<a href="#section-9.1.3-9" class="pilcrow">¶</a></p>
<p id="section-9.1.3-10">The Message Properties in the following subsections are supported.<a href="#section-9.1.3-10" class="pilcrow">¶</a></p>
<div id="msg-lifetime">
<section id="section-9.1.3.1">
            <h5 id="name-lifetime">
<a href="#section-9.1.3.1" class="section-number selfRef">9.1.3.1. </a><a href="#name-lifetime" class="section-name selfRef">Lifetime</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-9.1.3.1-1">
              <dt id="section-9.1.3.1-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.1-1.2">
                <p id="section-9.1.3.1-1.2.1">msgLifetime<a href="#section-9.1.3.1-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.1-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.1-1.4">
                <p id="section-9.1.3.1-1.4.1">Numeric (positive)<a href="#section-9.1.3.1-1.4.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.1-1.5">Default:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.1-1.6">
                <p id="section-9.1.3.1-1.6.1">Infinite<a href="#section-9.1.3.1-1.6.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-9.1.3.1-2">The Lifetime specifies how long a particular Message can wait in the Transport Services System
before it is sent to the
Remote Endpoint. After this time, it is irrelevant and no longer needs to be
(re-)transmitted. This is a hint to the Transport Services System -- it is not guaranteed
that a Message will not be sent when its Lifetime has expired.<a href="#section-9.1.3.1-2" class="pilcrow">¶</a></p>
<p id="section-9.1.3.1-3">Setting a Message's Lifetime to Infinite indicates that the application does
not wish to apply a time constraint on the transmission of the Message, but it does not express a need for
reliable delivery; reliability is adjustable per Message via the <code>perMsgReliability</code>
Property (see <a href="#msg-reliable-message" class="auto internal xref">Section 9.1.3.7</a>). The type and units of Lifetime are implementation specific.<a href="#section-9.1.3.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="msg-priority">
<section id="section-9.1.3.2">
            <h5 id="name-priority">
<a href="#section-9.1.3.2" class="section-number selfRef">9.1.3.2. </a><a href="#name-priority" class="section-name selfRef">Priority</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-9.1.3.2-1">
              <dt id="section-9.1.3.2-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.2-1.2">
                <p id="section-9.1.3.2-1.2.1">msgPriority<a href="#section-9.1.3.2-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.2-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.2-1.4">
                <p id="section-9.1.3.2-1.4.1">Integer (non-negative)<a href="#section-9.1.3.2-1.4.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.2-1.5">Default:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.2-1.6">
                <p id="section-9.1.3.2-1.6.1">100<a href="#section-9.1.3.2-1.6.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-9.1.3.2-2">This Property specifies the priority of a Message, relative to other Messages sent over the
same Connection. A numerically lower value represents a higher priority.<a href="#section-9.1.3.2-2" class="pilcrow">¶</a></p>
<p id="section-9.1.3.2-3">A Message with priority 2 will yield to a Message with priority 1, which will
yield to a Message with priority 0, and so on. Priorities can be used as a
sender-side scheduling construct only or be used to specify priorities on the
wire for Protocol Stacks supporting prioritization.<a href="#section-9.1.3.2-3" class="pilcrow">¶</a></p>
<p id="section-9.1.3.2-4">Note that this Property is not a per-Message override of <code>connPriority</code>;
see <a href="#conn-priority" class="auto internal xref">Section 8.1.2</a>. The priority Properties might interact, but they can be used
independently and be realized by different mechanisms; see <a href="#priority-in-taps" class="auto internal xref">Section 9.2.6</a>.<a href="#section-9.1.3.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="msg-ordered">
<section id="section-9.1.3.3">
            <h5 id="name-ordered">
<a href="#section-9.1.3.3" class="section-number selfRef">9.1.3.3. </a><a href="#name-ordered" class="section-name selfRef">Ordered</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-9.1.3.3-1">
              <dt id="section-9.1.3.3-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.3-1.2">
                <p id="section-9.1.3.3-1.2.1">msgOrdered<a href="#section-9.1.3.3-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.3-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.3-1.4">
                <p id="section-9.1.3.3-1.4.1">Boolean<a href="#section-9.1.3.3-1.4.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.3-1.5">Default:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.3-1.6">
                <p id="section-9.1.3.3-1.6.1">the queried Boolean value of the Selection Property <code>preserveOrder</code> (<a href="#prop-ordering" class="auto internal xref">Section 6.2.4</a>)<a href="#section-9.1.3.3-1.6.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-9.1.3.3-2">The order in which Messages were submitted for transmission via the <code>Send</code> action will be preserved on delivery via <code>Receive</code> events for all Messages on a Connection that have this Message Property set to <code>true</code>.<a href="#section-9.1.3.3-2" class="pilcrow">¶</a></p>
<p id="section-9.1.3.3-3">If <code>false</code>, the Message is delivered to the receiving application without preserving the ordering.
This Property is used for protocols that support preservation of data ordering
(see <a href="#prop-ordering" class="auto internal xref">Section 6.2.4</a>) but allow out-of-order delivery for certain Messages, e.g., by multiplexing independent Messages onto
different streams.<a href="#section-9.1.3.3-3" class="pilcrow">¶</a></p>
<p id="section-9.1.3.3-4">If it is not configured by the application before sending, this Property's default value
will be based on the Selection Property <code>preserveOrder</code> of the Connection
associated with the <code>Send</code> action.<a href="#section-9.1.3.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="msg-safelyreplayable">
<section id="section-9.1.3.4">
            <h5 id="name-safely-replayable">
<a href="#section-9.1.3.4" class="section-number selfRef">9.1.3.4. </a><a href="#name-safely-replayable" class="section-name selfRef">Safely Replayable</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-9.1.3.4-1">
              <dt id="section-9.1.3.4-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.4-1.2">
                <p id="section-9.1.3.4-1.2.1">safelyReplayable<a href="#section-9.1.3.4-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.4-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.4-1.4">
                <p id="section-9.1.3.4-1.4.1">Boolean<a href="#section-9.1.3.4-1.4.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.4-1.5">Default:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.4-1.6">
                <p id="section-9.1.3.4-1.6.1"><code>false</code><a href="#section-9.1.3.4-1.6.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-9.1.3.4-2">If <code>true</code>, <code>safelyReplayable</code> specifies that a Message is safe to send to the Remote Endpoint
more than once for a single <code>Send</code> action. It marks the data as safe for
certain 0-RTT establishment techniques, where retransmission of the 0-RTT data
could cause the remote application to receive the Message multiple times.<a href="#section-9.1.3.4-2" class="pilcrow">¶</a></p>
<p id="section-9.1.3.4-3">For protocols that do not protect against duplicated Messages,
e.g., UDP, all Messages need to be marked as "safely replayable" by enabling this Property.
To enable protocol selection to choose such a protocol,
<code>safelyReplayable</code> needs to be added to the TransportProperties passed to the
Preconnection. If such a protocol was chosen, disabling <code>safelyReplayable</code> on
individual Messages <span class="bcp14">MUST</span> result in a <code>SendError</code>.<a href="#section-9.1.3.4-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="msg-final">
<section id="section-9.1.3.5">
            <h5 id="name-final">
<a href="#section-9.1.3.5" class="section-number selfRef">9.1.3.5. </a><a href="#name-final" class="section-name selfRef">Final</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-9.1.3.5-1">
              <dt id="section-9.1.3.5-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.5-1.2">
                <p id="section-9.1.3.5-1.2.1">final<a href="#section-9.1.3.5-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.5-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.5-1.4">
                <p id="section-9.1.3.5-1.4.1">Boolean<a href="#section-9.1.3.5-1.4.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.5-1.5">Default:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.5-1.6">
                <p id="section-9.1.3.5-1.6.1"><code>false</code><a href="#section-9.1.3.5-1.6.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-9.1.3.5-2">If <code>true</code>, this indicates a Message is the last that
the application will send on a Connection. This allows underlying protocols
to indicate to the Remote Endpoint that the Connection has been effectively
closed in the sending direction. For example, TCP-based Connections can
send a FIN once a Message marked as <code>Final</code> has been completely sent,
indicated by marking <code>endOfMessage</code>. Protocols that do not support signaling
the end of a Connection in a given direction will ignore this Property.<a href="#section-9.1.3.5-2" class="pilcrow">¶</a></p>
<p id="section-9.1.3.5-3">A <code>Final</code> Message must always be sorted to the end of a list of Messages.
The <code>final</code> Property overrides <code>connPriority</code>, <code>msgPriority</code>, and any other Property that would reorder
Messages. If another Message is sent after a Message marked as <code>Final</code> has already
been sent on a Connection, the <code>Send</code> action for the new Message will cause a <code>SendError</code> event.<a href="#section-9.1.3.5-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="msg-checksum">
<section id="section-9.1.3.6">
            <h5 id="name-sending-corruption-protecti">
<a href="#section-9.1.3.6" class="section-number selfRef">9.1.3.6. </a><a href="#name-sending-corruption-protecti" class="section-name selfRef">Sending Corruption Protection Length</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-9.1.3.6-1">
              <dt id="section-9.1.3.6-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.6-1.2">
                <p id="section-9.1.3.6-1.2.1">msgChecksumLen<a href="#section-9.1.3.6-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.6-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.6-1.4">
                <p id="section-9.1.3.6-1.4.1">Integer (non-negative) or <code>Full Coverage</code><a href="#section-9.1.3.6-1.4.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.6-1.5">Default:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.6-1.6">
                <p id="section-9.1.3.6-1.6.1"><code>Full Coverage</code><a href="#section-9.1.3.6-1.6.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-9.1.3.6-2">If this Property is an Integer, it specifies the minimum length of the section of a sent Message,
starting from byte 0, that the application requires to be delivered without
corruption due to lower-layer errors. It is used to specify options for simple
integrity protection via checksums. A value of 0 means that no checksum
needs to be calculated, and the enumerated value <code>Full Coverage</code> means
that the entire Message needs to be protected by a checksum. Only <code>Full Coverage</code> is
guaranteed: any other requests are advisory, which may result in <code>Full Coverage</code> being applied.<a href="#section-9.1.3.6-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="msg-reliable-message">
<section id="section-9.1.3.7">
            <h5 id="name-reliable-data-transfer-mess">
<a href="#section-9.1.3.7" class="section-number selfRef">9.1.3.7. </a><a href="#name-reliable-data-transfer-mess" class="section-name selfRef">Reliable Data Transfer (Message)</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-9.1.3.7-1">
              <dt id="section-9.1.3.7-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.7-1.2">
                <p id="section-9.1.3.7-1.2.1">msgReliable<a href="#section-9.1.3.7-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.7-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.7-1.4">
                <p id="section-9.1.3.7-1.4.1">Boolean<a href="#section-9.1.3.7-1.4.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.7-1.5">Default:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.7-1.6">
                <p id="section-9.1.3.7-1.6.1">the queried Boolean value of the Selection Property <code>reliability</code> (<a href="#prop-reliable" class="auto internal xref">Section 6.2.1</a>)<a href="#section-9.1.3.7-1.6.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-9.1.3.7-2">When <code>true</code>, this Property specifies that a Message should be sent in such a way
that the transport protocol ensures that all data is received by the Remote Endpoint.
Changing the <code>msgReliable</code> Property on Messages
is only possible for Connections that were established enabling the Selection Property <code>perMsgReliability</code>.
When this is not the case, changing <code>msgReliable</code> will generate an error.<a href="#section-9.1.3.7-2" class="pilcrow">¶</a></p>
<p id="section-9.1.3.7-3">Disabling this Property indicates that the Transport Services System could disable retransmissions
or other reliability mechanisms for this particular Message, but such disabling is not guaranteed.<a href="#section-9.1.3.7-3" class="pilcrow">¶</a></p>
<p id="section-9.1.3.7-4">If it is not configured by the application before sending, this Property's default value
will be based on the Selection Property <code>reliability</code> of the Connection
associated with the <code>Send</code> action.<a href="#section-9.1.3.7-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="send-profile">
<section id="section-9.1.3.8">
            <h5 id="name-message-capacity-profile-ov">
<a href="#section-9.1.3.8" class="section-number selfRef">9.1.3.8. </a><a href="#name-message-capacity-profile-ov" class="section-name selfRef">Message Capacity Profile Override</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-9.1.3.8-1">
              <dt id="section-9.1.3.8-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.8-1.2">
                <p id="section-9.1.3.8-1.2.1">msgCapacityProfile<a href="#section-9.1.3.8-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.8-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.8-1.4">
                <p id="section-9.1.3.8-1.4.1">Enumeration<a href="#section-9.1.3.8-1.4.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.8-1.5">Default:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.8-1.6">
                <p id="section-9.1.3.8-1.6.1">inherited from the Connection Property <code>connCapacityProfile</code> (<a href="#prop-cap-profile" class="auto internal xref">Section 8.1.6</a>)<a href="#section-9.1.3.8-1.6.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-9.1.3.8-2">This enumerated Property specifies the application's preferred trade-offs for
sending this Message; it is a per-Message override of the <code>connCapacityProfile</code>
Connection Property (see <a href="#prop-cap-profile" class="auto internal xref">Section 8.1.6</a>).
If it is not configured by the application before sending, this Property's default value
will be based on the Connection Property <code>connCapacityProfile</code> of the Connection
associated with the <code>Send</code> action.<a href="#section-9.1.3.8-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="send-singular">
<section id="section-9.1.3.9">
            <h5 id="name-no-network-layer-fragmentat">
<a href="#section-9.1.3.9" class="section-number selfRef">9.1.3.9. </a><a href="#name-no-network-layer-fragmentat" class="section-name selfRef">No Network-Layer Fragmentation</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-9.1.3.9-1">
              <dt id="section-9.1.3.9-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.9-1.2">
                <p id="section-9.1.3.9-1.2.1">noFragmentation<a href="#section-9.1.3.9-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.9-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.9-1.4">
                <p id="section-9.1.3.9-1.4.1">Boolean<a href="#section-9.1.3.9-1.4.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.9-1.5">Default:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.9-1.6">
                <p id="section-9.1.3.9-1.6.1"><code>false</code><a href="#section-9.1.3.9-1.6.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-9.1.3.9-2">This Property specifies that a Message should be sent and received
without network-layer fragmentation, if possible. It can be used
to avoid network-layer fragmentation when transport segmentation is preferred.<a href="#section-9.1.3.9-2" class="pilcrow">¶</a></p>
<p id="section-9.1.3.9-3">This only takes effect when the transport uses a network layer that supports this functionality.
When it does take effect, setting this Property to
<code>true</code> will cause the sender to avoid network-layer source fragmentation.
When using IPv4, this will result in the Don't Fragment (DF) bit being set in the IP header.<a href="#section-9.1.3.9-3" class="pilcrow">¶</a></p>
<p id="section-9.1.3.9-4">Attempts to send a Message with this Property that result in a size greater than the
transport's current estimate of its maximum packet size (<code>singularTransmissionMsgMaxLen</code>)
     can result in transport segmentation when permitted or in a <code>SendError</code>.<a href="#section-9.1.3.9-4" class="pilcrow">¶</a></p>
<aside id="section-9.1.3.9-5">
              <p id="section-9.1.3.9-5.1">Note: <code>noSegmentation</code> is used when it is desired to send a Message within
a single network packet.<a href="#section-9.1.3.9-5.1" class="pilcrow">¶</a></p>
</aside>
</section>
</div>
<div id="no-transport-fragmentation">
<section id="section-9.1.3.10">
            <h5 id="name-no-segmentation">
<a href="#section-9.1.3.10" class="section-number selfRef">9.1.3.10. </a><a href="#name-no-segmentation" class="section-name selfRef">No Segmentation</a>
            </h5>
<span class="break"></span><dl class="dlParallel" id="section-9.1.3.10-1">
              <dt id="section-9.1.3.10-1.1">Name:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.10-1.2">
                <p id="section-9.1.3.10-1.2.1">noSegmentation<a href="#section-9.1.3.10-1.2.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.10-1.3">Type:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.10-1.4">
                <p id="section-9.1.3.10-1.4.1">Boolean<a href="#section-9.1.3.10-1.4.1" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-9.1.3.10-1.5">Default:</dt>
              <dd style="margin-left: 1.5em" id="section-9.1.3.10-1.6">
                <p id="section-9.1.3.10-1.6.1"><code>false</code><a href="#section-9.1.3.10-1.6.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-9.1.3.10-2">When set to <code>true</code>, this Property requests that the transport layer not provide segmentation of Messages larger than the
maximum size permitted by the network layer and that it avoid network-layer source fragmentation of Messages.
When running over IPv4, setting this Property to
<code>true</code> will result in a sending Endpoint setting the
Don't Fragment bit in the IPv4 header of packets generated by the
transport layer.<a href="#section-9.1.3.10-2" class="pilcrow">¶</a></p>
<p id="section-9.1.3.10-3">An
attempt to send a Message that results in a size greater than the
transport's current estimate of its maximum packet size (<code>singularTransmissionMsgMaxLen</code>)
will result in a <code>SendError</code>.
This only takes effect when the transport and network layers
support this functionality.<a href="#section-9.1.3.10-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="sending">
<section id="section-9.2">
        <h3 id="name-sending-data">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-sending-data" class="section-name selfRef">Sending Data</a>
        </h3>
<p id="section-9.2-1">Once a Connection has been established, it can be used for sending Messages.
By default, <code>Send</code> enqueues a complete Message
and takes optional per-Message Properties (see <a href="#send-basic" class="auto internal xref">Section 9.2.1</a>). All <code>Send</code> actions
are asynchronous and deliver events (see <a href="#send-events" class="auto internal xref">Section 9.2.2</a>). Sending partial
Messages for streaming large data is also supported (see <a href="#send-partial" class="auto internal xref">Section 9.2.3</a>).<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<p id="section-9.2-2">Messages are sent on a Connection using the <code>Send</code> action:<a href="#section-9.2-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.2-3">
<pre>
Connection.Send(messageData, messageContext?, endOfMessage?)
</pre><a href="#section-9.2-3" class="pilcrow">¶</a>
</div>
<p id="section-9.2-4">where <code>messageData</code> is the data object to send and <code>messageContext</code> allows
adding Message Properties, identifying <code>Send</code> events related to a specific
Message or inspecting metadata related to the Message sent (see <a href="#msg-ctx" class="auto internal xref">Section 9.1.1</a>).<a href="#section-9.2-4" class="pilcrow">¶</a></p>
<p id="section-9.2-5">The optional <code>endOfMessage</code> parameter supports partial sending and is described in
<a href="#send-partial" class="auto internal xref">Section 9.2.3</a>.<a href="#section-9.2-5" class="pilcrow">¶</a></p>
<div id="send-basic">
<section id="section-9.2.1">
          <h4 id="name-basic-sending">
<a href="#section-9.2.1" class="section-number selfRef">9.2.1. </a><a href="#name-basic-sending" class="section-name selfRef">Basic Sending</a>
          </h4>
<p id="section-9.2.1-1">The most basic form of sending on a Connection involves enqueuing a single Data
block as a complete Message with default Message Properties.<a href="#section-9.2.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.2.1-2">
<pre>
messageData := "hello"
Connection.Send(messageData)
</pre><a href="#section-9.2.1-2" class="pilcrow">¶</a>
</div>
<p id="section-9.2.1-3">The interpretation of a Message to be sent is dependent on the implementation and
   on the constraints on the Protocol Stacks implied by the Connection's transport properties. 
For example, a Message could be the payload of
a single datagram for a UDP connection. Another example would be an HTTP Request for an HTTP
Connection.<a href="#section-9.2.1-3" class="pilcrow">¶</a></p>
<p id="section-9.2.1-4">Some transport protocols can deliver arbitrarily sized Messages, but other
protocols constrain the maximum Message size. Applications can query the
Connection Property <code>sendMsgMaxLen</code> (<a href="#conn-max-msg-send" class="auto internal xref">Section 8.1.11.5</a>) to determine the maximum size
allowed for a single Message. If a Message is too large to fit in the Maximum Message
Size for the Connection, the <code>Send</code> will fail with a <code>SendError</code> event (<a href="#send-error" class="auto internal xref">Section 9.2.2.3</a>). For
example, it is invalid to send a Message over a UDP connection that is larger than
the available datagram sending size.<a href="#section-9.2.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="send-events">
<section id="section-9.2.2">
          <h4 id="name-send-events">
<a href="#section-9.2.2" class="section-number selfRef">9.2.2. </a><a href="#name-send-events" class="section-name selfRef">Send Events</a>
          </h4>
<p id="section-9.2.2-1">Like all actions in the Transport Services API, the <code>Send</code> action is asynchronous. There are
several events that can be delivered in response to sending a Message.
Exactly one event (<code>Sent</code>, <code>Expired</code>, or <code>SendError</code>) will be delivered in response
to each call to <code>Send</code>.<a href="#section-9.2.2-1" class="pilcrow">¶</a></p>
<p id="section-9.2.2-2">Note that, if partial <code>Send</code> calls are used (<a href="#send-partial" class="auto internal xref">Section 9.2.3</a>), there will still be exactly
one <code>Send</code> event delivered for each call to <code>Send</code>. For example, if a Message
expired while two requests to <code>Send</code> data for that Message are outstanding,
there will be two <code>Expired</code> events delivered.<a href="#section-9.2.2-2" class="pilcrow">¶</a></p>
<p id="section-9.2.2-3">The Transport Services API should allow the application to correlate a <code>Send</code> event to the particular call to <code>Send</code> that triggered the event. The manner in which this correlation is indicated
is implementation specific.<a href="#section-9.2.2-3" class="pilcrow">¶</a></p>
<div id="sent">
<section id="section-9.2.2.1">
            <h5 id="name-sent">
<a href="#section-9.2.2.1" class="section-number selfRef">9.2.2.1. </a><a href="#name-sent" class="section-name selfRef">Sent</a>
            </h5>
<div class="alignLeft art-text artwork" id="section-9.2.2.1-1">
<pre>
Connection -&gt; Sent&lt;messageContext&gt;
</pre><a href="#section-9.2.2.1-1" class="pilcrow">¶</a>
</div>
<p id="section-9.2.2.1-2">The <code>Sent</code> event occurs when a previous <code>Send</code> action has completed, i.e., when
the data derived from the Message has been passed down or through the
underlying Protocol Stack and is no longer the responsibility of
the Transport Services API. The exact disposition of the Message (i.e.,
whether it has actually been transmitted, moved into a buffer on the network
interface, moved into a kernel buffer, and so on) when the <code>Sent</code> event occurs
is implementation specific. The <code>Sent</code> event contains a reference to the Message
Context of the Message to which it applies.<a href="#section-9.2.2.1-2" class="pilcrow">¶</a></p>
<p id="section-9.2.2.1-3"><code>Sent</code> events allow an application to obtain an understanding of the amount
of buffering it creates. That is, if an application calls the <code>Send</code> action multiple
times without waiting for a <code>Sent</code> event, it has created more buffer inside the
Transport Services System than an application that always waits for the <code>Sent</code> event before
calling the next <code>Send</code> action.<a href="#section-9.2.2.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="expired">
<section id="section-9.2.2.2">
            <h5 id="name-expired">
<a href="#section-9.2.2.2" class="section-number selfRef">9.2.2.2. </a><a href="#name-expired" class="section-name selfRef">Expired</a>
            </h5>
<div class="alignLeft art-text artwork" id="section-9.2.2.2-1">
<pre>
Connection -&gt; Expired&lt;messageContext&gt;
</pre><a href="#section-9.2.2.2-1" class="pilcrow">¶</a>
</div>
<p id="section-9.2.2.2-2">The <code>Expired</code> event occurs when a previous <code>Send</code> action expired before completion,
i.e., when the Message was not sent before its Lifetime (see <a href="#msg-lifetime" class="auto internal xref">Section 9.1.3.1</a>)
expired. This is separate from <code>SendError</code>, as it is an expected behavior for
partially reliable transports. The <code>Expired</code> event contains a reference to the
MessageContext of the Message to which it applies.<a href="#section-9.2.2.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="send-error">
<section id="section-9.2.2.3">
            <h5 id="name-senderror">
<a href="#section-9.2.2.3" class="section-number selfRef">9.2.2.3. </a><a href="#name-senderror" class="section-name selfRef">SendError</a>
            </h5>
<div class="alignLeft art-text artwork" id="section-9.2.2.3-1">
<pre>
Connection -&gt; SendError&lt;messageContext, reason?&gt;
</pre><a href="#section-9.2.2.3-1" class="pilcrow">¶</a>
</div>
<p id="section-9.2.2.3-2">A <code>SendError</code> occurs when a Message was not sent due to an error condition:
an attempt to send a Message that is too large for the system and
Protocol Stack to handle, some failure of the underlying Protocol Stack, or a
set of Message Properties not consistent with the Connection's transport
properties. The <code>SendError</code> contains a reference to the MessageContext of the
Message to which it applies.<a href="#section-9.2.2.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="send-partial">
<section id="section-9.2.3">
          <h4 id="name-partial-sends">
<a href="#section-9.2.3" class="section-number selfRef">9.2.3. </a><a href="#name-partial-sends" class="section-name selfRef">Partial Sends</a>
          </h4>
<p id="section-9.2.3-1">It is not always possible for an application to send all data associated with
a Message in a single <code>Send</code> action. The Message data might be too large for
the application to hold in memory at one time or the length of the Message
might be unknown or unbounded.<a href="#section-9.2.3-1" class="pilcrow">¶</a></p>
<p id="section-9.2.3-2">Partial Message sending is supported by passing an <code>endOfMessage</code> Boolean
parameter to the <code>Send</code> action. This value is always <code>true</code> by default, and
the simpler forms of <code>Send</code> are equivalent to passing <code>true</code> for <code>endOfMessage</code>.<a href="#section-9.2.3-2" class="pilcrow">¶</a></p>
<p id="section-9.2.3-3">The following example sends a Message in two separate calls to <code>Send</code>:<a href="#section-9.2.3-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.2.3-4">
<pre>
messageContext := NewMessageContext()
messageContext.add(parameter, value)

messageData := "hel"
endOfMessage := false
Connection.Send(messageData, messageContext, endOfMessage)

messageData := "lo"
endOfMessage := true
Connection.Send(messageData, messageContext, endOfMessage)
</pre><a href="#section-9.2.3-4" class="pilcrow">¶</a>
</div>
<p id="section-9.2.3-5">All data sent with the same MessageContext object will be treated as belonging
to the same Message and will constitute an in-order series until the
<code>endOfMessage</code> is marked.<a href="#section-9.2.3-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="send-batching">
<section id="section-9.2.4">
          <h4 id="name-batching-sends">
<a href="#section-9.2.4" class="section-number selfRef">9.2.4. </a><a href="#name-batching-sends" class="section-name selfRef">Batching Sends</a>
          </h4>
<p id="section-9.2.4-1">To reduce the overhead of sending multiple small Messages on a Connection, the
application could batch several <code>Send</code> actions together. This provides a hint to
the system that the sending of these Messages ought to be coalesced when possible
and that sending any of the batched Messages can be delayed until the last Message
in the batch is enqueued.<a href="#section-9.2.4-1" class="pilcrow">¶</a></p>
<p id="section-9.2.4-2">The semantics for starting and ending a batch can be implementation specific but need
to allow multiple <code>Send</code> actions to be enqueued.<a href="#section-9.2.4-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.2.4-3">
<pre>
Connection.StartBatch()
Connection.Send(messageData)
Connection.Send(messageData)
Connection.EndBatch()
</pre><a href="#section-9.2.4-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="initiate-and-send">
<section id="section-9.2.5">
          <h4 id="name-send-on-active-open-initiat">
<a href="#section-9.2.5" class="section-number selfRef">9.2.5. </a><a href="#name-send-on-active-open-initiat" class="section-name selfRef">Send on Active Open: InitiateWithSend</a>
          </h4>
<p id="section-9.2.5-1">For application-layer protocols where the Connection initiator also sends the
first Message, the <code>InitiateWithSend</code> action combines Connection initiation with
a first Message sent:<a href="#section-9.2.5-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.2.5-2">
<pre>
Connection := Preconnection.InitiateWithSend(messageData,
                                             messageContext?,
                                             timeout?)
</pre><a href="#section-9.2.5-2" class="pilcrow">¶</a>
</div>
<p id="section-9.2.5-3">Whenever possible, a <code>messageContext</code> should be provided to declare the Message passed to <code>InitiateWithSend</code>
as "safely replayable" using the <code>safelyReplayable</code> Property. This allows the Transport Services System to make use of 0-RTT establishment in case this is supported
by the available Protocol Stacks. When the selected stack or stacks do not support transmitting data upon connection
establishment, <code>InitiateWithSend</code> is identical to <code>Initiate</code> followed by <code>Send</code>.<a href="#section-9.2.5-3" class="pilcrow">¶</a></p>
<p id="section-9.2.5-4">Neither partial sends nor send batching are supported by <code>InitiateWithSend</code>.<a href="#section-9.2.5-4" class="pilcrow">¶</a></p>
<p id="section-9.2.5-5">The events that are sent after <code>InitiateWithSend</code> are equivalent to those
that would be sent by an invocation of <code>Initiate</code> followed immediately by an
invocation of <code>Send</code>, with the caveat that a send failure that occurs because
the Connection could not be established will not result in a
<code>SendError</code> separate from the <code>EstablishmentError</code> signaling the failure of Connection
establishment.<a href="#section-9.2.5-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="priority-in-taps">
<section id="section-9.2.6">
          <h4 id="name-priority-and-the-transport-">
<a href="#section-9.2.6" class="section-number selfRef">9.2.6. </a><a href="#name-priority-and-the-transport-" class="section-name selfRef">Priority and the Transport Services API</a>
          </h4>
<p id="section-9.2.6-1">The Transport Services API provides two Properties to allow a sender
to signal the relative priority of data transmission: <code>msgPriority</code>
            (see <a href="#msg-priority" class="auto internal xref">Section 9.1.3.2</a>) and <code>connPriority</code> (see <a href="#conn-priority" class="auto internal xref">Section 8.1.2</a>).
These Properties are designed to allow the expression
and implementation of a wide variety of approaches to transmission priority in
the transport and application layers, including those that do not appear on
the wire (affecting only sender-side transmission scheduling) as well as those
that do (e.g., <span>[<a href="#RFC9218" class="cite xref">RFC9218</a>]</span>).
A Transport Services System gives no guarantees about how its expression of
relative priorities will be realized.<a href="#section-9.2.6-1" class="pilcrow">¶</a></p>
<p id="section-9.2.6-2">The Transport Services API does order <code>connPriority</code> over
<code>msgPriority</code>. In the absence of other externalities
(e.g., transport-layer flow control), a priority 1 Message on a priority 0
Connection will be sent before a priority 0 Message on a priority 1
Connection in the same group.<a href="#section-9.2.6-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="receiving">
<section id="section-9.3">
        <h3 id="name-receiving-data">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-receiving-data" class="section-name selfRef">Receiving Data</a>
        </h3>
<p id="section-9.3-1">Once a Connection is established, it can be used for receiving data (unless the
<code>direction</code> Property is set to <code>unidirectional send</code>). As with
sending, the data is received in Messages. Receiving is an asynchronous
operation in which each call to <code>Receive</code> enqueues a request to receive new
data from the Connection. Once data has been received, or an error is encountered,
an event will be delivered to complete any pending <code>Receive</code> requests (see <a href="#receive-events" class="auto internal xref">Section 9.3.2</a>).
If Messages arrive at the Transport Services System before <code>Receive</code> requests are issued,
ensuing <code>Receive</code> requests will first operate on these Messages before awaiting any further Messages.<a href="#section-9.3-1" class="pilcrow">¶</a></p>
<div id="receiving-action">
<section id="section-9.3.1">
          <h4 id="name-enqueuing-receives">
<a href="#section-9.3.1" class="section-number selfRef">9.3.1. </a><a href="#name-enqueuing-receives" class="section-name selfRef">Enqueuing Receives</a>
          </h4>
<p id="section-9.3.1-1"><code>Receive</code> takes two parameters to specify the length of data that an application
is willing to receive, both of which are optional and have default values if not
specified.<a href="#section-9.3.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.3.1-2">
<pre>
Connection.Receive(minIncompleteLength?, maxLength?)
</pre><a href="#section-9.3.1-2" class="pilcrow">¶</a>
</div>
<p id="section-9.3.1-3">By default, <code>Receive</code> will try to deliver complete Messages in a single event (<a href="#receive-complete" class="auto internal xref">Section 9.3.2.1</a>).<a href="#section-9.3.1-3" class="pilcrow">¶</a></p>
<p id="section-9.3.1-4">The application can set a <code>minIncompleteLength</code> value to indicate the smallest partial
Message data size in bytes to be delivered in response to this <code>Receive</code>. By default,
this value is Infinite, which means that only complete Messages should be delivered. See Sections <a href="#receive-partial" class="auto internal xref">9.3.2.2</a>
and <a href="#framing" class="auto internal xref">9.1.2</a> for more information on how this is accomplished.
If this value is set to some smaller value, the associated <code>Receive</code> event will be triggered
   only:<a href="#section-9.3.1-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-9.3.1-5">
     <li id="section-9.3.1-5.1">when at least that many bytes are available,<a href="#section-9.3.1-5.1" class="pilcrow">¶</a>
</li>
            <li id="section-9.3.1-5.2">the Message is complete with fewer
   bytes, or<a href="#section-9.3.1-5.2" class="pilcrow">¶</a>
</li>
            <li id="section-9.3.1-5.3">the system needs to free up memory.<a href="#section-9.3.1-5.3" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-9.3.1-6">Applications <span class="bcp14">SHOULD</span> always
check the length of the data delivered to the <code>Receive</code> event and not assume
it will be as long as <code>minIncompleteLength</code> in the case of shorter complete Messages
or memory issues.<a href="#section-9.3.1-6" class="pilcrow">¶</a></p>
<p id="section-9.3.1-7">The <code>maxLength</code> argument indicates the maximum size of a Message in bytes
that the application is currently prepared to receive. The default
value for <code>maxLength</code> is Infinite. If an incoming Message is larger than the
minimum of this size and the maximum Message size on receive for
the Connection's Protocol Stack, it will be delivered via <code>ReceivedPartial</code>
events (<a href="#receive-partial" class="auto internal xref">Section 9.3.2.2</a>).<a href="#section-9.3.1-7" class="pilcrow">¶</a></p>
<p id="section-9.3.1-8">Note that <code>maxLength</code> does not guarantee that the application will receive that many
bytes if they are available; the Transport Services API could return <code>ReceivedPartial</code> events with less
data than <code>maxLength</code> according to implementation constraints. Note also that <code>maxLength</code>
and <code>minIncompleteLength</code> are intended only to manage buffering and are not interpreted
as a receiver preference for Message reordering.<a href="#section-9.3.1-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="receive-events">
<section id="section-9.3.2">
          <h4 id="name-receive-events">
<a href="#section-9.3.2" class="section-number selfRef">9.3.2. </a><a href="#name-receive-events" class="section-name selfRef">Receive Events</a>
          </h4>
<p id="section-9.3.2-1">Each call to <code>Receive</code> will be paired with a single <code>Receive</code> event. This allows an application
to provide backpressure to the Protocol Stack when it is temporarily not ready to receive Messages.
For example, an application that will later be able to handle multiple <code>Receive</code> events at the same time
can make multiple calls to <code>Receive</code> without waiting for, or processing, any <code>Receive</code> events. An application
that is temporarily unable to process received events for a connection could refrain from calling <code>Receive</code>
or could delay calling it. This would lead to a buildup of unread data, which, in turn, could result in
   backpressure to the sender via a transport protocol's flow control.<a href="#section-9.3.2-1" class="pilcrow">¶</a></p>
<p id="section-9.3.2-2">The Transport Services API should allow the application to correlate a <code>Receive</code> event to the particular call to <code>Receive</code> that triggered the event. The manner in which this correlation is indicated
is implementation specific.<a href="#section-9.3.2-2" class="pilcrow">¶</a></p>
<div id="receive-complete">
<section id="section-9.3.2.1">
            <h5 id="name-received">
<a href="#section-9.3.2.1" class="section-number selfRef">9.3.2.1. </a><a href="#name-received" class="section-name selfRef">Received</a>
            </h5>
<div class="alignLeft art-text artwork" id="section-9.3.2.1-1">
<pre>
Connection -&gt; Received&lt;messageData, messageContext&gt;
</pre><a href="#section-9.3.2.1-1" class="pilcrow">¶</a>
</div>
<p id="section-9.3.2.1-2">A <code>Received</code> event indicates the delivery of a complete Message.
It contains two objects: the received bytes as <code>messageData</code> and the metadata and Properties of the received Message as <code>messageContext</code>.<a href="#section-9.3.2.1-2" class="pilcrow">¶</a></p>
<p id="section-9.3.2.1-3">The <code>messageData</code> value provides access to the bytes that were received for this Message, along with the length of the byte array.
The <code>messageContext</code> value is provided to enable retrieving metadata about the Message and referring to the Message. The MessageContext object is described in <a href="#msg-ctx" class="auto internal xref">Section 9.1.1</a>.<a href="#section-9.3.2.1-3" class="pilcrow">¶</a></p>
<p id="section-9.3.2.1-4">See <a href="#framing" class="auto internal xref">Section 9.1.2</a> regarding how to handle Message framing in situations where the Protocol
Stack only provides a byte-stream transport.<a href="#section-9.3.2.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="receive-partial">
<section id="section-9.3.2.2">
            <h5 id="name-receivedpartial">
<a href="#section-9.3.2.2" class="section-number selfRef">9.3.2.2. </a><a href="#name-receivedpartial" class="section-name selfRef">ReceivedPartial</a>
            </h5>
<div class="alignLeft art-text artwork" id="section-9.3.2.2-1">
<pre>
Connection -&gt; ReceivedPartial&lt;messageData, messageContext,
                              endOfMessage&gt;
</pre><a href="#section-9.3.2.2-1" class="pilcrow">¶</a>
</div>
<p id="section-9.3.2.2-2">If a complete Message cannot be delivered in one event, one part of the Message
can be delivered with a <code>ReceivedPartial</code> event. To continue to receive more
of the same Message, the application must invoke <code>Receive</code> again.<a href="#section-9.3.2.2-2" class="pilcrow">¶</a></p>
<p id="section-9.3.2.2-3">Multiple invocations of <code>ReceivedPartial</code> deliver data for the same Message by
passing the same MessageContext until the value of the <code>endOfMessage</code> Property is delivered or a
 <code>ReceiveError</code> occurs. All partial blocks of a single Message are delivered in
order without gaps. This event does not support delivering non-contiguous partial
Messages. For example, if Message A is divided into three pieces (A1, A2, and A3), 
Message B is divided into three pieces (B1, B2, and B3), and <code>preserveOrder</code> is not <code>Require</code>,
the <code>ReceivedPartial</code> could deliver them in a sequence like this: A1, B1, B2, A2, A3, B3.
This is because the MessageContext allows the application to identify the pieces as belonging
     to Message A and B, respectively. However, a sequence like A1, A3 will never occur.<a href="#section-9.3.2.2-3" class="pilcrow">¶</a></p>
<p id="section-9.3.2.2-4">If the <code>minIncompleteLength</code> in the <code>Receive</code> request was set to be Infinite (indicating
a request to receive only complete Messages), the <code>ReceivedPartial</code> event could still be
delivered if one of the following conditions is true:<a href="#section-9.3.2.2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.3.2.2-5.1">
                <p id="section-9.3.2.2-5.1.1">the underlying Protocol Stack supports Message boundary preservation and
the size of the Message is larger than the buffers available for a single
Message;<a href="#section-9.3.2.2-5.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-9.3.2.2-5.2">
                <p id="section-9.3.2.2-5.2.1">the underlying Protocol Stack does not support Message boundary
preservation and the Message Framer (see <a href="#framing" class="auto internal xref">Section 9.1.2</a>) cannot determine
the end of the Message using the buffer space it has available; or<a href="#section-9.3.2.2-5.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-9.3.2.2-5.3">
                <p id="section-9.3.2.2-5.3.1">the underlying Protocol Stack does not support Message boundary
preservation and no Message Framer was supplied by the application.<a href="#section-9.3.2.2-5.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
<p id="section-9.3.2.2-6">Note that, in the absence of Message boundary preservation or
a Message Framer, all bytes received on the Connection will be represented as one
large Message of indeterminate length.<a href="#section-9.3.2.2-6" class="pilcrow">¶</a></p>
<p id="section-9.3.2.2-7">In the following example, an application only wants to receive up to 1000 bytes
at a time from a Connection. If a 1500-byte Message arrives, it would receive
the Message in two separate <code>ReceivedPartial</code> events.<a href="#section-9.3.2.2-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.3.2.2-8">
<pre>
Connection.Receive(1, 1000)

// Receive the first 1000 bytes; Message is incomplete
Connection -&gt; ReceivedPartial&lt;messageData(1000 bytes),
                              messageContext, false&gt;

Connection.Receive(1, 1000)

// Receive the last 500 bytes; Message is now complete
Connection -&gt; ReceivedPartial&lt;messageData(500 bytes),
                              messageContext, true&gt;
</pre><a href="#section-9.3.2.2-8" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="receive-error">
<section id="section-9.3.2.3">
            <h5 id="name-receiveerror">
<a href="#section-9.3.2.3" class="section-number selfRef">9.3.2.3. </a><a href="#name-receiveerror" class="section-name selfRef">ReceiveError</a>
            </h5>
<div class="alignLeft art-text artwork" id="section-9.3.2.3-1">
<pre>
Connection -&gt; ReceiveError&lt;messageContext, reason?&gt;
</pre><a href="#section-9.3.2.3-1" class="pilcrow">¶</a>
</div>
<p id="section-9.3.2.3-2">A <code>ReceiveError</code> occurs when:<a href="#section-9.3.2.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.3.2.3-3.1">data is received by the underlying Protocol Stack
that cannot be fully retrieved or parsed, and<a href="#section-9.3.2.3-3.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-9.3.2.3-3.2">it is useful for the application
to be notified of such errors.<a href="#section-9.3.2.3-3.2" class="pilcrow">¶</a>
</li>
            </ul>
<p id="section-9.3.2.3-4">For example, a <code>ReceiveError</code> can
indicate that a Message (identified via the <code>messageContext</code> value)
that was being partially received previously, but had not
completed, encountered an error and will not be completed. This can be useful
for an application, which might wish to use this error as a hint to remove
previously received Message parts from memory. As another example,
if an incoming Message does not fulfill the <code>recvChecksumLen</code> Property
(see <a href="#conn-recv-checksum" class="auto internal xref">Section 8.1.1</a>),
an application can use this error as a hint to inform the peer application
to adjust the <code>msgChecksumLen</code> Property (see <a href="#msg-checksum" class="auto internal xref">Section 9.1.3.6</a>).<a href="#section-9.3.2.3-4" class="pilcrow">¶</a></p>
<p id="section-9.3.2.3-5">In contrast, internal protocol reception errors (e.g., loss causing retransmissions
in TCP) are not signaled by this event. Conditions that irrevocably lead to
the termination of the Connection are signaled using <code>ConnectionError</code>
(see <a href="#termination" class="auto internal xref">Section 10</a>).<a href="#section-9.3.2.3-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="recv-meta">
<section id="section-9.3.3">
          <h4 id="name-receive-message-properties">
<a href="#section-9.3.3" class="section-number selfRef">9.3.3. </a><a href="#name-receive-message-properties" class="section-name selfRef">Receive Message Properties</a>
          </h4>
<p id="section-9.3.3-1">Each MessageContext could contain metadata from protocols in the Protocol Stack;
which metadata is available is Protocol Stack dependent. These are exposed through additional read-only Message Properties that can be queried from the MessageContext object (see <a href="#msg-ctx" class="auto internal xref">Section 9.1.1</a>) passed by the <code>Receive</code> event.
The metadata values in the following subsections are supported.<a href="#section-9.3.3-1" class="pilcrow">¶</a></p>
<div id="receive-ecn">
<section id="section-9.3.3.1">
            <h5 id="name-property-specific-to-udp-an">
<a href="#section-9.3.3.1" class="section-number selfRef">9.3.3.1. </a><a href="#name-property-specific-to-udp-an" class="section-name selfRef">Property Specific to UDP and UDP-Lite: ECN</a>
            </h5>
<p id="section-9.3.3.1-1">When available, Message metadata carries the value of the Explicit Congestion
Notification (ECN) field. This information can be used for logging and debugging as well as building applications that need access to information about
the transport internals for their own operation. This Property is specific to UDP
and UDP-Lite, because these protocols do not implement congestion control; hence, they expose this functionality to the application (see <span>[<a href="#RFC8293" class="cite xref">RFC8293</a>]</span>,
following the guidance in <span>[<a href="#RFC8085" class="cite xref">RFC8085</a>]</span>).<a href="#section-9.3.3.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="receive-early">
<section id="section-9.3.3.2">
            <h5 id="name-early-data">
<a href="#section-9.3.3.2" class="section-number selfRef">9.3.3.2. </a><a href="#name-early-data" class="section-name selfRef">Early Data</a>
            </h5>
<p id="section-9.3.3.2-1">In some cases, it can be valuable to know whether data was read as part of early
data transfer (before Connection establishment has finished). This is useful if
applications need to treat early data separately,
e.g., if early data has different security Properties than data sent after
Connection establishment. In the case of TLS 1.3, client early data can be replayed
maliciously (see <span>[<a href="#RFC8446" class="cite xref">RFC8446</a>]</span>). Thus, receivers might wish to perform additional
checks for early data to ensure that it is safely replayable. If TLS 1.3 is available
and the recipient Message was sent as part of early data, the corresponding metadata carries
a flag indicating as such. If early data is enabled, applications should check this metadata
field for Messages received during Connection establishment and respond accordingly.<a href="#section-9.3.3.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="receiving-final-messages">
<section id="section-9.3.3.3">
            <h5 id="name-receiving-final-messages">
<a href="#section-9.3.3.3" class="section-number selfRef">9.3.3.3. </a><a href="#name-receiving-final-messages" class="section-name selfRef">Receiving Final Messages</a>
            </h5>
<p id="section-9.3.3.3-1">The MessageContext can indicate whether or not this Message is
the last Message on a Connection. For any Message that is marked as <code>Final</code>,
the application can assume that there will be no more Messages received on the
Connection once the Message has been completely delivered. This corresponds
to the <code>final</code> Property that can be marked on a sent Message; see <a href="#msg-final" class="auto internal xref">Section 9.1.3.5</a>.<a href="#section-9.3.3.3-1" class="pilcrow">¶</a></p>
<p id="section-9.3.3.3-2">Some transport protocols and peers do not support signaling of the <code>final</code> Property.  Therefore,
applications <span class="bcp14">SHOULD NOT</span> rely on receiving a Message marked <code>Final</code> to know
that the sending Endpoint is done sending on a Connection.<a href="#section-9.3.3.3-2" class="pilcrow">¶</a></p>
<p id="section-9.3.3.3-3">Any calls to <code>Receive</code> once the <code>Final</code> Message has been delivered will result in errors.<a href="#section-9.3.3.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="termination">
<section id="section-10">
      <h2 id="name-connection-termination">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-connection-termination" class="section-name selfRef">Connection Termination</a>
      </h2>
<p id="section-10-1">A Connection can be terminated:<a href="#section-10-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-10-2">
 <li id="section-10-2.1">by the Local Endpoint (i.e., the application calls the <code>Close</code>, <code>CloseGroup</code>, <code>Abort</code>, or <code>AbortGroup</code> action),<a href="#section-10-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-10-2.2">by the Remote Endpoint (i.e., the remote application calls the <code>Close</code>, <code>CloseGroup</code>, <code>Abort</code>, or <code>AbortGroup</code> action), or<a href="#section-10-2.2" class="pilcrow">¶</a>
</li>
        <li id="section-10-2.3">because of an error (e.g., a timeout).<a href="#section-10-2.3" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-10-3">A local call of the <code>Close</code> action will
cause the Connection to send either a <code>Closed</code> event or a <code>ConnectionError</code> event; a local call of
the <code>CloseGroup</code> action will cause all of the Connections in the group to send either a <code>Closed</code> event
or a <code>ConnectionError</code> event. A local call of the <code>Abort</code> action will cause the Connection to send
a <code>ConnectionError</code> event, indicating local <code>Abort</code> as a <code>reason</code>; a local call of the <code>AbortGroup</code> action
will cause all of the Connections in the group to send a <code>ConnectionError</code> event, indicating local <code>Abort</code>
as a <code>reason</code>.<a href="#section-10-3" class="pilcrow">¶</a></p>
<p id="section-10-4">Remote action calls map to events similar to local calls (e.g., a remote <code>Close</code> causes the
Connection to send either a <code>Closed</code> event or a <code>ConnectionError</code> event), but in contrast to local action calls,
it is not guaranteed that such events will indeed be invoked. When an application needs to free resources
associated with a Connection, it ought not rely on the invocation of such events due to
termination calls from the Remote Endpoint; instead, it should use the local termination actions.<a href="#section-10-4" class="pilcrow">¶</a></p>
<p id="section-10-5"><code>Close</code> terminates a Connection after satisfying all the requirements that were
specified regarding the delivery of Messages that the application has already
given to the Transport Services System. Upon successfully satisfying all these
requirements, the Connection will send the <code>Closed</code> event. For example, if reliable delivery was requested
for a Message handed over before calling <code>Close</code>, the <code>Closed</code> event will signify
that this Message has indeed been delivered. This action does not affect any other Connection
in the same Connection Group.<a href="#section-10-5" class="pilcrow">¶</a></p>
<p id="section-10-6">An application <span class="bcp14">MUST NOT</span> assume that it can receive any further data on a Connection
for which it has called <code>Close</code>, even if such data is already in flight.<a href="#section-10-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-10-7">
<pre>
Connection.Close()
</pre><a href="#section-10-7" class="pilcrow">¶</a>
</div>
<p id="section-10-8">The <code>Closed</code> event informs the application that a <code>Close</code> action has successfully
completed or that the Remote Endpoint has closed the Connection.
There is no guarantee that a remote <code>Close</code> will be signaled.<a href="#section-10-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-10-9">
<pre>
Connection -&gt; Closed&lt;&gt;
</pre><a href="#section-10-9" class="pilcrow">¶</a>
</div>
<p id="section-10-10"><code>Abort</code> terminates a Connection without delivering any remaining Messages. This action does
not affect any other Connection that is entangled with this one in a Connection Group.
When the <code>Abort</code> action has finished, the Connection will send a <code>ConnectionError</code> event,
indicating local <code>Abort</code> as a <code>reason</code>.<a href="#section-10-10" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-10-11">
<pre>
Connection.Abort()
</pre><a href="#section-10-11" class="pilcrow">¶</a>
</div>
<p id="section-10-12"><code>CloseGroup</code> gracefully terminates a Connection and any other Connections in the
same Connection Group. For example, all of the Connections in a
group might be streams of a single session for a multistreaming protocol; closing the entire
group will close the underlying session. See also <a href="#groups" class="auto internal xref">Section 7.4</a>. All Connections in the group
will send a <code>Closed</code> event when the <code>CloseGroup</code> action was successful.
As with <code>Close</code>, any Messages
remaining to be processed on a Connection will be handled prior to closing.<a href="#section-10-12" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-10-13">
<pre>
Connection.CloseGroup()
</pre><a href="#section-10-13" class="pilcrow">¶</a>
</div>
<p id="section-10-14"><code>AbortGroup</code> terminates a Connection and any other Connections that are
in the same Connection Group without delivering any remaining Messages.
When the <code>AbortGroup</code> action has finished, all Connections in the group will
send a <code>ConnectionError</code> event, indicating local <code>Abort</code> as a <code>reason</code>.<a href="#section-10-14" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-10-15">
<pre>
Connection.AbortGroup()
</pre><a href="#section-10-15" class="pilcrow">¶</a>
</div>
<p id="section-10-16">A <code>ConnectionError</code> informs the application that:<a href="#section-10-16" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-10-17">
<li id="section-10-17.1">data could not be delivered to the
peer after a timeout
      or<a href="#section-10-17.1" class="pilcrow">¶</a>
</li>
        <li id="section-10-17.2">the Connection has been aborted (e.g., because the peer has called <code>Abort</code>).<a href="#section-10-17.2" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-10-18">There is no guarantee that an <code>Abort</code> from the peer will be signaled.<a href="#section-10-18" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-10-19">
<pre>
Connection -&gt; ConnectionError&lt;reason?&gt;
</pre><a href="#section-10-19" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="state-ordering">
<section id="section-11">
      <h2 id="name-connection-state-and-orderi">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-connection-state-and-orderi" class="section-name selfRef">Connection State and Ordering of Operations and Events</a>
      </h2>
<p id="section-11-1">This Transport Services API is designed to be independent of an implementation's
concurrency model.  The exact details regarding how actions are handled, and how
events are dispatched, are implementation dependent.<a href="#section-11-1" class="pilcrow">¶</a></p>
<p id="section-11-2">Some transitions of Connection states are associated with events:<a href="#section-11-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11-3.1">
          <p id="section-11-3.1.1">A <code>Ready</code> event occurs when a Connection created with <code>Initiate</code> or
<code>InitiateWithSend</code> transitions to <code>Established</code> state.<a href="#section-11-3.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-3.2">
          <p id="section-11-3.2.1">A <code>ConnectionReceived</code> event occurs when a Connection created with <code>Listen</code>
transitions to <code>Established</code> state.<a href="#section-11-3.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-3.3">
          <p id="section-11-3.3.1">A <code>RendezvousDone</code> event occurs when a Connection created with <code>Rendezvous</code>
transitions to <code>Established</code> state.<a href="#section-11-3.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-3.4">
          <p id="section-11-3.4.1">A <code>Closed</code> event occurs when a Connection transitions to <code>Closed</code> state without error.<a href="#section-11-3.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-3.5">
          <p id="section-11-3.5.1">An <code>EstablishmentError</code> event occurs when a Connection created with <code>Initiate</code> transitions
from <code>Establishing</code> state to <code>Closed</code> state due to an error.<a href="#section-11-3.5.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-3.6">
          <p id="section-11-3.6.1">A <code>ConnectionError</code> event occurs when a Connection transitions to <code>Closed</code> state due to
an error in all other circumstances.<a href="#section-11-3.6.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-11-4">The following diagram shows the possible states of a Connection and the
events that occur upon a transition from one state to another.<a href="#section-11-4" class="pilcrow">¶</a></p>
<span id="name-connection-state-diagram"></span><div id="fig-connstates">
<figure id="figure-2">
        <div class="alignLeft art-text artwork" id="section-11-5.1">
<pre>
              (*)                               (**)
Establishing -----&gt; Established -----&gt; Closing ------&gt; Closed
     |                                                   ^
     |                                                   |
     +---------------------------------------------------+
                  EstablishmentError&lt;&gt;

(*) Ready&lt;&gt;, ConnectionReceived&lt;&gt;, RendezvousDone&lt;&gt;
(**) Closed&lt;&gt;, ConnectionError&lt;&gt;
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-connection-state-diagram" class="selfRef">Connection State Diagram</a>
        </figcaption></figure>
</div>
<p id="section-11-6">The Transport Services API  provides the following guarantees about the ordering of
 operations:<a href="#section-11-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11-7.1">
          <p id="section-11-7.1.1"><code>Sent</code> events will occur on a Connection in the order in which the Messages
were sent (i.e., delivered to the kernel or to the network interface,
depending on the implementation).<a href="#section-11-7.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-7.2">
          <p id="section-11-7.2.1"><code>Received</code> events will never occur on a Connection before it is <code>Established</code>, i.e.,
before a <code>Ready</code> event on that Connection or a <code>ConnectionReceived</code> or
<code>RendezvousDone</code> event containing that Connection.<a href="#section-11-7.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-7.3">
          <p id="section-11-7.3.1">No events will occur on a Connection after it is closed, i.e., after a
<code>Closed</code> event, an <code>EstablishmentError</code> or <code>ConnectionError</code> event will not occur on that Connection. To
ensure this ordering, a <code>Closed</code> event will not occur on a Connection while other
events on the Connection are still locally outstanding (i.e., known to the
Transport Services API and waiting to be dealt with by the application).<a href="#section-11-7.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="iana-considerations">
<section id="section-12">
      <h2 id="name-iana-considerations">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-12-1">This document has no IANA actions.<a href="#section-12-1" class="pilcrow">¶</a></p>
<p id="section-12-2">Future works might create IANA registries for generic Transport Property names and Transport Property Namespaces (see <a href="#property-names" class="auto internal xref">Section 4.1</a>).<a href="#section-12-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="privacy-security">
<section id="section-13">
      <h2 id="name-privacy-and-security-consid">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-privacy-and-security-consid" class="section-name selfRef">Privacy and Security Considerations</a>
      </h2>
<p id="section-13-1">This document describes a generic API for interacting with a Transport Services System.
Part of this API includes configuration details for transport security protocols, as discussed
in <a href="#security-parameters" class="auto internal xref">Section 6.3</a>. It does not recommend use (or disuse) of specific
algorithms or protocols. Any API-compatible transport security protocol ought to work in a Transport Services System.
Security considerations for these protocols are discussed in the respective specifications.<a href="#section-13-1" class="pilcrow">¶</a></p>
<p id="section-13-2"><span>[<a href="#RFC9621" class="cite xref">RFC9621</a>]</span> provides general security considerations and requirements for any system that implements the Transport Services Architecture. These include recommendations of relevance to the API, e.g., regarding the use of keying material.<a href="#section-13-2" class="pilcrow">¶</a></p>
<p id="section-13-3">The described API is used to exchange information between an application and the Transport Services System.  The same authority implementing both systems is not necessarily expected.  However, there is an expectation that the Transport Services Implementation would either:<a href="#section-13-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-13-4.1">be provided as a library that is selected by the application
 from a trusted party or<a href="#section-13-4.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-13-4.2">be part of the operating system that the application also relies on for
other tasks.<a href="#section-13-4.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-13-5">In either case, the Transport Services API is an internal interface that is used to exchange information locally between two systems.
However, as the Transport Services System is responsible for network communication, it is in the position to
potentially share any information provided by the application with the network or another communication peer.
Most of the information provided over the Transport Services API is useful to configure and select protocols and paths
and is not necessarily privacy sensitive. Still, some information could be privacy sensitive because
it might reveal usage characteristics and habits of the user of an application.<a href="#section-13-5" class="pilcrow">¶</a></p>
<p id="section-13-6">Of course, any communication over a network reveals usage characteristics, because all
packets, as well as their timing and size, are part of the network-visible wire image <span>[<a href="#RFC8546" class="cite xref">RFC8546</a>]</span>. However,
the selection of a protocol and its configuration also impacts which information is visible, potentially in
clear text, and which other entities can access it. How Transport Services Systems ought to choose protocols -- depending on the security Properties required -- is out of scope for this specification, as it is limited to transport protocols. The choice of a security protocol can be informed by the survey provided in <span>[<a href="#RFC8922" class="cite xref">RFC8922</a>]</span>.<a href="#section-13-6" class="pilcrow">¶</a></p>
<p id="section-13-7">In most cases, information provided for protocol and path selection
does not directly translate to information that can be observed by network devices on the path.
However, there might be specific configuration
information that is intended for path exposure, e.g., a Diffserv codepoint setting that is either provided
directly by the application or indirectly configured for a traffic profile.<a href="#section-13-7" class="pilcrow">¶</a></p>
<p id="section-13-8">Applications should be aware that a single communication attempt can lead to more than one connection establishment procedure.  For example,
      this is the case when:<a href="#section-13-8" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-13-9.1">the Transport Services System also executes name resolution,<a href="#section-13-9.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-13-9.2">support mechanisms such as
TURN or ICE are used to establish connectivity if protocols or paths are raced or if a path fails and
 fallback or re-establishment is supported in the Transport Services System.<a href="#section-13-9.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-13-10">Applications should take special
care when using 0-RTT session resumption (see <a href="#prop-0rtt" class="auto internal xref">Section 6.2.5</a>), as early data sent across multiple paths during
Connection establishment could reveal information that can be used to correlate Endpoints on these paths.<a href="#section-13-10" class="pilcrow">¶</a></p>
<p id="section-13-11">Applications should also take care to not assume that all data received using the Transport Services API is always
complete or well-formed. Specifically, Messages that are received partially (see <a href="#receive-partial" class="auto internal xref">Section 9.3.2.2</a>) could be a source
of truncation attacks if applications do not distinguish between partial Messages and complete Messages.<a href="#section-13-11" class="pilcrow">¶</a></p>
<p id="section-13-12">The Transport Services API explicitly does not require the application to resolve names, though there is
a trade-off between early and late binding of addresses to names. Early binding
allows the Transport Services Implementation to reduce Connection setup latency. This is at the cost
of potentially limited scope for alternate path discovery during Connection
establishment as well as potential additional information leakage about
application interest when used with a resolution method (such as DNS without
TLS) that does not protect query confidentiality.
      Names used with the Transport Services API <span class="bcp14">SHOULD</span> be FQDNs; not providing an FQDN will result in the Transport Services Implementation needing to use DNS search domains for name resolution, which might lead to inconsistent or unpredictable behavior.<a href="#section-13-12" class="pilcrow">¶</a></p>
<p id="section-13-13">These communication activities are not different from what is used at the time of writing. However,
the goal of a Transport Services System is to support
such mechanisms as a generic service within the transport layer. This enables applications to more dynamically
benefit from innovations and new protocols in the transport, although it reduces transparency of the
underlying communication actions to the application itself. The Transport Services API is designed such that protocol and path
selection can be
limited to a small and controlled set if required by the application
to perform a function or to provide security.
Further,
introspection on the Properties of Connection objects allows an application to determine which protocol(s) and path(s) are in use.
A Transport Services System <span class="bcp14">SHOULD</span> provide a facility logging the communication events of each Connection.<a href="#section-13-13" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-14">
      <h2 id="name-references">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-14.1">
        <h3 id="name-normative-references">
<a href="#section-14.1" class="section-number selfRef">14.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC7301">[ALPN]</dt>
        <dd>
<span class="refAuthor">Friedl, S.</span>, <span class="refAuthor">Popov, A.</span>, <span class="refAuthor">Langley, A.</span>, and <span class="refAuthor">E. Stephan</span>, <span class="refTitle">"Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension"</span>, <span class="seriesInfo">RFC 7301</span>, <span class="seriesInfo">DOI 10.17487/RFC7301</span>, <time datetime="2014-07" class="refDate">July 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7301">https://www.rfc-editor.org/info/rfc7301</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9621">[RFC9621]</dt>
      <dd>
<span class="refAuthor">Pauly, T., Ed.</span>, <span class="refAuthor">Trammell, B., Ed.</span>, <span class="refAuthor">Brunstrom, A.</span>, <span class="refAuthor">Fairhurst, G.</span>, and <span class="refAuthor">C. S. Perkins</span>, <span class="refTitle">"Architecture and Requirements for Transport Services"</span>, <span class="seriesInfo">RFC 9621</span>, <span class="seriesInfo">DOI 10.17487/RFC9621</span>, <time datetime="2025-01" class="refDate">January 2025</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/RFC9621">https://www.rfc-editor.org/info/RFC9621</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-14.2">
        <h3 id="name-informative-references">
<a href="#section-14.2" class="section-number selfRef">14.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC1122">[RFC1122]</dt>
        <dd>
<span class="refAuthor">Braden, R., Ed.</span>, <span class="refTitle">"Requirements for Internet Hosts - Communication Layers"</span>, <span class="seriesInfo">STD 3</span>, <span class="seriesInfo">RFC 1122</span>, <span class="seriesInfo">DOI 10.17487/RFC1122</span>, <time datetime="1989-10" class="refDate">October 1989</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1122">https://www.rfc-editor.org/info/rfc1122</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2474">[RFC2474]</dt>
        <dd>
<span class="refAuthor">Nichols, K.</span>, <span class="refAuthor">Blake, S.</span>, <span class="refAuthor">Baker, F.</span>, and <span class="refAuthor">D. Black</span>, <span class="refTitle">"Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers"</span>, <span class="seriesInfo">RFC 2474</span>, <span class="seriesInfo">DOI 10.17487/RFC2474</span>, <time datetime="1998-12" class="refDate">December 1998</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2474">https://www.rfc-editor.org/info/rfc2474</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2597">[RFC2597]</dt>
        <dd>
<span class="refAuthor">Heinanen, J.</span>, <span class="refAuthor">Baker, F.</span>, <span class="refAuthor">Weiss, W.</span>, and <span class="refAuthor">J. Wroclawski</span>, <span class="refTitle">"Assured Forwarding PHB Group"</span>, <span class="seriesInfo">RFC 2597</span>, <span class="seriesInfo">DOI 10.17487/RFC2597</span>, <time datetime="1999-06" class="refDate">June 1999</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2597">https://www.rfc-editor.org/info/rfc2597</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2914">[RFC2914]</dt>
        <dd>
<span class="refAuthor">Floyd, S.</span>, <span class="refTitle">"Congestion Control Principles"</span>, <span class="seriesInfo">BCP 41</span>, <span class="seriesInfo">RFC 2914</span>, <span class="seriesInfo">DOI 10.17487/RFC2914</span>, <time datetime="2000-09" class="refDate">September 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2914">https://www.rfc-editor.org/info/rfc2914</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3246">[RFC3246]</dt>
        <dd>
<span class="refAuthor">Davie, B.</span>, <span class="refAuthor">Charny, A.</span>, <span class="refAuthor">Bennet, J.C.R.</span>, <span class="refAuthor">Benson, K.</span>, <span class="refAuthor">Le Boudec, J.Y.</span>, <span class="refAuthor">Courtney, W.</span>, <span class="refAuthor">Davari, S.</span>, <span class="refAuthor">Firoiu, V.</span>, and <span class="refAuthor">D. Stiliadis</span>, <span class="refTitle">"An Expedited Forwarding PHB (Per-Hop Behavior)"</span>, <span class="seriesInfo">RFC 3246</span>, <span class="seriesInfo">DOI 10.17487/RFC3246</span>, <time datetime="2002-03" class="refDate">March 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3246">https://www.rfc-editor.org/info/rfc3246</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3261">[RFC3261]</dt>
        <dd>
<span class="refAuthor">Rosenberg, J.</span>, <span class="refAuthor">Schulzrinne, H.</span>, <span class="refAuthor">Camarillo, G.</span>, <span class="refAuthor">Johnston, A.</span>, <span class="refAuthor">Peterson, J.</span>, <span class="refAuthor">Sparks, R.</span>, <span class="refAuthor">Handley, M.</span>, and <span class="refAuthor">E. Schooler</span>, <span class="refTitle">"SIP: Session Initiation Protocol"</span>, <span class="seriesInfo">RFC 3261</span>, <span class="seriesInfo">DOI 10.17487/RFC3261</span>, <time datetime="2002-06" class="refDate">June 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3261">https://www.rfc-editor.org/info/rfc3261</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4291">[RFC4291]</dt>
        <dd>
<span class="refAuthor">Hinden, R.</span> and <span class="refAuthor">S. Deering</span>, <span class="refTitle">"IP Version 6 Addressing Architecture"</span>, <span class="seriesInfo">RFC 4291</span>, <span class="seriesInfo">DOI 10.17487/RFC4291</span>, <time datetime="2006-02" class="refDate">February 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4291">https://www.rfc-editor.org/info/rfc4291</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4594">[RFC4594]</dt>
        <dd>
<span class="refAuthor">Babiarz, J.</span>, <span class="refAuthor">Chan, K.</span>, and <span class="refAuthor">F. Baker</span>, <span class="refTitle">"Configuration Guidelines for DiffServ Service Classes"</span>, <span class="seriesInfo">RFC 4594</span>, <span class="seriesInfo">DOI 10.17487/RFC4594</span>, <time datetime="2006-08" class="refDate">August 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4594">https://www.rfc-editor.org/info/rfc4594</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5280">[RFC5280]</dt>
        <dd>
<span class="refAuthor">Cooper, D.</span>, <span class="refAuthor">Santesson, S.</span>, <span class="refAuthor">Farrell, S.</span>, <span class="refAuthor">Boeyen, S.</span>, <span class="refAuthor">Housley, R.</span>, and <span class="refAuthor">W. Polk</span>, <span class="refTitle">"Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile"</span>, <span class="seriesInfo">RFC 5280</span>, <span class="seriesInfo">DOI 10.17487/RFC5280</span>, <time datetime="2008-05" class="refDate">May 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5280">https://www.rfc-editor.org/info/rfc5280</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5482">[RFC5482]</dt>
        <dd>
<span class="refAuthor">Eggert, L.</span> and <span class="refAuthor">F. Gont</span>, <span class="refTitle">"TCP User Timeout Option"</span>, <span class="seriesInfo">RFC 5482</span>, <span class="seriesInfo">DOI 10.17487/RFC5482</span>, <time datetime="2009-03" class="refDate">March 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5482">https://www.rfc-editor.org/info/rfc5482</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5865">[RFC5865]</dt>
        <dd>
<span class="refAuthor">Baker, F.</span>, <span class="refAuthor">Polk, J.</span>, and <span class="refAuthor">M. Dolly</span>, <span class="refTitle">"A Differentiated Services Code Point (DSCP) for Capacity-Admitted Traffic"</span>, <span class="seriesInfo">RFC 5865</span>, <span class="seriesInfo">DOI 10.17487/RFC5865</span>, <time datetime="2010-05" class="refDate">May 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5865">https://www.rfc-editor.org/info/rfc5865</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7478">[RFC7478]</dt>
        <dd>
<span class="refAuthor">Holmberg, C.</span>, <span class="refAuthor">Hakansson, S.</span>, and <span class="refAuthor">G. Eriksson</span>, <span class="refTitle">"Web Real-Time Communication Use Cases and Requirements"</span>, <span class="seriesInfo">RFC 7478</span>, <span class="seriesInfo">DOI 10.17487/RFC7478</span>, <time datetime="2015-03" class="refDate">March 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7478">https://www.rfc-editor.org/info/rfc7478</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7556">[RFC7556]</dt>
        <dd>
<span class="refAuthor">Anipko, D., Ed.</span>, <span class="refTitle">"Multiple Provisioning Domain Architecture"</span>, <span class="seriesInfo">RFC 7556</span>, <span class="seriesInfo">DOI 10.17487/RFC7556</span>, <time datetime="2015-06" class="refDate">June 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7556">https://www.rfc-editor.org/info/rfc7556</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7657">[RFC7657]</dt>
        <dd>
<span class="refAuthor">Black, D., Ed.</span> and <span class="refAuthor">P. Jones</span>, <span class="refTitle">"Differentiated Services (Diffserv) and Real-Time Communication"</span>, <span class="seriesInfo">RFC 7657</span>, <span class="seriesInfo">DOI 10.17487/RFC7657</span>, <time datetime="2015-11" class="refDate">November 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7657">https://www.rfc-editor.org/info/rfc7657</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC791">[RFC791]</dt>
        <dd>
<span class="refAuthor">Postel, J.</span>, <span class="refTitle">"Internet Protocol"</span>, <span class="seriesInfo">STD 5</span>, <span class="seriesInfo">RFC 791</span>, <span class="seriesInfo">DOI 10.17487/RFC0791</span>, <time datetime="1981-09" class="refDate">September 1981</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc791">https://www.rfc-editor.org/info/rfc791</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8084">[RFC8084]</dt>
        <dd>
<span class="refAuthor">Fairhurst, G.</span>, <span class="refTitle">"Network Transport Circuit Breakers"</span>, <span class="seriesInfo">BCP 208</span>, <span class="seriesInfo">RFC 8084</span>, <span class="seriesInfo">DOI 10.17487/RFC8084</span>, <time datetime="2017-03" class="refDate">March 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8084">https://www.rfc-editor.org/info/rfc8084</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8085">[RFC8085]</dt>
        <dd>
<span class="refAuthor">Eggert, L.</span>, <span class="refAuthor">Fairhurst, G.</span>, and <span class="refAuthor">G. Shepherd</span>, <span class="refTitle">"UDP Usage Guidelines"</span>, <span class="seriesInfo">BCP 145</span>, <span class="seriesInfo">RFC 8085</span>, <span class="seriesInfo">DOI 10.17487/RFC8085</span>, <time datetime="2017-03" class="refDate">March 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8085">https://www.rfc-editor.org/info/rfc8085</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8095">[RFC8095]</dt>
        <dd>
<span class="refAuthor">Fairhurst, G., Ed.</span>, <span class="refAuthor">Trammell, B., Ed.</span>, and <span class="refAuthor">M. Kuehlewind, Ed.</span>, <span class="refTitle">"Services Provided by IETF Transport Protocols and Congestion Control Mechanisms"</span>, <span class="seriesInfo">RFC 8095</span>, <span class="seriesInfo">DOI 10.17487/RFC8095</span>, <time datetime="2017-03" class="refDate">March 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8095">https://www.rfc-editor.org/info/rfc8095</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8126">[RFC8126]</dt>
        <dd>
<span class="refAuthor">Cotton, M.</span>, <span class="refAuthor">Leiba, B.</span>, and <span class="refAuthor">T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time datetime="2017-06" class="refDate">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8260">[RFC8260]</dt>
        <dd>
<span class="refAuthor">Stewart, R.</span>, <span class="refAuthor">Tuexen, M.</span>, <span class="refAuthor">Loreto, S.</span>, and <span class="refAuthor">R. Seggelmann</span>, <span class="refTitle">"Stream Schedulers and User Message Interleaving for the Stream Control Transmission Protocol"</span>, <span class="seriesInfo">RFC 8260</span>, <span class="seriesInfo">DOI 10.17487/RFC8260</span>, <time datetime="2017-11" class="refDate">November 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8260">https://www.rfc-editor.org/info/rfc8260</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8293">[RFC8293]</dt>
        <dd>
<span class="refAuthor">Ghanwani, A.</span>, <span class="refAuthor">Dunbar, L.</span>, <span class="refAuthor">McBride, M.</span>, <span class="refAuthor">Bannai, V.</span>, and <span class="refAuthor">R. Krishnan</span>, <span class="refTitle">"A Framework for Multicast in Network Virtualization over Layer 3"</span>, <span class="seriesInfo">RFC 8293</span>, <span class="seriesInfo">DOI 10.17487/RFC8293</span>, <time datetime="2018-01" class="refDate">January 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8293">https://www.rfc-editor.org/info/rfc8293</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8303">[RFC8303]</dt>
        <dd>
<span class="refAuthor">Welzl, M.</span>, <span class="refAuthor">Tuexen, M.</span>, and <span class="refAuthor">N. Khademi</span>, <span class="refTitle">"On the Usage of Transport Features Provided by IETF Transport Protocols"</span>, <span class="seriesInfo">RFC 8303</span>, <span class="seriesInfo">DOI 10.17487/RFC8303</span>, <time datetime="2018-02" class="refDate">February 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8303">https://www.rfc-editor.org/info/rfc8303</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8445">[RFC8445]</dt>
        <dd>
<span class="refAuthor">Keranen, A.</span>, <span class="refAuthor">Holmberg, C.</span>, and <span class="refAuthor">J. Rosenberg</span>, <span class="refTitle">"Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal"</span>, <span class="seriesInfo">RFC 8445</span>, <span class="seriesInfo">DOI 10.17487/RFC8445</span>, <time datetime="2018-07" class="refDate">July 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8445">https://www.rfc-editor.org/info/rfc8445</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8446">[RFC8446]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time datetime="2018-08" class="refDate">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8489">[RFC8489]</dt>
        <dd>
<span class="refAuthor">Petit-Huguenin, M.</span>, <span class="refAuthor">Salgueiro, G.</span>, <span class="refAuthor">Rosenberg, J.</span>, <span class="refAuthor">Wing, D.</span>, <span class="refAuthor">Mahy, R.</span>, and <span class="refAuthor">P. Matthews</span>, <span class="refTitle">"Session Traversal Utilities for NAT (STUN)"</span>, <span class="seriesInfo">RFC 8489</span>, <span class="seriesInfo">DOI 10.17487/RFC8489</span>, <time datetime="2020-02" class="refDate">February 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8489">https://www.rfc-editor.org/info/rfc8489</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8546">[RFC8546]</dt>
        <dd>
<span class="refAuthor">Trammell, B.</span> and <span class="refAuthor">M. Kuehlewind</span>, <span class="refTitle">"The Wire Image of a Network Protocol"</span>, <span class="seriesInfo">RFC 8546</span>, <span class="seriesInfo">DOI 10.17487/RFC8546</span>, <time datetime="2019-04" class="refDate">April 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8546">https://www.rfc-editor.org/info/rfc8546</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8622">[RFC8622]</dt>
        <dd>
<span class="refAuthor">Bless, R.</span>, <span class="refTitle">"A Lower-Effort Per-Hop Behavior (LE PHB) for Differentiated Services"</span>, <span class="seriesInfo">RFC 8622</span>, <span class="seriesInfo">DOI 10.17487/RFC8622</span>, <time datetime="2019-06" class="refDate">June 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8622">https://www.rfc-editor.org/info/rfc8622</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8656">[RFC8656]</dt>
        <dd>
<span class="refAuthor">Reddy, T., Ed.</span>, <span class="refAuthor">Johnston, A., Ed.</span>, <span class="refAuthor">Matthews, P.</span>, and <span class="refAuthor">J. Rosenberg</span>, <span class="refTitle">"Traversal Using Relays around NAT (TURN): Relay Extensions to Session Traversal Utilities for NAT (STUN)"</span>, <span class="seriesInfo">RFC 8656</span>, <span class="seriesInfo">DOI 10.17487/RFC8656</span>, <time datetime="2020-02" class="refDate">February 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8656">https://www.rfc-editor.org/info/rfc8656</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8699">[RFC8699]</dt>
        <dd>
<span class="refAuthor">Islam, S.</span>, <span class="refAuthor">Welzl, M.</span>, and <span class="refAuthor">S. Gjessing</span>, <span class="refTitle">"Coupled Congestion Control for RTP Media"</span>, <span class="seriesInfo">RFC 8699</span>, <span class="seriesInfo">DOI 10.17487/RFC8699</span>, <time datetime="2020-01" class="refDate">January 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8699">https://www.rfc-editor.org/info/rfc8699</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8801">[RFC8801]</dt>
        <dd>
<span class="refAuthor">Pfister, P.</span>, <span class="refAuthor">Vyncke, É.</span>, <span class="refAuthor">Pauly, T.</span>, <span class="refAuthor">Schinazi, D.</span>, and <span class="refAuthor">W. Shao</span>, <span class="refTitle">"Discovering Provisioning Domain Names and Data"</span>, <span class="seriesInfo">RFC 8801</span>, <span class="seriesInfo">DOI 10.17487/RFC8801</span>, <time datetime="2020-07" class="refDate">July 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8801">https://www.rfc-editor.org/info/rfc8801</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8838">[RFC8838]</dt>
        <dd>
<span class="refAuthor">Ivov, E.</span>, <span class="refAuthor">Uberti, J.</span>, and <span class="refAuthor">P. Saint-Andre</span>, <span class="refTitle">"Trickle ICE: Incremental Provisioning of Candidates for the Interactive Connectivity Establishment (ICE) Protocol"</span>, <span class="seriesInfo">RFC 8838</span>, <span class="seriesInfo">DOI 10.17487/RFC8838</span>, <time datetime="2021-01" class="refDate">January 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8838">https://www.rfc-editor.org/info/rfc8838</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8899">[RFC8899]</dt>
        <dd>
<span class="refAuthor">Fairhurst, G.</span>, <span class="refAuthor">Jones, T.</span>, <span class="refAuthor">Tüxen, M.</span>, <span class="refAuthor">Rüngeler, I.</span>, and <span class="refAuthor">T. Völker</span>, <span class="refTitle">"Packetization Layer Path MTU Discovery for Datagram Transports"</span>, <span class="seriesInfo">RFC 8899</span>, <span class="seriesInfo">DOI 10.17487/RFC8899</span>, <time datetime="2020-09" class="refDate">September 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8899">https://www.rfc-editor.org/info/rfc8899</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8922">[RFC8922]</dt>
        <dd>
<span class="refAuthor">Enghardt, T.</span>, <span class="refAuthor">Pauly, T.</span>, <span class="refAuthor">Perkins, C.</span>, <span class="refAuthor">Rose, K.</span>, and <span class="refAuthor">C. Wood</span>, <span class="refTitle">"A Survey of the Interaction between Security Protocols and Transport Services"</span>, <span class="seriesInfo">RFC 8922</span>, <span class="seriesInfo">DOI 10.17487/RFC8922</span>, <time datetime="2020-10" class="refDate">October 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8922">https://www.rfc-editor.org/info/rfc8922</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8923">[RFC8923]</dt>
        <dd>
<span class="refAuthor">Welzl, M.</span> and <span class="refAuthor">S. Gjessing</span>, <span class="refTitle">"A Minimal Set of Transport Services for End Systems"</span>, <span class="seriesInfo">RFC 8923</span>, <span class="seriesInfo">DOI 10.17487/RFC8923</span>, <time datetime="2020-10" class="refDate">October 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8923">https://www.rfc-editor.org/info/rfc8923</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8981">[RFC8981]</dt>
        <dd>
<span class="refAuthor">Gont, F.</span>, <span class="refAuthor">Krishnan, S.</span>, <span class="refAuthor">Narten, T.</span>, and <span class="refAuthor">R. Draves</span>, <span class="refTitle">"Temporary Address Extensions for Stateless Address Autoconfiguration in IPv6"</span>, <span class="seriesInfo">RFC 8981</span>, <span class="seriesInfo">DOI 10.17487/RFC8981</span>, <time datetime="2021-02" class="refDate">February 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8981">https://www.rfc-editor.org/info/rfc8981</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9218">[RFC9218]</dt>
        <dd>
<span class="refAuthor">Oku, K.</span> and <span class="refAuthor">L. Pardue</span>, <span class="refTitle">"Extensible Prioritization Scheme for HTTP"</span>, <span class="seriesInfo">RFC 9218</span>, <span class="seriesInfo">DOI 10.17487/RFC9218</span>, <time datetime="2022-06" class="refDate">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9218">https://www.rfc-editor.org/info/rfc9218</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9329">[RFC9329]</dt>
        <dd>
<span class="refAuthor">Pauly, T.</span> and <span class="refAuthor">V. Smyslov</span>, <span class="refTitle">"TCP Encapsulation of Internet Key Exchange Protocol (IKE) and IPsec Packets"</span>, <span class="seriesInfo">RFC 9329</span>, <span class="seriesInfo">DOI 10.17487/RFC9329</span>, <time datetime="2022-11" class="refDate">November 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9329">https://www.rfc-editor.org/info/rfc9329</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9623">[RFC9623]</dt>
        <dd>
<span class="refAuthor">Brunstrom, A., Ed.</span>, <span class="refAuthor">Pauly, T., Ed.</span>, <span class="refAuthor">Enghardt, R.</span>, <span class="refAuthor">Tiesel, P. S.</span>, and <span class="refAuthor">M. Welzl</span>, <span class="refTitle">"Implementing Interfaces to Transport Services"</span>, <span class="seriesInfo">RFC 9623</span>, <span class="seriesInfo">DOI 10.17487/RFC9623</span>, <time datetime="2025-01" class="refDate">January 2025</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9623">https://www.rfc-editor.org/info/rfc9623</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="TCP-COUPLING">[TCP-COUPLING]</dt>
      <dd>
<span class="refAuthor">Islam, S.</span>, <span class="refAuthor">Welzl, M.</span>, <span class="refAuthor">Hiorth, K.</span>, <span class="refAuthor">Hayes, D.</span>, <span class="refAuthor">Armitage, G.</span>, and <span class="refAuthor">S. Gjessing</span>, <span class="refTitle">"ctrlTCP: Reducing latency through coupled, heterogeneous multi-flow TCP congestion control"</span>, <span class="refContent">IEEE INFOCOM 2018 - IEEE Conference on Computer Communications Workshops (INFOCOM WKSHPS)</span>, <span class="seriesInfo">DOI 10.1109/INFCOMW.2018.8406887</span>, <time datetime="2018" class="refDate">2018</time>, <span>&lt;<a href="https://ieeexplore.ieee.org/document/8406887">https://ieeexplore.ieee.org/document/8406887</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
<div id="implmapping">
<section id="appendix-A">
      <h2 id="name-implementation-mapping">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-implementation-mapping" class="section-name selfRef">Implementation Mapping</a>
      </h2>
<p id="appendix-A-1">The way the concepts from this abstract API map to concrete APIs in a
given language on a given platform largely depends on the features and norms of
the language and the platform.  Actions could be implemented as either functions or method calls. 
For instance, actions could be implemented via event queues, handler
functions or classes, communicating sequential processes, or other
asynchronous calling conventions.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<div id="types">
<section id="appendix-A.1">
        <h3 id="name-types">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-types" class="section-name selfRef">Types</a>
        </h3>
<p id="appendix-A.1-1">The basic types mentioned in <a href="#notation" class="auto internal xref">Section 1.1</a> typically have natural
correspondences in practical programming languages, perhaps constrained by
implementation-specific limitations. For example:<a href="#appendix-A.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.1-2.1">
            <p id="appendix-A.1-2.1.1">Typically, an Integer can be represented in C by an <code>int</code> or <code>long</code>; this is subject
to the underlying platform's ranges for each.<a href="#appendix-A.1-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.1-2.2">
            <p id="appendix-A.1-2.2.1">In C, a Tuple may be represented as a <code>struct</code> with one member for each of
the value types in the ordered grouping. However, in Python, a Tuple may
be represented as a <code>tuple</code>, which is a sequence of dynamically typed
elements.<a href="#appendix-A.1-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.1-2.3">
            <p id="appendix-A.1-2.3.1">A Set may be represented as a <code>std::set</code> in C++ or as a <code>set</code> in
Python. In C, it may be represented as an array or as a higher-level data
structure with appropriate accessors defined.<a href="#appendix-A.1-2.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="appendix-A.1-3">The objects described in <a href="#notation" class="auto internal xref">Section 1.1</a> can also be represented in
different ways, depending on which programming language is used. Objects
like Preconnections, Connections, and Listeners can be long-lived and 
benefit from using object-oriented constructs. Note that, in C, these
objects may need to provide a way to release or free their underlying
memory when the application is done using them. For example, since a
Preconnection can be used to initiate multiple Connections, it is the
responsibility of the application to clean up the Preconnection memory
if necessary.<a href="#appendix-A.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="events-and-errors">
<section id="appendix-A.2">
        <h3 id="name-events-and-errors">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-events-and-errors" class="section-name selfRef">Events and Errors</a>
        </h3>
<p id="appendix-A.2-1">This specification treats events and errors similarly. Errors, just as any
other events, may occur asynchronously in network applications. However,
implementations of this API may report errors synchronously.
This is done according to the error-handling idioms of the implementation
platform, where they can be immediately detected. An example of this is to generate an
exception when attempting to initiate a Connection with inconsistent
Transport Properties. An error can provide an optional <code>reason</code> to the
application with further details about why the error occurred.<a href="#appendix-A.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="time-duration">
<section id="appendix-A.3">
        <h3 id="name-time-duration">
<a href="#appendix-A.3" class="section-number selfRef">A.3. </a><a href="#name-time-duration" class="section-name selfRef">Time Duration</a>
        </h3>
<p id="appendix-A.3-1">Time duration types are implementation specific.
For instance, it could be a number of seconds, a number of milliseconds, or a <code>struct timeval</code> in C;  in C++, it could be a user-defined <code>Duration</code> class.<a href="#appendix-A.3-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="convenience-functions">
<section id="appendix-B">
      <h2 id="name-convenience-functions">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-convenience-functions" class="section-name selfRef">Convenience Functions</a>
      </h2>
<div id="preference-conv">
<section id="appendix-B.1">
        <h3 id="name-adding-preference-propertie">
<a href="#appendix-B.1" class="section-number selfRef">B.1. </a><a href="#name-adding-preference-propertie" class="section-name selfRef">Adding Preference Properties</a>
        </h3>
<p id="appendix-B.1-1">TransportProperties will frequently need to set
Selection Properties of type "Preference"; therefore, implementations can provide special actions
for adding each preference level, i.e., <code>TransportProperties.Set(some_property, avoid)</code>
is equivalent to <code>TransportProperties.Avoid(some_property)</code>:<a href="#appendix-B.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-B.1-2">
<pre>
TransportProperties.Require(property)
TransportProperties.Prefer(property)
TransportProperties.NoPreference(property)
TransportProperties.Avoid(property)
TransportProperties.Prohibit(property)
</pre><a href="#appendix-B.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="property-profiles">
<section id="appendix-B.2">
        <h3 id="name-transport-property-profiles">
<a href="#appendix-B.2" class="section-number selfRef">B.2. </a><a href="#name-transport-property-profiles" class="section-name selfRef">Transport Property Profiles</a>
        </h3>
<p id="appendix-B.2-1">To ease the use of the Transport Services API, implementations
can provide a mechanism to create Transport Property objects (see <a href="#selection-props" class="auto internal xref">Section 6.2</a>)
that are preconfigured with frequently used sets of Properties; the following subsections list those that are
 in common use in applications at the time of writing.<a href="#appendix-B.2-1" class="pilcrow">¶</a></p>
<div id="reliable-inorder-stream">
<section id="appendix-B.2.1">
          <h4 id="name-reliable-inorder-stream">
<a href="#appendix-B.2.1" class="section-number selfRef">B.2.1. </a><a href="#name-reliable-inorder-stream" class="section-name selfRef">reliable-inorder-stream</a>
          </h4>
<p id="appendix-B.2.1-1">This profile provides reliable, in-order transport service with
congestion control.
TCP is an example of a protocol that provides this service.
It should consist of the following Properties:<a href="#appendix-B.2.1-1" class="pilcrow">¶</a></p>
<span id="name-reliable-inorder-stream-pre"></span><div id="tabrio">
<table class="center" id="table-2">
            <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-reliable-inorder-stream-pre" class="selfRef">reliable-inorder-stream Preferences</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Property</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">reliability</td>
                <td class="text-left" rowspan="1" colspan="1">Require</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">preserveOrder</td>
                <td class="text-left" rowspan="1" colspan="1">Require</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">congestionControl</td>
                <td class="text-left" rowspan="1" colspan="1">Require</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">preserveMsgBoundaries</td>
                <td class="text-left" rowspan="1" colspan="1">No Preference</td>
              </tr>
            </tbody>
          </table>
</div>
</section>
</div>
<div id="reliable-message">
<section id="appendix-B.2.2">
          <h4 id="name-reliable-message">
<a href="#appendix-B.2.2" class="section-number selfRef">B.2.2. </a><a href="#name-reliable-message" class="section-name selfRef">reliable-message</a>
          </h4>
<p id="appendix-B.2.2-1">This profile provides Message-preserving, reliable, in-order
transport service with congestion control.
SCTP is an example of a protocol that provides this service.
It should consist of the following Properties:<a href="#appendix-B.2.2-1" class="pilcrow">¶</a></p>
<span id="name-reliable-message-preference"></span><div id="tabrm">
<table class="center" id="table-3">
            <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-reliable-message-preference" class="selfRef">reliable-message Preferences</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Property</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">reliability</td>
                <td class="text-left" rowspan="1" colspan="1">Require</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">preserveOrder</td>
                <td class="text-left" rowspan="1" colspan="1">Require</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">congestionControl</td>
                <td class="text-left" rowspan="1" colspan="1">Require</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">preserveMsgBoundaries</td>
                <td class="text-left" rowspan="1" colspan="1">Require</td>
              </tr>
            </tbody>
          </table>
</div>
</section>
</div>
<div id="unreliable-datagram">
<section id="appendix-B.2.3">
          <h4 id="name-unreliable-datagram">
<a href="#appendix-B.2.3" class="section-number selfRef">B.2.3. </a><a href="#name-unreliable-datagram" class="section-name selfRef">unreliable-datagram</a>
          </h4>
<p id="appendix-B.2.3-1">This profile provides a datagram transport service without any
reliability guarantee.
An example of a protocol that provides this service is UDP.
It consists of the following Properties:<a href="#appendix-B.2.3-1" class="pilcrow">¶</a></p>
<span id="name-unreliable-datagram-prefere"></span><div id="tabud">
<table class="center" id="table-4">
            <caption>
<a href="#table-4" class="selfRef">Table 4</a>:
<a href="#name-unreliable-datagram-prefere" class="selfRef">unreliable-datagram Preferences</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Property</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">reliability</td>
                <td class="text-left" rowspan="1" colspan="1">Avoid</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">preserveOrder</td>
                <td class="text-left" rowspan="1" colspan="1">Avoid</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">congestionControl</td>
                <td class="text-left" rowspan="1" colspan="1">No Preference</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">preserveMsgBoundaries</td>
                <td class="text-left" rowspan="1" colspan="1">Require</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">safelyReplayable</td>
                <td class="text-left" rowspan="1" colspan="1">true</td>
              </tr>
            </tbody>
          </table>
</div>
<p id="appendix-B.2.3-3">Applications that choose this Transport Property Profile would
avoid the additional latency that could be introduced
by retransmission or reordering in a transport protocol.<a href="#appendix-B.2.3-3" class="pilcrow">¶</a></p>
<p id="appendix-B.2.3-4">Applications that choose this Transport Property Profile to reduce latency
should also consider setting an appropriate capacity profile Property
(see <a href="#prop-cap-profile" class="auto internal xref">Section 8.1.6</a>) and might benefit from controlling checksum
coverage (see Sections <a href="#prop-checksum-control-send" class="auto internal xref">6.2.7</a> and <a href="#prop-checksum-control-receive" class="auto internal xref">6.2.8</a>).<a href="#appendix-B.2.3-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="relationship-to-the-minimal-set-of-transport-services-for-end-systems">
<section id="appendix-C">
      <h2 id="name-relationship-to-the-minimal">
<a href="#appendix-C" class="section-number selfRef">Appendix C. </a><a href="#name-relationship-to-the-minimal" class="section-name selfRef">Relationship to the Minimal Set of Transport Services for End Systems</a>
      </h2>
<p id="appendix-C-1"><span>[<a href="#RFC8923" class="cite xref">RFC8923</a>]</span> identifies a minimal set of Transport Services that end systems should offer. These services make all non-security-related transport features of TCP, Multipath TCP (MPTCP), UDP, UDP-Lite, SCTP, and Low Extra Delay Background Transport (LEDBAT) available that:<a href="#appendix-C-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="appendix-C-2">
 <li id="appendix-C-2.1">require interaction with the application and<a href="#appendix-C-2.1" class="pilcrow">¶</a>
</li>
        <li id="appendix-C-2.2">do not get in the way of a possible implementation over TCP (or, with limitations, UDP).<a href="#appendix-C-2.2" class="pilcrow">¶</a>
</li>
      </ol>
<p id="appendix-C-3">The following text explains how this minimal set is reflected in the present API. For brevity, it is based on the list in  <span><a href="https://rfc-editor.org/rfc/rfc8923#section-4.1" class="relref">Section 4.1</a> of [<a href="#RFC8923" class="cite xref">RFC8923</a>]</span> and updated according to the discussion in <span><a href="https://rfc-editor.org/rfc/rfc8923#section-5" class="relref">Section 5</a> of [<a href="#RFC8923" class="cite xref">RFC8923</a>]</span>. The present API covers all elements of this section.
This list is a subset of the transport features in
<span><a href="https://rfc-editor.org/rfc/rfc8923#appendix-A" class="relref">Appendix A</a> of [<a href="#RFC8923" class="cite xref">RFC8923</a>]</span>, which refers to the primitives in "pass 2".  See <span><a href="https://rfc-editor.org/rfc/rfc8303#section-4" class="relref">Section 4</a> of [<a href="#RFC8303" class="cite xref">RFC8303</a>]</span> for 1) further details on the implementation with TCP, MPTCP, UDP, UDP-Lite, SCTP, and LEDBAT and 2) how to facilitate finding the specifications for implementing
the services listed below with these protocols.<a href="#appendix-C-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-C-4.1">Connect:
<code>Initiate</code> action (<a href="#initiate" class="auto internal xref">Section 7.1</a>).<a href="#appendix-C-4.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.2">Listen:
<code>Listen</code> action (<a href="#listen" class="auto internal xref">Section 7.2</a>).<a href="#appendix-C-4.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.3">Specify number of attempts and/or timeout for the first establishment Message:
<code>timeout</code> parameter of <code>Initiate</code> (<a href="#initiate" class="auto internal xref">Section 7.1</a>) or <code>InitiateWithSend</code> action (<a href="#initiate-and-send" class="auto internal xref">Section 9.2.5</a>).<a href="#appendix-C-4.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.4">Disable MPTCP:
<code>multipath</code> Property (<a href="#multipath-mode" class="auto internal xref">Section 6.2.14</a>).<a href="#appendix-C-4.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.5">Hand over a Message to reliably transfer (possibly multiple times) before Connection establishment:
<code>InitiateWithSend</code> action (<a href="#initiate-and-send" class="auto internal xref">Section 9.2.5</a>).<a href="#appendix-C-4.5" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.6">Change timeout for aborting connection (using retransmit limit or time value):
<code>connTimeout</code> Property, using a time value (<a href="#conn-timeout" class="auto internal xref">Section 8.1.3</a>).<a href="#appendix-C-4.6" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.7">Timeout event when data could not be delivered for too long:
<code>ConnectionError</code> event (<a href="#termination" class="auto internal xref">Section 10</a>).<a href="#appendix-C-4.7" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.8">Suggest timeout to the peer:
See "<a href="#tcp-uto" class="internal xref">TCP-Specific Properties: User Timeout Option (UTO)</a>" (<a href="#tcp-uto" class="auto internal xref">Section 8.2</a>).<a href="#appendix-C-4.8" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.9">Notification of ICMP error message arrival:
<code>softErrorNotify</code> (<a href="#prop-soft-error" class="auto internal xref">Section 6.2.17</a>) and <code>SoftError</code> event (<a href="#soft-errors" class="auto internal xref">Section 8.3.1</a>).<a href="#appendix-C-4.9" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.10">Choose a scheduler to operate between streams of an association:
<code>connScheduler</code> Property (<a href="#conn-scheduler" class="auto internal xref">Section 8.1.5</a>).<a href="#appendix-C-4.10" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.11">Configure priority or weight for a scheduler:
<code>connPriority</code> Property (<a href="#conn-priority" class="auto internal xref">Section 8.1.2</a>).<a href="#appendix-C-4.11" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.12">"Specify checksum coverage used by the sender" and "Disable checksum when sending":
<code>msgChecksumLen</code> Property (<a href="#msg-checksum" class="auto internal xref">Section 9.1.3.6</a>) and <code>fullChecksumSend</code> Property (<a href="#prop-checksum-control-send" class="auto internal xref">Section 6.2.7</a>).<a href="#appendix-C-4.12" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.13">"Specify minimum checksum coverage required by receiver" and "Disable checksum requirement when receiving":
<code>recvChecksumLen</code> Property (<a href="#conn-recv-checksum" class="auto internal xref">Section 8.1.1</a>) and <code>fullChecksumRecv</code> Property (<a href="#prop-checksum-control-receive" class="auto internal xref">Section 6.2.8</a>).<a href="#appendix-C-4.13" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.14">Specify DF field:
<code>noFragmentation</code> Property (<a href="#send-singular" class="auto internal xref">Section 9.1.3.9</a>).<a href="#appendix-C-4.14" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.15">Get maximum transport-message size that may be sent using a non-fragmented IP packet from the configured interface:
<code>singularTransmissionMsgMaxLen</code> Property (<a href="#conn-max-msg-notfrag" class="auto internal xref">Section 8.1.11.4</a>).<a href="#appendix-C-4.15" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.16">Get maximum transport-message size that may be received from the configured interface:
<code>recvMsgMaxLen</code> Property (<a href="#conn-max-msg-recv" class="auto internal xref">Section 8.1.11.6</a>).<a href="#appendix-C-4.16" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.17">Obtain ECN field:
This is a read-only Message Property of the MessageContext object (see 
"<a href="#receive-ecn" class="internal xref">Property Specific to UDP and UDP-Lite: ECN</a>" (<a href="#receive-ecn" class="auto internal xref">Section 9.3.3.1</a>)).<a href="#appendix-C-4.17" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.18">"Specify DSCP field", "Disable Nagle algorithm", and "Enable and configure a <code>Low Extra Delay Background Transfer</code>":
as suggested in <span><a href="https://rfc-editor.org/rfc/rfc8923#section-5.5" class="relref">Section 5.5</a> of [<a href="#RFC8923" class="cite xref">RFC8923</a>]</span>, these transport features are collectively offered via the <code>connCapacityProfile</code> Property (<a href="#prop-cap-profile" class="auto internal xref">Section 8.1.6</a>). Per-Message control ("Request not to bundle messages") is offered via the <code>msgCapacityProfile</code> Property (<a href="#send-profile" class="auto internal xref">Section 9.1.3.8</a>).<a href="#appendix-C-4.18" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.19">Close after reliably delivering all remaining data, causing an event informing the application on the other side:
this is offered by the <code>Close</code> action with slightly changed semantics in line with the discussion in <span><a href="https://rfc-editor.org/rfc/rfc8923#section-5.2" class="relref">Section 5.2</a> of [<a href="#RFC8923" class="cite xref">RFC8923</a>]</span> (see also <a href="#termination" class="auto internal xref">Section 10</a>).<a href="#appendix-C-4.19" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.20">"Abort without delivering remaining data, causing an event informing the application on the other side" and "Abort without delivering remaining data, not causing an event informing the application on the other side":
these are offered by the <code>Abort</code> action without promising that these are signaled to the other side. If they are, a <code>ConnectionError</code> event will be invoked at the peer (<a href="#termination" class="auto internal xref">Section 10</a>).<a href="#appendix-C-4.20" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.21">"Reliably transfer data, with congestion control", "Reliably transfer a message, with congestion control", and "Unreliably transfer a message":
data is transferred via the <code>Send</code> action (<a href="#sending" class="auto internal xref">Section 9.2</a>). Reliability is controlled via the <code>reliability</code> (<a href="#prop-reliable" class="auto internal xref">Section 6.2.1</a>) Property and the <code>msgReliable</code> Message Property (<a href="#msg-reliable-message" class="auto internal xref">Section 9.1.3.7</a>). Transmitting data as a Message or without delimiters is controlled via Message Framers (<a href="#framing" class="auto internal xref">Section 9.1.2</a>). The choice of congestion control is provided via the <code>congestionControl</code> Property (<a href="#prop-cc" class="auto internal xref">Section 6.2.9</a>).<a href="#appendix-C-4.21" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.22">Configurable Message Reliability:
the <code>msgLifetime</code> Message Property implements a time-based way to configure Message reliability (<a href="#msg-lifetime" class="auto internal xref">Section 9.1.3.1</a>).<a href="#appendix-C-4.22" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.23">"Ordered message delivery (potentially slower than unordered)" and "Unordered message delivery (potentially faster than ordered)":
these two transport features are controlled via the Message Property <code>msgOrdered</code> (<a href="#msg-ordered" class="auto internal xref">Section 9.1.3.3</a>).<a href="#appendix-C-4.23" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.24">Request not to delay the acknowledgement (SACK) of a message:
should the protocol support it, this is one of the transport features the Transport Services System can apply when an application uses the <code>connCapacityProfile</code> Property (<a href="#prop-cap-profile" class="auto internal xref">Section 8.1.6</a>) or the <code>msgCapacityProfile</code> Message Property (<a href="#send-profile" class="auto internal xref">Section 9.1.3.8</a>) with value <code>Low Latency/Interactive</code>.<a href="#appendix-C-4.24" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.25">Receive data (with no message delimiting):
<code>Receive</code> action (<a href="#receiving-action" class="auto internal xref">Section 9.3.1</a>) and <code>Received</code> event (<a href="#receive-complete" class="auto internal xref">Section 9.3.2.1</a>).<a href="#appendix-C-4.25" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.26">Receive a message:
<code>Receive</code> action (<a href="#receiving-action" class="auto internal xref">Section 9.3.1</a>) and <code>Received</code> event (<a href="#receive-complete" class="auto internal xref">Section 9.3.2.1</a>) using Message Framers (<a href="#framing" class="auto internal xref">Section 9.1.2</a>).<a href="#appendix-C-4.26" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.27">Information about partial message arrival:
<code>Receive</code> action (<a href="#receiving-action" class="auto internal xref">Section 9.3.1</a>) and <code>ReceivedPartial</code> event (<a href="#receive-partial" class="auto internal xref">Section 9.3.2.2</a>).<a href="#appendix-C-4.27" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.28">Notification of send failures:
<code>Expired</code> event (<a href="#expired" class="auto internal xref">Section 9.2.2.2</a>) and <code>SendError</code> event (<a href="#send-error" class="auto internal xref">Section 9.2.2.3</a>).<a href="#appendix-C-4.28" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.29">Notification that the stack has no more user data to send:
applications can obtain this information via the <code>Sent</code> event (<a href="#sent" class="auto internal xref">Section 9.2.2.1</a>).<a href="#appendix-C-4.29" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.30">Notification to a receiver that a partial message delivery has been aborted:
<code>ReceiveError</code> event (<a href="#receive-error" class="auto internal xref">Section 9.3.2.3</a>).<a href="#appendix-C-4.30" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-C-4.31">Notification of Excessive Retransmissions (early warning below abortion threshold):   
   <code>SoftError</code> event (<a href="#soft-errors" class="auto internal xref">Section 8.3.1</a>).<a href="#appendix-C-4.31" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="acknowledgements">
<section id="appendix-D">
      <h2 id="name-acknowledgements">
<a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-D-1">This work has received funding from the European Union's Horizon 2020 research and
innovation programme under grant agreements No. 644334 (NEAT) and No. 688421 (MAMI).<a href="#appendix-D-1" class="pilcrow">¶</a></p>
<p id="appendix-D-2">This work has been supported by:<a href="#appendix-D-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-D-3.1">Leibniz Prize project funds from the DFG - German
Research Foundation: Gottfried Wilhelm Leibniz-Preis 2011 (FKZ FE 570/4-1).<a href="#appendix-D-3.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-D-3.2">the UK Engineering and Physical Sciences
Research Council under grant EP/R04144X/1.<a href="#appendix-D-3.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-D-3.3">the Research Council of Norway under its "Toppforsk"
programme through the "OCARINA" project.<a href="#appendix-D-3.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="appendix-D-4">Thanks to <span class="contact-name">Stuart Cheshire</span>, <span class="contact-name">Josh Graessley</span>, <span class="contact-name">David Schinazi</span>, and <span class="contact-name">Eric Kinnear</span> for
their implementation and design efforts, including Happy Eyeballs, that heavily
influenced this work. Thanks to <span class="contact-name">Laurent Chuat</span> and <span class="contact-name">Jason Lee</span> for initial work on
the Post Sockets interface, from which this work has evolved. Thanks to
<span class="contact-name">Maximilian Franke</span> for asking good questions based on implementation experience
and for contributing text, e.g., on multicast.<a href="#appendix-D-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-E">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Brian Trammell (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Google Switzerland GmbH</span></div>
<div dir="auto" class="left"><span class="street-address">Gustav-Gull-Platz 1</span></div>
<div dir="auto" class="left">CH-<span class="postal-code">8004</span> <span class="locality">Zurich</span>
</div>
<div dir="auto" class="left"><span class="country-name">Switzerland</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ietf@trammell.ch" class="email">ietf@trammell.ch</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Michael Welzl (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">University of Oslo</span></div>
<div dir="auto" class="left"><span class="street-address">PO Box 1080 Blindern</span></div>
<div dir="auto" class="left">
<span class="postal-code">0316</span> <span class="locality">Oslo</span>
</div>
<div dir="auto" class="left"><span class="country-name">Norway</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:michawe@ifi.uio.no" class="email">michawe@ifi.uio.no</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Reese Enghardt</span></div>
<div dir="auto" class="left"><span class="org">Netflix</span></div>
<div dir="auto" class="left"><span class="street-address">121 Albright Way</span></div>
<div dir="auto" class="left">
<span class="locality">Los Gatos</span>, <span class="region">CA</span> <span class="postal-code">95032</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ietf@tenghardt.net" class="email">ietf@tenghardt.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Godred Fairhurst</span></div>
<div dir="auto" class="left"><span class="org">University of Aberdeen</span></div>
<div dir="auto" class="left"><span class="street-address">Fraser Noble Building</span></div>
<div dir="auto" class="left"><span class="locality">Aberdeen, AB24 3UE</span></div>
<div dir="auto" class="left"><span class="country-name">United Kingdom</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:gorry@erg.abdn.ac.uk" class="email">gorry@erg.abdn.ac.uk</a>
</div>
<div class="url">
<span>URI:</span>
<a href="https://erg.abdn.ac.uk/" class="url">https://erg.abdn.ac.uk/</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Mirja Kühlewind</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div dir="auto" class="left"><span class="street-address">Ericsson-Allee 1</span></div>
<div dir="auto" class="left"><span class="locality">Herzogenrath</span></div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mirja.kuehlewind@ericsson.com" class="email">mirja.kuehlewind@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Colin S. Perkins</span></div>
<div dir="auto" class="left"><span class="org">University of Glasgow</span></div>
<div dir="auto" class="left"><span class="street-address">School of Computing Science</span></div>
<div dir="auto" class="left"><span class="locality">Glasgow</span></div>
<div dir="auto" class="left"><span class="postal-code">G12 8QQ</span></div>
<div dir="auto" class="left"><span class="country-name">United Kingdom</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:csp@csperkins.org" class="email">csp@csperkins.org</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Philipp S. Tiesel</span></div>
<div dir="auto" class="left"><span class="org">SAP SE</span></div>
<div dir="auto" class="left"><span class="street-address">George-Stephenson-Straße 7-13</span></div>
<div dir="auto" class="left">
<span class="postal-code">10557</span> <span class="locality">Berlin</span>
</div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:philipp@tiesel.net" class="email">philipp@tiesel.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Tommy Pauly</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">One Apple Park Way</span></div>
<div dir="auto" class="left">
<span class="locality">Cupertino</span>, <span class="region">CA</span> <span class="postal-code">95014</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:tpauly@apple.com" class="email">tpauly@apple.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
