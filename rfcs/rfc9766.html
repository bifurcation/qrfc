<!DOCTYPE html>
<html lang="en" class="RFC">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>RFC 9766: Extensions for Weak Cache Consistency in NFSv4.2's Flexible File Layout</title>
<meta content="Thomas Haynes" name="author">
<meta content="Trond Myklebust" name="author">
<meta content="
       
      This document specifies extensions to NFSv4.2 for improving Weak Cache
      Consistency (WCC).  These extensions introduce mechanisms that ensure
      partial writes performed under a Parallel NFS (pNFS) layout remain
      coherent and correctly tracked. The solution addresses concurrency and
      data integrity concerns that may arise when multiple clients write to
      the same file through separate data servers. By defining additional
      interactions among clients, metadata servers, and data servers, this
      specification enhances the reliability of NFSv4 in parallel-access
      environments and ensures consistency across diverse deployment
      scenarios.
       
    " name="description">
<meta content="xml2rfc 3.28.1" name="generator">
<meta content="9766" name="rfc.number">
<!-- Generator version information:
  xml2rfc 3.28.1
    Python 3.9.15
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 5.3.0
    platformdirs 3.8.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    six 1.16.0
    wcwidth 0.2.5
    weasyprint 65.0
-->
<link href="rfc9766.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}
.xref {
  overflow-wrap: normal;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    max-width: 100%;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.refSubseries {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: upper-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code, dt tt, dt code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<link href="https://datatracker.ietf.org/doc/draft-ietf-nfsv4-layoutwcc-07" rel="prev">
  <link href="https://dx.doi.org/10.17487/rfc9766" rel="alternate">
  <link href="urn:issn:2070-1721" rel="alternate">
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9766</td>
<td class="center">WCC in NFSv4.2's Flexible File Layout</td>
<td class="right">April 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">Haynes &amp; Myklebust</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a href="https://www.rfc-editor.org/rfc/rfc9766" class="eref">9766</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-04" class="published">April 2025</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">T. Haynes</div>
<div class="org">Hammerspace</div>
</div>
<div class="author">
      <div class="author-name">T. Myklebust</div>
<div class="org">Hammerspace</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9766</h1>
<h1 id="title">Extensions for Weak Cache Consistency in NFSv4.2's Flexible File Layout</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">
      This document specifies extensions to NFSv4.2 for improving Weak Cache
      Consistency (WCC).  These extensions introduce mechanisms that ensure
      partial writes performed under a Parallel NFS (pNFS) layout remain
      coherent and correctly tracked. The solution addresses concurrency and
      data integrity concerns that may arise when multiple clients write to
      the same file through separate data servers. By defining additional
      interactions among clients, metadata servers, and data servers, this
      specification enhances the reliability of NFSv4 in parallel-access
      environments and ensures consistency across diverse deployment
      scenarios.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9766">https://www.rfc-editor.org/info/rfc9766</a></span>.<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-definitions" class="internal xref">Definitions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="auto internal xref">1.2</a>.  <a href="#name-requirements-language" class="internal xref">Requirements Language</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-weak-cache-consistency-wcc" class="internal xref">Weak Cache Consistency (WCC)</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-operation-77-layout_wcc-lay" class="internal xref">Operation 77: LAYOUT_WCC - Layout Weak Cache Consistency</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-argument" class="internal xref">ARGUMENT</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-result" class="internal xref">RESULT</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-description" class="internal xref">DESCRIPTION</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="auto internal xref">3.4</a>.  <a href="#name-implementation" class="internal xref">Implementation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.1">
                    <p id="section-toc.1-1.3.2.4.2.1.1"><a href="#section-3.4.1" class="auto internal xref">3.4.1</a>.  <a href="#name-examples-of-when-to-use-lay" class="internal xref">Examples of When to Use LAYOUT_WCC</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.2">
                    <p id="section-toc.1-1.3.2.4.2.2.1"><a href="#section-3.4.2" class="auto internal xref">3.4.2</a>.  <a href="#name-examples-of-what-to-send-in" class="internal xref">Examples of What to Send in LAYOUT_WCC</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="auto internal xref">3.5</a>.  <a href="#name-allowed-errors" class="internal xref">Allowed Errors</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.6">
                <p id="section-toc.1-1.3.2.6.1"><a href="#section-3.6" class="auto internal xref">3.6</a>.  <a href="#name-extension-of-existing-imple" class="internal xref">Extension of Existing Implementations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.7">
                <p id="section-toc.1-1.3.2.7.1"><a href="#section-3.7" class="auto internal xref">3.7</a>.  <a href="#name-flexible-file-layout-type" class="internal xref">Flexible File Layout Type</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-extraction-of-xdr" class="internal xref">Extraction of XDR</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="sec_intro">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">
    In the Parallel NFS (pNFS)
    flexible file layout (see <span>[<a href="#RFC8435" class="cite xref">RFC8435</a>]</span>), there is no mechanism for the data servers to
    update the metadata servers when the data portion of the file is
    modified.  The metadata server needs this knowledge to correspondingly
    update the metadata portion of the file. If the client is using NFSv3 as
    the protocol with the data server, it can leverage Weak Cache Consistency
    (WCC) to update the metadata server of the attribute changes.  In this
    document, we introduce a new operation called LAYOUT_WCC to NFSv4.2, which
    allows the client to periodically report the attributes of the data files
    to the metadata server.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">
    Using the process detailed in <span>[<a href="#RFC8178" class="cite xref">RFC8178</a>]</span>, the revisions in this document become an
    extension of NFSv4.2 <span>[<a href="#RFC7862" class="cite xref">RFC7862</a>]</span>. They are built on top of the External Data
    Representation (XDR) <span>[<a href="#RFC4506" class="cite xref">RFC4506</a>]</span> generated from <span>[<a href="#RFC7863" class="cite xref">RFC7863</a>]</span>.<a href="#section-1-2" class="pilcrow">¶</a></p>
<div id="sec_defs">
<section id="section-1.1">
        <h3 id="name-definitions">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-definitions" class="section-name selfRef">Definitions</a>
        </h3>
<p id="section-1.1-1">
      For a more comprehensive set of definitions, see <span><a href="https://rfc-editor.org/rfc/rfc8435#section-1.1" class="relref">Section 1.1</a> of [<a href="#RFC8435" class="cite xref">RFC8435</a>]</span>.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.1-2">
          <dt id="section-1.1-2.1">(file) data:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.2">
        that part of the file system object that contains the
        data to be read or written.  It is the contents of the object
        rather than the attributes of the object.<a href="#section-1.1-2.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.3">data server (DS):</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.4">
        a pNFS server that provides the file's data when
        the file system object is accessed over a file-based protocol.<a href="#section-1.1-2.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.5">(file) metadata:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.6">
        the part of the file system object that contains
        various descriptive data relevant to the file object, as opposed
        to the file data itself.  This could include the time of last
        modification, access time, EOF position, etc.<a href="#section-1.1-2.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.7">metadata server (MDS):</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.8">
        the pNFS server that provides metadata
        information for a file system object.<a href="#section-1.1-2.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.9">storage device:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.10">
        the target to which clients may direct I/O requests
        when they hold an appropriate layout.  Note that each data server
        is a storage device but that some storage device are not data
        servers. (See <span><a href="https://rfc-editor.org/rfc/rfc8434#section-2.1" class="relref">Section 2.1</a> of [<a href="#RFC8434" class="cite xref">RFC8434</a>]</span>
        for a discussion on the difference between a data server
        and a storage device.)<a href="#section-1.1-2.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.11">weak cache consistency (WCC):</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.12">
        the mechanism in NFSv3 that allows the client to check for file attribute changes
        before and after an operation (see <span><a href="https://rfc-editor.org/rfc/rfc1813#section-2.6" class="relref">Section 2.6</a> of [<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>).<a href="#section-1.1-2.12" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<section id="section-1.2">
        <h3 id="name-requirements-language">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
        </h3>
<p id="section-1.2-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
    described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> 
    when, and only when, they appear in all capitals, as shown here.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
</section>
</section>
</div>
<div id="wcc">
<section id="section-2">
      <h2 id="name-weak-cache-consistency-wcc">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-weak-cache-consistency-wcc" class="section-name selfRef">Weak Cache Consistency (WCC)</a>
      </h2>
<p id="section-2-1">
       A pNFS layout type enables the metadata server to inform the client of
       both the storage protocol and the locations of the data that the client
       should use when communicating with the storage devices. The flexible
       file layout type, as specified in <span>[<a href="#RFC8435" class="cite xref">RFC8435</a>]</span>, describes
       how data servers using NFSv3 can be accessed. The client is restricted
       to performing the following NFSv3 operations on the filehandles
       provided in the layout: READ, WRITE, and COMMIT (see Sections <a href="https://rfc-editor.org/rfc/rfc1813#section-3.3.6" class="relref">3.3.6</a>, <a href="https://rfc-editor.org/rfc/rfc1813#section-3.3.7" class="relref">3.3.7</a>, and <a href="https://rfc-editor.org/rfc/rfc1813#section-3.3.21" class="relref">3.3.21</a> of <span>[<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>, respectively). In other words, the client may only use NFSv3
       operations that act directly on the data portion of the file.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">
       Because there is no control protocol (see <span>[<a href="#RFC8434" class="cite xref">RFC8434</a>]</span>) possible with all data servers,
       NFSv3 is used as the control protocol.  As such, the following NFSv3
       operations are commonly used by the metadata server: CREATE, GETATTR,
       and SETATTR (see Sections <a href="https://rfc-editor.org/rfc/rfc1813#section-3.3.8" class="relref">3.3.8</a>, <a href="https://rfc-editor.org/rfc/rfc1813#section-3.3.1" class="relref">3.3.1</a>, and <a href="https://rfc-editor.org/rfc/rfc1813#section-3.3.2" class="relref">3.3.2</a> of <span>[<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>, respectively). That
       is, the metadata server is only allowed to use NFSv3 operations that
       directly act on the metadata portion of the data file.  GETATTR allows
       the metadata server to mainly retrieve the mtime (modify time), ctime
       (change time), and atime (access time). The metadata server can use
       this information to determine if the client modified the file whilst it
       held an iomode of LAYOUTIOMODE4_RW (see <span><a href="https://rfc-editor.org/rfc/rfc8881#section-3.3.20" class="relref">Section 3.3.20</a> of [<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>). Then it can determine the
       following for the metadata file: time_modify, time_metadata, and
       time_access (see Sections <a href="https://rfc-editor.org/rfc/rfc8881#section-5.8.2.43" class="relref">5.8.2.43</a>, <a href="https://rfc-editor.org/rfc/rfc8881#section-5.8.2.42" class="relref">5.8.2.42</a>, and <a href="https://rfc-editor.org/rfc/rfc8881#section-5.8.2.37" class="relref">5.8.2.37</a> of <span>[<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>, respectively). That
       is, it can determine the information to return to clients in an NFSv4.2
       GETATTR response.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">
       For example, the metadata server might issue an NFSv3 GETATTR operation
       to the data server, which is typically triggered by a client's NFSv4
       GETATTR request to the metadata server. In addition to the cost of each
       individual GETATTR operation, the data server can be overwhelmed by a
       large volume of such requests. NFSv3 addressed a similar challenge by
       including a post-operation attribute in the READ and WRITE operations
       to report WCC data (see <span><a href="https://rfc-editor.org/rfc/rfc1813#section-2.6" class="relref">Section 2.6</a> of [<a href="#RFC1813" class="cite xref">RFC1813</a>]</span>).<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">
       Each NFSv3 operation entails a single round trip between the
       client and server.  Consequently, issuing a WRITE followed by
       a GETATTR would require two round trips. In that situation, the
       retrieved attribute information is regarded as having strict server-client
       consistency. By contrast, NFSv4 enables a WRITE and GETATTR to
       be combined within a compound operation, which requires only
       one round trip. This combined approach is likewise considered to have
       strict server-client consistency. Essentially, NFSv4 READ and
       WRITE operations omit post-operation attributes, allowing the
       client to determine whether it requires that information.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">
       Whilst NFSv4 got rid of the requirement for WCC information to
       be supplied by the WRITE or READ operations, the introduction
       of pNFS reintroduces the same problem. The metadata server
       has to communicate with the data server in order to get
       the data that could be provided by a WCC model.<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">
       With the flexible file layout type, the client can leverage
       the NFSv3 WCC to service the proxying of times (see <span><a href="https://rfc-editor.org/rfc/rfc9754#section-5" class="relref">Section 5</a> of [<a href="#RFC9754" class="cite xref">RFC9754</a>]</span>),
       but the granularity of this data is limited. With client-side
       mirroring (see <span><a href="https://rfc-editor.org/rfc/rfc8435#section-8" class="relref">Section 8</a> of [<a href="#RFC8435" class="cite xref">RFC8435</a>]</span>), the client has to aggregate the N mirrored
       files in order to send one piece of information instead of N
       pieces of information. Also, the client is limited to sending
       that information only when it returns the delegation.<a href="#section-2-6" class="pilcrow">¶</a></p>
<p id="section-2-7">
       This document introduces a new NFSv4.2 operation, LAYOUT_WCC,
       which enables the client to provide the metadata server with
       information obtained from the data server. The client is
       responsible for gathering the NFSv3 WCC data, returned by the
       three permissible NFSv3 operations, and conveying it back to
       the metadata server as part of NFSv4.2 attributes. The metadata
       server <span class="bcp14">MAY</span> therefore avoid issuing costly NFSv3
       GETATTR calls to the data servers. Because this approach relies
       on a weak model, the metadata server <span class="bcp14">MAY</span> still
       perform these calls if it chooses to strengthen the model.<a href="#section-2-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="op_LAYOUT_WCC">
<section id="section-3">
      <h2 id="name-operation-77-layout_wcc-lay">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-operation-77-layout_wcc-lay" class="section-name selfRef">Operation 77: LAYOUT_WCC - Layout Weak Cache Consistency</a>
      </h2>
<div id="ss_op_LAYOUT_WCC_A">
<section id="section-3.1">
        <h3 id="name-argument">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-argument" class="section-name selfRef">ARGUMENT</a>
        </h3>
<div class="lang-xdr sourcecode" id="section-3.1-1">
<pre>&lt;CODE BEGINS&gt;
/// struct LAYOUT_WCC4args {
///         stateid4        lowa_stateid;
///         layouttype4     lowa_type;
///         opaque          lowa_body&lt;&gt;;
/// };

&lt;CODE ENDS&gt;</pre><a href="#section-3.1-1" class="pilcrow">¶</a>
</div>
<p id="section-3.1-2">
     stateid4 is defined in <span><a href="https://rfc-editor.org/rfc/rfc8881#section-3.3.12" class="relref">Section 3.3.12</a> of [<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>.  layouttype4 is defined in <span><a href="https://rfc-editor.org/rfc/rfc8881#section-3.3.13" class="relref">Section 3.3.13</a> of [<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ss_op_LAYOUT_WCC_R">
<section id="section-3.2">
        <h3 id="name-result">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-result" class="section-name selfRef">RESULT</a>
        </h3>
<div class="lang-xdr sourcecode" id="section-3.2-1">
<pre>&lt;CODE BEGINS&gt;
/// struct LAYOUT_WCC4res {
///         nfsstat4                lowr_status;
/// };

&lt;CODE ENDS&gt;</pre><a href="#section-3.2-1" class="pilcrow">¶</a>
</div>
<p id="section-3.2-2">
     nfsstat4 is defined in <span><a href="https://rfc-editor.org/rfc/rfc8881#section-3.2" class="relref">Section 3.2</a> of [<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ss_op_LAYOUT_WCC_D">
<section id="section-3.3">
        <h3 id="name-description">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-description" class="section-name selfRef">DESCRIPTION</a>
        </h3>
<p id="section-3.3-1">
       The current filehandle and the lowa_stateid identify the specific
       layout for the LAYOUT_WCC operation. The lowa_type indicates how
       to interpret the layout-type-specific payload contained in the
       lowa_body field. The lowa_type is the corresponding value
       from the "pNFS Layout Types" IANA registry for the layout
       type being used.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">
       The lowa_body contains the data file attributes. The client is
       responsible for mapping NFSv3 post-operation attributes to the
       fattr4 representation. Similar to the behavior of post-operation
       attributes, the client may ignore these attributes, and the
       server may also choose to ignore any attributes included in
       LAYOUT_WCC. However, the server can use these attributes to avoid
       querying the data server for data file attributes. Because these
       attributes are optional and the client has no recourse if the
       server opts to disregard them, there is no requirement to return
       a bitmap4 indicating which attributes have been accepted in the
       LAYOUT_WCC result.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ss_op_LAYOUT_WCC_impl">
<section id="section-3.4">
        <h3 id="name-implementation">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-implementation" class="section-name selfRef">Implementation</a>
        </h3>
<div id="ss_op_LAYOUT_WCC_examples">
<section id="section-3.4.1">
          <h4 id="name-examples-of-when-to-use-lay">
<a href="#section-3.4.1" class="section-number selfRef">3.4.1. </a><a href="#name-examples-of-when-to-use-lay" class="section-name selfRef">Examples of When to Use LAYOUT_WCC</a>
          </h4>
<p id="section-3.4.1-1">
         The only way for the metadata server to detect modifications
         to the data file is to probe the data servers via a GETATTR. It
         can compare the mtime results across multiple calls to detect an
         NFSv3 WRITE operation by the client. Likewise, the atime results
         indicate the client having issued an NFSv3 READ operation. As such,
         the client can leverage the LAYOUT_WCC operation whenever it
         has the belief that the metadata server would need to refresh
         the attributes of the data files.  While the client can send a
         LAYOUT_WCC at any time, there are times it will want to do this
         operation in order to avoid having the metadata server issue
         NFSv3 GETATTR requests to the data servers:<a href="#section-3.4.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.4.1-2.1">
              <p id="section-3.4.1-2.1.1">Whenever it sends a GETATTR for any of the following attributes:<a href="#section-3.4.1-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.4.1-2.1.2.1">size (see <span><a href="https://rfc-editor.org/rfc/rfc8881#section-5.8.1.5" class="relref">Section 5.8.1.5</a> of [<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>)<a href="#section-3.4.1-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-3.4.1-2.1.2.2">space_used (see <span><a href="https://rfc-editor.org/rfc/rfc8881#section-5.8.2.35" class="relref">Section 5.8.2.35</a> of [<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>)<a href="#section-3.4.1-2.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-3.4.1-2.1.2.3">change (see <span><a href="https://rfc-editor.org/rfc/rfc8881#section-5.8.1.4" class="relref">Section 5.8.1.4</a> of [<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>)<a href="#section-3.4.1-2.1.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-3.4.1-2.1.2.4">time_access (see <span><a href="https://rfc-editor.org/rfc/rfc8881#section-5.8.2.37" class="relref">Section 5.8.2.37</a> of [<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>)<a href="#section-3.4.1-2.1.2.4" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-3.4.1-2.1.2.5">time_metadata (see <span><a href="https://rfc-editor.org/rfc/rfc8881#section-5.8.2.42" class="relref">Section 5.8.2.42</a> of [<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>)<a href="#section-3.4.1-2.1.2.5" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-3.4.1-2.1.2.6">time_modify (see
           <span><a href="https://rfc-editor.org/rfc/rfc8881#section-5.8.2.43" class="relref">Section 5.8.2.43</a> of [<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>)<a href="#section-3.4.1-2.1.2.6" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-3.4.1-2.2">
           Whenever it sends an NFS4ERR_ACCESS error via LAYOUTRETURN or LAYOUTERROR. It could
           have already gotten the NFSv3 uid and gid values back in the WCC of the WRITE,
           READ, or COMMIT operation that got the error. Thus, it could report that information
           back to the metadata server, saving it from querying that information via an NFSv3 GETATTR.<a href="#section-3.4.1-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.4.1-2.3">
           Whenever it sends a SETATTR to refresh the proxied times (see <span><a href="https://rfc-editor.org/rfc/rfc9754#section-5" class="relref">Section 5</a> of [<a href="#RFC9754" class="cite xref">RFC9754</a>]</span>). The metadata server will
           correlate these times in order to detect later modification to
           the data file.<a href="#section-3.4.1-2.3" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="ss_op_LAYOUT_WCC_payload">
<section id="section-3.4.2">
          <h4 id="name-examples-of-what-to-send-in">
<a href="#section-3.4.2" class="section-number selfRef">3.4.2. </a><a href="#name-examples-of-what-to-send-in" class="section-name selfRef">Examples of What to Send in LAYOUT_WCC</a>
          </h4>
<p id="section-3.4.2-1">
         The NFSv3 attributes returned in the WCC of WRITE, READ, and COMMIT operations are a smaller subset
         of what can be transmitted as an NFSv4 attribute. The mapping of NFSv3 to NFSv4 attributes
         is shown in <a href="#table_mappings" class="auto internal xref">Table 1</a>.
         The LAYOUT_WCC <span class="bcp14">MUST</span> provide all of these attributes to the metadata server.
         Both the uid and gid are stringified into their respective attributes of owner and owner_group.
         In the case of NFS4ERR_ACCESS, the reason to provide these two attributes is that the metadata
         server can compare what it expects the values of the uid and gid of the data file
         to be versus the actual values. It can then repair the permissions as needed or
         modify the expected values it has cached.<a href="#section-3.4.2-1" class="pilcrow">¶</a></p>
<span id="name-nfsv3-to-nfsv42-attribute-m"></span><div id="table_mappings">
<table class="center" id="table-1">
            <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-nfsv3-to-nfsv42-attribute-m" class="selfRef">NFSv3 to NFSv4.2 Attribute Mappings</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">NFSv3 Attribute</th>
                <th class="text-left" rowspan="1" colspan="1">NFSv4.2 Attribute</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">size</td>
                <td class="text-left" rowspan="1" colspan="1">size</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">used</td>
                <td class="text-left" rowspan="1" colspan="1">space_used</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">mode</td>
                <td class="text-left" rowspan="1" colspan="1">mode</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">uid</td>
                <td class="text-left" rowspan="1" colspan="1">owner</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">gid</td>
                <td class="text-left" rowspan="1" colspan="1">owner_group</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">atime</td>
                <td class="text-left" rowspan="1" colspan="1">time_access</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">mtime</td>
                <td class="text-left" rowspan="1" colspan="1">time_modify</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">ctime</td>
                <td class="text-left" rowspan="1" colspan="1">time_metadata</td>
              </tr>
            </tbody>
          </table>
</div>
</section>
</div>
</section>
</div>
<div id="ss_op_LAYOUT_WCC_errs">
<section id="section-3.5">
        <h3 id="name-allowed-errors">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-allowed-errors" class="section-name selfRef">Allowed Errors</a>
        </h3>
<p id="section-3.5-1">
      The LAYOUT_WCC operation can raise the errors listed in <a href="#tbl_op_error_returns" class="auto internal xref">Table 2</a>.  When an error is
      encountered, the metadata server can decide to ignore the entire
      operation, or depending on the layout-type-specific payload, it could
      decide to apply a portion of the payload.  Note that there are no new
      errors introduced for the LAYOUT_WCC operation and the errors in <a href="#tbl_op_error_returns" class="auto internal xref">Table 2</a> are each defined in
      <span><a href="https://rfc-editor.org/rfc/rfc8881#section-15.1" class="relref">Section 15.1</a> of [<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>. <a href="#tbl_op_error_returns" class="auto internal xref">Table 2</a> can be considered as an
      extension of <span><a href="https://rfc-editor.org/rfc/rfc8881#section-15.2" class="relref">Section 15.2</a> of [<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>.<a href="#section-3.5-1" class="pilcrow">¶</a></p>
<span id="name-operations-and-their-valid-"></span><div id="tbl_op_error_returns">
<table class="center" id="table-2">
          <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-operations-and-their-valid-" class="selfRef">Operations and Their Valid Errors</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Operation</th>
              <th class="text-left" rowspan="1" colspan="1">Errors</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
        LAYOUT_WCC
           </td>
              <td class="text-left" rowspan="1" colspan="1">
        NFS4ERR_ADMIN_REVOKED,
        NFS4ERR_BADXDR,
        NFS4ERR_BAD_STATEID,
        NFS4ERR_DEADSESSION,
        NFS4ERR_DELAY,
        NFS4ERR_DELEG_REVOKED,
        NFS4ERR_EXPIRED,
        NFS4ERR_FHEXPIRED,
        NFS4ERR_GRACE,
        NFS4ERR_INVAL,
        NFS4ERR_ISDIR,
        NFS4ERR_MOVED,
        NFS4ERR_NOFILEHANDLE,
        NFS4ERR_NOTSUPP,
        NFS4ERR_NO_GRACE,
        NFS4ERR_OLD_STATEID,
        NFS4ERR_OP_NOT_IN_SESSION,
        NFS4ERR_REP_TOO_BIG,
        NFS4ERR_REP_TOO_BIG_TO_CACHE,
        NFS4ERR_REQ_TOO_BIG,
        NFS4ERR_RETRY_UNCACHED_REP,
        NFS4ERR_SERVERFAULT,
        NFS4ERR_STALE,
        NFS4ERR_TOO_MANY_OPS,
        NFS4ERR_UNKNOWN_LAYOUTTYPE,
        NFS4ERR_WRONG_CRED,
        NFS4ERR_WRONG_TYPE
          </td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="ss_op_LAYOUT_WCC_opt">
<section id="section-3.6">
        <h3 id="name-extension-of-existing-imple">
<a href="#section-3.6" class="section-number selfRef">3.6. </a><a href="#name-extension-of-existing-imple" class="section-name selfRef">Extension of Existing Implementations</a>
        </h3>
<p id="section-3.6-1">
      The new LAYOUT_WCC operation is <span class="bcp14">OPTIONAL</span> for both
      NFSv4.2 <span>[<a href="#RFC7863" class="cite xref">RFC7863</a>]</span>
      and the flexible file layout type <span>[<a href="#RFC8435" class="cite xref">RFC8435</a>]</span>.<a href="#section-3.6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ss_op_LAYOUT_WCC_ff">
<section id="section-3.7">
        <h3 id="name-flexible-file-layout-type">
<a href="#section-3.7" class="section-number selfRef">3.7. </a><a href="#name-flexible-file-layout-type" class="section-name selfRef">Flexible File Layout Type</a>
        </h3>
<div class="lang-xdr sourcecode" id="section-3.7-1">
<pre>&lt;CODE BEGINS&gt;
/// struct ff_data_server_wcc4 {
///             deviceid4            ffdsw_deviceid;
///             stateid4             ffdsw_stateid;
///             nfs_fh4              ffdsw_fh_vers&lt;&gt;;
///             fattr4               ffdsw_attributes;
/// };
///
/// struct ff_mirror_wcc4 {
///             ff_data_server_wcc4  ffmw_data_servers&lt;&gt;;
/// };
///
/// struct ff_layout_wcc4 {
///             ff_mirror_wcc4       fflw_mirrors&lt;&gt;;
/// };

&lt;CODE ENDS&gt;</pre><a href="#section-3.7-1" class="pilcrow">¶</a>
</div>
<p id="section-3.7-2">
      The results specific to the flexible file layout type <span class="bcp14">MUST</span>
      correspond to the ff_layout4 data structure as defined in <span><a href="https://rfc-editor.org/rfc/rfc8435#section-5.1" class="relref">Section 5.1</a> of [<a href="#RFC8435" class="cite xref">RFC8435</a>]</span>.  There
      <span class="bcp14">MUST</span> be a one-to-one correspondence between the following:<a href="#section-3.7-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.7-3.1">
        ff_data_server4 -&gt; ff_data_server_wcc4<a href="#section-3.7-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.7-3.2">
        ff_mirror4 -&gt; ff_mirror_wcc4<a href="#section-3.7-3.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.7-3.3">
        ff_layout4 -&gt; ff_layout_wcc4<a href="#section-3.7-3.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-3.7-4">
      Each ff_layout4 has an array of ff_mirror4, which has an array of ff_data_server4.
      Based on the current filehandle and the lowa_stateid, the server can match the
      reported attributes.<a href="#section-3.7-4" class="pilcrow">¶</a></p>
<p id="section-3.7-5">
      But the positional correspondence between the elements is not
      sufficient to determine the attributes to update. Consider the
      case where a layout has three mirrors and two of them have updated
      attributes but the third does not. A client could decide to present
      all three mirrors, with one mirror having an attribute mask with
      no attributes present. Or it could decide to present only the
      two mirrors that had been changed.<a href="#section-3.7-5" class="pilcrow">¶</a></p>
<p id="section-3.7-6">
      In either case, the combination of ffdsw_deviceid, ffdsw_stateid, and
      ffdsw_fh_vers will uniquely identify the attributes to be updated.
      All three arguments are required. A layout might have multiple data
      files on the same storage device, in which case the ffdsw_deviceid and
      ffdsw_stateid would match, but the ffdsw_fh_vers would not.<a href="#section-3.7-6" class="pilcrow">¶</a></p>
<p id="section-3.7-7">


      The ffdsw_attributes are processed similar to the obj_attributes in
      the SETATTR arguments (see <span><a href="https://rfc-editor.org/rfc/rfc8881#section-18.30" class="relref">Section 18.30</a> of [<a href="#RFC8881" class="cite xref">RFC8881</a>]</span>).<a href="#section-3.7-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="xdr_desc">
<section id="section-4">
      <h2 id="name-extraction-of-xdr">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-extraction-of-xdr" class="section-name selfRef">Extraction of XDR</a>
      </h2>
<p id="section-4-1">
    This document contains the XDR
    <span>[<a href="#RFC4506" class="cite xref">RFC4506</a>]</span> description of the new NFSv4.2 operation LAYOUT_WCC.
    The XDR description is embedded in this
    document in a way that makes it simple for the reader to extract
    into a ready-to-compile form.  The reader can feed this document
    into the following shell script to produce the machine-readable
    XDR description of the new NFSv4.2 operation LAYOUT_WCC.<a href="#section-4-1" class="pilcrow">¶</a></p>
<div class="lang-shell sourcecode" id="section-4-2">
<pre>&lt;CODE BEGINS&gt;
#!/bin/sh
grep '^ *///' $* | sed 's?^ */// ??' | sed 's?^ *///$??'

&lt;CODE ENDS&gt;</pre><a href="#section-4-2" class="pilcrow">¶</a>
</div>
<p id="section-4-3">
    That is, if the above script is stored in a file called 'extract.sh', and
    this document is in a file called 'spec.txt', then the reader can do:<a href="#section-4-3" class="pilcrow">¶</a></p>
<div class="lang-shell sourcecode" id="section-4-4">
<pre>&lt;CODE BEGINS&gt;
sh extract.sh &lt; spec.txt &gt; layout_wcc.x

&lt;CODE ENDS&gt;</pre><a href="#section-4-4" class="pilcrow">¶</a>
</div>
<p id="section-4-5">
    The effect of the script is to remove leading blank space from each
    line, plus a sentinel sequence of '///'.  XDR descriptions with the
    sentinel sequence are embedded throughout the document.<a href="#section-4-5" class="pilcrow">¶</a></p>
<p id="section-4-6">
    Note that the XDR code contained in this document depends on types
    from the NFSv4.2 nfs4_prot.x file (generated from <span>[<a href="#RFC7863" class="cite xref">RFC7863</a>]</span>).
    This includes both nfs types that end with a 4 (such as offset4 and
    length4) as well as more generic types (such as uint32_t and
    uint64_t).<a href="#section-4-6" class="pilcrow">¶</a></p>
<p id="section-4-7">
    While the XDR can be appended to that from <span>[<a href="#RFC7863" class="cite xref">RFC7863</a>]</span>,
    the various code snippets belong in their respective areas of
    that XDR.<a href="#section-4-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_security">
<section id="section-5">
      <h2 id="name-security-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-5-1">
    There are no new security considerations beyond those in
    <span>[<a href="#RFC8435" class="cite xref">RFC8435</a>]</span>.<a href="#section-5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_iana">
<section id="section-6">
      <h2 id="name-iana-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-6-1">This document has no IANA actions.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-7">
      <h2 id="name-references">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-7.1">
        <h3 id="name-normative-references">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4506">[RFC4506]</dt>
        <dd>
<span class="refAuthor">Eisler, M., Ed.</span>, <span class="refTitle">"XDR: External Data Representation Standard"</span>, <span class="seriesInfo">STD 67</span>, <span class="seriesInfo">RFC 4506</span>, <span class="seriesInfo">DOI 10.17487/RFC4506</span>, <time datetime="2006-05" class="refDate">May 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4506">https://www.rfc-editor.org/info/rfc4506</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7862">[RFC7862]</dt>
        <dd>
<span class="refAuthor">Haynes, T.</span>, <span class="refTitle">"Network File System (NFS) Version 4 Minor Version 2 Protocol"</span>, <span class="seriesInfo">RFC 7862</span>, <span class="seriesInfo">DOI 10.17487/RFC7862</span>, <time datetime="2016-11" class="refDate">November 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7862">https://www.rfc-editor.org/info/rfc7862</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7863">[RFC7863]</dt>
        <dd>
<span class="refAuthor">Haynes, T.</span>, <span class="refTitle">"Network File System (NFS) Version 4 Minor Version 2 External Data Representation Standard (XDR) Description"</span>, <span class="seriesInfo">RFC 7863</span>, <span class="seriesInfo">DOI 10.17487/RFC7863</span>, <time datetime="2016-11" class="refDate">November 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7863">https://www.rfc-editor.org/info/rfc7863</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8178">[RFC8178]</dt>
        <dd>
<span class="refAuthor">Noveck, D.</span>, <span class="refTitle">"Rules for NFSv4 Extensions and Minor Versions"</span>, <span class="seriesInfo">RFC 8178</span>, <span class="seriesInfo">DOI 10.17487/RFC8178</span>, <time datetime="2017-07" class="refDate">July 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8178">https://www.rfc-editor.org/info/rfc8178</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8434">[RFC8434]</dt>
        <dd>
<span class="refAuthor">Haynes, T.</span>, <span class="refTitle">"Requirements for Parallel NFS (pNFS) Layout Types"</span>, <span class="seriesInfo">RFC 8434</span>, <span class="seriesInfo">DOI 10.17487/RFC8434</span>, <time datetime="2018-08" class="refDate">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8434">https://www.rfc-editor.org/info/rfc8434</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8435">[RFC8435]</dt>
        <dd>
<span class="refAuthor">Halevy, B.</span> and <span class="refAuthor">T. Haynes</span>, <span class="refTitle">"Parallel NFS (pNFS) Flexible File Layout"</span>, <span class="seriesInfo">RFC 8435</span>, <span class="seriesInfo">DOI 10.17487/RFC8435</span>, <time datetime="2018-08" class="refDate">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8435">https://www.rfc-editor.org/info/rfc8435</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8881">[RFC8881]</dt>
        <dd>
<span class="refAuthor">Noveck, D., Ed.</span> and <span class="refAuthor">C. Lever</span>, <span class="refTitle">"Network File System (NFS) Version 4 Minor Version 1 Protocol"</span>, <span class="seriesInfo">RFC 8881</span>, <span class="seriesInfo">DOI 10.17487/RFC8881</span>, <time datetime="2020-08" class="refDate">August 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8881">https://www.rfc-editor.org/info/rfc8881</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9754">[RFC9754]</dt>
      <dd>
<span class="refAuthor">Haynes, T.</span> and <span class="refAuthor">T. Myklebust</span>, <span class="refTitle">"Extensions for Opening and Delegating Files in NFSv4.2"</span>, <span class="seriesInfo">RFC 9754</span>, <span class="seriesInfo">DOI 10.17487/RFC9754</span>, <time datetime="2025-03" class="refDate">March 2025</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9754">https://www.rfc-editor.org/info/rfc9754</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-7.2">
        <h3 id="name-informative-references">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC1813">[RFC1813]</dt>
      <dd>
<span class="refAuthor">Callaghan, B.</span>, <span class="refAuthor">Pawlowski, B.</span>, and <span class="refAuthor">P. Staubach</span>, <span class="refTitle">"NFS Version 3 Protocol Specification"</span>, <span class="seriesInfo">RFC 1813</span>, <span class="seriesInfo">DOI 10.17487/RFC1813</span>, <time datetime="1995-06" class="refDate">June 1995</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1813">https://www.rfc-editor.org/info/rfc1813</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<section id="appendix-A">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-A-1"><span class="contact-name">Dave Noveck</span>, <span class="contact-name">Tigran       Mkrtchyan</span>, and <span class="contact-name">Rick Macklem</span> provided reviews of
      the document.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
</section>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Thomas Haynes</span></div>
<div dir="auto" class="left"><span class="org">Hammerspace</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:loghyr@gmail.com" class="email">loghyr@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Trond Myklebust</span></div>
<div dir="auto" class="left"><span class="org">Hammerspace</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:trondmy@hammerspace.com" class="email">trondmy@hammerspace.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
