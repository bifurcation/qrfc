<!DOCTYPE html>
<html lang="en" class="RFC">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>RFC 9856: Multicast Source Redundancy in EVPNs</title>
<meta content="Jorge Rabadan" name="author">
<meta content="Jayant Kotalwar" name="author">
<meta content="Senthil Sathappan" name="author">
<meta content="Zhaohui Zhang" name="author">
<meta content="Wen Lin" name="author">
<meta content="
       In Ethernet Virtual Private Networks (EVPNs), IP multicast traffic
      replication and delivery play a crucial role in enabling efficient and
      scalable Layer 2 and Layer 3 services. A common deployment scenario
      involves redundant multicast sources that ensure high availability and
      resiliency. However, the presence of redundant sources can lead to
      duplicate IP multicast traffic in the network, causing inefficiencies
      and increased overhead. This document specifies extensions to the EVPN
      multicast procedures that allow for the suppression of duplicate IP
      multicast traffic from redundant sources. The proposed mechanisms
      enhance the EVPN's capability to deliver multicast traffic efficiently while
      maintaining high availability. These extensions are applicable to
      various EVPN deployment scenarios and provide guidelines to ensure
      consistent and predictable behavior across diverse network
      topologies. 
    " name="description">
<meta content="xml2rfc 3.30.2" name="generator">
<meta content="Warm standby" name="keyword">
<meta content="hot standby" name="keyword">
<meta content="OISM" name="keyword">
<meta content="redundant G-source" name="keyword">
<meta content="SFG" name="keyword">
<meta content="Single Flow Group" name="keyword">
<meta content="9856" name="rfc.number">
<!-- Generator version information:
  xml2rfc 3.30.2
    Python 3.9.15
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 5.3.0
    platformdirs 3.8.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    six 1.16.0
    wcwidth 0.2.5
    weasyprint 65.0
-->
<link href="rfc9856.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
@media print {
  svg {
    max-height: 850px;
    max-width: 660px;
  }
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}
.xref {
  overflow-wrap: normal;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    max-width: 100%;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.refSubseries {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: upper-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code, dt tt, dt code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > blockquote:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<link href="https://datatracker.ietf.org/doc/draft-ietf-bess-evpn-redundant-mcast-source-15" rel="prev">
  <link href="https://dx.doi.org/10.17487/rfc9856" rel="alternate">
  <link href="urn:issn:2070-1721" rel="alternate">
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9856</td>
<td class="center">EVPN Redundant Sources</td>
<td class="right">September 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">Rabadan, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a href="https://www.rfc-editor.org/rfc/rfc9856" class="eref">9856</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-09" class="published">September 2025</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">J. Rabadan, <span class="editor">Ed.</span>
</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">J. Kotalwar</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">S. Sathappan</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">Z. Zhang</div>
<div class="org">Juniper</div>
</div>
<div class="author">
      <div class="author-name">W. Lin</div>
<div class="org">Juniper</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9856</h1>
<h1 id="title">Multicast Source Redundancy in EVPNs</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">In Ethernet Virtual Private Networks (EVPNs), IP multicast traffic
      replication and delivery play a crucial role in enabling efficient and
      scalable Layer 2 and Layer 3 services. A common deployment scenario
      involves redundant multicast sources that ensure high availability and
      resiliency. However, the presence of redundant sources can lead to
      duplicate IP multicast traffic in the network, causing inefficiencies
      and increased overhead. This document specifies extensions to the EVPN
      multicast procedures that allow for the suppression of duplicate IP
      multicast traffic from redundant sources. The proposed mechanisms
      enhance the EVPN's capability to deliver multicast traffic efficiently while
      maintaining high availability. These extensions are applicable to
      various EVPN deployment scenarios and provide guidelines to ensure
      consistent and predictable behavior across diverse network
      topologies.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9856">https://www.rfc-editor.org/info/rfc9856</a></span>.<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-terminology" class="internal xref">Terminology</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1"><a href="#section-1.2" class="auto internal xref">1.2</a>.  <a href="#name-background-on-ip-multicast-" class="internal xref">Background on IP Multicast Delivery in EVPN Networks</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2.2.1">
                    <p id="section-toc.1-1.1.2.2.2.1.1" class="keepWithNext"><a href="#section-1.2.1" class="auto internal xref">1.2.1</a>.  <a href="#name-intra-subnet-ip-multicast-f" class="internal xref">Intra-Subnet IP Multicast Forwarding</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2.2.2">
                    <p id="section-toc.1-1.1.2.2.2.2.1" class="keepWithNext"><a href="#section-1.2.2" class="auto internal xref">1.2.2</a>.  <a href="#name-inter-subnet-ip-multicast-f" class="internal xref">Inter-Subnet IP Multicast Forwarding</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1"><a href="#section-1.3" class="auto internal xref">1.3</a>.  <a href="#name-multi-homed-ip-multicast-so" class="internal xref">Multi-Homed IP Multicast Sources in EVPN</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.4">
                <p id="section-toc.1-1.1.2.4.1"><a href="#section-1.4" class="auto internal xref">1.4</a>.  <a href="#name-the-need-for-redundant-ip-m" class="internal xref">The Need for Redundant IP Multicast Sources in EVPN</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-solution-overview" class="internal xref">Solution Overview</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="auto internal xref">2.1</a>.  <a href="#name-warm-standby-solution" class="internal xref">Warm Standby Solution</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="auto internal xref">2.2</a>.  <a href="#name-hot-standby-solution" class="internal xref">Hot Standby Solution</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="auto internal xref">2.3</a>.  <a href="#name-solution-selection" class="internal xref">Solution Selection</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="auto internal xref">2.4</a>.  <a href="#name-system-support" class="internal xref">System Support</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-bgp-evpn-extensions" class="internal xref">BGP EVPN Extensions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-single-flow-group-flag-in-t" class="internal xref">Single Flow Group Flag in the Multicast Flags Extended Community</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-esi-label-extended-communit" class="internal xref">ESI Label Extended Community in S-PMSI A-D Routes</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-warm-standby-ws-solution-fo" class="internal xref">Warm Standby (WS) Solution for Redundant G-Sources</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-specification" class="internal xref">Specification</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-warm-standby-example-in-an-" class="internal xref">Warm Standby Example in an OISM Network</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-warm-standby-example-in-a-s" class="internal xref">Warm Standby Example in a Single-BD Tenant Network</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-hot-standby-solution-for-re" class="internal xref">Hot Standby Solution for Redundant G-Sources</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-specification-2" class="internal xref">Specification</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-extensions-for-the-advertis" class="internal xref">Extensions for the Advertisement of DCB Labels</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-use-of-bfd-in-the-hs-soluti" class="internal xref">Use of BFD in the HS Solution</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="auto internal xref">5.4</a>.  <a href="#name-hot-standby-example-in-an-o" class="internal xref">Hot Standby Example in an OISM Network</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4.2.1">
                    <p id="section-toc.1-1.5.2.4.2.1.1"><a href="#section-5.4.1" class="auto internal xref">5.4.1</a>.  <a href="#name-multi-homed-redundant-g-sou" class="internal xref">Multi-Homed Redundant G-Sources</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4.2.2">
                    <p id="section-toc.1-1.5.2.4.2.2.1"><a href="#section-5.4.2" class="auto internal xref">5.4.2</a>.  <a href="#name-single-homed-redundant-g-so" class="internal xref">Single-Homed Redundant G-Sources</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.5">
                <p id="section-toc.1-1.5.2.5.1"><a href="#section-5.5" class="auto internal xref">5.5</a>.  <a href="#name-hot-standby-example-in-a-si" class="internal xref">Hot Standby Example in a Single-BD Tenant Network</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-contributors" class="internal xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="sect-1">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Ethernet Virtual Private Networks (EVPNs) <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>
      support both intra-subnet and inter-subnet IP multicast forwarding.
      <span>[<a href="#RFC9251" class="cite xref">RFC9251</a>]</span> outlines the procedures required to optimize
      the delivery of IP multicast flows when both sources and receivers are
      connected to the same EVPN Broadcast Domain. <span>[<a href="#RFC9625" class="cite xref">RFC9625</a>]</span>,
      on the other hand, defines the procedures for supporting inter-subnet IP
      multicast within a tenant network, where the IP multicast source and
      receivers of the same multicast flow are connected to different
      Broadcast Domains within the same tenant.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">However, <span>[<a href="#RFC9251" class="cite xref">RFC9251</a>]</span>, <span>[<a href="#RFC9625" class="cite xref">RFC9625</a>]</span>, and
      conventional IP multicast techniques do not provide a solution for
      scenarios where:<a href="#section-1-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-1-3">
<li id="section-1-3.1">
          <p id="section-1-3.1.1">A given multicast group carries multiple flows (i.e., multiple
          sources are active), and<a href="#section-1-3.1.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-1-3.2">
          <p id="section-1-3.2.1">Each receiver should receive only from one source.<a href="#section-1-3.2.1" class="pilcrow">¶</a></p>
</li>
      </ol>
<p id="section-1-4">Existing multicast solutions typically assume that there are no
      redundant sources sending identical flows to the same IP multicast
      group. In cases where redundant sources do exist, the receiver
      application is expected to handle duplicate packets.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">In conventional IP multicast networks, such as those running Protocol
      Independent Multicast (PIM) <span>[<a href="#RFC7761" class="cite xref">RFC7761</a>]</span> or Multicast Virtual Private Network
      (MVPN) <span>[<a href="#RFC6513" class="cite xref">RFC6513</a>]</span>, a workaround is to configure all
      redundant sources with the same IP address. This approach ensures that
      each receiver gets only one flow because:<a href="#section-1-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-6.1">
          <p id="section-1-6.1.1">The Rendezvous Point (RP) in the multicast network always creates
          the (S,G) state for each source.<a href="#section-1-6.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-6.2">
          <p id="section-1-6.2.1">The Last Hop Router (LHR) may also create the (S,G) state.<a href="#section-1-6.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-6.3">
          <p id="section-1-6.3.1">The (S,G) state binds the flow to a source-specific tree rooted
          at the source IP address. When multiple sources share the same IP
          address, the resulting source-specific trees ensure that each LHR or
          RP resides on at most one tree.<a href="#section-1-6.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-1-7">This workaround, which often uses anycast addresses, is suitable for
      Warm Standby (WS) redundancy solutions (<a href="#sect-4" class="auto internal xref">Section 4</a>). However, it
      is not effective for Hot Standby (HS) redundancy scenarios (<a href="#sect-5" class="auto internal xref">Section 5</a>), and it introduces challenges when sources need to be
      reachable via IP unicast or when multiple sources with the same IP
      address are attached to the same Broadcast Domain. In scenarios where
      multiple multicast sources stream traffic to the same group using EVPN
      Optimized Inter-Subnet Multicast (OISM), there is not necessarily any
      (S,G) state created for the redundant sources. In such cases, the Last Hop Routers may only have a (*,G) state, and there may not be an RP router to create an (S,G) state.<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">This document extends <span>[<a href="#RFC9251" class="cite xref">RFC9251</a>]</span> and <span>[<a href="#RFC9625" class="cite xref">RFC9625</a>]</span> to address scenarios where IP multicast source
      redundancy exists. Specifically, it defines procedures for EVPN Provider Edge (PE)
      devices/routers to ensure that receivers do not
      experience packet duplication when two or more sources send identical IP
      multicast flows into the tenant domain. These procedures are limited to
      the context of <span>[<a href="#RFC9251" class="cite xref">RFC9251</a>]</span> and <span>[<a href="#RFC9625" class="cite xref">RFC9625</a>]</span>;
      handling redundant sources in other multicast solutions is beyond the
      scope of this document.<a href="#section-1-8" class="pilcrow">¶</a></p>
<div id="sect-1.1">
<section id="section-1.1">
        <h3 id="name-terminology">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
        </h3>
<p id="section-1.1-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>",
        "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>",
        "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
        "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document
        are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
        appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.1-2">
          <dt id="section-1.1-2.1">BD:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.2">Broadcast Domain. An emulated Ethernet, such that two
          systems on the same BD will receive each other's link-local
          broadcasts. In this document, "BD" also refers to the instantiation of
          a Broadcast Domain on an EVPN PE. An EVPN PE can be attached to one
          or multiple BDs of the same tenant.<a href="#section-1.1-2.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.3">BUM:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.4">Broadcast, Unknown Unicast, and Multicast traffic.<a href="#section-1.1-2.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.5">DF:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.6">Designated Forwarder. As defined in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>, an Ethernet Segment (ES) may be
          multi-homed (attached to more than one PE). An ES may
          also contain multiple BDs of one or more EVIs. For each such EVI,
          one of the PEs attached to the segment becomes that EVI's DF for
          that segment. Since a BD may belong to only one EVI, we can speak
          unambiguously of the BD's DF for a given segment.<a href="#section-1.1-2.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.7">Downstream PE:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.8">In this document, a downstream PE is
          referred to as the EVPN PE that is connected to the IP Multicast
          receivers and gets the IP Multicast flows from remote EVPN PEs.<a href="#section-1.1-2.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.9">EVI:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.10">EVPN Instance.<a href="#section-1.1-2.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.11">G-traffic:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.12">Any frame with an IP payload whose destination IP
          address is a multicast group G.<a href="#section-1.1-2.12" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.13">G-source:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.14">Any system sourcing IP multicast traffic to
          group G.<a href="#section-1.1-2.14" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.15">Hot Standby Redundancy:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.16">The multicast source redundancy
          procedure defined in this document, by which the upstream PEs
          forward the redundant multicast flows to the downstream PEs, and the
          downstream PEs make sure only one flow is forwarded to the
          interested attached receivers.<a href="#section-1.1-2.16" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.17">IGMP:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.18">Internet Group Management Protocol <span>[<a href="#RFC9776" class="cite xref">RFC9776</a>]</span>.<a href="#section-1.1-2.18" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.19">I-PMSI:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.20">Inclusive Multicast Tree or Inclusive Provider Multicast Service Interface. While defined in <span>[<a href="#RFC6513" class="cite xref">RFC6513</a>]</span>, in this document it is only applicable to EVPN
          and refers to the default multicast tree for a given BD. All the
          EVPN PEs that are attached to a specific BD belong to the I-PMSI for
          the BD. The I-PMSI trees are signaled by EVPN Inclusive Multicast
          Ethernet Tag (IMET) routes.<a href="#section-1.1-2.20" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.21">IMET route:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.22">EVPN Inclusive Multicast Ethernet Tag route,
          as in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>.<a href="#section-1.1-2.22" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.23">MLD:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.24">Multicast Listener Discovery <span>[<a href="#RFC9777" class="cite xref">RFC9777</a>]</span>.<a href="#section-1.1-2.24" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.25">MVPN:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.26">Multicast Virtual Private Networks, as in <span>[<a href="#RFC6513" class="cite xref">RFC6513</a>]</span>.<a href="#section-1.1-2.26" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.27">OISM:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.28">Optimized Inter-Subnet Multicast, as in <span>[<a href="#RFC9625" class="cite xref">RFC9625</a>]</span>.<a href="#section-1.1-2.28" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.29">PE:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.30">Provider Edge.<a href="#section-1.1-2.30" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.31">PIM:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.32">Protocol Independent Multicast, as in <span>[<a href="#RFC7761" class="cite xref">RFC7761</a>]</span>.<a href="#section-1.1-2.32" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.33">P-tunnel:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.34">The term "Provider tunnel" refers to the type
          of tree employed by an upstream EVPN PE to forward multicast traffic
          to downstream PEs. The P-tunnels supported in this document include
          Ingress Replication (IR), Assisted Replication (AR) <span>[<a href="#RFC9574" class="cite xref">RFC9574</a>]</span>, Bit Indexed Explicit
          Replication (BIER) <span>[<a href="#RFC8296" class="cite xref">RFC8296</a>]</span>,
          multicast Label Distribution Protocol (mLDP), and
          Point-to-Multipoint (P2MP) RSVP - Traffic Engineering (RSVP-TE)
          extensions.<a href="#section-1.1-2.34" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.35">Redundant G-source:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.36">A host or router transmitting a
          Single Flow Group (SFG) within a tenant network, where multiple
          hosts or routers are also transmitting the same SFG. Redundant
          G-sources transmitting the same SFG should have distinct IP
          addresses; however, they may share the same IP address if located in
          different Broadcast Domains (BDs) within the same tenant network.
          For the purposes of this document, redundant G-sources are assumed
          to not exhibit "bursty" traffic behavior.<a href="#section-1.1-2.36" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.37">S-ES and S-ESI:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.38">Multicast Source Ethernet Segment and
          multicast Source Ethernet Segment Identifier. The ES
          and ESI associated to a G-source.<a href="#section-1.1-2.38" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.39">S-PMSI:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.40">
            <p id="section-1.1-2.40.1">Selective Multicast Tree or Selective Provider Multicast Service Interface. As defined in <span>[<a href="#RFC6513" class="cite xref">RFC6513</a>]</span>, this term refers to a multicast tree to which
          only the PEs interested in a specific Broadcast Domain
          belong. In the context of this document, it is specific to EVPN.
          Two types of EVPN S-PMSIs are supported:<a href="#section-1.1-2.40.1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.1-2.40.2">
              <dt id="section-1.1-2.40.2.1">S-PMSIs with Auto-Discovery routes:</dt>
              <dd style="margin-left: 1.5em" id="section-1.1-2.40.2.2">These S-PMSIs
              require the upstream PE to advertise S-PMSI Auto-Discovery 
              (S-PMSI A-D) routes, as described in <span>[<a href="#RFC9572" class="cite xref">RFC9572</a>]</span>.  Downstream PEs interested in the multicast
              traffic join the S-PMSI tree following the procedures specified
              in <span>[<a href="#RFC9572" class="cite xref">RFC9572</a>]</span>.<a href="#section-1.1-2.40.2.2" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-1.1-2.40.2.3">S-PMSIs without Auto-Discovery Routes:</dt>
              <dd style="margin-left: 1.5em" id="section-1.1-2.40.2.4">These S-PMSIs
              do not require the advertisement of S-PMSI A-D routes. Instead,
              they rely on the forwarding information provided by 
              IMET routes. Upstream PEs forward IP
              multicast flows only to downstream PEs that advertise
              Selective Multicast Ethernet Tag (SMET) routes for the specific
              flow. These S-PMSIs are supported exclusively with the following
              P-tunnel types: IR, AR, and BIER.<a href="#section-1.1-2.40.2.4" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
</dl>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.41">SFG:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.42">
            <p id="section-1.1-2.42.1">Single Flow Group. A multicast group that
          represents traffic containing a single flow. Multiple sources, which
          may have the same or different IP addresses, can transmit traffic
          for an SFG. An SFG can be represented in two forms:<a href="#section-1.1-2.42.1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.1-2.42.2">
              <dt id="section-1.1-2.42.2.1">(*,G):</dt>
              <dd style="margin-left: 1.5em" id="section-1.1-2.42.2.2">Indicates that any source transmitting
              multicast traffic to group G is considered a redundant G-source
              for the SFG.<a href="#section-1.1-2.42.2.2" class="pilcrow">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-1.1-2.42.2.3">(S,G):</dt>
              <dd style="margin-left: 1.5em" id="section-1.1-2.42.2.4">Indicates that S is a prefix of any
              length. In this representation, a source is deemed a redundant
              G-source for the SFG if its address matches the specified prefix
              S.<a href="#section-1.1-2.42.2.4" class="pilcrow">¶</a>
</dd>
            <dd class="break"></dd>
</dl>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.43">SMET route:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.44">Selective Multicast Ethernet Tag route, as
          in <span>[<a href="#RFC9251" class="cite xref">RFC9251</a>]</span>.<a href="#section-1.1-2.44" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.45">(S,G) and (*,G):</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.46">Used to describe multicast packets or
          multicast state. "S" stands for Source (IP address of the multicast
          traffic), and "G" stands for the Group or multicast destination IP
          address of the group. An (S,G) multicast packet refers to an IP
          packet with source IP address "S" and destination IP address "G",
          and it is forwarded on a multicast router if there is a
          corresponding state for (S,G). A (*,G) multicast packet refers to an
          IP packet with "any" source IP address and a destination IP address
          "G", and it is forwarded on a multicast router based on the
          existence of the corresponding (*,G) state. The document uses
          variations of these terms. For example, (S1,G1) represents the
          multicast packets or multicast state for source IP address "S1" and
          group IP address "G1".<a href="#section-1.1-2.46" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.47">Upstream PE:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.48">In this document, an upstream PE refers to
          either the EVPN PE that is directly connected to the IP multicast
          source or the PE closest to the source. The upstream PE receives
          IP multicast flows through local Attachment Circuits (ACs).<a href="#section-1.1-2.48" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.49">Warm Standby Redundancy:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.50">A multicast source redundancy
          mechanism defined in this document, wherein the upstream PEs
          connected to redundant sources within the same tenant ensure that
          only one source of a given flow transmits multicast traffic to the
          interested downstream PEs at any given time.<a href="#section-1.1-2.50" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-1.1-3">This document also assumes familiarity with the terminology of
        <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>, <span>[<a href="#RFC4364" class="cite xref">RFC4364</a>]</span>, <span>[<a href="#RFC6513" class="cite xref">RFC6513</a>]</span>, <span>[<a href="#RFC6514" class="cite xref">RFC6514</a>]</span>, <span>[<a href="#RFC9251" class="cite xref">RFC9251</a>]</span>, <span>[<a href="#RFC9625" class="cite xref">RFC9625</a>]</span>, <span>[<a href="#RFC9136" class="cite xref">RFC9136</a>]</span>, and <span>[<a href="#RFC9572" class="cite xref">RFC9572</a>]</span>.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-1.2">
<section id="section-1.2">
        <h3 id="name-background-on-ip-multicast-">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-background-on-ip-multicast-" class="section-name selfRef">Background on IP Multicast Delivery in EVPN Networks</a>
        </h3>
<p id="section-1.2-1">IP multicast facilitates the delivery of a single copy of a packet
        from a source (S) to a group of receivers (G) along a multicast tree.
        In an EVPN tenant domain, the multicast tree can be constructed where
        the source (S) and the receivers for the multicast group (G) are
        either connected to the same Broadcast Domain (BD) or to different Broadcast Domains. 
        The former scenario is referred to as "Intra-subnet
        IP Multicast forwarding", while the latter is referred to as
        "Inter-subnet IP Multicast forwarding".<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<div id="sect-1.2.1">
<section id="section-1.2.1">
          <h4 id="name-intra-subnet-ip-multicast-f">
<a href="#section-1.2.1" class="section-number selfRef">1.2.1. </a><a href="#name-intra-subnet-ip-multicast-f" class="section-name selfRef">Intra-Subnet IP Multicast Forwarding</a>
          </h4>
<p id="section-1.2.1-1">When the source S1 and the receivers interested in G1 are
          connected to the same Broadcast Domain, the EVPN network can
          deliver IP multicast traffic to the receivers using two different
          approaches, as illustrated in <a href="#ure-intra-subnet-ip-multicast" class="auto internal xref">Figure 1</a>:<a href="#section-1.2.1-1" class="pilcrow">¶</a></p>
<span id="name-intra-subnet-ip-multicast"></span><div id="ure-intra-subnet-ip-multicast">
<figure id="figure-1">
            <div class="alignLeft art-text artwork" id="section-1.2.1-2.1">
<pre>
                  S1  +                        S1  +
        (a)       +   |              (b)       +   |
                  |   | (S1,G1)                |   | (S1,G1)
              PE1 |   |                    PE1 |   |
              +-----+ v                    +-----+ v
              |+---+|                      |+---+|
              ||BD1||                      ||BD1||
              |+---+|                      |+---+|
              +-----+                      +-----+
         +-------|-------+            +-------|
         |       |       |            |       |
         v       v       v            v       v
      +-----+ +-----+ +-----+      +-----+ +-----+ +-----+
      |+---+| |-----| |-----|      |+---+| |+---+| |+---+|
      ||BD1|| ||BD1|| ||BD1||      ||BD1|| ||BD1|| ||BD1||
      |+---+| |-----| |-----|      |+---+| |+---+| |+---+|
      +-----+ +-----+ +-----+      +-----+ +-----+ +-----+
      PE2|    PE3|    PE4|         PE2|    PE3|    PE4
       - | - - - | -     |          - | - - - | -
      |  |       |  |    |         |  |       |  |
         v       v       v            v       v
      |  R1      R2 |    R3        |  R1      R2 |    R3
       - - - G1- - -                - - - G1- - -
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-intra-subnet-ip-multicast" class="selfRef">Intra-Subnet IP Multicast</a>
            </figcaption></figure>
</div>
<span class="break"></span><dl class="dlParallel" id="section-1.2.1-3">
            <dt id="section-1.2.1-3.1">Model (a):</dt>
            <dd style="margin-left: 1.5em" id="section-1.2.1-3.2">
              <p id="section-1.2.1-3.2.1">IP Multicast Delivery as BUM Traffic<a href="#section-1.2.1-3.2.1" class="pilcrow">¶</a></p>
<p id="section-1.2.1-3.2.2">The upstream PE sends the IP Multicast flows to all
              downstream PEs, even to PEs with non-interested receivers, such
              as, e.g., PE4 in <a href="#ure-intra-subnet-ip-multicast" class="auto internal xref">Figure 1</a>. To optimize this behavior, downstream PEs
              can snoop IGMP/MLD messages from receivers to build Layer 2
              multicast state. For instance, PE4 could avoid forwarding
              (S1,G1) to R3, since R3 has not expressed interest in
              (S1,G1).<a href="#section-1.2.1-3.2.2" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-1.2.1-3.3">Model (b):</dt>
            <dd style="margin-left: 1.5em" id="section-1.2.1-3.4">
              <p id="section-1.2.1-3.4.1">Optimized Delivery with S-PMSI<a href="#section-1.2.1-3.4.1" class="pilcrow">¶</a></p>
<p id="section-1.2.1-3.4.2">Model (b) in <a href="#ure-intra-subnet-ip-multicast" class="auto internal xref">Figure 1</a> uses a "Selective Provider Multicast Service 
              Interface (S-PMSI)" to optimize the delivery of the (S1,G1)
              flow.<a href="#section-1.2.1-3.4.2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.2.1-3.4.3.1">For example, if PE1 uses "IR", it
                will forward (S1,G1) only to downstream PEs that have issued a
                "SMET" route for (S1,G1),
                such as PE2 and PE3.<a href="#section-1.2.1-3.4.3.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-1.2.1-3.4.3.2">If PE1 uses a P-tunnel type other than IR (e.g.,
                AR or BIER),
                PE1 will advertise an "S-PMSI Auto-Discovery (A-D)" route for
                (S1,G1). Downstream PEs, such as PE2 and PE3, will then join the
                corresponding multicast tree to receive the flow.<a href="#section-1.2.1-3.4.3.2" class="pilcrow">¶</a>
</li>
              </ul>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-1.2.1-4">Procedures for Model (b) are specified in <span>[<a href="#RFC9251" class="cite xref">RFC9251</a>]</span> and <span>[<a href="#RFC9572" class="cite xref">RFC9572</a>]</span>.<a href="#section-1.2.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-1.2.2">
<section id="section-1.2.2">
          <h4 id="name-inter-subnet-ip-multicast-f">
<a href="#section-1.2.2" class="section-number selfRef">1.2.2. </a><a href="#name-inter-subnet-ip-multicast-f" class="section-name selfRef">Inter-Subnet IP Multicast Forwarding</a>
          </h4>
<p id="section-1.2.2-1">When the sources and receivers are connected to different BDs
          within the same tenant domain, the EVPN network can deliver IP
          multicast traffic using either Inclusive or Selective Multicast
          Trees, as illustrated in <a href="#ure-inter-subnet-ip-multicast" class="auto internal xref">Figure 2</a> with models (a) and (b),
          respectively.<a href="#section-1.2.2-1" class="pilcrow">¶</a></p>
<span id="name-inter-subnet-ip-multicast"></span><div id="ure-inter-subnet-ip-multicast">
<figure id="figure-2">
            <div class="alignLeft art-text artwork" id="section-1.2.2-2.1">
<pre>
                  S1  +                     S1  +
        (a)       +   |              (b)    +   |
                  |   | (S1,G1)             |   | (S1,G1)
              PE1 |   |                 PE1 |   |
              +-----+ v                 +-----+ v
              |+---+|                   |+---+|
              ||BD1||                   ||BD1||
              |+---+|                   |+---+|
              +-----+                   +-----+
         +-------|-------+         +-------|
         |       |       |         |       |
         v       v       v         v       v
      +-----+ +-----+ +-----+   +-----+ +-----+ +-----+
      |+---+| |+---+| |+---+|   |+---+| |+---+| |+---+|
      ||SBD|| ||SBD|| ||SBD||   ||SBD|| ||SBD|| ||SBD||
      |+-|-+| |+-|-+| |+---+|   |+-|-+| |+-|-+| |+---+|
      | VRF | | VRF | | VRF |   | VRF | | VRF | | VRF |
      |+-v-+| |+-v-+| |+---+|   |+-v-+| |+-v-+| |+---+|
      ||BD2|| ||BD3|| ||BD4||   ||BD2|| ||BD3|| ||BD4||
      |+-|-+| |+-|-+| |+---+|   |+-|-+| |+-|-+| |+---+|
      +--|--+ +--|--+ +-----+   +--|--+ +--|--+ +-----+
      PE2|    PE3|    PE4       PE2|    PE3|    PE4
       - | - - - | -             - | - - - | -
      |  |       |  |           |  |       |  |
         v       v                 v       v
      |  R1      R2 |    R3     |  R1      R2 |    R3
       - - - G1- - -             - - - G1- - -
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-inter-subnet-ip-multicast" class="selfRef">Inter-Subnet IP Multicast</a>
            </figcaption></figure>
</div>
<p id="section-1.2.2-3">As defined in <span>[<a href="#RFC9625" class="cite xref">RFC9625</a>]</span>, inter-subnet multicast
          forwarding in EVPN is optimized by ensuring IP multicast flows are
          sent within the context of the source BD. If a downstream PE is not
          connected to the source BD, the IP multicast flow is delivered to
          the Supplementary Broadcast Domain (SBD), as shown in <a href="#ure-inter-subnet-ip-multicast" class="auto internal xref">Figure 2</a>.<a href="#section-1.2.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.2.2-4.1">
              <p id="section-1.2.2-4.1.1">Inclusive and Selective Multicast Trees<a href="#section-1.2.2-4.1.1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.2.2-4.1.2">
                <dt id="section-1.2.2-4.1.2.1">Model (a):</dt>
                <dd style="margin-left: 1.5em" id="section-1.2.2-4.1.2.2">
                  <p id="section-1.2.2-4.1.2.2.1"> Inclusive Multicast Tree<a href="#section-1.2.2-4.1.2.2.1" class="pilcrow">¶</a></p>
<p id="section-1.2.2-4.1.2.2.2">In this model, the Inclusive Multicast Tree for BD1 on
                  PE1 delivers (S1,G1) to all downstream PEs, such as PE2,
                  PE3, and PE4, in the context of the SBD. Each downstream PE
                  then locally routes the flow to its ACs,
                  ensuring delivery to interested receivers.<a href="#section-1.2.2-4.1.2.2.2" class="pilcrow">¶</a></p>
</dd>
                <dd class="break"></dd>
<dt id="section-1.2.2-4.1.2.3">Model (b):</dt>
                <dd style="margin-left: 1.5em" id="section-1.2.2-4.1.2.4">
                  <p id="section-1.2.2-4.1.2.4.1">Selective Multicast Tree<a href="#section-1.2.2-4.1.2.4.1" class="pilcrow">¶</a></p>
<p id="section-1.2.2-4.1.2.4.2">In this model, PE1 optimizes forwarding by delivering
                  (S1,G1) only to downstream PEs that explicitly indicate
                  interest in the flow via SMET
                  routes. If the P-tunnel type is "IR", "AR", or "BIER", PE1 does not need to advertise an
                  S-PMSI A-D route. Downstream PEs join the multicast tree
                  based on the SMET routes advertised for (S1,G1).<a href="#section-1.2.2-4.1.2.4.2" class="pilcrow">¶</a></p>
</dd>
              <dd class="break"></dd>
</dl>
</li>
            <li class="normal" id="section-1.2.2-4.2">
              <p id="section-1.2.2-4.2.1">Advantages of <span>[<a href="#RFC9625" class="cite xref">RFC9625</a>]</span><a href="#section-1.2.2-4.2.1" class="pilcrow">¶</a></p>
<p id="section-1.2.2-4.2.2"><span>[<a href="#RFC9625" class="cite xref">RFC9625</a>]</span> extends the
            procedures defined in <span>[<a href="#RFC9251" class="cite xref">RFC9251</a>]</span> to
            support both intra- and inter-subnet multicast forwarding for
            EVPN. It ensures that every upstream PE attached to a source is
            aware of all downstream PEs within the same tenant domain that
            have interest in specific flows. This is achieved through the
            advertisement of SMET routes with the SBD Route Target, which are
            imported by all upstream PEs.<a href="#section-1.2.2-4.2.2" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-1.2.2-4.3">
              <p id="section-1.2.2-4.3.1">Elimination of Complexity<a href="#section-1.2.2-4.3.1" class="pilcrow">¶</a></p>
<p id="section-1.2.2-4.3.2">The inter-subnet multicast mechanism defined in <span>[<a href="#RFC9625" class="cite xref">RFC9625</a>]</span> eliminates the need for:
            Rendezvous Points (RPs), shared trees, upstream multicast hop
            selection, or other complex conventional multicast routing
            techniques.<a href="#section-1.2.2-4.3.2" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-1.2.2-5">By leveraging the EVPN framework, inter-subnet multicast
          forwarding achieves efficient delivery without introducing
          unnecessary overhead or dependencies on classic IP multicast
          protocols.<a href="#section-1.2.2-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-1.3">
<section id="section-1.3">
        <h3 id="name-multi-homed-ip-multicast-so">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-multi-homed-ip-multicast-so" class="section-name selfRef">Multi-Homed IP Multicast Sources in EVPN</a>
        </h3>
<p id="section-1.3-1">Unlike conventional multicast routing technologies, multi-homed PEs
        connected to the same source do not create IP multicast packet
        duplication when utilizing a multi-homed ES. <a href="#ure-all-active-multi-homing-and-oism" class="auto internal xref">Figure 3</a> illustrates this
        scenario, where two multi-homed PEs (PE1 and PE2) are attached to the
        same source S1. The source S1 is connected via a Layer 2 switch (SW1)
        to an all-active ES (ES-1), with a Link Aggregation
        Group (LAG) extending to PE1 and PE2.<a href="#section-1.3-1" class="pilcrow">¶</a></p>
<span id="name-all-active-multi-homing-and"></span><div id="ure-all-active-multi-homing-and-oism">
<figure id="figure-3">
          <div class="alignLeft art-text artwork" id="section-1.3-2.1">
<pre>
                                  S1
                                  |
                                  v
                               +-----+
                               | SW1 |
                               +-----+
                         +----  |   |
                  (S1,G1)| +----+   +----+
      IGMP/MLD           | | all-active  |
      J(S1,G1)     PE1   v |    ES-1     |    PE2
      +----&gt;   +-----------|---+     +---|-----------+
               | +---+   +---+ |     | +---+         |
       R1  &lt;-----|BD2|   |BD1| |     | |BD1|         |
               | +---+---+---+ |     | +---+---+     |
          +----|     |VRF|  |  |     |     |VRF|     |----+
          |    | +---+---+  |  |     | +---+---+     |    |
          |    | |SBD|      |  |     | |SBD|         |    |
          |    | +---+      |  |     | +---+         |    |
          |    +------------|--+     +---------------+    |
          |                 |                             |
          |                 |                             |
          |                 |                             |
          |  EVPN           |               ^             |
          |  OISM           v    PE3        | SMET        |
          |              +---------------+  | (*,G1)      |
          |              | +---+         |  |             |
          |              | |SBD|         |                |
          |              | +---+---+     |                |
          +--------------|     |VRF|     |----------------+
                         | +---+---+---+ |
                         | |BD2|   |BD3| |
                         | +-|-+   +-|-+ |
                         +---|-------|---+
                         ^   |       |   ^
              IGMP/MLD   |   v       v   | IGMP/MLD
                 J(*,G1) |  R2       R3  | J(S1,G1)
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-all-active-multi-homing-and" class="selfRef">All-Active Multi-Homing and OISM</a>
          </figcaption></figure>
</div>
<p id="section-1.3-3">When S1 transmits the (S1,G1) flow, SW1 selects a single link
        within the all-active ES to forward the flow, as per
        <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>. In this example, assuming PE1 is the
        receiving PE for BD1, the multicast flow is forwarded
        once BD1 establishes multicast state for (S1,G1) or (*,G1). In <a href="#ure-all-active-multi-homing-and-oism" class="auto internal xref">Figure 3</a>:<a href="#section-1.3-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.3-4.1">
            <p id="section-1.3-4.1.1">Receiver R1 receives (S1,G1) directly via the IRB (Integrated
            Routing and Bridging) interface, defined in <span>[<a href="#RFC9135" class="cite xref">RFC9135</a>]</span>, following the procedures in <span>[<a href="#RFC9625" class="cite xref">RFC9625</a>]</span>.<a href="#section-1.3-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.3-4.2">
            <p id="section-1.3-4.2.1">Receivers R2 and R3, upon issuing IGMP/MLD reports, trigger PE3
            to advertise an SMET (*,G1) route. This creates multicast state in
            PE1's BD1, enabling PE1 to forward the multicast flow to PE3's
            SBD. PE3 subsequently delivers the flow to R2 and R3 as defined in
            <span>[<a href="#RFC9625" class="cite xref">RFC9625</a>]</span>.<a href="#section-1.3-4.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-1.3-5">Requirements for Multi-Homed IP Multicast Sources:<a href="#section-1.3-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.3-6.1">
            <p id="section-1.3-6.1.1">When IP multicast source multi-homing is needed, EVPN
            multi-homed ESes <span class="bcp14">MUST</span> be used.<a href="#section-1.3-6.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.3-6.2">
            <p id="section-1.3-6.2.1">EVPN multi-homing ensures that only one upstream PE forwards a
            given multicast flow at a time, preventing packet duplication at
            downstream PEs.<a href="#section-1.3-6.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.3-6.3">
            <p id="section-1.3-6.3.1">The SMET route for a multicast flow ensures that all upstream
            PEs in the multi-homed ES maintain state for the
            flow. This allows for immediate failover, as the backup PE can
            seamlessly take over forwarding in case of an upstream PE
            failure.<a href="#section-1.3-6.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-1.3-7">This document assumes that multi-homed PEs connected to the same
        source always utilize multi-homed ESes.<a href="#section-1.3-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-1.4">
<section id="section-1.4">
        <h3 id="name-the-need-for-redundant-ip-m">
<a href="#section-1.4" class="section-number selfRef">1.4. </a><a href="#name-the-need-for-redundant-ip-m" class="section-name selfRef">The Need for Redundant IP Multicast Sources in EVPN</a>
        </h3>
<p id="section-1.4-1">While multi-homing PEs to the same IP multicast G-source provides a
        certain level of resiliency, multicast applications are often critical
        in operator networks, necessitating a higher level of redundancy. This
        document assumes the following:<a href="#section-1.4-1" class="pilcrow">¶</a></p>
<ol start="1" type="a" class="normal type-a" id="section-1.4-2">
          <li id="section-1.4-2.1">Redundant G-sources: Redundant G-sources for an SFG may
          exist within the EVPN tenant network. A redundant G-source is
          defined as a host or router transmitting an SFG stream in a tenant
          network where another host or router is also sending traffic to the
          same SFG.<a href="#section-1.4-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-1.4-2.2">G-source placement: Redundant G-sources may reside in
          the same BD or in different BDs of the tenant network. There must be
          no restrictions on the locations of receiver systems within the
          tenant.<a href="#section-1.4-2.2" class="pilcrow">¶</a>
</li>
          <li id="section-1.4-2.3">G-source attachment to EVPN PEs: Redundant G-sources may
          be either single-homed to a single EVPN PE or multi-homed to
          multiple EVPN PEs.<a href="#section-1.4-2.3" class="pilcrow">¶</a>
</li>
          <li id="section-1.4-2.4">Packet duplication avoidance: The EVPN PEs must ensure
          that receiver systems do not experience duplicate packets for the
          same SFG.<a href="#section-1.4-2.4" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-1.4-3">This framework ensures that EVPN networks can effectively
        support redundant multicast sources while maintaining high reliability
        and operational efficiency.<a href="#section-1.4-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-2">
<section id="section-2">
      <h2 id="name-solution-overview">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-solution-overview" class="section-name selfRef">Solution Overview</a>
      </h2>
<p id="section-2-1">An SFG can be represented as (*,G) if any source transmitting
      multicast traffic to group G is considered a redundant G-source.
      Alternatively, this document allows an SFG to be represented as (S,G),
      where the source IP address S is a prefix of variable length. In this
      case, a source is deemed a redundant G-source for the SFG if its address
      falls within the specified prefix. In the remainder of this document,
      some examples use (*,G) state for brevity. Wherever an SFG is
      represented as (*,G), it should be understood as being interchangeable
      with (S,G). The use of variable-length prefixes in source advertisements
      via S-PMSI A-D routes is permitted in this document only for the
      specific application of redundant G-sources.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">This document describes two solutions for handling redundant
      G-sources:<a href="#section-2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-3.1">
          <p id="section-2-3.1.1">Warm Standby Solution<a href="#section-2-3.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-3.2">
          <p id="section-2-3.2.1">Hot Standby Solution<a href="#section-2-3.2.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<div id="sect-2.1">
<section id="section-2.1">
        <h3 id="name-warm-standby-solution">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-warm-standby-solution" class="section-name selfRef">Warm Standby Solution</a>
        </h3>
<p id="section-2.1-1">The Warm Standby solution is an upstream PE-based solution, where
        downstream PEs do not participate in the procedures. In this solution,
        all upstream PEs connected to redundant G-sources for an SFG (*,G) or
        (S,G) elect a "Single Forwarder (SF)" among themselves. After the
        Single Forwarder is elected, the upstream PEs apply Reverse Path
        Forwarding checks to the multicast state for the SFG:<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1-2.1">Non-Single Forwarder (Non-SF) Behavior: A Non-SF
          upstream PE discards all (*,G) or (S,G) packets received over its
          local AC.<a href="#section-2.1-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.1-2.2">Single Forwarder Behavior: The Single Forwarder accepts
          and forwards (*,G) or (S,G) packets received on a single local
          AC for the SFG. If packets are received on multiple
          local ACs, the Single Forwarder discards packets on
          all but one. The selection of the AC for forwarding
          is a local implementation detail.<a href="#section-2.1-2.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.1-3">In the event of a failure of the Single Forwarder, a new Single Forwarder
        is elected among the upstream PEs. This election process
        requires BGP extensions on existing EVPN routes, which are detailed in
        Sections <a href="#sect-3" class="auto internal xref">3</a> and <a href="#sect-4" class="auto internal xref">4</a>.<a href="#section-2.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-2.2">
<section id="section-2.2">
        <h3 id="name-hot-standby-solution">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-hot-standby-solution" class="section-name selfRef">Hot Standby Solution</a>
        </h3>
<p id="section-2.2-1">The Hot Standby solution relies on downstream PEs to prevent
        duplication of SFG packets. Upstream PEs, aware of locally connected
        G-sources, append a unique ESI label to
        multicast packets for each SFG. Downstream PEs receive SFG packets
        from all upstream PEs attached to redundant G-sources and avoid
        duplication by performing a Reverse Path Forwarding check on the (*,G)
        state for the SFG:<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-2.1">Packet Filtering: A downstream PE discards (*,G) packets
          received from the "wrong G-source."<a href="#section-2.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-2.2">Wrong G-source Identification: The "wrong G-source" is
          identified using an ESI label that differs from the ESI label
          associated with the selected G-source.<a href="#section-2.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-2.3">ESI Label Usage: In this solution, the ESI label is used
          for "ingress filtering" at the downstream PE, rather than for
          "egress filtering" as described in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>. In <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>,
          the ESI label indicates which egress ACs must be
          excluded when forwarding BUM traffic.  Here, the ESI label
          identifies ingress traffic that should be discarded by the
          downstream PE.<a href="#section-2.2-2.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.2-3">Control plane and data plane extensions to <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>
        are required to support ESI labels for SFGs forwarded by upstream PEs.
        Upon failure of the selected G-source, the downstream PE switches to a
        different G-source and updates its Reverse Path Forwarding check for
        the (*,G) state. These extensions and procedures are described in Sections
        <a href="#sect-3" class="auto internal xref">3</a> and <a href="#sect-5" class="auto internal xref">5</a>.<a href="#section-2.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-2.3">
<section id="section-2.3">
        <h3 id="name-solution-selection">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-solution-selection" class="section-name selfRef">Solution Selection</a>
        </h3>
<p id="section-2.3-1">Operators should select a solution based on their specific
        requirements:<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3-2.1">
            <p id="section-2.3-2.1.1">The Warm Standby solution is more bandwidth-efficient but
            incurs longer failover times in the event of a G-source or
            upstream PE failure. Additionally, only the upstream PEs connected
            to redundant G-sources for the same SFG need to support the new
            procedures in the Warm Standby solution.<a href="#section-2.3-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-2.3-2.2">
            <p id="section-2.3-2.2.1">The Hot Standby solution is recommended for scenarios requiring
            fast failover times, provided that the additional bandwidth
            consumption (due to multiple transmissions of SFG packets to
            downstream PEs) is acceptable.<a href="#section-2.3-2.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="sect-2.4">
<section id="section-2.4">
        <h3 id="name-system-support">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-system-support" class="section-name selfRef">System Support</a>
        </h3>
<p id="section-2.4-1">This document does not mandate support for both solutions on a
        single system. If one solution is implemented, support for the other
        is <span class="bcp14">OPTIONAL</span>.<a href="#section-2.4-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-3">
<section id="section-3">
      <h2 id="name-bgp-evpn-extensions">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-bgp-evpn-extensions" class="section-name selfRef">BGP EVPN Extensions</a>
      </h2>
<p id="section-3-1">This document introduces the following BGP EVPN extensions:<a href="#section-3-1" class="pilcrow">¶</a></p>
<div id="sect-3.1">
<section id="section-3.1">
        <h3 id="name-single-flow-group-flag-in-t">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-single-flow-group-flag-in-t" class="section-name selfRef">Single Flow Group Flag in the Multicast Flags Extended Community</a>
        </h3>
<p id="section-3.1-1">A new Single Flow Group (SFG) flag is defined within the Multicast
        Flags Extended Community. This flag has been registered as bit 4 
        in the "Multicast Flags Extended Community" registry (see <a href="#sfg" class="auto internal xref">Table 1</a>). The SFG
        flag is set in S-PMSI A-D routes that carry (*,G) or (S,G) Single Flow Group
        information in the BGP EVPN Network Layer Reachability
        Information (NLRI).<a href="#section-3.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-3.2">
<section id="section-3.2">
        <h3 id="name-esi-label-extended-communit">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-esi-label-extended-communit" class="section-name selfRef">ESI Label Extended Community in S-PMSI A-D Routes</a>
        </h3>
<p id="section-3.2-1">The Hot Standby solution requires the advertisement of one or more
        ESI Label Extended Communities <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> alongside the
        S-PMSI A-D routes. These extended communities encode the ESI values
        associated with an S-PMSI A-D (*,G) or (S,G) route that advertises the
        presence of a Single Flow Group.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">Key considerations include:<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3.2-3">
<li id="section-3.2-3.1">
            <p id="section-3.2-3.1.1">When advertised with the S-PMSI A-D routes, only the ESI label
            value in the extended community is relevant to the procedures
            defined in this document.<a href="#section-3.2-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="section-3.2-3.2">
            <p id="section-3.2-3.2.1">The Flags field within the extended community <span class="bcp14">MUST</span> be set to
            "0x00" on transmission and <span class="bcp14">MUST</span> be ignored on reception.<a href="#section-3.2-3.2.1" class="pilcrow">¶</a></p>
</li>
        </ol>
<p id="section-3.2-4"><span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> specifies the use of the ESI Label
        Extended Community in conjunction with the A-D per ES route. This
        document extends the applicability of the ESI Label Extended Community
        by allowing its inclusion multiple times (with different ESI label
        values) alongside the EVPN S-PMSI A-D route. These extensions enable
        the precise encoding and advertisement of SFG-related
        information, facilitating efficient multicast traffic handling in EVPN
        networks.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-4">
<section id="section-4">
      <h2 id="name-warm-standby-ws-solution-fo">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-warm-standby-ws-solution-fo" class="section-name selfRef">Warm Standby (WS) Solution for Redundant G-Sources</a>
      </h2>
<p id="section-4-1">This section specifies the Warm Standby solution for handling
      redundant multicast sources (G-sources). Note that while the examples
      use IPv4 addresses, the solution supports both IPv4 and IPv6
      sources.<a href="#section-4-1" class="pilcrow">¶</a></p>
<div id="sect-4.1">
<section id="section-4.1">
        <h3 id="name-specification">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-specification" class="section-name selfRef">Specification</a>
        </h3>
<p id="section-4.1-1">The Warm Standby solution follows these general procedures:<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.1-2">
<li id="section-4.1-2.1">
            <p id="section-4.1-2.1.1">Configuration of the upstream PEs<a href="#section-4.1-2.1.1" class="pilcrow">¶</a></p>
<p id="section-4.1-2.1.2">Upstream PEs, potentially connected to redundant
            G-sources, are configured to recognize:<a href="#section-4.1-2.1.2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-2.1.3.1">
                <p id="section-4.1-2.1.3.1.1">The multicast groups that carry an SFG in the tenant
                domain.<a href="#section-4.1-2.1.3.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-4.1-2.1.3.2">
                <p id="section-4.1-2.1.3.2.1">The local Broadcast Domains that may host redundant
                G-sources<a href="#section-4.1-2.1.3.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
<p id="section-4.1-2.1.4">The SFG configuration applies to either "any" source,
            i.e., (*) or to a specific "source prefix" (e.g., "192.0.2.0/30"
            or "2001:db8::/120"). For instance, if the IPv4 prefix is
            192.0.2.0/30, the sources 192.0.2.1 and 192.0.2.2 are considered
            redundant G-sources for the SFG, while 192.0.2.10 is not. In a
            different example for IPv6, if the prefix is 2001:db8::/120,
            sources 2001:db8::1 or 2001:db8::2 are considered redundant
            G-sources for the SFG, but 2001:db8:1::1 is not.<a href="#section-4.1-2.1.4" class="pilcrow">¶</a></p>
<p id="section-4.1-2.1.5">Example Configuration (<a href="#ure-ws-solution-for-redundant-g-sources" class="auto internal xref">Figure 4</a>):<a href="#section-4.1-2.1.5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-2.1.6.1">
                <p id="section-4.1-2.1.6.1.1">PE1 is configured to recognize G1 as an SFG for any source,
                with potential redundant G-sources attached to 
                BD1 and BD2.<a href="#section-4.1-2.1.6.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-4.1-2.1.6.2">
                <p id="section-4.1-2.1.6.2.1">Alternatively, PE1 may recognize G1 as an SFG for sources
                within 192.0.2.0/30 (or 2001:db8::/120), with redundant
                G-sources in BD1 and BD2.<a href="#section-4.1-2.1.6.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li id="section-4.1-2.2">
            <p id="section-4.1-2.2.1">Signaling the location of a G-source for an SFG<a href="#section-4.1-2.2.1" class="pilcrow">¶</a></p>
<p id="section-4.1-2.2.2">Upon receiving the first IP multicast packet for a
            configured SFG on a Broadcast Domain, an upstream PE (e.g.,
            PE1):<a href="#section-4.1-2.2.2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-2.2.3.1">
                <p id="section-4.1-2.2.3.1.1"><span class="bcp14">MUST</span> advertise an S-PMSI A-D route for the SFG:<a href="#section-4.1-2.2.3.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-2.2.3.1.2.1">
                    <p id="section-4.1-2.2.3.1.2.1.1">An (*,G) route if the SFG is configured for any
                    source.<a href="#section-4.1-2.2.3.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-4.1-2.2.3.1.2.2">
                    <p id="section-4.1-2.2.3.1.2.2.1">An (S,G) route (where S can have any prefix length) if
                    the SFG is configured for a source prefix.<a href="#section-4.1-2.2.3.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="normal" id="section-4.1-2.2.3.2">
                <p id="section-4.1-2.2.3.2.1"><span class="bcp14">MUST</span> include the following attributes in the S-PMSI A-D
                route:<a href="#section-4.1-2.2.3.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-2.2.3.2.2.1">
                    <p id="section-4.1-2.2.3.2.2.1.1">Route Targets (RTs): The Broadcast Domain Route Target
                    (BD-RT) of the BD receiving the traffic and, if
                    applicable, the Supplementary Broadcast Domain Route
                    Target (SBD-RT), which is needed so that the route is
                    imported by all PEs attached to the tenant domain in an
                    OISM solution.<a href="#section-4.1-2.2.3.2.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-4.1-2.2.3.2.2.2">
                    <p id="section-4.1-2.2.3.2.2.2.1">Multicast Flags Extended Community: <span class="bcp14">MUST</span> include
                    the SFG flag to indicate that the route conveys an
                    SFG.<a href="#section-4.1-2.2.3.2.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-4.1-2.2.3.2.2.3">
                    <p id="section-4.1-2.2.3.2.2.3.1">Designated Forwarder Election Extended Community:
                    Specifies the algorithm and preferences for the Single Forwarder
                    election, using the DF
                    election defined in <span>[<a href="#RFC8584" class="cite xref">RFC8584</a>]</span>.<a href="#section-4.1-2.2.3.2.2.3.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="normal" id="section-4.1-2.2.3.3">
                <p id="section-4.1-2.2.3.3.1">Advertises the route:<a href="#section-4.1-2.2.3.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-2.2.3.3.2.1">
                    <p id="section-4.1-2.2.3.3.2.1.1">Without a PMSI Tunnel Attribute if using IR, AR, or BIER.<a href="#section-4.1-2.2.3.3.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-4.1-2.2.3.3.2.2">
                    <p id="section-4.1-2.2.3.3.2.2.1">With a PMSI Tunnel Attribute for other tunnel
                    types.<a href="#section-4.1-2.2.3.3.2.2.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="normal" id="section-4.1-2.2.3.4">
                <p id="section-4.1-2.2.3.4.1"><span class="bcp14">MUST</span> withdraw the S-PMSI A-D route when the SFG traffic
                ceases. A timer is <span class="bcp14">RECOMMENDED</span> to detect inactivity and
                trigger route withdrawal.<a href="#section-4.1-2.2.3.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li id="section-4.1-2.3">
            <p id="section-4.1-2.3.1">Single Forwarder Election on the upstream PEs<a href="#section-4.1-2.3.1" class="pilcrow">¶</a></p>
<p id="section-4.1-2.3.2">If an upstream PE receives one or more S-PMSI A-D
            routes for the same SFG from remote PEs, it performs Single Forwarder
            Election based on the Designated Forwarder Election
            Extended Community.<a href="#section-4.1-2.3.2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-2.3.3.1">
                <p id="section-4.1-2.3.3.1.1">Two routes are considered part of the same SFG if they are
                advertised for the same tenant and match in the following
                fields:<a href="#section-4.1-2.3.3.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-2.3.3.1.2.1">
                    <p id="section-4.1-2.3.3.1.2.1.1">Multicast Source Length<a href="#section-4.1-2.3.3.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-4.1-2.3.3.1.2.2">
                    <p id="section-4.1-2.3.3.1.2.2.1">Multicast Source<a href="#section-4.1-2.3.3.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-4.1-2.3.3.1.2.3">
                    <p id="section-4.1-2.3.3.1.2.3.1">Multicast Group Length<a href="#section-4.1-2.3.3.1.2.3.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-4.1-2.3.3.1.2.4">
                    <p id="section-4.1-2.3.3.1.2.4.1">Multicast Group<a href="#section-4.1-2.3.3.1.2.4.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="normal" id="section-4.1-2.3.3.2">
                <p id="section-4.1-2.3.3.2.1">Election Rules:<a href="#section-4.1-2.3.3.2.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.1-2.3.3.2.2">
<li id="section-4.1-2.3.3.2.2.1">
                    <p id="section-4.1-2.3.3.2.2.1.1">A consistent DF Election Algorithm
                    <span class="bcp14">MUST</span> be used across all upstream PEs for the Single Forwarder
                    election. In OISM networks, the Default
                    Designated Forwarder Election Algorithm <span class="bcp14">MUST NOT</span> be used
                    if redundant G-sources are attached to Broadcast Domains
                    with different Ethernet Tags.<a href="#section-4.1-2.3.3.2.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li id="section-4.1-2.3.3.2.2.2">
                    <p id="section-4.1-2.3.3.2.2.2.1">In case of a mismatch in the DF
                    Election Algorithm or capabilities, the tie-breaker is the
                    lowest PE IP address (as advertised in the Originator
                    Address field of the S-PMSI A-D route).<a href="#section-4.1-2.3.3.2.2.2.1" class="pilcrow">¶</a></p>
</li>
                </ol>
</li>
            </ul>
</li>
          <li id="section-4.1-2.4">
            <p id="section-4.1-2.4.1">Reverse Path Forwarding Checks on the Upstream PEs<a href="#section-4.1-2.4.1" class="pilcrow">¶</a></p>
<p id="section-4.1-2.4.2">All PEs with a local G-source for an SFG apply a
            Reverse Path Forwarding check to the (*,G) or (S,G) state based on
            the Single Forwarder election result:<a href="#section-4.1-2.4.2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.1-2.4.3">
<li id="section-4.1-2.4.3.1">
                <p id="section-4.1-2.4.3.1.1">Non-SF PEs: <span class="bcp14">MUST</span> discard all (*,G) or (S,G)
                packets received on local ACs.<a href="#section-4.1-2.4.3.1.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-4.1-2.4.3.2">
                <p id="section-4.1-2.4.3.2.1">Single Forwarder PEs: <span class="bcp14">MUST</span> forward (*,G) or (S,G) packets
                received on one (and only one) local AC.<a href="#section-4.1-2.4.3.2.1" class="pilcrow">¶</a></p>
</li>
            </ol>
</li>
        </ol>
<p id="section-4.1-3">Key Features of the Warm Standby Solution:<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-4.1">
            <p id="section-4.1-4.1.1">The solution ensures redundancy for SFGs without requiring
            upgrades to downstream PEs (where no redundant G-sources are
            connected).<a href="#section-4.1-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.1-4.2">
            <p id="section-4.1-4.2.1">Existing procedures for Non-SFG G-sources remain unchanged.<a href="#section-4.1-4.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.1-4.3">
            <p id="section-4.1-4.3.1">Redundant G-sources can be either single-homed or multi-homed.
            Multi-homing does not alter the above procedures.<a href="#section-4.1-4.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-4.1-5">Examples of the Warm Standby solution are provided in Sections <a href="#sect-4.2" class="auto internal xref">4.2</a> and <a href="#sect-4.3" class="auto internal xref">4.3</a>.<a href="#section-4.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-4.2">
<section id="section-4.2">
        <h3 id="name-warm-standby-example-in-an-">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-warm-standby-example-in-an-" class="section-name selfRef">Warm Standby Example in an OISM Network</a>
        </h3>
<p id="section-4.2-1"><a href="#ure-ws-solution-for-redundant-g-sources" class="auto internal xref">Figure 4</a>
        illustrates an example where S1 and S2 are redundant G-sources for the
        Single Flow Group (*,G1).<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<span id="name-warm-standby-solution-for-r"></span><div id="ure-ws-solution-for-redundant-g-sources">
<figure id="figure-4">
          <div class="alignLeft art-text artwork" id="section-4.2-2.1">
<pre>
                     S1 (Single               S2
                     |   Forwarder)           |
              (S1,G1)|                 (S2,G1)|
                     |                        |
            PE1      |               PE2      |
            +--------v---+           +--------v---+
     S-PMSI |      +---+ |           |      +---+ | S-PMSI
     (*,G1) |  +---|BD1| |           |  +---|BD2| | (*,G1)
    Pref200 |  |VRF+---+ |           |  |VRF+---+ | Pref100
      |SFG  |+---+  | |  |           |+---+  |    |  SFG|
      | +----|SBD|--+ |  |-----------||SBD|--+    |---+ |
      v |   |+---+    |  |           |+---+       |   | v
        |   +---------|--+           +------------+   |
 SMET   |             |                               | SMET
 (*,G1) |             |   (S1,G1)                     | (*,G1)
        |    +--------+------------------+            |
    ^   |    |                           |            |   ^
    |   |    |                EVPN       |            |   |
    |   |    |                OISM       |            |   |
    |   |    |                           |            |   |
    PE3 |    |           PE4             |            | PE5
    +--------v---+       +------------+  |   +------------+
    |      +---+ |       |      +---+ |  |   |      +---+ |
    |  +---|SBD| |-------|  +---|SBD| |--|---|  +---|SBD| |
    |  |VRF+---+ |       |  |VRF+---+ |  |   |  |VRF+---+ |
    |+---+  |    |       |+---+  |    |  |   |+---+  |    |
    ||BD3|--+    |       ||BD4|--+    |  +---&gt;|BD1|--+    |
    |+---+       |       |+---+       |      |+---+       |
    +------------+       +------------+      +------------+
      |  ^                                     | ^
      |  | IGMP/MLD                            | | IGMP/MLD
      R1 | J(*,G1)                             R3| J(*,G1)
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-warm-standby-solution-for-r" class="selfRef">Warm Standby Solution for Redundant G-Sources</a>
          </figcaption></figure>
</div>
<p id="section-4.2-3">The Warm Standby procedure is as follows:<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.2-4">
<li id="section-4.2-4.1">
            <p id="section-4.2-4.1.1">Configuration of the upstream PEs (PE1 and PE2)<a href="#section-4.2-4.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-4.1.2.1">
                <p id="section-4.2-4.1.2.1.1">PE1 and PE2 are configured to recognize G1 as a Single Flow Group
                for any source.<a href="#section-4.2-4.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-4.2-4.1.2.2">
                <p id="section-4.2-4.1.2.2.1">Redundant G-sources for G1 may be attached to 
                BD1 (for PE1) and BD2 (for PE2).<a href="#section-4.2-4.1.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li id="section-4.2-4.2">
            <p id="section-4.2-4.2.1">Signaling the location of S1 and S2 for (*,G1)<a href="#section-4.2-4.2.1" class="pilcrow">¶</a></p>
<p id="section-4.2-4.2.2">Upon receiving traffic for G1 on a local
            AC:<a href="#section-4.2-4.2.2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-4.2.3.1">
                <p id="section-4.2-4.2.3.1.1">PE1 and PE2 originate S-PMSI A-D routes for (*,G1),
                including:<a href="#section-4.2-4.2.3.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-4.2.3.1.2.1">
                    <p id="section-4.2-4.2.3.1.2.1.1">the SBD-RT,<a href="#section-4.2-4.2.3.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-4.2-4.2.3.1.2.2">
                    <p id="section-4.2-4.2.3.1.2.2.1">the Designated Forwarder Election Extended Community,
                    and<a href="#section-4.2-4.2.3.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-4.2-4.2.3.1.2.3">
                    <p id="section-4.2-4.2.3.1.2.3.1">the SFG flag in the Multicast Flags Extended
                    Community.<a href="#section-4.2-4.2.3.1.2.3.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="normal" id="section-4.2-4.2.3.2">
                <p id="section-4.2-4.2.3.2.1">These routes indicate the presence of a Single Flow Group.<a href="#section-4.2-4.2.3.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li id="section-4.2-4.3">
            <p id="section-4.2-4.3.1">Single Forwarder Election<a href="#section-4.2-4.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-4.3.2.1">
                <p id="section-4.2-4.3.2.1.1">Based on the Designated Forwarder Election Extended
                Community, PE1 and PE2 perform Single Forwarder election.<a href="#section-4.2-4.3.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-4.2-4.3.2.2">
                <p id="section-4.2-4.3.2.2.1">Assuming they use Preference-based Election <span>[<a href="#RFC9785" class="cite xref">RFC9785</a>]</span>, PE1 (with a higher
                preference) is elected as the Single Forwarder for (*,G1).<a href="#section-4.2-4.3.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li id="section-4.2-4.4">
            <p id="section-4.2-4.4.1">Reverse Path Forwarding check on the PEs attached to a
            redundant G-source<a href="#section-4.2-4.4.1" class="pilcrow">¶</a></p>
<ol start="1" type="a" class="normal type-a" id="section-4.2-4.4.2">
<li id="section-4.2-4.4.2.1">
                <p id="section-4.2-4.4.2.1.1">Non-SF Behavior: PE2 discards all (*,G1)
                packets received on its local AC.<a href="#section-4.2-4.4.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-4.2-4.4.2.2">
                <p id="section-4.2-4.4.2.2.1">Single Forwarder Behavior: PE1 forwards (*,G1) packets
                received on one (and only one) local AC.<a href="#section-4.2-4.4.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ol>
</li>
        </ol>
<p id="section-4.2-5">The outcome:<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-6.1">
            <p id="section-4.2-6.1.1">Upon receiving IGMP/MLD reports for (*,G1) or (S,G1),
            downstream PEs (PE3 and PE5) issue SMET routes to pull the
            multicast Single Flow Group traffic from PE1 only.<a href="#section-4.2-6.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.2-6.2">
            <p id="section-4.2-6.2.1">In the event of a failure of S1, the AC
            connected to S1, or PE1 itself, the S-PMSI A-D route for (*,G1) is
            withdrawn by PE1.<a href="#section-4.2-6.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.2-6.3">
            <p id="section-4.2-6.3.1">As a result, PE2 is promoted to Single Forwarder, ensuring
            continued delivery of (*,G1) traffic.<a href="#section-4.2-6.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="sect-4.3">
<section id="section-4.3">
        <h3 id="name-warm-standby-example-in-a-s">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-warm-standby-example-in-a-s" class="section-name selfRef">Warm Standby Example in a Single-BD Tenant Network</a>
        </h3>
<p id="section-4.3-1"><a href="#ure-ws-solution-for-redundant-g-sources-in-the-same-bd" class="auto internal xref">Figure 5</a>
        illustrates an example where S1 and S2 are redundant G-sources for the
        Single Flow Group (*,G1). In this case, all G-sources and receivers
        are connected to the same BD1, and there is no
        SBD.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<span id="name-ws-solution-for-redundant-g"></span><div id="ure-ws-solution-for-redundant-g-sources-in-the-same-bd">
<figure id="figure-5">
          <div class="alignLeft art-text artwork" id="section-4.3-2.1">
<pre>
                     S1 (Single               S2
                     |   Forwarder)           |
              (S1,G1)|                 (S2,G1)|
                     |                        |
            PE1      |               PE2      |
            +--------v---+           +--------v---+
    S-PMSI  |      +---+ |           |      +---+ | S-PMSI
    (*,G1)  |      |BD1| |           |      |BD1| | (*,G1)
    Pref200 |      +---+ |           |      +---+ | Pref100
     |SFG   |         |  |           |            |  SFG|
     |  +---|         |  |-----------|            |---+ |
     v  |   |         |  |           |            |   | v
        |   +---------|--+           +------------+   |
 SMET   |             |                               | SMET
 (*,G1) |             |     (S1,G1)                   | (*,G1)
        |    +--------+------------------------+      |
    ^   |    |                                 |      |   ^
    |   |    |                EVPN             |      |   |
    |   |    |                                 |      |   |
    |   |    |                                 |      |   |
    PE3 |    |           PE4                   |      | PE5
    +--------v---+       +------------+      +-|----------+
    |      +---+ |       |      +---+ |      | |    +---+ |
    |      |BD1| |-------|      |BD1| |------| +---&gt;|BD1| |
    |      +---+ |       |      +---+ |      |      +---+ |
    |            |       |            |      |            |
    |            |       |            |      |            |
    |            |       |            |      |            |
    +------------+       +------------+      +------------+
      |  ^                                    |  ^
      |  | IGMP/MLD                           |  | IGMP/MLD
      R1 | J(*,G1)                            R3 | J(*,G1)
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-ws-solution-for-redundant-g" class="selfRef">WS Solution for Redundant G-Sources in the Same BD</a>
          </figcaption></figure>
</div>
<p id="section-4.3-3">The procedures for the Warm Standby solution in this example are
        identical to those described in <a href="#sect-4.2" class="auto internal xref">Section 4.2</a>, with the
        following distinction:<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3-4.1">
            <p id="section-4.3-4.1.1">Signaling the S-PMSI A-D Routes<a href="#section-4.3-4.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3-4.1.2.1">
                <p id="section-4.3-4.1.2.1.1">Upon receiving traffic for the Single Flow Group (*,G1),
                PE1 and PE2 advertise S-PMSI A-D routes.<a href="#section-4.3-4.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-4.3-4.1.2.2">
                <p id="section-4.3-4.1.2.2.1">These routes include only the BD1-RT (Broadcast Domain 1
                Route Target) as there is no SBD
                in this scenario.<a href="#section-4.3-4.1.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
        </ul>
<p id="section-4.3-5">This example represents a specific sub-case of the broader
        procedure detailed in <a href="#sect-4.2" class="auto internal xref">Section 4.2</a>, adapted to a single
        Broadcast Domain environment. The absence of an SBD simplifies the
        configuration, as all signaling remains within the context of BD1.<a href="#section-4.3-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-5">
<section id="section-5">
      <h2 id="name-hot-standby-solution-for-re">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-hot-standby-solution-for-re" class="section-name selfRef">Hot Standby Solution for Redundant G-Sources</a>
      </h2>
<p id="section-5-1">This section specifies the Hot Standby solution for handling
      redundant multicast sources (G-sources). The solution supports both IPv4
      and IPv6 sources.<a href="#section-5-1" class="pilcrow">¶</a></p>
<div id="sect-5.1">
<section id="section-5.1">
        <h3 id="name-specification-2">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-specification-2" class="section-name selfRef">Specification</a>
        </h3>
<p id="section-5.1-1">The Hot Standby solution is designed for scenarios requiring fast
        failover in the event of a G-source or upstream PE failure. It assumes
        that additional bandwidth consumption in the tenant network is
        acceptable. The procedure is as follows:<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.1-2">
<li id="section-5.1-2.1">
            <p id="section-5.1-2.1.1">Configuration of PEs<a href="#section-5.1-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.1.2.1">
                <p id="section-5.1-2.1.2.1.1">Upstream PEs are configured to identify Single Flow Groups
                in the tenant domain. This includes groups for any source or a
                source prefix containing redundant G-sources.<a href="#section-5.1-2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.1-2.1.2.2">
                <p id="section-5.1-2.1.2.2.1">Each redundant G-source <span class="bcp14">MUST</span> be associated with an ES
                on the upstream PEs. This applies to both single-homed
                and multi-homed G-sources. For both, single-homed and
                multi-homed G-sources, ESI labels are essential for Reverse
                Path Forwarding checks on downstream PEs. The term S-ESI is
                used to denote the ESI associated with a redundant
                G-source.<a href="#section-5.1-2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.1-2.1.2.3">
                <p id="section-5.1-2.1.2.3.1">Unlike the Warm Standby solution, the Hot Standby solution
                requires downstream PEs to support the procedure.<a href="#section-5.1-2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.1-2.1.2.4">
                <p id="section-5.1-2.1.2.4.1">Downstream PEs:<a href="#section-5.1-2.1.2.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.1.2.4.2.1">
                    <p id="section-5.1-2.1.2.4.2.1.1">Do not need explicit configuration for Single Flow Groups
                    or their ESIs (since they get that information from
                    the upstream PEs).<a href="#section-5.1-2.1.2.4.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-5.1-2.1.2.4.2.2">
                    <p id="section-5.1-2.1.2.4.2.2.1">Dynamically select an ESI for each Single Flow Group
                    based on local policy (hence different downstream PEs may
                    select different ESIs) and program
                    a Reverse Path Forwarding check to discard (*,G) or (S,G)
                    packets from other ESIs.<a href="#section-5.1-2.1.2.4.2.2.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li id="section-5.1-2.2">
            <p id="section-5.1-2.2.1">Signaling the location of a G-source for a given SFG and its
            association to the local ESes<a href="#section-5.1-2.2.1" class="pilcrow">¶</a></p>
<p id="section-5.1-2.2.2">An upstream PE configured for Hot Standby procedures:<a href="#section-5.1-2.2.2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.2.3.1">
                <p id="section-5.1-2.2.3.1.1"><span class="bcp14">MUST</span> advertise an S-PMSI A-D route for each Single Flow Group.
                These routes:<a href="#section-5.1-2.2.3.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.2.3.1.2.1">
                    <p id="section-5.1-2.2.3.1.2.1.1">Use the Broadcast Domain Route Target (BD-RT) and, if
                    applicable, the 
                    SBD-RT so that the routes are imported in all the
                    PEs of the tenant domain.<a href="#section-5.1-2.2.3.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-5.1-2.2.3.1.2.2">
                    <p id="section-5.1-2.2.3.1.2.2.1"><span class="bcp14">MUST</span> include ESI Label Extended Communities to convey
                    the S-ESI labels associated with the Single Flow Group.
                    These ESI labels match the labels advertised by the EVPN
                    A-D per ES routes for each S-ES.<a href="#section-5.1-2.2.3.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="normal" id="section-5.1-2.2.3.2">
                <p id="section-5.1-2.2.3.2.1"><span class="bcp14">MAY</span> include a PMSI Tunnel Attribute, depending on the
                tunnel type, as specified in the Warm Standby procedure.<a href="#section-5.1-2.2.3.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.1-2.2.3.3">
                <p id="section-5.1-2.2.3.3.1"><span class="bcp14">MUST</span> trigger the S-PMSI A-D route advertisement based on
                the SFG configuration (and not based on the reception of
                traffic).<a href="#section-5.1-2.2.3.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li id="section-5.1-2.3">
            <p id="section-5.1-2.3.1">Distribution of DCB ESI labels and G-source ES routes<a href="#section-5.1-2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.3.2.1">
                <p id="section-5.1-2.3.2.1.1">Upstream PEs advertise corresponding EVPN routes:<a href="#section-5.1-2.3.2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.3.2.1.2.1">
                    <p id="section-5.1-2.3.2.1.2.1.1">EVPN ES routes for the local S-ESIs.
                    ES routes are used for regular DF
                    Election for the S-ES. This document does not introduce
                    any change in the procedures related to the EVPN ES
                    routes.<a href="#section-5.1-2.3.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-5.1-2.3.2.1.2.2">
                    <p id="section-5.1-2.3.2.1.2.2.1">A-D per EVI and A-D per ES routes for tenant-specific
                    traffic. If the SBD exists, the EVPN A-D per EVI and A-D
                    per ES routes <span class="bcp14">MUST</span> include the route target SBD-RT, since
                    they have to be imported by all the PEs in the tenant
                    domain.<a href="#section-5.1-2.3.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="normal" id="section-5.1-2.3.2.2">
                <p id="section-5.1-2.3.2.2.1">ESI label procedures:<a href="#section-5.1-2.3.2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.3.2.2.2.1">
                    <p id="section-5.1-2.3.2.2.2.1.1">The EVPN A-D per ES routes convey the S-ESI labels that
                    the downstream PEs use to implement Reverse Path
                    Forwarding checks for SFGs.<a href="#section-5.1-2.3.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-5.1-2.3.2.2.2.2">
                    <p id="section-5.1-2.3.2.2.2.2.1">All packets for a given G-source <span class="bcp14">MUST</span> carry the same
                    S-ESI label. For example, if two redundant G-sources are
                    multi-homed to PE1 and PE2 via S-ES-1 and S-ES-2, PE1 and
                    PE2 <span class="bcp14">MUST</span> allocate the same ESI label "Lx" for S-ES-1, and
                    they <span class="bcp14">MUST</span> allocate the same ESI label "Ly" for S-ES-2. In
                    addition, Lx and Ly <span class="bcp14">MUST</span> be different.<a href="#section-5.1-2.3.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-5.1-2.3.2.2.2.3">
                    <p id="section-5.1-2.3.2.2.2.3.1">S-ESI labels are allocated as Domain-wide Common Block
                    (DCB) labels and follow the procedures in <span>[<a href="#RFC9573" class="cite xref">RFC9573</a>]</span>. In addition, the PE indicates that
                    these ESI labels are DCB labels by using the extensions
                    described in <a href="#sect-5.2" class="auto internal xref">Section 5.2</a>.<a href="#section-5.1-2.3.2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li id="section-5.1-2.4">
            <p id="section-5.1-2.4.1">Processing of EVPN A-D per ES/EVI routes and Reverse Path
            Forwarding check on the downstream PEs<a href="#section-5.1-2.4.1" class="pilcrow">¶</a></p>
<p id="section-5.1-2.4.2">The
            EVPN A-D per ES/EVI routes are received and imported in all the
            PEs in the tenant domain. Downstream PEs process received EVPN A-D
            per ES/EVI routes based on their configuration:<a href="#section-5.1-2.4.2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.4.3.1">
                <p id="section-5.1-2.4.3.1.1">The PEs attached to the same Broadcast Domain of the route
                target BD-RT that is included in the EVPN A-D per ES/EVI
                routes process the routes as in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> and
                <span>[<a href="#RFC8584" class="cite xref">RFC8584</a>]</span>. If the receiving PE is attached to
                the same ES as indicated in the route, split-horizon procedures <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> are followed and
                the DF Election candidate list is modified
                as in <span>[<a href="#RFC8584" class="cite xref">RFC8584</a>]</span> if the ES
                supports the AC-DF (AC influenced DF) capability.<a href="#section-5.1-2.4.3.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.1-2.4.3.2">
                <p id="section-5.1-2.4.3.2.1">The PEs that are not attached to the Broadcast Domain 
                identified by the BD-RT but are attached to the
                SBD of the received
                SBD-RT <span class="bcp14">MUST</span> import the EVPN A-D per ES/EVI routes and use
                them for redundant G-source mass withdrawal, as explained
                later.<a href="#section-5.1-2.4.3.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-5.1-2.4.3.3">
                <p id="section-5.1-2.4.3.3.1">Upon importing EVPN A-D per ES routes corresponding to
                different S-ESes, a PE <span class="bcp14">MUST</span> select a primary S-ES based on
                local policy, and add a Reverse Path Forwarding check to the
                (*,G) or (S,G) state in the Broadcast Domain or SBD.
                This Reverse Path Forwarding check discards
                all ingress packets to (*,G)/(S,G) that are not received with
                the ESI label of the primary S-ES.<a href="#section-5.1-2.4.3.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li id="section-5.1-2.5">
            <p id="section-5.1-2.5.1">G-traffic forwarding for redundant G-sources and fault
            detection<a href="#section-5.1-2.5.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.5.2.1">
                <p id="section-5.1-2.5.2.1.1">Traffic forwarding with S-ESI labels:<a href="#section-5.1-2.5.2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.5.2.1.2.1">
                    <p id="section-5.1-2.5.2.1.2.1.1">When there is an existing (*,G) or (S,G) state for the
                    SFG with output interface list entries associated with
                    remote EVPN PEs, the upstream PE will add an S-ESI label
                    to the bottom of the stack when forwarding G-traffic
                    received on an S-ES. This label is allocated from a
                    DCB as described in Step 3.<a href="#section-5.1-2.5.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-5.1-2.5.2.1.2.2">
                    <p id="section-5.1-2.5.2.1.2.2.1">If point-to-multipoint or BIER PMSIs are used, this
                    procedure does not introduce new data path requirements on
                    the upstream PEs, apart from allocating the S-ESI label
                    from the DCB as per <span>[<a href="#RFC9573" class="cite xref">RFC9573</a>]</span>). However, when IR or AR
                    are employed, this document extends
                    the procedures defined in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span>. In
                    these scenarios, the upstream PE pushes the S-ESI labels
                    on packets not only destined for PEs sharing the ES but
                    also for all PEs within the tenant domain. This ensures
                    that downstream PEs receive all the multicast packets from
                    the redundant G-sources with an S-ESI label, regardless of
                    the PMSI type or local ESes. Downstream PEs will discard
                    any packet carrying an S-ESI label different from the
                    primary S-ESI label (associated with the selected primary
                    S-ES), as outlined in Step 4.<a href="#section-5.1-2.5.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="normal" id="section-5.1-2.5.2.2">
                <p id="section-5.1-2.5.2.2.1">Handling route withdrawals and fault detection<a href="#section-5.1-2.5.2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.5.2.2.2.1">
                    <p id="section-5.1-2.5.2.2.2.1.1">If the last EVPN A-D per EVI or the last EVPN A-D per
                    ES route for the primary S-ES is withdrawn, the downstream
                    PE will immediately select a new primary S-ES and update
                    the Reverse Path Forwarding check accordingly.<a href="#section-5.1-2.5.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-5.1-2.5.2.2.2.2">
                    <p id="section-5.1-2.5.2.2.2.2.1">For scenarios where the same S-ES is used across
                    multiple tenant domains by the upstream PEs, the
                    withdrawal of all the EVPN A-D per-ES routes associated
                    with an S-ES enables a mass withdrawal mechanism. This
                    allows the downstream PE to simultaneously update the
                    Reverse Path Forwarding check for all tenant domains that
                    rely on the same S-ES.<a href="#section-5.1-2.5.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="normal" id="section-5.1-2.5.2.3">
                <p id="section-5.1-2.5.2.3.1">Removal of Reverse Path Forwarding checks on S-PMSI
                withdrawal<a href="#section-5.1-2.5.2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.5.2.3.2.1">
                    <p id="section-5.1-2.5.2.3.2.1.1">The withdrawal of the last EVPN S-PMSI A-D route for a
                    given (*,G) or (S,G) that represents an SFG <span class="bcp14">SHOULD</span> result
                    in the downstream PE removing the S-ESI label-based
                    Reverse Path Forwarding check for that (*,G) or (S,G).<a href="#section-5.1-2.5.2.3.2.1.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
        </ol>
<p id="section-5.1-3">This document supports the use of Context-Specific Label Space ID Extended
        Communities, as described in <span>[<a href="#RFC9573" class="cite xref">RFC9573</a>]</span>, for scenarios
        where S-ESI labels are allocated within context-specific label spaces. When the
        context-specific label space ID extended community is advertised along with the
        ESI label in an EVPN A-D per ES route, the ESI label is from a context-specific
        label space identified by the DCB label in
        the Extended Community.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-5.2">
<section id="section-5.2">
        <h3 id="name-extensions-for-the-advertis">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-extensions-for-the-advertis" class="section-name selfRef">Extensions for the Advertisement of DCB Labels</a>
        </h3>
<p id="section-5.2-1">DCB labels are specified in <span>[<a href="#RFC9573" class="cite xref">RFC9573</a>]</span>, and this document makes use of them as outlined in
        <a href="#sect-5.1" class="auto internal xref">Section 5.1</a>. <span>[<a href="#RFC9573" class="cite xref">RFC9573</a>]</span> assumes that
        DCB labels are applicable only to
        Multipoint-to-Multipoint, Point-to-Multipoint, or BIER tunnels.
        Additionally, it specifies that when a PMSI label is a
        DCB label, the ESI label used for multi-homing is also a
        DCB label.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">This document extends the use of DCB-allocated ESI labels with the
        following provisions:<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<ol start="1" type="a" class="normal type-a" id="section-5.2-3">
<li id="section-5.2-3.1">
            <p id="section-5.2-3.1.1">DCB-allocated ESI labels <span class="bcp14">MAY</span> be used with IR
            tunnels and<a href="#section-5.2-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="section-5.2-3.2">
            <p id="section-5.2-3.2.1">DCB-allocated ESI labels <span class="bcp14">MAY</span> be used by PEs that do not use
            DCB-allocated PMSI labels.<a href="#section-5.2-3.2.1" class="pilcrow">¶</a></p>
</li>
        </ol>
<p id="section-5.2-4">These control plane extensions are indicated in the EVPN A-D
        per ES routes for the relevant S-ESes by:<a href="#section-5.2-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.2-5">
<li id="section-5.2-5.1">
            <p id="section-5.2-5.1.1">Adding the ESI-DCB-flag (DCB flag) to the
            ESI label Extended Community, or<a href="#section-5.2-5.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="section-5.2-5.2">
            <p id="section-5.2-5.2.1">Adding the Context-Specific Label Space ID extended community<a href="#section-5.2-5.2.1" class="pilcrow">¶</a></p>
</li>
        </ol>
<p id="section-5.2-6">The encoding of the DCB-flag within the ESI Label Extended
        Community is shown below:<a href="#section-5.2-6" class="pilcrow">¶</a></p>
<span id="name-esi-label-extended-community"></span><div id="ESI-label">
<figure id="figure-6">
          <div class="alignLeft art-text artwork" id="section-5.2-7.1">
<pre>
                     1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Type=0x06     | Sub-Type=0x01 | Flags(1 octet)|  Reserved=0   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Reserved=0   |          ESI Label                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-esi-label-extended-community" class="selfRef">ESI Label Extended Community</a>
          </figcaption></figure>
</div>
<p id="section-5.2-8">This document defines the DCB-flag as follows:<a href="#section-5.2-8" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2-9.1">
            <p id="section-5.2-9.1.1">Bit 5 of the Flags octet in the ESI Label Extended Community is
            defined as the ESI-DCB-flag by this document.<a href="#section-5.2-9.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.2-9.2">
            <p id="section-5.2-9.2.1">When the ESI-DCB-flag is set, it indicates that the ESI label
            is a DCB label.<a href="#section-5.2-9.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-5.2-10">Criteria for identifying a DCB label:<a href="#section-5.2-10" class="pilcrow">¶</a></p>
<p id="section-5.2-11">An ESI label is considered a DCB label if either of the following
        conditions is met:<a href="#section-5.2-11" class="pilcrow">¶</a></p>
<ol start="1" type="a" class="normal type-a" id="section-5.2-12">
<li id="section-5.2-12.1">
            <p id="section-5.2-12.1.1">The ESI label is encoded in an ESI Label Extended Community
            with the ESI-DCB-flag set.<a href="#section-5.2-12.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="section-5.2-12.2">
            <p id="section-5.2-12.2.1">The ESI label is signaled by a PE that has advertised a PMSI
            label that is a DCB label.<a href="#section-5.2-12.2.1" class="pilcrow">¶</a></p>
</li>
        </ol>
<p id="section-5.2-13">As in <span>[<a href="#RFC9573" class="cite xref">RFC9573</a>]</span>, this document also permits the use
        of context-specific label space ID extended community. When this extended
        community is advertised along with the ESI label in an EVPN A-D per ES
        route, it indicates that the ESI label is from a context-specific label space
        identified by the DCB label in the Extended Community.<a href="#section-5.2-13" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-5.3">
<section id="section-5.3">
        <h3 id="name-use-of-bfd-in-the-hs-soluti">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-use-of-bfd-in-the-hs-soluti" class="section-name selfRef">Use of BFD in the HS Solution</a>
        </h3>
<p id="section-5.3-1">In addition to utilizing the state of the EVPN A-D per EVI, EVPN
        A-D per ES, or S-PMSI A-D routes to adjust the Reverse Path Forwarding
        checks for (*,G) or (S,G) as discussed in <a href="#sect-5.1" class="auto internal xref">Section 5.1</a>,
        the Bidirectional Forwarding Detection (BFD) protocol <span class="bcp14">MAY</span> be employed
        to monitor the status of the multipoint tunnels used to forward the
        SFG packets from redundant G-sources.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">BFD integration:<a href="#section-5.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-3.1">
            <p id="section-5.3-3.1.1">The BGP-BFD Attribute is advertised alongside the S-PMSI A-D or
            IMET routes, depending on whether
            Inclusive PMSI or Selective PMSI trees are being utilized.<a href="#section-5.3-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.3-3.2">
            <p id="section-5.3-3.2.1">The procedures outlined in <span>[<a href="#RFC9780" class="cite xref">RFC9780</a>]</span> are followed to bootstrap
            multipoint BFD sessions on the downstream PEs.<a href="#section-5.3-3.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="sect-5.4">
<section id="section-5.4">
        <h3 id="name-hot-standby-example-in-an-o">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-hot-standby-example-in-an-o" class="section-name selfRef">Hot Standby Example in an OISM Network</a>
        </h3>
<p id="section-5.4-1">This section describes the Hot Standby model applied in an Optimized Inter-Subnet Multicast
        (OISM) network. Figures <a href="#ure-hs-solution-for-multi-homed-redundant-g-sources-in-oism" class="auto internal xref">7</a>
        and <a href="#ure-hs-solution-for-single-homed-redundant-g-sources-in-oism" class="auto internal xref">8</a>
        illustrate scenarios with multi-homed and single-homed redundant
        G-sources, respectively.<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<div id="sect-5.4.1">
<section id="section-5.4.1">
          <h4 id="name-multi-homed-redundant-g-sou">
<a href="#section-5.4.1" class="section-number selfRef">5.4.1. </a><a href="#name-multi-homed-redundant-g-sou" class="section-name selfRef">Multi-Homed Redundant G-Sources</a>
          </h4>
<p id="section-5.4.1-1">Scenario (<a href="#ure-hs-solution-for-multi-homed-redundant-g-sources-in-oism" class="auto internal xref">Figure 7</a>):<a href="#section-5.4.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.4.1-2.1">
              <p id="section-5.4.1-2.1.1">S1 and S2 are redundant G-sources for the Single Flow Group
              (*,G1), connected to BD1.<a href="#section-5.4.1-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-5.4.1-2.2">
              <p id="section-5.4.1-2.2.1">S1 and S2 are all-active multi-homed to upstream PEs (PE1 and
              PE2).<a href="#section-5.4.1-2.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-5.4.1-2.3">
              <p id="section-5.4.1-2.3.1">Receivers are connected to downstream PEs (PE3 and PE5) in
              BD3 and BD1, respectively.<a href="#section-5.4.1-2.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-5.4.1-2.4">
              <p id="section-5.4.1-2.4.1">S1 and S2 are connected to the multi-homing PEs using a LAG.
              Multicast traffic can traverse either link.<a href="#section-5.4.1-2.4.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-5.4.1-2.5">
              <p id="section-5.4.1-2.5.1">In this model, downstream PEs receive duplicate G-traffic for
              (*,G1) and must use Reverse Path Forwarding checks to avoid
              delivering duplicate packets to receivers.<a href="#section-5.4.1-2.5.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<span id="name-hot-standby-solution-for-mu"></span><div id="ure-hs-solution-for-multi-homed-redundant-g-sources-in-oism">
<figure id="figure-7">
            <div class="alignLeft art-text artwork" id="section-5.4.1-3.1">
<pre>
                     S1(ESI-1)                S2(ESI-2)
                     |                        |
                     | +----------------------+
              (S1,G1)| |               (S2,G1)|
                     +----------------------+ |
            PE1      | |             PE2    | |
            +--------v---+           +--------v---+
            |      +---+ |           |      +---+ |  S-PMSI
 S-PMSI     |  +---|BD1| |           |  +---|BD1| |  (*,G1)
 (*,G1)     |  |VRF+---+ |           |  |VRF+---+ |   SFG
  SFG       |+---+  | |  |           |+---+  | |  |   ESI1,2
 ESI1,2 +---||SBD|--+ |  |-----------||SBD|--+ |  |---+  |
    |   |   |+---+    |  |   EVPN    |+---+    |  |   |  v
    v   |   +---------|--+   OISM    +---------|--+   |
        |             |                        |      |
        |             |   (S1,G1)              |      |
 SMET   |   +---------+------------------+     |      | SMET
 (*,G1) |   |                            |     |      | (*,G1)
    ^   |   | +----------------------------+---+      |   ^
    |   |   | |             (S2,G1)      | |          |   |
    |   |   | |                          | |          |   |
    PE3 |   | |          PE4             | |          | PE5
    +-------v-v--+       +------------+  | | +------------+
    |      +---+ |       |      +---+ |  | | |      +---+ |
    |  +---|SBD| +-------|  +---|SBD| |--|-|-|  +---|SBD| |
    |  |VRF+---+ |       |  |VRF+---+ |  | | |  |VRF+---+ |
    |+---+  |    |       |+---+  |    |  | | |+---+  |    |
    ||BD3|--+    |       ||BD4|--+    |  | +-&gt;|BD1|--+    |
    |+---+       |       |+---+       |  +---&gt;+---+       |
    +------------+       +------------+      +------------+
      |  ^                                    |  ^
      |  | IGMP/MLD                           |  | IGMP/MLD
      R1 | J(*,G1)                            R3 | J(*,G1)
</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-hot-standby-solution-for-mu" class="selfRef">Hot Standby Solution for Multi-Homed Redundant G-Sources in OISM</a>
            </figcaption></figure>
</div>
<p id="section-5.4.1-4">The procedure is as follows:<a href="#section-5.4.1-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.4.1-5">
<li id="section-5.4.1-5.1">
              <p id="section-5.4.1-5.1.1">Configuration of the PEs:<a href="#section-5.4.1-5.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.4.1-5.1.2.1">
                  <p id="section-5.4.1-5.1.2.1.1">PE1 and PE2 are configured to recognize (*,G1) as a
                  Single Flow Group.<a href="#section-5.4.1-5.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-5.4.1-5.1.2.2">
                  <p id="section-5.4.1-5.1.2.2.1">Redundant G-sources use S-ESIs: ESI-1 for S1 and ESI-2
                  for S2.<a href="#section-5.4.1-5.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-5.4.1-5.1.2.3">
                  <p id="section-5.4.1-5.1.2.3.1">The ESes (ES-1 and ES-2) are configured on
                  both PEs. ESI labels are allocated from a 
                  DCB <span>[<a href="#RFC9573" class="cite xref">RFC9573</a>]</span> - ESI-label-1 for ESI-1
                  and ESI-label-2 for ESI-2.<a href="#section-5.4.1-5.1.2.3.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-5.4.1-5.1.2.4">
                  <p id="section-5.4.1-5.1.2.4.1">The downstream PEs (PE3, PE4, and PE5) are configured to
                  support Hot Standby mode and select the G-source with, e.g.,
                  lowest ESI value.<a href="#section-5.4.1-5.1.2.4.1" class="pilcrow">¶</a></p>
</li>
              </ul>
</li>
            <li id="section-5.4.1-5.2">
              <p id="section-5.4.1-5.2.1">Advertisement of the EVPN routes:<a href="#section-5.4.1-5.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.4.1-5.2.2.1">
                  <p id="section-5.4.1-5.2.2.1.1">PE1 and PE2 advertise S-PMSI A-D routes for (*,G1),
                  including:<a href="#section-5.4.1-5.2.2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.4.1-5.2.2.1.2.1">
                      <p id="section-5.4.1-5.2.2.1.2.1.1">Route Targets: BD1-RT and SBD-RT.<a href="#section-5.4.1-5.2.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                    <li class="normal" id="section-5.4.1-5.2.2.1.2.2">
                      <p id="section-5.4.1-5.2.2.1.2.2.1">ESI Label Extended Communities for ESI-label-1 and
                      ESI-label-2.<a href="#section-5.4.1-5.2.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                    <li class="normal" id="section-5.4.1-5.2.2.1.2.3">
                      <p id="section-5.4.1-5.2.2.1.2.3.1">The SFG flag indicating that (*,G1) represents a
                      Single Flow Group.<a href="#section-5.4.1-5.2.2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
                  </ul>
</li>
                <li class="normal" id="section-5.4.1-5.2.2.2">
                  <p id="section-5.4.1-5.2.2.2.1">EVPN ES and A-D per ES/EVI routes are also advertised for
                  ESI-1 and ESI-2. These include SBD-RT for downstream PE
                  import. The EVPN A-D per ES routes contain ESI-label-1 for
                  ESI-1 (on both PEs) and ESI-label-2 for ESI-2 (also on both
                  PEs).<a href="#section-5.4.1-5.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              </ul>
</li>
            <li id="section-5.4.1-5.3">
              <p id="section-5.4.1-5.3.1">Processing of EVPN A-D per ES/EVI routes and Reverse Path
              Forwarding check on downstream PEs:<a href="#section-5.4.1-5.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.4.1-5.3.2.1">
                  <p id="section-5.4.1-5.3.2.1.1">PE1 and PE2 receive each other's ES and A-D per ES/EVI
                  routes. DF Election and programming of the
                  ESI labels for egress split-horizon filtering follow, as
                  specified in <span>[<a href="#RFC7432" class="cite xref">RFC7432</a>]</span> and <span>[<a href="#RFC8584" class="cite xref">RFC8584</a>]</span>.<a href="#section-5.4.1-5.3.2.1.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-5.4.1-5.3.2.2">
                  <p id="section-5.4.1-5.3.2.2.1">PE3/PE4 import the EVPN A-D per ES/EVI routes in the SBD;
                  PE5 imports them in BD1.<a href="#section-5.4.1-5.3.2.2.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-5.4.1-5.3.2.3">
                  <p id="section-5.4.1-5.3.2.3.1">As downstream PEs, PE3 and PE5 use the EVPN A-D per
                  ES/EVI routes to program Reverse Path Forwarding checks.<a href="#section-5.4.1-5.3.2.3.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-5.4.1-5.3.2.4">
                  <p id="section-5.4.1-5.3.2.4.1">The primary S-ESI for (*,G1) is selected based on local
                  policy (e.g., lowest ESI value), and therefore packets with
                  ESI-label-2 are discarded if ESI-label-1 is selected as the
                  primary label.<a href="#section-5.4.1-5.3.2.4.1" class="pilcrow">¶</a></p>
</li>
              </ul>
</li>
            <li id="section-5.4.1-5.4">
              <p id="section-5.4.1-5.4.1">Traffic forwarding and fault detection:<a href="#section-5.4.1-5.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.4.1-5.4.2.1">
                  <p id="section-5.4.1-5.4.2.1.1">PE1 receives (S1,G1) traffic and forwards it with
                  ESI-label-1 in the context of BD1. This traffic passes
                  Reverse Path Forwarding checks on downstream PEs (PE3 and
                  PE5, since PE4 has no local interested receivers) and is
                  delivered to receivers.<a href="#section-5.4.1-5.4.2.1.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-5.4.1-5.4.2.2">
                  <p id="section-5.4.1-5.4.2.2.1">PE2 receives (S2,G1) traffic and forwards it with
                  ESI-label-2. This traffic fails the Reverse Path Forwarding
                  check on PE3 and PE5 and is discarded.<a href="#section-5.4.1-5.4.2.2.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-5.4.1-5.4.2.3">
                  <p id="section-5.4.1-5.4.2.3.1">If the link between S1 and PE1 fails, PE1 withdraws the
                  EVPN ES and A-D routes for ESI-1. S1 forwards the (S1,G1)
                  traffic to PE2 instead. PE2 continues forwarding (S2,G1)
                  traffic using ESI-label-2 and now also forwards (S1,G1) with
                  ESI-label-1. The Reverse Path Forwarding checks do not
                  change in PE3/PE5.<a href="#section-5.4.1-5.4.2.3.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-5.4.1-5.4.2.4">
                  <p id="section-5.4.1-5.4.2.4.1">If all links to S1 fail, PE2 also withdraws the EVPN ES
                  and A-D routes for ESI-1 and downstream PEs update the
                  Reverse Path Forwarding checks to accept ESI-label-2
                  traffic.<a href="#section-5.4.1-5.4.2.4.1" class="pilcrow">¶</a></p>
</li>
              </ul>
</li>
          </ol>
</section>
</div>
<div id="sect-5.4.2">
<section id="section-5.4.2">
          <h4 id="name-single-homed-redundant-g-so">
<a href="#section-5.4.2" class="section-number selfRef">5.4.2. </a><a href="#name-single-homed-redundant-g-so" class="section-name selfRef">Single-Homed Redundant G-Sources</a>
          </h4>
<p id="section-5.4.2-1">Scenario (<a href="#ure-hs-solution-for-single-homed-redundant-g-sources-in-oism" class="auto internal xref">Figure 8</a>):<a href="#section-5.4.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.4.2-2.1">
              <p id="section-5.4.2-2.1.1">S1 is single-homed to PE1 using ESI-1, and S2 is single-homed
              to PE2 using ESI-2.<a href="#section-5.4.2-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-5.4.2-2.2">
              <p id="section-5.4.2-2.2.1">The scenario is a subset of the multi-homed case. Only one PE
              advertises EVPN A-D per ES/EVI routes for each S-ESI.<a href="#section-5.4.2-2.2.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<span id="name-hs-solution-for-single-home"></span><div id="ure-hs-solution-for-single-homed-redundant-g-sources-in-oism">
<figure id="figure-8">
            <div class="alignLeft art-text artwork" id="section-5.4.2-3.1">
<pre>
                     S1(ESI-1)                S2(ESI-2)
                     |                        |
              (S1,G1)|                 (S2,G1)|
                     |                        |
            PE1      |               PE2      |
            +--------v---+           +--------v---+
            |      +---+ |           |      +---+ |  S-PMSI
 S-PMSI     |  +---|BD1| |           |  +---|BD2| |  (*,G1)
 (*,G1)     |  |VRF+---+ |           |  |VRF+---+ |   SFG
  SFG       |+---+  | |  |           |+---+  | |  |   ESI2
  ESI1  +---||SBD|--+ |  |-----------||SBD|--+ |  |---+  |
    |   |   |+---+    |  |   EVPN    |+---+    |  |   |  v
    v   |   +---------|--+   OISM    +---------|--+   |
        |             |                        |      |
        |             |   (S1,G1)              |      |
 SMET   |   +---------+------------------+     |      | SMET
 (*,G1) |   |                            |     |      | (*,G1)
    ^   |   | +--------------------------------+----+ |   ^
    |   |   | |             (S2,G1)      |          | |   |
    |   |   | |                          |          | |   |
    PE3 |   | |          PE4             |          | | PE5
    +-------v-v--+       +------------+  |   +------v-----+
    |      +---+ |       |      +---+ |  |   |      +---+ |
    |  +---|SBD| |-------|  +---|SBD| |--|---|  +---|SBD| |
    |  |VRF+---+ |       |  |VRF+---+ |  |   |  |VRF+---+ |
    |+---+  |    |       |+---+  |    |  |   |+---+  |    |
    ||BD3|--+    |       ||BD4|--+    |  +---&gt;|BD1|--+    |
    |+---+       |       |+---+       |      |+---+       |
    +------------+       +------------+      +------------+
      |  ^                                    |  ^
      |  | IGMP/MLD                           |  | IGMP/MLD
      R1 | J(*,G1)                            R3 | J(*,G1)
</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-hs-solution-for-single-home" class="selfRef">HS Solution for Single-Homed Redundant G-Sources in OISM</a>
            </figcaption></figure>
</div>
<p id="section-5.4.2-4">The procedures follow the same logic as described in the
          multi-homed scenario, with the distinction that each ESI is specific
          to a single PE.<a href="#section-5.4.2-4" class="pilcrow">¶</a></p>
<p id="section-5.4.2-5">Figures <a href="#ure-hs-solution-for-multi-homed-redundant-g-sources-in-oism" class="auto internal xref">7</a>
          and <a href="#ure-hs-solution-for-single-homed-redundant-g-sources-in-oism" class="auto internal xref">8</a>
          demonstrate the application of the Hot Standby solution, ensuring
          seamless traffic forwarding while avoiding duplication in the
          presence of redundant G-sources.<a href="#section-5.4.2-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-5.5">
<section id="section-5.5">
        <h3 id="name-hot-standby-example-in-a-si">
<a href="#section-5.5" class="section-number selfRef">5.5. </a><a href="#name-hot-standby-example-in-a-si" class="section-name selfRef">Hot Standby Example in a Single-BD Tenant Network</a>
        </h3>
<p id="section-5.5-1">The Hot Standby procedures described in <a href="#sect-5.4" class="auto internal xref">Section 5.4</a>
        apply equally to scenarios where the tenant network comprises a single
        Broadcast Domain (e.g., BD1), irrespective of whether the redundant
        G-sources are multi-homed or single-homed. In such cases:<a href="#section-5.5-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.5-2.1">
            <p id="section-5.5-2.1.1">The advertised routes do not include the SBD-RT.<a href="#section-5.5-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.5-2.2">
            <p id="section-5.5-2.2.1">All procedures are confined to the single BD1.<a href="#section-5.5-2.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-5.5-3">The absence of the SBD simplifies the configuration and
        limits the scope of the Hot Standby solution to BD1, while maintaining
        the integrity of the procedures for managing redundant G-sources.<a href="#section-5.5-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-6">
<section id="section-6">
      <h2 id="name-security-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-6-1">The same Security Considerations described in <span>[<a href="#RFC9625" class="cite xref">RFC9625</a>]</span> are valid for this document.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">From a security perspective, out of the two methods described in this
      document, the Warm Standby method is considered lighter in terms of
      control plane, and therefore its impact is low on the processing
      capabilities of the PEs. The Hot Standby method adds more burden on the
      control plane of all the PEs of the tenant with sources and
      receivers.<a href="#section-6-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-7">
<section id="section-7">
      <h2 id="name-iana-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-7-1">IANA has allocated bit 4 in the "Multicast Flags Extended
      Community" registry that was introduced by <span>[<a href="#RFC9251" class="cite xref">RFC9251</a>]</span>. This
      bit indicates that a given (*,G) or (S,G) in an S-PMSI A-D route is
      associated with an SFG. This bit is called "Single Flow Group" bit, and
      it is defined as follows:<a href="#section-7-1" class="pilcrow">¶</a></p>
<div id="sfg">
<table class="center" id="table-1">
        <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Bit</th>
            <th class="text-left" rowspan="1" colspan="1">Name</th>
            <th class="text-left" rowspan="1" colspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">4</td>
            <td class="text-left" rowspan="1" colspan="1">Single Flow Group</td>
            <td class="text-left" rowspan="1" colspan="1">This Document</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="section-7-3">IANA has allocated bit 5 in the "EVPN ESI Label Extended Community Flags" registry that was introduced by <span>[<a href="#RFC9746" class="cite xref">RFC9746</a>]</span>. This bit is the ESI-DCB
      flag and indicates that the ESI label contained in the ESI Label
      Extended Community is a DCB label. This bit is
      defined as follows:<a href="#section-7-3" class="pilcrow">¶</a></p>
<table class="center" id="table-2">
        <caption><a href="#table-2" class="selfRef">Table 2</a></caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Bit</th>
            <th class="text-left" rowspan="1" colspan="1">Name</th>
            <th class="text-left" rowspan="1" colspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">5</td>
            <td class="text-left" rowspan="1" colspan="1">ESI-DCB</td>
            <td class="text-left" rowspan="1" colspan="1">This Document</td>
          </tr>
        </tbody>
      </table>
</section>
</div>
<section id="section-8">
      <h2 id="name-references">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-8.1">
        <h3 id="name-normative-references">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6513">[RFC6513]</dt>
        <dd>
<span class="refAuthor">Rosen, E., Ed.</span> and <span class="refAuthor">R. Aggarwal, Ed.</span>, <span class="refTitle">"Multicast in MPLS/BGP IP VPNs"</span>, <span class="seriesInfo">RFC 6513</span>, <span class="seriesInfo">DOI 10.17487/RFC6513</span>, <time datetime="2012-02" class="refDate">February 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6513">https://www.rfc-editor.org/info/rfc6513</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6514">[RFC6514]</dt>
        <dd>
<span class="refAuthor">Aggarwal, R.</span>, <span class="refAuthor">Rosen, E.</span>, <span class="refAuthor">Morin, T.</span>, and <span class="refAuthor">Y. Rekhter</span>, <span class="refTitle">"BGP Encodings and Procedures for Multicast in MPLS/BGP IP VPNs"</span>, <span class="seriesInfo">RFC 6514</span>, <span class="seriesInfo">DOI 10.17487/RFC6514</span>, <time datetime="2012-02" class="refDate">February 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6514">https://www.rfc-editor.org/info/rfc6514</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7432">[RFC7432]</dt>
        <dd>
<span class="refAuthor">Sajassi, A., Ed.</span>, <span class="refAuthor">Aggarwal, R.</span>, <span class="refAuthor">Bitar, N.</span>, <span class="refAuthor">Isaac, A.</span>, <span class="refAuthor">Uttaro, J.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">W. Henderickx</span>, <span class="refTitle">"BGP MPLS-Based Ethernet VPN"</span>, <span class="seriesInfo">RFC 7432</span>, <span class="seriesInfo">DOI 10.17487/RFC7432</span>, <time datetime="2015-02" class="refDate">February 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7432">https://www.rfc-editor.org/info/rfc7432</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8584">[RFC8584]</dt>
        <dd>
<span class="refAuthor">Rabadan, J., Ed.</span>, <span class="refAuthor">Mohanty, S., Ed.</span>, <span class="refAuthor">Sajassi, A.</span>, <span class="refAuthor">Drake, J.</span>, <span class="refAuthor">Nagaraj, K.</span>, and <span class="refAuthor">S. Sathappan</span>, <span class="refTitle">"Framework for Ethernet VPN Designated Forwarder Election Extensibility"</span>, <span class="seriesInfo">RFC 8584</span>, <span class="seriesInfo">DOI 10.17487/RFC8584</span>, <time datetime="2019-04" class="refDate">April 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8584">https://www.rfc-editor.org/info/rfc8584</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9251">[RFC9251]</dt>
        <dd>
<span class="refAuthor">Sajassi, A.</span>, <span class="refAuthor">Thoria, S.</span>, <span class="refAuthor">Mishra, M.</span>, <span class="refAuthor">Patel, K.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">W. Lin</span>, <span class="refTitle">"Internet Group Management Protocol (IGMP) and Multicast Listener Discovery (MLD) Proxies for Ethernet VPN (EVPN)"</span>, <span class="seriesInfo">RFC 9251</span>, <span class="seriesInfo">DOI 10.17487/RFC9251</span>, <time datetime="2022-06" class="refDate">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9251">https://www.rfc-editor.org/info/rfc9251</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9573">[RFC9573]</dt>
        <dd>
<span class="refAuthor">Zhang, Z.</span>, <span class="refAuthor">Rosen, E.</span>, <span class="refAuthor">Lin, W.</span>, <span class="refAuthor">Li, Z.</span>, and <span class="refAuthor">IJ. Wijnands</span>, <span class="refTitle">"MVPN/EVPN Tunnel Aggregation with Common Labels"</span>, <span class="seriesInfo">RFC 9573</span>, <span class="seriesInfo">DOI 10.17487/RFC9573</span>, <time datetime="2024-05" class="refDate">May 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9573">https://www.rfc-editor.org/info/rfc9573</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9625">[RFC9625]</dt>
        <dd>
<span class="refAuthor">Lin, W.</span>, <span class="refAuthor">Zhang, Z.</span>, <span class="refAuthor">Drake, J.</span>, <span class="refAuthor">Rosen, E., Ed.</span>, <span class="refAuthor">Rabadan, J.</span>, and <span class="refAuthor">A. Sajassi</span>, <span class="refTitle">"EVPN Optimized Inter-Subnet Multicast (OISM) Forwarding"</span>, <span class="seriesInfo">RFC 9625</span>, <span class="seriesInfo">DOI 10.17487/RFC9625</span>, <time datetime="2024-08" class="refDate">August 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9625">https://www.rfc-editor.org/info/rfc9625</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9746">[RFC9746]</dt>
      <dd>
<span class="refAuthor">Rabadan, J.</span>, <span class="refAuthor">Nagaraj, K.</span>, <span class="refAuthor">Lin, W.</span>, and <span class="refAuthor">A. Sajassi</span>, <span class="refTitle">"BGP EVPN Multihoming Extensions for Split-Horizon Filtering"</span>, <span class="seriesInfo">RFC 9746</span>, <span class="seriesInfo">DOI 10.17487/RFC9746</span>, <time datetime="2025-03" class="refDate">March 2025</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9746">https://www.rfc-editor.org/info/rfc9746</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-8.2">
        <h3 id="name-informative-references">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC4364">[RFC4364]</dt>
        <dd>
<span class="refAuthor">Rosen, E.</span> and <span class="refAuthor">Y. Rekhter</span>, <span class="refTitle">"BGP/MPLS IP Virtual Private Networks (VPNs)"</span>, <span class="seriesInfo">RFC 4364</span>, <span class="seriesInfo">DOI 10.17487/RFC4364</span>, <time datetime="2006-02" class="refDate">February 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4364">https://www.rfc-editor.org/info/rfc4364</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7761">[RFC7761]</dt>
        <dd>
<span class="refAuthor">Fenner, B.</span>, <span class="refAuthor">Handley, M.</span>, <span class="refAuthor">Holbrook, H.</span>, <span class="refAuthor">Kouvelas, I.</span>, <span class="refAuthor">Parekh, R.</span>, <span class="refAuthor">Zhang, Z.</span>, and <span class="refAuthor">L. Zheng</span>, <span class="refTitle">"Protocol Independent Multicast - Sparse Mode (PIM-SM): Protocol Specification (Revised)"</span>, <span class="seriesInfo">STD 83</span>, <span class="seriesInfo">RFC 7761</span>, <span class="seriesInfo">DOI 10.17487/RFC7761</span>, <time datetime="2016-03" class="refDate">March 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7761">https://www.rfc-editor.org/info/rfc7761</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8296">[RFC8296]</dt>
        <dd>
<span class="refAuthor">Wijnands, IJ., Ed.</span>, <span class="refAuthor">Rosen, E., Ed.</span>, <span class="refAuthor">Dolganow, A.</span>, <span class="refAuthor">Tantsura, J.</span>, <span class="refAuthor">Aldrin, S.</span>, and <span class="refAuthor">I. Meilik</span>, <span class="refTitle">"Encapsulation for Bit Index Explicit Replication (BIER) in MPLS and Non-MPLS Networks"</span>, <span class="seriesInfo">RFC 8296</span>, <span class="seriesInfo">DOI 10.17487/RFC8296</span>, <time datetime="2018-01" class="refDate">January 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8296">https://www.rfc-editor.org/info/rfc8296</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9135">[RFC9135]</dt>
        <dd>
<span class="refAuthor">Sajassi, A.</span>, <span class="refAuthor">Salam, S.</span>, <span class="refAuthor">Thoria, S.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">J. Rabadan</span>, <span class="refTitle">"Integrated Routing and Bridging in Ethernet VPN (EVPN)"</span>, <span class="seriesInfo">RFC 9135</span>, <span class="seriesInfo">DOI 10.17487/RFC9135</span>, <time datetime="2021-10" class="refDate">October 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9135">https://www.rfc-editor.org/info/rfc9135</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9136">[RFC9136]</dt>
        <dd>
<span class="refAuthor">Rabadan, J., Ed.</span>, <span class="refAuthor">Henderickx, W.</span>, <span class="refAuthor">Drake, J.</span>, <span class="refAuthor">Lin, W.</span>, and <span class="refAuthor">A. Sajassi</span>, <span class="refTitle">"IP Prefix Advertisement in Ethernet VPN (EVPN)"</span>, <span class="seriesInfo">RFC 9136</span>, <span class="seriesInfo">DOI 10.17487/RFC9136</span>, <time datetime="2021-10" class="refDate">October 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9136">https://www.rfc-editor.org/info/rfc9136</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9572">[RFC9572]</dt>
        <dd>
<span class="refAuthor">Zhang, Z.</span>, <span class="refAuthor">Lin, W.</span>, <span class="refAuthor">Rabadan, J.</span>, <span class="refAuthor">Patel, K.</span>, and <span class="refAuthor">A. Sajassi</span>, <span class="refTitle">"Updates to EVPN Broadcast, Unknown Unicast, or Multicast (BUM) Procedures"</span>, <span class="seriesInfo">RFC 9572</span>, <span class="seriesInfo">DOI 10.17487/RFC9572</span>, <time datetime="2024-05" class="refDate">May 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9572">https://www.rfc-editor.org/info/rfc9572</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9574">[RFC9574]</dt>
        <dd>
<span class="refAuthor">Rabadan, J., Ed.</span>, <span class="refAuthor">Sathappan, S.</span>, <span class="refAuthor">Lin, W.</span>, <span class="refAuthor">Katiyar, M.</span>, and <span class="refAuthor">A. Sajassi</span>, <span class="refTitle">"Optimized Ingress Replication Solution for Ethernet VPNs (EVPNs)"</span>, <span class="seriesInfo">RFC 9574</span>, <span class="seriesInfo">DOI 10.17487/RFC9574</span>, <time datetime="2024-05" class="refDate">May 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9574">https://www.rfc-editor.org/info/rfc9574</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9776">[RFC9776]</dt>
        <dd>
<span class="refAuthor">Haberman, B., Ed.</span>, <span class="refTitle">"Internet Group Management Protocol, Version 3"</span>, <span class="seriesInfo">STD 100</span>, <span class="seriesInfo">RFC 9776</span>, <span class="seriesInfo">DOI 10.17487/RFC9776</span>, <time datetime="2025-03" class="refDate">March 2025</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9776">https://www.rfc-editor.org/info/rfc9776</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9777">[RFC9777]</dt>
        <dd>
<span class="refAuthor">Haberman, B., Ed.</span>, <span class="refTitle">"Multicast Listener Discovery Version 2 (MLDv2) for IPv6"</span>, <span class="seriesInfo">STD 101</span>, <span class="seriesInfo">RFC 9777</span>, <span class="seriesInfo">DOI 10.17487/RFC9777</span>, <time datetime="2025-03" class="refDate">March 2025</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9777">https://www.rfc-editor.org/info/rfc9777</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9780">[RFC9780]</dt>
        <dd>
<span class="refAuthor">Mirsky, G.</span>, <span class="refAuthor">Mishra, G.</span>, and <span class="refAuthor">D. Eastlake 3rd</span>, <span class="refTitle">"Bidirectional Forwarding Detection (BFD) for Multipoint Networks over Point-to-Multipoint MPLS Label Switched Paths (LSPs)"</span>, <span class="seriesInfo">RFC 9780</span>, <span class="seriesInfo">DOI 10.17487/RFC9780</span>, <time datetime="2025-05" class="refDate">May 2025</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9780">https://www.rfc-editor.org/info/rfc9780</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9785">[RFC9785]</dt>
      <dd>
<span class="refAuthor">Rabadan, J., Ed.</span>, <span class="refAuthor">Sathappan, S.</span>, <span class="refAuthor">Lin, W.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">A. Sajassi</span>, <span class="refTitle">"Preference-Based EVPN Designated Forwarder (DF) Election"</span>, <span class="seriesInfo">RFC 9785</span>, <span class="seriesInfo">DOI 10.17487/RFC9785</span>, <time datetime="2025-06" class="refDate">June 2025</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9785">https://www.rfc-editor.org/info/rfc9785</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<section id="appendix-A">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-A-1">The authors would like to thank <span class="contact-name">Mankamana       Mishra</span>, <span class="contact-name">Ali Sajassi</span>, <span class="contact-name">Greg       Mirsky</span>, and <span class="contact-name">Sasha Vainshtein</span> for their review
      and valuable comments.  Special thanks to <span class="contact-name">Gunter Van       de Velde</span> for his excellent review, which significantly enhanced the
      document's readability.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
</section>
<div id="sect-9">
<section id="appendix-B">
      <h2 id="name-contributors">
<a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<p id="appendix-B-1">In addition to the authors listed on the front page, the following
      person has significantly contributed to this document:<a href="#appendix-B-1" class="pilcrow">¶</a></p>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Eric C. Rosen</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:erosen52@gmail.com" class="email">erosen52@gmail.com</a>
</div>
</address>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jorge Rabadan (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div dir="auto" class="left"><span class="street-address">520 Almanor Avenue</span></div>
<div dir="auto" class="left">
<span class="locality">Sunnyvale</span>, <span class="region">CA</span> <span class="postal-code">94085</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jorge.rabadan@nokia.com" class="email">jorge.rabadan@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jayant Kotalwar</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div dir="auto" class="left"><span class="street-address">520 Almanor Avenue</span></div>
<div dir="auto" class="left">
<span class="locality">Sunnyvale</span>, <span class="region">CA</span> <span class="postal-code">94085</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jayant.kotalwar@nokia.com" class="email">jayant.kotalwar@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Senthil Sathappan</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div dir="auto" class="left"><span class="street-address">520 Almanor Avenue</span></div>
<div dir="auto" class="left">
<span class="locality">Sunnyvale</span>, <span class="region">CA</span> <span class="postal-code">94085</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:senthil.sathappan@nokia.com" class="email">senthil.sathappan@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Zhaohui Zhang</span></div>
<div dir="auto" class="left"><span class="org">Juniper Networks</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:zzhang@juniper.net" class="email">zzhang@juniper.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Wen Lin</span></div>
<div dir="auto" class="left"><span class="org">Juniper Networks</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:wlin@juniper.net" class="email">wlin@juniper.net</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
